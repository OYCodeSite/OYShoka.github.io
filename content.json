{"meta":{"title":"OY'Blog","subtitle":"","description":"","author":"OY","url":"http://blog.oy6090.top","root":"/"},"pages":[{"title":"å…³äºæˆ‘","date":"2021-01-21T18:26:29.000Z","updated":"2021-01-21T18:29:56.956Z","comments":true,"path":"about/index.html","permalink":"http://blog.oy6090.top/about/index.html","excerpt":"","text":"ğŸ†å…³äºæˆ‘ æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤ ğŸ‘¨â€ğŸ“ä¸ªäººä¿¡æ¯ æ ‡å‡†çš„ä¸€å00åï¼Œç›®å‰è¿˜çªåœ¨æ ¡å›­é‡ŒğŸ«ğŸ¤ªğŸ¥± æ¯”èµ·æœ¬åï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢åˆ«äººå«æˆ‘ æ¬§é˜³ï¼ˆOYï¼‰ å¤§äºŒ Studentï¼Œåæ ‡ ğŸŒ æ¹–å—Â·å¸¸å¾·ï¼Œæ°¸è¿œçƒ­çˆ±ï¼Œæ°¸è¿œå¹´è½»ç›¸çŸ¥ ğŸ¤ å¯¹ä¸€åˆ‡æ–°é²œçš„äº‹ç‰©å……æ»¡å¥½å¥‡ ğŸ§ ç›®æ ‡æ˜¯æˆä¸ºä¸€åå‡ºè‰²çš„åç«¯å·¥ç¨‹å¸ˆ ğŸ’ª å¯¹è‡ªå·±çš„è¦æ±‚æ˜¯æ¯å¤©éƒ½è¦æ¯”æ˜¨å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ ğŸ‘Š â˜• æˆ‘çš„Githubåœ°å€ï¼šhttps://github.com/OY6090 ğŸ¼ CSDNåœ°å€ï¼ˆç›®å‰æ­£åœ¨æ›´æ–°ä¸­ã€‚ã€‚ã€‚ï¼‰ ğŸ”‘ æŠ€èƒ½å­¦ä¹  Java JavaWeb Springã€SpringMVCã€Mybatis SpringBoot Vue å¾…æŒæ¡æŠ€èƒ½ Spring Cloud(æ­£åœ¨å­¦ä¹ ä¸­) ... ğŸ”·æœ€å &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ„Ÿè°¢ä½ èŠ±æ—¶é—´é˜…è¯»æˆ‘çš„åšå®¢ï¼Œæ¬¢è¿ä¸æˆ‘æ²Ÿé€šäº¤æµã€‚ç¥å¥½ï¼&nbsp;"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2021-01-21T16:31:51.323Z","updated":"2021-01-21T16:31:51.323Z","comments":true,"path":"categories/index.html","permalink":"http://blog.oy6090.top/categories/index.html","excerpt":"","text":""},{"title":"ç•™è¨€æ¿","date":"2021-01-21T15:47:30.000Z","updated":"2021-01-21T18:21:52.731Z","comments":true,"path":"guestbook/index.html","permalink":"http://blog.oy6090.top/guestbook/index.html","excerpt":"","text":""},{"title":"å“”å“”","date":"2021-01-22T04:12:15.483Z","updated":"2021-01-22T04:12:15.483Z","comments":true,"path":"bb/index.html","permalink":"http://blog.oy6090.top/bb/index.html","excerpt":"","text":"ğŸ‘‰ğŸ¼æ­¤è¯´è¯´é€šè¿‡ğŸ“±æ‰‹æœºå¾®ä¿¡å‘å‡ºï¼Œä¸»è¦è®°å½•OYç¢ç‰‡åŒ–æ€è€ƒå’ŒåŠ¨æ€ã€‚ğŸ“‘"},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2021-01-22T03:25:56.492Z","updated":"2021-01-22T03:25:56.492Z","comments":true,"path":"links/index.html","permalink":"http://blog.oy6090.top/links/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2021-01-21T16:32:27.410Z","updated":"2021-01-21T16:32:27.410Z","comments":true,"path":"tags/index.html","permalink":"http://blog.oy6090.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Vue æ ¸å¿ƒåŸºç¡€ï¼ˆ2.Xï¼‰","slug":"Vue æ ¸å¿ƒ(2.X)","date":"2020-12-27T16:00:00.000Z","updated":"2021-01-22T03:46:37.788Z","comments":true,"path":"posts/41875.html","link":"","permalink":"http://blog.oy6090.top/posts/41875.html","excerpt":"","text":"ä¸€ã€Vue çš„åŸºæœ¬è®¤è¯† å®˜ç½‘ï¼š è‹±æ–‡å®˜ç½‘: https://vuejs.org/ ä¸­æ–‡å®˜ç½‘: https://cn.vuejs.org/ 1ã€Vue çš„ç‰¹ç‚¹ éµå¾ªMVVM æ¨¡å¼ ç¼–ç ç®€æ´ï¼Œä½“ç§¯å°ï¼Œè¿è¡Œæ•ˆç‡é«˜ï¼Œé€‚åˆç§»åŠ¨/ PC ç«¯å¼€å‘ å®ƒæœ¬èº«åªå…³æ³¨ UIï¼Œ å¯ä»¥è½»æ¾çš„å¼•å…¥ vue æ’ä»¶æˆ–å…¶ä»–çš„ç¬¬ä¸‰åº“å¼€å‘é¡¹ç›® äºŒã€Vue çš„åŸºæœ¬ä½¿ç”¨ æ°¸è¿œçš„ HelloWord ç¼–ç ï¼š 1234567891011121314&lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; v-model=&quot;username&quot; /&gt; &lt;p&gt;Hello, &#123;&#123;username&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt; new Vue(&#123; // é…ç½®å¯¹è±¡ï¼š å±æ€§åæ˜¯ä¸€äº›ç‰¹å®šçš„åç§° el: &quot;#app&quot;, // å€¼æ˜¯é€‰æ‹©å™¨ element ç”¨æ¥æŸ¥æ‰¾è·Ÿå…ƒç´  data: &#123; username: &quot;OY_test&quot;, // åŒ…å«å¤šä¸ªå¯å˜æ•°æ®çš„å¯¹è±¡ï¼Œç›¸å½“äºstate,ä¸ºæ¨¡æ¿é¡µé¢æä¾›æ•°æ® &#125;, &#125;);&lt;/script&gt; æ•ˆæœç¤ºä¾‹ï¼š Vue çš„ MVVM ä¸‰ã€æ¨¡æ¿è¯­æ³• æ¨¡æ¿çš„ç†è§£ åŠ¨æ€çš„ html é¡µé¢ åŒ…å«äº†ä¸€äº› JS è¯­æ³•ä»£ç  åŒå¤§æ‹¬å·è¡¨è¾¾å¼ ï¼ˆ&#123;&#123;&#125;&#125;`ï¼‰ - æŒ‡ä»¤ï¼ˆä»¥ v-å¼€å¤´çš„è‡ªå®šä¹‰æ ‡ç­¾å±æ€§ï¼‰ ### 1ã€åŒå¤§æ‹¬å·è¡¨è¾¾å¼ - **è¯­æ³•ï¼š** `&#123;&#123;exp&#125;&#125; åŠŸèƒ½ï¼š å‘é¡µé¢è¾“å‡ºæ•°æ® å¯ä»¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³• 2ã€æŒ‡ä»¤ä¸€ï¼š å¼ºåˆ¶æ•°æ®ç»‘å®š è¯­æ³• æŒ‡å®šå˜åŒ–çš„å±æ€§å€¼ å®Œæ•´å†™æ³•ï¼šv-bin:xxx = â€˜yyyâ€™ (yyy ä¼šä½œä¸ºè¡¨è¾¾å¼è§£ææ‰§è¡Œ) ç®€ä»‹å†™æ³•ï¼š :xxx = â€˜yyyâ€™ 3ã€æŒ‡ä»¤äºŒï¼šç»‘å®šäº‹ä»¶ç›‘å¬ åŠŸèƒ½ï¼šç»‘å®šæŒ‡å®šäº‹ä»¶åçš„å›è°ƒå‡½æ•° å®Œæ•´å†™æ³•ï¼š 1v-on:keyup&#x3D;&#39;xxx&#39; v-on:keyup&#x3D;&#39;xxx&#39;(å‚æ•°) v-on:keyup.enter&#x3D;&#39;xxx&#39; ç®€ä»‹å†™æ³•ï¼š 1@keyup&#x3D;&#39;xxx&#39; @keyup.enter&#x3D;&#39;xxx&#39; 4ã€ç¼–ç ç¤ºä¾‹12345678910111213141516171819202122232425262728293031&lt;div id&#x3D;&quot;app&quot;&gt; &lt;h2&gt;1. åŒå¤§æ‹¬å·è¡¨è¾¾å¼&lt;&#x2F;h2&gt; &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;msg.toUpperCase()&#125;&#125;&lt;&#x2F;p&gt; &lt;h2&gt;2. æŒ‡ä»¤ä¸€: å¼ºåˆ¶æ•°æ®ç»‘å®š&lt;&#x2F;h2&gt; &lt;a href&#x3D;&quot;url&quot;&gt;è®¿é—®æŒ‡å®šç«™ç‚¹&lt;&#x2F;a&gt;&lt;br&#x2F;&gt;&lt;!--ä¸èƒ½ä½¿ç”¨--&gt; &lt;a v-bind:href&#x3D;&quot;url&quot;&gt;è®¿é—®æŒ‡å®šç«™ç‚¹2&lt;&#x2F;a&gt;&lt;br&#x2F;&gt; &lt;a :href&#x3D;&quot;url&quot;&gt;è®¿é—®æŒ‡å®šç«™ç‚¹3&lt;&#x2F;a&gt; &lt;h2&gt;3. æŒ‡ä»¤äºŒ: ç»‘å®šäº‹ä»¶ç›‘å¬&lt;&#x2F;h2&gt; &lt;button v-on:click&#x3D;&quot;handleClick&quot;&gt;ç‚¹æˆ‘&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;handleClick&quot;&gt;ç‚¹æˆ‘2&lt;&#x2F;button&gt;&lt;&#x2F;div&gt;&lt;script src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#app&quot;, data: &#123; msg: &quot;NBA I Like This Game!&quot;, url: &quot;http:&#x2F;&#x2F;www.baidu.com&quot;, &#125;, methods: &#123; handleClick() &#123; alert(&quot;å¤„ç†ç‚¹å‡»&quot;); &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š å››ã€è®¡ç®—å±æ€§å’Œç›‘è§†1ã€è®¡ç®—å±æ€§ åœ¨ computed å±æ€§å¯¹è±¡ä¸­å®šä¹‰è®¡ç®—å±æ€§çš„æ–¹æ³• åœ¨é¡µé¢ä¸­ä½¿ç”¨ &#123;&#123;æ–¹æ³•å&#125;&#125; æ¥æ˜¾ç¤ºè®¡ç®—çš„ç»“æœ 2ã€ç›‘è§†å±æ€§ é€šè¿‡ vm å¯¹è±¡çš„ $watch() æˆ– watch é…ç½®æ¥ç›‘è§†æŒ‡å®šçš„å±æ€§ å½“å±æ€§å˜åŒ–æ—¶ï¼Œå›è°ƒå‡½æ•°è‡ªåŠ¨è°ƒç”¨ï¼Œåœ¨å‡½æ•°å†…éƒ¨è¿›è¡Œè®¡ç®— 3ã€ç¼–ç ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;div id&#x3D;&quot;demo&quot;&gt; å§“: &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;First Name&quot; v-model&#x3D;&quot;firstName&quot;&gt;&lt;br&gt; å: &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;Last Name&quot; v-model&#x3D;&quot;lastName&quot;&gt;&lt;br&gt; å§“å1(å•å‘): &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;Full Name1&quot; v-model&#x3D;&quot;fullName1&quot;&gt;&lt;br&gt; å§“å2(å•å‘): &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;Full Name2&quot; v-model&#x3D;&quot;fullName2&quot;&gt;&lt;br&gt; å§“å3(åŒå‘): &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;Full Name3&quot; v-model&#x3D;&quot;fullName3&quot;&gt;&lt;br&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;var vm &#x3D; new Vue(&#123; el: &quot;#demo&quot;, data: &#123; firstName: &quot;Kobe&quot;, lastName: &quot;bryant&quot;, fullName2: &quot;Kobe bryant&quot;, &#125;, computed: &#123; fullName1: function () &#123; return this.firstName + &quot; &quot; + this.lastName; &#125;, fullName3: &#123; get: function () &#123; return this.firstName + &quot; &quot; + this.lastName; &#125;, set: function (value) &#123; var names &#x3D; value.split(&quot; &quot;); this.firstName &#x3D; names[0]; this.lastName &#x3D; names[1]; &#125;, &#125;, &#125;, watch: &#123; lastName: function (newVal, oldVal) &#123; this.fullName2 &#x3D; this.firstName + &quot; &quot; + newVal; &#125;, &#125;,&#125;);vm.$watch(&quot;fistName&quot;, function (val) &#123; this.fullName2 &#x3D; val + &quot; &quot; + this.lastName;&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š äº”ã€Class ä¸ Style ç»‘å®š1ã€class ç»‘å®š :class = â€˜xxxâ€™ è¡¨è¾¾å¼æ˜¯å­—ç¬¦ä¸²ï¼š â€˜classAâ€™ è¡¨è¾¾å¼æ˜¯å¯¹è±¡ï¼š{classA: isA, classB: isB} è¡¨è¾¾å¼æ˜¯æ•°ç»„ï¼š[â€˜classAâ€™,â€™classBâ€™] 2ã€style ç»‘å®š :style=â€{color: activeColor, fontSize: fontSize + â€˜pxâ€™}â€ å…¶ä¸­ activeColor/fontSize æ˜¯ data å±æ€§ 3ã€ç¼–ç ç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435&lt;div id&#x3D;&quot;demo&quot;&gt; &lt;h2&gt;1. classç»‘å®š: :class&#x3D;&#39;xxx&#39;&lt;&#x2F;h2&gt; &lt;p class&#x3D;&quot;classC&quot; :class&#x3D;&quot;Myclass&quot;&gt;xxxx&lt;&#x2F;p&gt; &lt;p :class&#x3D;&quot;&#123;classA: hasA, classB: hasB&#125;&quot;&gt;yyyy&lt;&#x2F;p&gt; &lt;p :class&#x3D;&quot;[&#39;classA&#39;,&#39;classB&#39;]&quot;&gt;zzz&lt;&#x2F;p&gt; &lt;h2&gt;2. styleç»‘å®š&lt;&#x2F;h2&gt; &lt;p :style&#x3D;&quot;&#123;color: Mycolor, fontSize: mySize + &#39;px&#39;&#125;&quot;&gt;xxxxxxx&lt;&#x2F;p&gt; &lt;button @click&#x3D;&quot;update&quot;&gt;æ›´æ–°&lt;&#x2F;button&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#demo&quot;, data: &#123; Myclass: &quot;classA&quot;, hasA: true, hasB: false, Mycolor: &quot;red&quot;, mySize: 20, &#125;, methods: &#123; update() &#123; console.log(this); (this.Myclass &#x3D; &quot;classB&quot;), (this.hasA &#x3D; !this.hasA), (this.hasB &#x3D; !this.hasB), (this.Mycolor &#x3D; &quot;#ff0000&quot;), (this.mySize &#x3D; 30); &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š å…­ã€æ¡ä»¶æ¸²æŸ“1ã€æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ v-if ä¸ v-else v-show 2ã€æ¯”è¾ƒ v-if ä¸ v-show å¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ v-show è¾ƒå¥½ å½“æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œv-if çš„æ‰€æœ‰å­èŠ‚ç‚¹ä¸ä¼šè§£æ(é¡¹ç›®ä¸­ä½¿ç”¨) 3ã€ç¼–ç 1234567891011121314151617181920212223242526&lt;div id&#x3D;&quot;demo&quot;&gt; &lt;p v-if&#x3D;&quot;ok&quot;&gt;è¡¨ç™½æˆåŠŸ&lt;&#x2F;p&gt; &lt;p v-else&gt;è¡¨ç™½å¤±è´¥&lt;&#x2F;p&gt; &lt;p v-show&#x3D;&quot;ok&quot;&gt;æ±‚å©šæˆåŠŸ&lt;&#x2F;p&gt; &lt;p v-show&#x3D;&quot;!ok&quot;&gt;æ±‚å©šå¤±è´¥&lt;&#x2F;p&gt; &lt;button @Click&#x3D;&quot;toggle&quot;&gt;åˆ‡æ¢&lt;&#x2F;button&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#demo&quot;, data() &#123; return &#123; ok: true, &#125;; &#125;, methods: &#123; toggle() &#123; this.ok &#x3D; !this.ok; &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š ä¸ƒã€åˆ—è¡¨æ¸²æŸ“1ã€åˆ—è¡¨æ˜¾ç¤ºæŒ‡ä»¤ æ•°ç»„: v-for / index å¯¹è±¡: v-for / key 2ã€åˆ—è¡¨çš„æ›´æ–°æ˜¾ç¤º åˆ é™¤ Item æ›¿æ¢ Item 3ã€åˆ—è¡¨çš„é«˜çº§å¤„ç† åˆ—è¡¨è¿‡æ»¤ VUE æ•°æ®ç»‘å®šå¦‚ä½•å®ç°ï¼Ÿ Vue ä¼šç›‘è§† data ä¸­æ‰€æœ‰çš„å±‚æ¬¡çš„å±æ€§ å¯¹è±¡ä¸­çš„å±æ€§æ•°æ®é€šè¿‡æ·»åŠ  set æ–¹æ³•æ¥å®ç°ç›‘è§† æ•°ç»„ä¸­çš„å…ƒç´ å¯¹åº”ä¹Ÿå®ç°äº†ç›‘è§†ï¼›é‡å†™æ•°ç»„ä¸€ç³»åˆ—æ›´æ–°å…ƒç´ çš„æ–¹æ³• è°ƒç”¨åŸç”Ÿçš„å¯¹åº”çš„æ–¹æ³•å¯¹å…ƒç´ è¿›è¡Œå¤„ç† å»æ›´æ–°ç•Œé¢ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;div id&#x3D;&quot;demo&quot;&gt; &lt;h2&gt;æµ‹è¯•: v-for éå†æ•°ç»„&lt;&#x2F;h2&gt; &lt;ul&gt; &lt;li v-for&#x3D;&quot;(p, index) in persons&quot; :key&#x3D;&quot;p.id&quot;&gt; &#123;&#123;p.id&#125;&#125; -- &#123;&#123;p.name&#125;&#125; -- &#123;&#123;p.age&#125;&#125; -- &lt;button @click&#x3D;&quot;deleteP(index)&quot;&gt;åˆ é™¤&lt;&#x2F;button&gt; -- &lt;button @click&#x3D;&quot;updateP(index,&#123;id: Date.now(), name: &#39;Jarry&#39;,age: 19&#125;)&quot;&gt;æ›´æ–°&lt;&#x2F;button&gt; &lt;&#x2F;li&gt; &lt;&#x2F;ul&gt; &lt;h2&gt;æµ‹è¯•: v-for éå†å¯¹è±¡&lt;&#x2F;h2&gt; &lt;ul&gt; &lt;li v-for&#x3D;&quot;(value, key) in persons[0]&quot; :key&#x3D;&quot;key&quot;&gt; &#123;&#123;key&#125;&#125; &#x3D; &#123;&#123;value&#125;&#125; &lt;&#x2F;li&gt; &lt;&#x2F;ul&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#demo&quot;, data: &#123; persons: [ &#123; id: 1, name: &quot;Tom&quot;, age: 15 &#125;, &#123; id: 2, name: &quot;Jack&quot;, age: 12 &#125;, &#123; id: 4, name: &quot;Bob&quot;, age: 17 &#125;, &#123; id: 6, name: &quot;Rose&quot;, age: 16 &#125;, &#123; id: 8, name: &quot;Else&quot;, age: 13 &#125;, ], &#125;, methods: &#123; deleteP(index) &#123; this.persons.splice(index, 1); &#125;, updateP(index, newP) &#123; &#x2F;&#x2F; ç¬¬ä¸€ç§æ–¹å¼ &#x2F;&#x2F; this.persons[index].id &#x3D; newP.id; &#x2F;&#x2F; this.Persons[index].name &#x3D; newP.name; &#x2F;&#x2F; this.Persons[index].age &#x3D; newP.age; &#x2F;&#x2F; this.persons[index] &#x3D; newP &#x2F;&#x2F; ä¸ä¼šæ›´æ–°ç•Œé¢ this.persons.splice(index, 1, newP); &#x2F;&#x2F; VUEé‡å†™åçš„spliceæ–¹æ³• &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š åˆ—è¡¨æ’åº 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;div id&#x3D;&quot;app&quot;&gt; &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;searchName&quot;&gt; &lt;ul&gt; &lt;li v-for&#x3D;&quot;(p, index) in filterPersons&quot; :key&#x3D;&quot;p.id&quot;&gt; &#123;&#123;p.id&#125;&#125; -- &#123;&#123;p.name&#125;&#125; -- &#123;&#123;p.age&#125;&#125; &lt;&#x2F;li&gt; &lt;&#x2F;ul&gt; &lt;button @click&#x3D;&quot;sortType&#x3D;2&quot;&gt;æŒ‰å¹´é¾„å‡åº&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;sortType&#x3D;3&quot;&gt;æŒ‰å¹´é¾„é™åº&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;sortType&#x3D;1&quot;&gt;åŸæœ¬é¡ºåº&lt;&#x2F;button&gt; &lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#app&quot;, data: &#123; searchName: &quot;&quot;, sortType: 1, &#x2F;&#x2F; æ’åºçš„ç±»å‹, 1:ä¸æ’åº, 2:å‡åº, 3: é™åº persons: [ &#123; id: 1, name: &quot;Tom&quot;, age: 15 &#125;, &#123; id: 2, name: &quot;Jack&quot;, age: 12 &#125;, &#123; id: 4, name: &quot;Bob&quot;, age: 17 &#125;, &#123; id: 6, name: &quot;Rose&quot;, age: 16 &#125;, &#123; id: 8, name: &quot;Else&quot;, age: 13 &#125;, ], &#125;, computed: &#123; filterPersons() &#123; &#x2F;&#x2F; 1.å¾—åˆ°ä¾èµ–æ•°æ® const &#123; sortType, searchName, persons &#125; &#x3D; this; &#x2F;&#x2F; 2. è¿›è¡Œè®¡ç®—å¤„ç†ï¼Œäº§ç”Ÿç»“æœæ•°æ®å¹¶è¿”å› &#x2F;&#x2F; è¿‡æ»¤ const arr &#x3D; persons.filter((p) &#x3D;&gt; p.name.indexOf(searchName) &gt;&#x3D; 0); &#x2F;&#x2F; è¿›è¡Œæ’åº if (sortType !&#x3D;&#x3D; 1) &#123; arr.sort((p1, p2) &#x3D;&gt; &#123; if (sortType &#x3D;&#x3D;&#x3D; 2) &#123; &#x2F;&#x2F; å‡åº return p1.age - p2.age; &#125; else &#123; &#x2F;&#x2F; é™åº return p2.age - p1.age; &#125; &#125;); &#125; return arr; &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š å…«ã€äº‹ä»¶å¤„ç†1ã€ç»‘å®šç›‘å¬ v-on:xxx=â€funâ€ @xxx=â€funâ€ @xxx=â€fun(å‚æ•°)â€ é»˜è®¤äº‹ä»¶å½¢å‚: event éšå«å±æ€§å¯¹è±¡: $event 2ã€äº‹ä»¶ä¿®é¥°ç¬¦ .preventï¼š é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º event.preventDefault() .stop: åœæ­¢å¯¹äº‹ä»¶å†’æ³¡ event.stopPropagation() 3ã€æŒ‰é”®ä¿®é¥°ç¬¦ .keycodeï¼š æ“ä½œçš„æ˜¯æŸä¸ª keycode å€¼çš„é”® .keyName: æ“ä½œçš„æŸä¸ªæŒ‰é”®åçš„é”®ï¼ˆå°‘éƒ¨åˆ†ï¼‰ 4ã€ç¼–ç ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;div id&#x3D;&quot;example&quot;&gt; &lt;h2&gt;1. ç»‘å®šç›‘å¬&lt;&#x2F;h2&gt; &lt;button @click&#x3D;&quot;test1&quot;&gt;test1&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;test2(&#39;abc&#39;)&quot;&gt;test2&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;test3(&#39;abc&#39;,$event)&quot;&gt;test3&lt;&#x2F;button&gt; &lt;h2&gt;2. äº‹ä»¶ä¿®é¥°ç¬¦&lt;&#x2F;h2&gt; &lt;!-- é˜»æ­¢(prevent)äº‹ä»¶çš„é»˜è®¤è¡Œä¸º åœæ­¢(stop)äº‹ä»¶å†’æ³¡ --&gt; &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;oy6090.top&quot; @click.prevent&#x3D;&quot;test4&quot;&gt;å»å­¦ä¹ &lt;&#x2F;a&gt; &lt;div style&#x3D;&quot;width:200px; height: 200px; background: red;&quot; @click&#x3D;&quot;test5&quot;&gt; &lt;div style&#x3D;&quot;width: 100px; height: 100px; background: blue;&quot; @click.stop&#x3D;&quot;test6&quot;&gt;&lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;p @clik.once&#x3D;&quot;test6&quot;&gt;xxxxx&lt;&#x2F;p&gt; &lt;h2&gt;3. æŒ‰é”®ä¿®é¥°ç¬¦&lt;&#x2F;h2&gt; &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;msg&quot; @Keyup.13&#x3D;&quot;test7&quot;&gt; &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;msg&quot; @Keyup.enter&#x3D;&quot;test7&quot;&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt; new Vue(&#123; el: &#39;#example&#39;, data: &#123; msg: &#39;&#39; &#125;, methods: &#123; test1(e)&#123; alert(e.target.innerText); &#125;, test2(value)&#123; alert(value); &#125;, test3(value,event)&#123; alert(value+&quot;---&quot; + event.target.innerText); &#125;, test4(event)&#123; &#x2F;&#x2F;event.preventDefault(); alert(&#39;ç‚¹å‡»äº†&#39;); &#125;, test5()&#123; alert(&#39;out&#39;); &#125;, test6()&#123; alert(&#39;inner&#39;); &#125;, test7()&#123; alert(this.msg) &#125; &#125; &#125;)&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š ä¹ã€è¡¨å•è¾“å…¥ç»‘å®š1ã€ä½¿ç”¨ v-model å¯¹è¡¨å•æ•°æ®è‡ªåŠ¨æ”¶é›† text/textarea checkbox radio select 2ã€ç¼–ç ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;div id&#x3D;&quot;demo&quot;&gt; &lt;form action&#x3D;&quot;&#x2F;xxx&quot; @submit.prevent&#x3D;&quot;register&quot;&gt; &lt;span&gt;ç”¨æˆ·å: &lt;&#x2F;span&gt; &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;user.username&quot;&gt;&lt;br&gt; &lt;span&gt;å¯†ç : &lt;&#x2F;span&gt; &lt;input type&#x3D;&quot;password&quot; v-model&#x3D;&quot;user.pwd&quot;&gt;&lt;br&gt; &lt;span&gt;æ€§åˆ«: &lt;&#x2F;span&gt; &lt;input type&#x3D;&quot;radio&quot; id&#x3D;&quot;female&quot; v-model&#x3D;&quot;user.sex&quot; value&#x3D;&quot;å¥³&quot;&gt; &lt;label for&#x3D;&quot;female&quot;&gt;å¥³&lt;&#x2F;label&gt; &lt;input type&#x3D;&quot;radio&quot; id&#x3D;&quot;male&quot; v-model&#x3D;&quot;user.sex&quot; value&#x3D;&quot;ç”·&quot;&gt; &lt;label for&#x3D;&quot;male&quot;&gt;ç”·&lt;&#x2F;label&gt;&lt;br&gt; &lt;span&gt;çˆ±å¥½: &lt;&#x2F;span&gt; &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;basket&quot; v-model&#x3D;&quot;user.likes&quot; value&#x3D;&quot;basket&quot;&gt; &lt;label for&#x3D;&quot;basket&quot;&gt;ç¯®çƒ&lt;&#x2F;label&gt; &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;foot&quot; v-model&#x3D;&quot;user.likes&quot; value&#x3D;&quot;foot&quot;&gt; &lt;label for&#x3D;&quot;foot&quot;&gt;è¶³çƒ&lt;&#x2F;label&gt; &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;pingpang&quot; v-model&#x3D;&quot;user.likes&quot; value&#x3D;&quot;pingpang&quot;&gt; &lt;label for&#x3D;&quot;pingpang&quot;&gt;ä¹’ä¹“&lt;&#x2F;label&gt;&lt;br&gt; &lt;span&gt;åŸå¸‚: &lt;&#x2F;span&gt; &lt;select v-model&#x3D;&quot;user.cityID&quot;&gt; &lt;option value&#x3D;&quot;&quot;&gt;æœªé€‰æ‹©&lt;&#x2F;option&gt; &lt;option :value&#x3D;&quot;city.id&quot; v-for&#x3D;&quot;(city, index) in allcitys&quot; :key&#x3D;&quot;city.id&quot;&gt;&#123;&#123;city.name&#125;&#125;&lt;&#x2F;option&gt; &lt;&#x2F;select&gt;&lt;br&gt; &lt;span&gt;ä»‹ç»: &lt;&#x2F;span&gt; &lt;textarea rows&#x3D;&quot;10&quot; v-model&#x3D;&quot;user.info&quot;&gt;&lt;&#x2F;textarea&gt;&lt;br&gt;&lt;br&gt; &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;æ³¨å†Œ&quot;&gt; &lt;&#x2F;form&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#demo&quot;, data: &#123; user: &#123; username: &quot;&quot;, pwd: &quot;&quot;, sex: &quot;å¥³&quot;, likes: [&quot;foot&quot;], cityID: &quot;1&quot;, info: &quot;&quot;, &#125;, allcitys: [ &#123; id: 1, name: &quot;HN&quot; &#125;, &#123; id: 2, name: &quot;SZ&quot; &#125;, &#123; id: 3, name: &quot;HB&quot; &#125;, ], &#125;, methods: &#123; register() &#123; alert(&quot;å‘é€æ³¨å†Œçš„ajaxè¯·æ±‚ï¼š&quot; + JSON.stringify(this.user)); &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; ç¤ºä¾‹æ•ˆæœï¼š åã€Vue å®ä¾‹ç”Ÿå‘½å‘¨æœŸ1ã€ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ 2ã€Vue ç”Ÿå‘½å‘¨æœŸåˆ†æ åˆå§‹åŒ–æ˜¾ç¤º beforeCreate() created() beforeMount() mounted() æ›´æ–°çŠ¶æ€ï¼š this.xxx = value beforeUpdate() updated() é”€æ¯ vue å®ä¾‹ï¼švm.$destory() beforeDestory() destoryed() 3ã€å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• created()/mounted() : å‘é€ ajax è¯·æ±‚ï¼Œå¯åŠ¨å®šæ—¶å™¨ç­‰å¼‚æ­¥ä»»åŠ¡ã€‚ beforeDestory(): åšæ”¶å°¾å·¥ä½œï¼Œ å¦‚ï¼š æ¸…é™¤å®šæ—¶å™¨ã€‚ 4ã€ç¼–ç ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;div id&#x3D;&quot;test&quot;&gt; &lt;button @click&#x3D;&quot;destoryVM&quot;&gt;destory vue&lt;&#x2F;button&gt; &lt;p v-show&#x3D;&quot;isShow&quot; ref&#x3D;&quot;content&quot;&gt;Vue ç”Ÿå‘½å‘¨æœŸ &#123;&#123;isShow ? &#39;show...&#39; : &#39;hide...&#39;&#125;&#125;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#test&quot;, data() &#123; return &#123; isShow: true, &#125;; &#125;, beforeCreate() &#123; console.log(&quot;beforeCreate()&quot;, this.isShow); &#125;, &#x2F;&#x2F; å®ç°æ•°æ®ä»£ç ï¼š åé¢å¯ä»¥é€šè¿‡vm è¯»å–data ä¸­çš„æ•°æ® created() &#123; console.log(&quot;created()&quot;); &#125;, &#x2F;&#x2F; åœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºä¹‹ååœ¨æ˜¾ç¤º mounted() &#123; console.log(&quot;mounted()&quot;); this.intervalId &#x3D; setInterval(() &#x3D;&gt; &#123; console.log(&quot;-----&quot;); this.isShow &#x3D; !this.isShow; &#125;, 1000); &#125;, beforeUpdate() &#123; &#x2F;&#x2F; è¯»å–æ˜¯è€çš„ç•Œé¢ console.log(&quot;beforeUpdate()&quot;, this.isShow, this.$refs.content.innerHTML); &#125;, updated() &#123; console.log(&quot;updated()&quot;, this.isShow, this.$refs.content.innerHTML); &#125;, &#x2F;&#x2F; é”€æ¯ä¹‹å‰æ‰§è¡Œä¸€æ¬¡ beforeDestroy() &#123; console.log(&quot;beforeDestroy()&quot;); clearInterval(this.intervalId); &#125;, destroyed() &#123; console.log(&quot;destroyed()&quot;); &#125;, methods: &#123; destoryVM() &#123; this.$destroy(); &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; å®ä¾‹æ•ˆæœï¼š åä¸€ã€è¿‡æ¸¡&amp;åŠ¨ç”»1ã€vue åŠ¨ç”»çš„ç†è§£ æ“ä½œ css çš„ trasition æˆ– animation vue ä¼šç»™ç›®æ ‡å…ƒç´ æ·»åŠ /ç§»é™¤ç‰¹å®šçš„ class è¿‡æ¸¡çš„ç›¸å…³ç±»å xxx-enter-active: æŒ‡å®šæ˜¾ç¤ºçš„ transition xxx-leave-active: æŒ‡å®šéšè—çš„ transition xxx-enter/xxx-leave-to: æŒ‡å®šéšè—æ—¶çš„æ ·å¼ 2ã€åŸºæœ¬è¿‡æ¸¡åŠ¨ç”»çš„ç¼–ç  åœ¨ç›®æ ‡å…ƒç´ å¤–åŒ…è£¹ &lt;transition name=â€xxxâ€&gt; å®šä¹‰ class æ ·å¼ æŒ‡å®šè¿‡æ¸¡æ ·å¼ï¼štransition æŒ‡å®šéšè—æ—¶çš„æ ·å¼ï¼š opacity/å…¶ä»– 3ã€ç¼–ç ç¤ºä¾‹ ç¤ºä¾‹ä¸€ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;&#x2F;*è¿‡æ¸¡æ ·å¼*&#x2F;.move-enter-active,.move-leave-active &#123; transition: opacity 5s;&#125;&#x2F;*éšè—æ—¶çš„æ ·å¼*&#x2F;.move-enter,.move-leave-to &#123; opacity: 0;&#125;&#x2F;*æ˜¾ç¤ºçš„è¿‡æ¸¡æ ·å¼*&#x2F;.move2-enter-active &#123; transition: all 1s;&#125;&#x2F;*éšè—çš„è¿‡æ¸¡æ ·å¼*&#x2F;.move2-leave-active &#123; transition: all 5s;&#125;&#x2F;*éšè—æ—¶çš„æ ·å¼*&#x2F;.move2-enter,.move2-leave-to &#123; opacity: 0; transform: translateX(20px);&#125;&lt;&#x2F;style&gt;&lt;div id&#x3D;&quot;demo&quot;&gt; &lt;button v-on:click&#x3D;&quot;show&#x3D;!show&quot;&gt; Toggle &lt;&#x2F;button&gt; &lt;transition name&#x3D;&quot;move&quot;&gt; &lt;p v-show&#x3D;&quot;show&quot;&gt;Hello&lt;&#x2F;p&gt; &lt;&#x2F;transition&gt;&lt;&#x2F;div&gt;&lt;div id&#x3D;&quot;demo2&quot;&gt; &lt;button v-on:click&#x3D;&quot;show&#x3D;!show&quot;&gt; Toggle2 &lt;&#x2F;button&gt; &lt;transition name&#x3D;&quot;move2&quot;&gt; &lt;p v-show&#x3D;&quot;show&quot;&gt;Hello2&lt;&#x2F;p&gt; &lt;&#x2F;transition&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#demo&quot;, data: &#123; show: true, &#125;,&#125;);new Vue(&#123; el: &quot;#demo2&quot;, data: &#123; show: true, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š ç¤ºä¾‹äºŒï¼š 12345678910111213141516171819202122232425262728293031323334353637&lt;style&gt;&#x2F;*æ˜¾ç¤ºåŠ¨ç”»æ ·å¼*&#x2F;.bounce-enter-active &#123; animation: bounce-in 0.5s;&#125;.bounce-leave-active &#123; animation: bounce-in 0.5s reverse;&#125;@keyframes bounce-in &#123; 0% &#123; transform: scale(0); &#125; 50% &#123; transform: scale(1.5); &#125; 100% &#123; transform: scale(1); &#125;&#125;&lt;&#x2F;style&gt;&lt;div id&#x3D;&quot;example-2&quot;&gt; &lt;button @click&#x3D;&quot;show &#x3D; !show&quot;&gt;Toggle show&lt;&#x2F;button&gt;&lt;br&gt; &lt;transition name&#x3D;&quot;bounce&quot;&gt; &lt;p v-if&#x3D;&quot;show&quot; style&#x3D;&quot;display: inline-block;&quot;&gt;Lorem&lt;&#x2F;p&gt; &lt;&#x2F;transition&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script&gt;new Vue(&#123; el: &quot;#example-2&quot;, data: &#123; show: true, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š åäºŒã€è¿‡æ»¤å™¨ åŠŸèƒ½ï¼š å¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åœ¨æ˜¾ç¤º æ³¨æ„ï¼šå¹¶æ²¡æœ‰æ”¹å˜åŸæœ‰çš„æ•°æ®ï¼Œæ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ® 1ã€å®šä¹‰å’Œä½¿ç”¨è¿‡æ»¤å™¨ å®šä¹‰è¿‡æ»¤å™¨ 12Vue.filter(filterName,function(value[arg1,arg2,...]))&#123; &#x2F;&#x2F; è¿›è¡Œä¸€å®šçš„æ•°æ®å¤„ç†return newValue; &#125; ä½¿ç”¨è¿‡æ»¤å™¨ 12&lt;div&gt;&#123;&#123;myData | filterName&#125;&#125;&lt;&#x2F;div&gt;&lt;div&gt;&#123;&#123;myData | filterName(arg)&#125;&#125;&lt;&#x2F;div&gt; 2ã€ç¼–ç ç¤ºä¾‹123456789101112131415161718192021222324&lt;div id&#x3D;&quot;test&quot;&gt; &lt;h2&gt;æ˜¾ç¤ºæ ¼å¼åŒ–çš„æ—¥æœŸæ—¶é—´&lt;&#x2F;h2&gt; &lt;p&gt;&#123;&#123;startTime&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;startTime | dateFormate&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;startTime | dateFormate(&#39;YYYY-MM-DD&#39;)&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;startTime | dateFormate(&#39;HH:mm:ss&#39;)&#125;&#125;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;moment.js&#x2F;2.29.1&#x2F;moment.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;&#x2F;&#x2F; è‡ªå®šä¹‰è¿‡æ»¤å™¨Vue.filter(&quot;dateFormate&quot;, function (value, formatStr &#x3D; &quot;YYYY-MM-DD HH:mm:ss&quot;) &#123; &#x2F;&#x2F;return moment(value).format(formatStr || &#39;YYYY-MM-DD HH:mm:ss&#39;) return moment(value).format(formatStr);&#125;);new Vue(&#123; el: &quot;#test&quot;, data() &#123; return &#123; startTime: Date.now() - 10000, &#125;; &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š åä¸‰ã€å†…ç½®æŒ‡ä»¤ä¸è‡ªå®šä¹‰æŒ‡ä»¤1ã€å¸¸ç”¨å†…ç½®æŒ‡ä»¤ æŒ‡ä»¤ æè¿° v-text æ›´æ–°å…ƒç´ çš„ textContent v-html æ›´æ–°å…ƒç´ çš„ innerHTML v-if å¦‚æœä¸º true, å½“å‰æ ‡ç­¾æ‰ä¼šè¾“å‡ºåˆ°é¡µé¢ v-else å¦‚æœä¸º false, å½“å‰æ ‡ç­¾æ‰ä¼šè¾“å‡ºåˆ°é¡µé¢ v-show é€šè¿‡æ§åˆ¶ display æ ·å¼æ¥æ§åˆ¶æ˜¾ç¤º/éšè— v-for éå†æ•°ç»„/å¯¹è±¡ v-on ç»‘å®šäº‹ä»¶ç›‘å¬, ä¸€èˆ¬ç®€å†™ä¸º@ v-bind å¼ºåˆ¶ç»‘å®šè§£æè¡¨è¾¾å¼, å¯ä»¥çœç•¥ v-bind v-model åŒå‘æ•°æ®ç»‘å®š ref æŒ‡å®šå”¯ä¸€æ ‡è¯†, vue å¯¹è±¡é€šè¿‡$els å±æ€§è®¿é—®è¿™ä¸ªå…ƒç´ å¯¹è±¡ v-cloak é˜²æ­¢é—ªç°, ä¸ css é…åˆ: [v-cloak] { display: none } 2ã€è‡ªå®šä¹‰æŒ‡ä»¤ æ³¨å†Œå…¨å±€æŒ‡ä»¤ 12Vue.directive(&#39;my-directive&#39;, function(el, binding)&#123; el.innerHTML &#x3D;binding.value.toupperCase() &#125;) æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ 12directives : &#123; &#39;my-directive&#39; : &#123; bind (el, binding) &#123; el.innerHTML &#x3D;binding.value.toupperCase() &#125; &#125; &#125; ä½¿ç”¨æŒ‡ä»¤ 1v-my-directive &#x3D; &#39;xxx&#39; 3ã€ç¼–ç ç¤ºä¾‹ å†…ç½®æŒ‡ä»¤ 12345678910111213141516&lt;div id&#x3D;&quot;example&quot;&gt; &lt;p v-text&#x3D;&quot;msg&quot;&gt;&lt;&#x2F;p&gt; &lt;p v-html&#x3D;&quot;msg&quot;&gt;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;new Vue(&#123; el: &quot;#example&quot;, data() &#123; return &#123; msg: &#39;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;oy6090.top&quot;&gt;å»æµè§ˆåšå®¢&lt;&#x2F;a&gt;&#39;, &#125;; &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š è‡ªå®šä¹‰æŒ‡ä»¤ 12345678910111213141516171819202122232425262728293031&lt;!--éœ€æ±‚: è‡ªå®šä¹‰2ä¸ªæŒ‡ä»¤ 1. åŠŸèƒ½ç±»å‹äºv-text, ä½†è½¬æ¢ä¸ºå…¨å¤§å†™ 2. åŠŸèƒ½ç±»å‹äºv-text, ä½†è½¬æ¢ä¸ºå…¨å°å†™--&gt;&lt;div id&#x3D;&quot;test&quot;&gt; &lt;p v-upper-text&#x3D;&quot;msg&quot;&gt;&lt;&#x2F;p&gt; &lt;p v-lower-text&#x3D;&quot;msg&quot;&gt;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;&#x2F;&#x2F; è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤Vue.directive(&quot;upper-text&quot;, (el, binding) &#x3D;&gt; &#123; console.log(&quot;upper-text&quot;, binding); el.innerText &#x3D; binding.value.toUpperCase();&#125;);new Vue(&#123; el: &quot;#test&quot;, data: &#123; msg: &quot;I will Back!&quot;, &#125;, &#x2F;&#x2F; å®šä¹‰å±€éƒ¨æŒ‡ä»¤ï¼ˆåªå¯¹å½“å‰vmçš„æ¨¡æ¿æœ‰æ•ˆï¼‰ directives: &#123; &quot;lower-text&quot;(el, binding) &#123; el.innerText &#x3D; binding.value.toLowerCase(); &#125;, &#125;,&#125;);&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š åå››ã€è‡ªå®šä¹‰æ’ä»¶ è¯´æ˜ï¼š Vue æ’ä»¶æ˜¯ä¸€ä¸ªåŒ…å« install æ–¹æ³•çš„å¯¹è±¡ é€šè¿‡ install æ–¹æ³•ç»™ Vue æˆ– Vue å®ä¾‹æ·»åŠ æ–¹æ³•ï¼Œå®šä¹‰å…¨å±€æŒ‡ä»¤ ç¼–ç ç¤ºä¾‹ï¼š æ’ä»¶ JS ï¼ˆvue-myPlugin.jsï¼‰ 1234567891011121314151617181920212223/* è‡ªå®šä¹‰æ’ä»¶*/(function () &#123; const MyPlugin = &#123;&#125;; MyPlugin.install = function (Vue, options) &#123; // 1.æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§ Vue.myGlobalMethod = function () &#123; alert(&quot;Vue å‡½æ•°å¯¹è±¡æ–¹æ³•æ‰§è¡Œ&quot;); &#125;; // 2.æ·»åŠ å…¨å±€èµ„æº Vue.directive(&quot;my-directive&quot;, function (el, binding) &#123; el.innerHTML = &quot;MyPlugin my-directive &quot; + binding.value; &#125;); // 3.æ·»åŠ å®ä¾‹æ–¹æ³• Vue.prototype.$myMethod = function () &#123; alert(&quot;vue å®ä¾‹å¯¹è±¡æ–¹æ³•æ‰§è¡Œ&quot;); &#125;; &#125;; window.MyPlugin = MyPlugin;&#125;)(); é¡µé¢ä½¿ç”¨æ’ä»¶ 12345678910111213141516171819202122&lt;div id&#x3D;&quot;demo&quot;&gt; &lt;!-- ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ --&gt; &lt;p v-my-directive&#x3D;&quot;msg&quot;&gt;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script src&#x3D;&quot;vue-myPlugin.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;&#x2F;&#x2F; ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶Vue.use(MyPlugin);var vm &#x3D; new Vue(&#123; el: &quot;#demo&quot;, data: &#123; msg: &quot;OY_Test&quot;, &#125;,&#125;);&#x2F;&#x2F; è°ƒç”¨è‡ªå®šä¹‰çš„é™æ€æ–¹æ³•Vue.myGlobalMethod();&#x2F;&#x2F; è°ƒç”¨è‡ªå®šä¹‰çš„å¯¹è±¡æ–¹æ³•vm.$myMethod();&lt;&#x2F;script&gt; æ•ˆæœç¤ºä¾‹ï¼š","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://blog.oy6090.top/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://blog.oy6090.top/tags/Vue/"}]},{"title":"MySQL ä¸»ä»å¤åˆ¶","slug":"MySQL ä¸»ä»å¤åˆ¶","date":"2020-12-23T16:00:00.000Z","updated":"2021-01-20T14:48:14.259Z","comments":true,"path":"posts/6b30c31b.html","link":"","permalink":"http://blog.oy6090.top/posts/6b30c31b.html","excerpt":"","text":"MySQL ä¸»ä»å¤åˆ¶ ç¯å¢ƒå‡†å¤‡ï¼š win10 MySQL 5.5 (ä¸»æœº) Linux CentOS7 MySQL 5.7 (ä»æœº) ==ä¸»ä»å¤åˆ¶åŸç†å›¾ï¼š== MySQL å¤åˆ¶è¿‡ç¨‹åˆ†æˆä¸‰æ­¥ï¼š master å°†æ”¹å˜è®°å½•åˆ°äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinary logï¼‰ã€‚è¿™äº›è®°å½•è¿‡ç¨‹å«åšäºŒè¿›åˆ¶æ—¥å¿—äº‹ä»¶ï¼Œbinary log eventsï¼› slave å°† master çš„ binary log events æ‹·è´åˆ°å®ƒçš„ä¸­ç»§æ—¥å¿—ï¼ˆrelay logï¼‰ï¼› slave é‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†æ”¹å˜åº”ç”¨åˆ°è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚ MySQL å¤åˆ¶æ˜¯å¼‚æ­¥çš„ä¸”ä¸²è¡ŒåŒ–çš„ å¤åˆ¶çš„åŸºæœ¬åŸåˆ™ æ¯ä¸ª slave åªæœ‰ä¸€ä¸ª master æ¯ä¸ª slave åªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æœåŠ¡å™¨ ID æ¯ä¸ª master å¯ä»¥æœ‰å¤šä¸ª salve ==æ³¨æ„ï¼š==å¤åˆ¶çš„æœ€å¤§é—®é¢˜ å»¶è¿Ÿã€‚ ä¸€ä¸»ä¸€ä»å¸¸è§é…ç½®åœ¨å¼€å§‹ä¹‹å‰éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š MySQL ç‰ˆæœ¬ä¸€è‡´ä¸”åå°æ­£å¸¸æœåŠ¡è¿è¡Œï¼ˆåšå®¢å¼€å¤´ä»¥æåŠï¼‰ ä¸»ä»é…ç½®åœ¨[mysql]ç»“ç‚¹ä¸‹ï¼Œéƒ½æ˜¯å°å†™ ä¸»æœºä¿®æ”¹ my.ini é…ç½®æ–‡ä»¶ï¼ˆwin10ï¼‰â€‹ my.ini é…ç½®æ–‡ä»¶åœ¨ MySQL çš„å®‰è£…ç›®å½•ä¸‹ï¼Œä¸€èˆ¬é»˜è®¤åœ¨ C:\\Program Files\\MySQLç›®å½•ä¸‹ã€‚åœ¨ä¿®æ”¹ä¹‹å‰æœ€å¥½å…ˆå¤‡ä»½ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåœ¨é…ç½®ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå¯ä»¥ç”¨é…ç½®æ–‡ä»¶æ¢å¤ä¸€ä¸‹ã€‚ ä¸»æœåŠ¡å™¨å”¯ä¸€ ID 1server-id=1 å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿— log-bin=è‡ªå·±æœ¬åœ°çš„è·¯å¾„/data/mysqlbin 1log-bin=D:/devSoft/MySQLServer5.5/data/mysqlbin è®¾ç½®ä¸è¦å¤åˆ¶çš„æ•°æ®åº“ 1binlog-ignore-db=mysql è®¾ç½®éœ€è¦å¤åˆ¶çš„æ•°æ®åº“ binlog-do-db=éœ€è¦å¤åˆ¶çš„ä¸»æ•°æ®åº“åå­— (æ ¹æ®è‡ªå·±æƒ…å†µè€Œè®¾ç½®ï¼Œåšå®¢æˆ‘è®¾ç½®çš„å¤åˆ¶çš„æ•°æ®åº“æ˜¯mysql_01,é…ç½®æ—¶è¿™ä¸ªæ•°æ®åº“å¿…é¡»è¿˜ä¸å­˜åœ¨ï¼Œä¸èƒ½ç”¨ä»¥å‰å­˜åœ¨çš„åº“) 1binlog-do-db=mysql_01 è®¾ç½® logbin æ ¼å¼ 1binlog_format=STATEMENTï¼ˆé»˜è®¤ï¼‰ ==å‚è€ƒç¤ºä¾‹å›¾ï¼š== mysql ä¸»ä»å¤åˆ¶èµ·å§‹æ—¶ï¼Œä»æœºä¸ç»§æ‰¿ä¸»æœºæ•°æ® ä»æœºä¿®æ”¹ my.cnf é…ç½®æ–‡ä»¶ï¼ˆCentOS 7ï¼‰â€‹ my.cnf é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œå»ºè®®æ‚¨è¿˜æ˜¯å¤‡ä»½ä¸€ä»½ã€‚ è¿›å…¥ my.cnf æ–‡ä»¶ç›®å½• 1[root@localhost /]# cd /etc é…ç½® 12server-id &#x3D; 2relay-log&#x3D;mysql-relay å› ä¿®æ”¹è¿‡é…ç½®æ–‡ä»¶ï¼Œè¯·ä¸»æœº+ä»æœºéƒ½é‡å¯åå° mysql æœåŠ¡win10: Linux CentOS7ï¼š 1systemctl restart mysqld ä¸»æœºä»æœºéƒ½å…³é—­é˜²ç«å¢™windows æ‰‹åŠ¨å…³é—­: å…³é—­ linux é˜²ç«å¢™: 1systemctl stop firewalld åœ¨ Windows ä¸»æœºä¸Šå»ºç«‹å¸æˆ·å¹¶æˆæƒ slaveæ ¼å¼ï¼šGRANT REPLICATION SLAVE ON *.* TO &#39;ç”¨æˆ·å&#39;@&#39;ä»æœºå™¨æ•°æ®åº“IP&#39; IDENTIFIED BY &#39;123456&#39;; ç¤ºä¾‹ï¼š 1GRANT REPLICATION SLAVE ON *.* TO &#x27;oy&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;; æŸ¥è¯¢ master çš„çŠ¶æ€ 1show master status; ==æ³¨æ„ï¼š==è®°å½•ä¸‹ File å’Œ Position çš„å€¼ã€‚ï¼ˆåé¢ä¼šéœ€è¦ç”¨åˆ°ï¼‰æ‰§è¡Œå®Œæ­¤æ­¥éª¤åä¸è¦å†æ“ä½œä¸»æœåŠ¡å™¨ MySQLï¼Œé˜²æ­¢ä¸»æœåŠ¡å™¨çŠ¶æ€å€¼å˜åŒ–ã€‚ åœ¨ Windows ä¸»æœºä¸Šå»ºç«‹å¸æˆ·å¹¶æˆæƒ slaveæ ¼å¼ï¼š CHANGE MASTER TO MASTER_HOST=â€™ä¸»æœº IPâ€™, MASTER_USER=â€™zhangsanâ€™, MASTER_PASSWORD=â€™123456â€™, MASTER_LOG_FILE=â€™File åå­—â€™, MASTER_LOG_POS=Position æ•°å­—; ç¤ºä¾‹ï¼š å¯åŠ¨ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½ 1start slave; æ£€æŸ¥æœåŠ¡ 1show slave status\\G; ä¸Šé¢ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ Yesï¼Œåˆ™è¯´æ˜ä¸»ä»é…ç½®æˆåŠŸï¼ æµ‹è¯•ä¸»æœºæ–°å»ºåº“ã€æ–°å»ºè¡¨ã€insert è®°å½•ï¼Œä»æœºå¤åˆ¶windowns: 12345678910create database mydb_01;use mydb_01;create table mytb1( id int , name varchar(20) );insert into mytb1 values(1,&#x27;zhangsan&#x27;);insert into mytb1 values(2,&#x27;oy&#x27;); linux: åœæ­¢ä»æœåŠ¡å¤åˆ¶åŠŸèƒ½1stop slave; é‡æ–°é…ç½®ä¸»ä»12stop slave;reset master;","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.oy6090.top/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.oy6090.top/tags/MySQL/"}]},{"title":"CentOS 7 å®‰è£… MySQL 5.7","slug":"CentOS 7 å®‰è£… MySQL 5.7","date":"2020-12-09T16:00:00.000Z","updated":"2021-01-22T03:48:05.427Z","comments":true,"path":"posts/1c9cc24c.html","link":"","permalink":"http://blog.oy6090.top/posts/1c9cc24c.html","excerpt":"","text":"CentOS 7 å®‰è£… MySQL 5.7ä¸€ã€ä¸‹è½½åœ°å€å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttp://dev.mysql.com/downloads/mysql/ äºŒã€æ‹·è´&amp;è§£å‹ç¼©æ³¨æ„ï¼š æˆ‘è‡ªå·±æœ¬äººä½¿ç”¨ç‰ˆæœ¬æ˜¯ mysql 5.7.16 ä½†æ˜¯ç›®å‰å®˜ç½‘ä¸Šçš„ GA ç‰ˆ mysql æ˜¯ 5.7.32 ç‰ˆï¼Œä¸¤ä¸ªç‰ˆæœ¬å®‰è£…éƒ½ä¸€æ ·ï¼Œç‰ˆæœ¬é€‰æ‹©æ ¹æ®è‡ªå·±æ¥å†³å®šã€‚è¿™é‡Œä»¥5.7.16ç‰ˆä¸ºæ¼”ç¤ºã€‚ ä¸‰ã€æ£€æŸ¥å·¥ä½œ1ã€æ£€æŸ¥å½“å‰ç³»ç»Ÿæ˜¯å¦å®‰è£…è¿‡ mysql1rpm -qa|grep mariadb ==å¦‚æœå­˜åœ¨å¦‚ä¸‹ï¼š== è¯·æ‰§è¡Œä»¥ä¸‹å¸è½½å‘½ä»¤ï¼š 1rpm -e --nodeps mariadb-libs 2ã€æ£€æŸ¥å½“å‰ mysql ä¾èµ–ç¯å¢ƒ==æ‰§è¡Œå®‰è£…å‘½ä»¤å‰ï¼Œå…ˆæ‰§è¡ŒæŸ¥è¯¢å‘½ä»¤== 1rpm -qa|grep libaio å¦‚æœå­˜åœ¨ libaio åŒ…å¦‚ä¸‹ï¼š ==åœ¨æ‰§è¡Œå‘½ä»¤ï¼š== 1rpm -qa|grep net-tools å¦‚æœå­˜åœ¨ net-tools åŒ…å¦‚ä¸‹ï¼š å¦‚æœä¸å­˜åœ¨éœ€è¦åˆ° centos å®‰è£…ç›˜é‡Œè¿›è¡Œ rpm å®‰è£… ä¸‰ã€å®‰è£…1ã€é€šè¿‡ Xftp å·¥å…·æŠŠåœ¨ä¸‹è½½å¥½æ–‡ä»¶å‘é€åˆ° Linux çš„ opt ç›®å½•ä¸‹ 2ã€åœ¨ mysql çš„å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ:==(å¿…é¡»æŒ‰ç…§é¡ºåºæ‰§è¡Œ)==1234rpm -ivh mysql-community-common-5.7.16-1.el7.x86_64.rpmrpm -ivh mysql-community-libs-5.7.16-1.el7.x86_64.rpmrpm -ivh mysql-community-client-5.7.16-1.el7.x86_64.rpmrpm -ivh mysql-community-server-5.7.16-1.el7.x86_64.rpm ==æ³¨æ„ï¼š==å¦‚åœ¨æ£€æŸ¥å·¥ä½œæ—¶ï¼Œæ²¡æœ‰æ£€æŸ¥ mysql ä¾èµ–ç¯å¢ƒåœ¨å®‰è£… mysql-community-server ä¼šæŠ¥é”™ å››ã€æŸ¥çœ‹ MySQL å®‰è£…ç‰ˆæœ¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1mysqladmin --version äº”ã€MySQL æœåŠ¡çš„åˆå§‹åŒ– ä¸ºäº†ä¿è¯æ•°æ®åº“ç›®å½•ä¸ºä¸æ–‡ä»¶çš„æ‰€æœ‰è€…ä¸º mysql ç™»é™†ç”¨æˆ·ï¼Œå¦‚æœä½ æ˜¯ä»¥ root èº«ä»½è¿è¡Œ mysql æœåŠ¡ï¼Œéœ€è¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åˆå§‹åŒ– 1mysqld --initialize --user=mysql æ³¨æ„ï¼šå¦å¤– â€“initialize é€‰é¡¹é»˜è®¤ä»¥â€œå®‰å…¨â€æ¨¡å¼æ¥åˆå§‹åŒ–ï¼Œåˆ™ä¼šä¸º root ç”¨æˆ·ç”Ÿæˆä¸€ä¸ªå¯†ç å¹¶å°†è¯¥å¯†ç æ ‡è®°ä¸ºè¿‡æœŸï¼Œç™»é™†åä½ éœ€è¦è®¾ç½®ä¸€ä¸ªæ–°çš„å¯†ç ã€‚ æŸ¥çœ‹å¯†ç ï¼š 1cat /var/log/mysqld.log ==root@localhost: åé¢å°±æ˜¯åˆå§‹åŒ–çš„å¯†ç == å…­ã€MySQL æœåŠ¡çš„å¯ä¸åœå¯åŠ¨ï¼šsystemctl start mysqld.service å…³é—­ï¼šsystemctl stop mysqld.service ä¸ƒã€é¦–æ¬¡ç™»é™† é¦–æ¬¡ç™»é™†é€šè¿‡ mysql -uroot -pè¿›è¡Œç™»å½•ï¼Œåœ¨ Enter passwordï¼šå½•å…¥åˆå§‹åŒ–å¯†ç  å› ä¸ºåˆå§‹åŒ–å¯†ç é»˜è®¤æ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥æŸ¥çœ‹æ•°æ®åº“ä¼šæŠ¥é”™ ä¿®æ”¹å¯†ç ï¼š 1ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;new_password&#x27;; è®¾ç½®å®Œå¯†ç å°±å¯ä»¥ç”¨æ–°å¯†ç ç™»é™†ï¼Œæ­£å¸¸ä½¿ç”¨æ•°æ®åº“äº† ï¼ï¼ï¼ å…«ã€è‡ªå¯åŠ¨ mysql æœåŠ¡ æŸ¥çœ‹ mysql æ˜¯å¦è‡ªå¯åŠ¨ï¼ˆé»˜è®¤è‡ªå¯åŠ¨ï¼‰ 1systemctl list-unit-files|grep mysqld.service ==æ³¨æ„ï¼š==å¦‚ä¸æ˜¯ enabled å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤è®¾ç½®è‡ªå¯åŠ¨ 1systemctl enable mysqld.sercice ä¹ã€ä¿®æ”¹å­—ç¬¦é›†é—®é¢˜ é—®é¢˜ï¼šmysql5.7 ç›´æ¥æ’å…¥ä¸­æ–‡æ•°æ®æŠ¥é”™ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³é—®é¢˜ ä¿®æ”¹é…ç½®æ–‡ä»¶ 1vim /etc/my.cnf åœ¨æœ€ååŠ ä¸Šä¸­æ–‡å­—ç¬¦é›†é…ç½®: character_set_server=utf8 é‡æ–°å¯åŠ¨ mysql 1systemctl restart mysqld ==æ‰©å±•ï¼š==å·²ç”Ÿæˆçš„åº“è¡¨å­—ç¬¦é›†å¦‚ä½•å˜æ›´ ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›† 1mysql&gt; alter database mydb character set &#x27;utf8&#x27;; ä¿®æ”¹æ•°æ®è¡¨çš„å­—ç¬¦é›† 1mysql&gt; alter table mytbl convert to character set &#x27;utf8&#x27;; åˆ°æ­¤ï¼ŒLinux ä¸Šçš„ MySQL æ•°æ®åº“å°±å®‰è£…å®Œæˆäº† åã€è¿œç¨‹å·¥å…·è¿æ¥ MySQL æ•°æ®åº“ æˆäºˆæƒé™ å…ˆä½¿ç”¨ mysql -uroot -p è¿›å…¥æ•°æ®åº“ï¼š 1grant all privileges on *.* to root@&#x27;%&#x27; identified by &#x27;password&#x27;; æˆäºˆé€šè¿‡ç½‘ç»œæ–¹å¼ç™»å½•çš„çš„ root ç”¨æˆ· ï¼Œå¯¹æ‰€æœ‰åº“æ‰€æœ‰è¡¨çš„å…¨éƒ¨æƒé™ï¼Œå¯†ç è®¾ä¸º 6090. è¿œç¨‹è¿æ¥ å…ˆ ping ä¸€ä¸‹æ•°æ®åº“æœåŠ¡å™¨çš„ ip åœ°å€ç¡®è®¤ç½‘ç»œç•…é€šã€‚ å…³é—­æ•°æ®åº“æœåŠ¡çš„é˜²ç«å¢™ è¡¥å……ï¼š==(æ ¹æ®è‡ªå·±æƒ…å†µæ¥é€‰æ‹©)== 1234567891011// æŸ¥çœ‹å½“å‰é˜²ç«å¢™çŠ¶æ€å¦‚æœé˜²ç«å¢™å¤„äºå¼€å¯çŠ¶æ€ï¼Œfirewalld.serviceå‰é¢çš„ç‚¹æ˜¯é«˜äº®çš„ï¼ŒActiveï¼šactiveï¼ˆå¼€å¯ï¼‰ï¼‰systemctl status firewalld.service//å…³é—­å½“å‰çš„é˜²ç«å¢™ï¼ˆä»…å¯¹æœ¬æ¬¡å¼€æœºæœ‰æ•ˆï¼Œé‡å¯åé˜²ç«å¢™ä¼šå†æ¬¡å¯ç”¨ï¼‰systemctl stop firewalld.service//æ°¸ä¹…å…³é—­é˜²ç«å¢™ï¼ˆé‡å¯åé˜²ç«å¢™ä¾ç„¶å…³é—­ï¼‰systemctl disable firewalld.service// å¯åŠ¨é˜²ç«å¢™ systemctl start firewalld æ¼”ç¤ºä½¿ç”¨å‘½ä»¤ï¼š 1systemctl stop firewalld.service ä½¿ç”¨ Navicat è¿æ¥ è¿æ¥æˆåŠŸï¼š â€‹ å¦‚æœä½¿ç”¨çš„æ˜¯äº‘æœåŠ¡(é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰)è®°å¾—å»å®‰å…¨ç»„é‡Œé¢é…ç½®è§„åˆ™ï¼Œå¼€æ”¾ 3306 ç«¯å£ã€‚ ==å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·ç»™æˆ‘ç‚¹ä¸ªèµï¼Œå†™ä½œä¸æ˜“ï¼Œè°¢è°¢ï¼ï¼ï¼ï¼==","categories":[{"name":"CentOS","slug":"CentOS","permalink":"http://blog.oy6090.top/categories/CentOS/"}],"tags":[{"name":"CentOS 7","slug":"CentOS-7","permalink":"http://blog.oy6090.top/tags/CentOS-7/"}]},{"title":"Docker åŸºæœ¬æ“ä½œæ€»ç»“","slug":"Docker åŸºæœ¬æ“ä½œæ€»ç»“","date":"2020-11-24T16:00:00.000Z","updated":"2021-01-22T03:48:44.193Z","comments":true,"path":"posts/43758.html","link":"","permalink":"http://blog.oy6090.top/posts/43758.html","excerpt":"","text":"Docker åŸºæœ¬æ“ä½œæ€»ç»“ä¸€ã€Docker çš„åŸºæœ¬ç»„æˆâ‘  é•œåƒï¼ˆimageï¼‰â€‹ Docker é•œåƒï¼ˆImageï¼‰å°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»º Docker å®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¾ˆå¤šå®¹å™¨ã€‚ â‘¡ å®¹å™¨ï¼ˆcontainerï¼‰ Docker åˆ©ç”¨å®¹å™¨ï¼ˆContainerï¼‰ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ã€‚==å®¹å™¨æ˜¯ç”¨é•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚== å®ƒå¯ä»¥è¢«å¯åŠ¨ã€å¼€å§‹ã€åœæ­¢ã€åˆ é™¤ã€‚æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€ä¿è¯å®‰å…¨çš„å¹³å°ã€‚ ==å¯ä»¥æŠŠå®¹å™¨çœ‹åšæ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ Linux ç¯å¢ƒ==ï¼ˆåŒ…æ‹¬ root ç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´ã€ç”¨æˆ·ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰å’Œè¿è¡Œåœ¨å…¶ä¸­çš„åº”ç”¨ç¨‹åºã€‚ å®¹å™¨çš„å®šä¹‰å’Œé•œåƒå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€å †å±‚çš„ç»Ÿä¸€è§†è§’ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äºå®¹å™¨çš„æœ€ä¸Šé¢é‚£ä¸€å±‚æ˜¯å¯è¯»å¯å†™çš„ã€‚ â‘¢ ä»“åº“ï¼ˆrepositoryï¼‰ ä»“åº“ï¼ˆRepositoryï¼‰æ˜¯é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚ ä»“åº“(Repository)å’Œä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ä¸Šå¾€å¾€å­˜æ”¾ç€å¤šä¸ªä»“åº“ï¼Œæ¯ä¸ªä»“åº“ä¸­åˆåŒ…å«äº†å¤šä¸ªé•œåƒï¼Œæ¯ä¸ªé•œåƒæœ‰ä¸åŒçš„æ ‡ç­¾ï¼ˆtagï¼‰ã€‚ ä»“åº“åˆ†ä¸ºå…¬å¼€ä»“åº“ï¼ˆPublicï¼‰å’Œç§æœ‰ä»“åº“ï¼ˆPrivateï¼‰ä¸¤ç§å½¢å¼ã€‚ æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ Docker Hub(https://hub.docker.com/)ï¼Œå­˜æ”¾äº†æ•°é‡åºå¤§çš„é•œåƒä¾›ç”¨æˆ·ä¸‹è½½ã€‚å›½å†…çš„å…¬å¼€ä»“åº“åŒ…æ‹¬é˜¿é‡Œäº‘ ã€ç½‘æ˜“äº‘ ç­‰ â‘£ Docker çš„æ¶æ„å›¾ äºŒã€å®‰è£…æ­¥éª¤è¯·å‚è€ƒï¼šhttps://docs.docker.com/engine/install/centos/ â‘  CentOS7 å®‰è£… Dockerâ€‹ å®˜ç½‘ä¸­æ–‡å®‰è£…å‚è€ƒæ‰‹å†Œï¼šhttps://docs.docker-cn.com/engine/installation/linux/docker-ce/centos/#prerequisites ç¡®å®š CentOS7 ç‰ˆæœ¬ 1cat /etc/redhat-release yum å®‰è£… gcc ç›¸å…³ 1yum -y install gcc 1yum -y install gcc-c++ å¸è½½æ—§ç‰ˆæœ¬(æ ¹æ®è‡ªå·±çš„æƒ…å†µé€‰æ‹©) 1yum -y remove docker docker-common docker-selinux docker-engine å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ… 1yum install -y yum-utils device-mapper-persistent-data lvm2yum install -y yum-utils device-mapper-persistent-data lvm2 è®¾ç½® stable é•œåƒä»“åº“ 1yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo æ›´æ–° yum è½¯ä»¶åŒ…ç´¢å¼• 1yum makecache fast å®‰è£… DOCKER CE 1yum -y install docker-ce å¯åŠ¨ docker 1systemctl start docker 9.æµ‹è¯• 1docker version 1docker run hello-world å¸è½½ 1systemctl stop docker 1yum -y remove docker-ce 1rm -rf /var/lib/docker â‘¡ ä¿®æ”¹é•œåƒåŠ é€Ÿæºæœ¬ç¯‡åšå®¢é‡‡ç”¨çš„æ˜¯ é˜¿é‡Œäº‘é•œåƒæºåŠ é€Ÿ å¯ä»¥å…ˆå‚è€ƒäº†è§£ä¸€ä¸‹ï¼šhttps://dev.aliyun.com/search.html æ³¨å†Œä¸€ä¸ªå±äºè‡ªå·±çš„é˜¿é‡Œäº‘è´¦æˆ·(å¯å¤ç”¨æ·˜å®è´¦å·) è·å¾—åŠ é€Ÿå™¨åœ°å€è¿æ¥ ç™»é™†é˜¿é‡Œäº‘å¼€å‘è€…å¹³å° è·å–åŠ é€Ÿå™¨åœ°å€ â‘¢ é…ç½®æœ¬æœº Docker è¿è¡Œé•œåƒåŠ é€Ÿå™¨é…ç½®é•œåƒåŠ é€ŸCentOS7ç‰ˆæœ¬ mkdir -p /etc/docker vim /etc/docker/daemon.json 1234 #é˜¿é‡Œäº‘&#123; &quot;registry-mirrors&quot;: [&quot;https://ï½›è‡ªå·²çš„ç¼–ç ï½.mirror.aliyuncs.com&quot;]&#125; systemctl daemon-reload systemctl restart docker â‘£ åº•å±‚åŸç† Docker å·¥ä½œæœºåˆ¶ Docker æ˜¯ä¸€ä¸ª Client-Server ç»“æ„çš„ç³»ç»Ÿï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œ ç„¶åé€šè¿‡ Socket è¿æ¥ä»å®¢æˆ·ç«¯è®¿é—®ï¼Œå®ˆæŠ¤è¿›ç¨‹ä»å®¢æˆ·ç«¯æ¥å—å‘½ä»¤å¹¶ç®¡ç†è¿è¡Œåœ¨ä¸»æœºä¸Šçš„å®¹å™¨ã€‚ å®¹å™¨ï¼Œæ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒï¼Œå°±æ˜¯æˆ‘ä»¬å‰é¢è¯´åˆ°çš„é›†è£…ç®±ã€‚ ä¸‰ã€Docker å¸¸ç”¨å‘½ä»¤â‘  å¸®åŠ©å‘½ä»¤ docker version docker info docker info â‘¡ é•œåƒå‘½ä»¤1ã€docker images æŸ¥çœ‹æœ¬åœ°é•œåƒä»“åº“é•œåƒæº å„ä¸ªé€‰é¡¹è¯´æ˜: é€‰é¡¹ è¯´æ˜ REPOSITORY è¡¨ç¤ºé•œåƒçš„ä»“åº“æº TAG é•œåƒçš„æ ‡ç­¾ IMAGE ID é•œåƒ ID CREATED é•œåƒåˆ›å»ºæ—¶é—´ SIZE é•œåƒå¤§å° â€‹ åŒä¸€ä»“åº“æºå¯ä»¥æœ‰å¤šä¸ª TAGï¼Œä»£è¡¨è¿™ä¸ªä»“åº“æºçš„ä¸åŒä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ REPOSITORY:TAG æ¥å®šä¹‰ä¸åŒçš„é•œåƒã€‚å¦‚æœä½ ä¸æŒ‡å®šä¸€ä¸ªé•œåƒçš„ç‰ˆæœ¬æ ‡ç­¾ï¼Œä¾‹å¦‚ä½ åªä½¿ç”¨ ubuntuï¼Œdocker å°†é»˜è®¤ä½¿ç”¨ ubuntu:latest é•œåƒã€‚ OPTIONS è¯´æ˜ï¼š å‚æ•° è¯´æ˜ -a åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼‰ -q åªæ˜¾ç¤ºé•œåƒ IDã€‚ â€“digests æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ â€“no-trunc æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯ 2ã€docker search æŸ¥è¯¢é•œåƒæº docker search [OPTIONS] é•œåƒåå­— OPTIONS è¯´æ˜ï¼š å‚æ•° è¯´æ˜ â€“no-trunc æ˜¾ç¤ºå®Œæ•´çš„é•œåƒæè¿° -s åˆ—å‡ºæ”¶è—æ•°ä¸å°äºæŒ‡å®šå€¼çš„é•œåƒã€‚ â€“automated åªåˆ—å‡º automated build ç±»å‹çš„é•œåƒ 3ã€docker pull æ‹‰å–é•œåƒæº docker pull é•œåƒåå­—[:TAG] 4ã€docker rmi åˆ é™¤é•œåƒæº åˆ é™¤å•ä¸ª 1docker rmi -f é•œåƒID åˆ é™¤å¤šä¸ª 1docker rmi -f é•œåƒå1:TAG é•œåƒå2:TAG åˆ é™¤å…¨éƒ¨ 1docker rmi -f $(docker images -qa) â‘¢ å®¹å™¨å‘½ä»¤ æœ‰é•œåƒæ‰èƒ½åˆ›å»ºå®¹å™¨ï¼Œè¿™æ˜¯æ ¹æœ¬å‰æ(ä¸‹è½½ä¸€ä¸ª CentOS é•œåƒæ¼”ç¤º) 1docker pull centos æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨ docker run [OPTIONS] IMAGE [COMMAND] [ARGâ€¦] OPTIONS è¯´æ˜ å‚æ•° è¯´æ˜ -d åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ -i ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ -t ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ -P éšæœºç«¯å£æ˜ å°„ -p æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæœ‰ä»¥ä¸‹å››ç§æ ¼å¼ï¼šip:hostPort:containerPortip::containerPorthostPort:containerPortcontainerPort åˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker ps [OPTIONS] OPTIONS è¯´æ˜ å‚æ•° è¯´æ˜ -a åˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨+å†å²ä¸Šè¿è¡Œè¿‡çš„ -l æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ã€‚ -n æ˜¾ç¤ºæœ€è¿‘ n ä¸ªåˆ›å»ºçš„å®¹å™¨ã€‚ docker ps -n 3 -q é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å· â€“no-trunc ä¸æˆªæ–­è¾“å‡º é€€å‡ºå®¹å™¨ exit: å®¹å™¨åœæ­¢é€€å‡º ctrl+P+Q: å®¹å™¨ä¸åœæ­¢é€€å‡º å¯åŠ¨å®¹å™¨ 1docker start å®¹å™¨IDæˆ–è€…å®¹å™¨å é‡å¯å®¹å™¨ 1docker restart å®¹å™¨IDæˆ–è€…å®¹å™¨å åœæ­¢å®¹å™¨ 1docker stop å®¹å™¨IDæˆ–è€…å®¹å™¨å å¼ºåˆ¶åœæ­¢å®¹å™¨ 1docker kill å®¹å™¨IDæˆ–è€…å®¹å™¨å åˆ é™¤å·²åœæ­¢çš„å®¹å™¨ 1docker rm å®¹å™¨ID ä¸€æ¬¡æ€§åˆ é™¤å¤šä¸ªå®¹å™¨ docker rm -f $(docker ps -a -q) docker ps -a -q | xargs docker rm â‘£ æ ¸å¿ƒå‘½ä»¤1ã€å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ 1docker run -d å®¹å™¨å ç¤ºä¾‹ï¼šä½¿ç”¨é•œåƒ centos:latest ä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨ 1docker run -d centos é—®é¢˜ï¼šç„¶å docker ps -a è¿›è¡ŒæŸ¥çœ‹, ä¼šå‘ç°å®¹å™¨å·²ç»é€€å‡º,å¾ˆé‡è¦çš„è¦è¯´æ˜çš„ä¸€ç‚¹: ==Docker å®¹å™¨åå°è¿è¡Œ,å°±å¿…é¡»æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹.å®¹å™¨è¿è¡Œçš„å‘½ä»¤å¦‚æœä¸æ˜¯é‚£äº›ä¸€ç›´æŒ‚èµ·çš„å‘½ä»¤ï¼ˆæ¯”å¦‚è¿è¡Œ topï¼Œtailï¼‰==ï¼Œå°±æ˜¯ä¼šè‡ªåŠ¨é€€å‡ºçš„ã€‚ è¿™ä¸ªæ˜¯ docker çš„æœºåˆ¶é—®é¢˜,æ¯”å¦‚ä½ çš„ web å®¹å™¨,æˆ‘ä»¬ä»¥ nginx ä¸ºä¾‹ï¼Œæ­£å¸¸æƒ…å†µä¸‹,æˆ‘ä»¬é…ç½®å¯åŠ¨æœåŠ¡åªéœ€è¦å¯åŠ¨å“åº”çš„ service å³å¯ã€‚ä¾‹å¦‚ service nginx start ä½†æ˜¯,è¿™æ ·åš,nginx ä¸ºåå°è¿›ç¨‹æ¨¡å¼è¿è¡Œ,å°±å¯¼è‡´ docker å‰å°æ²¡æœ‰è¿è¡Œçš„åº”ç”¨,è¿™æ ·çš„å®¹å™¨åå°å¯åŠ¨å,ä¼šç«‹å³è‡ªæ€å› ä¸ºä»–è§‰å¾—ä»–æ²¡äº‹å¯åšäº†æ‰€ä»¥ï¼Œæœ€ä½³çš„è§£å†³æ–¹æ¡ˆæ˜¯,å°†ä½ è¦è¿è¡Œçš„ç¨‹åºä»¥å‰å°è¿›ç¨‹çš„å½¢å¼è¿è¡Œã€‚ ä» Hub ä¸Šä¸‹è½½ tomcat é•œåƒåˆ°æœ¬åœ°å¹¶æˆåŠŸè¿è¡Œ 1docker run -it -p 8080:8080 tomcat å‚æ•° è¯´æ˜ -p ä¸»æœºç«¯å£:docker å®¹å™¨ç«¯å£ -P éšæœºåˆ†é…ç«¯å£ i äº¤äº’ t ç»ˆç«¯ æŸ¥çœ‹å®¹å™¨æ—¥å¿— 1docker logs -f -t --tail å®¹å™¨ID 1docker run -d centos &#x2F;bin&#x2F;sh -c &quot;while true;do echo hello zzyy;sleep 2;done&quot; å‚æ•° è¯´æ˜ -t æ˜¯åŠ å…¥æ—¶é—´æˆ³ -f è·Ÿéšæœ€æ–°çš„æ—¥å¿—æ‰“å° â€“tail æ•°å­— æ˜¾ç¤ºæœ€åå¤šå°‘æ¡ æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹ 1docker top å®¹å™¨ID è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’ 1docker exec -it å®¹å™¨ID bashShell å…¶ä»–ï¼š 1docker exec -it å®¹å™¨ID ls -l /tmp é‡æ–°è¿›å…¥ docker attach å®¹å™¨ ID ==ä¸Šè¿°ä¸¤ä¸ªåŒºåˆ«== attach ç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ exec æ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹ å››ã€å°æ€»ç»“å¸¸ç”¨å‘½ä»¤ï¼š Docker å‘½ä»¤æ€»ç»“ï¼š æŒ‡ä»¤ è‹±æ–‡ è¯´æ˜ attach Attach to a running container å½“å‰ shell ä¸‹ attach è¿æ¥æŒ‡å®šè¿è¡Œé•œåƒ build Build an image from a Dockerfile é€šè¿‡ Dockerfile å®šåˆ¶é•œåƒ commit Create a new image from a container changes æäº¤å½“å‰å®¹å™¨ä¸ºæ–°çš„é•œåƒ cp Copy files/folders from the containers filesystem to the host path ä»å®¹å™¨ä¸­æ‹·è´æŒ‡å®šæ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¿ä¸»æœºä¸­ create Create a new container åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼ŒåŒ runï¼Œä½†ä¸å¯åŠ¨å®¹å™¨ diff Inspect changes on a containerâ€™s filesystem æŸ¥çœ‹ docker å®¹å™¨å˜åŒ– events Get real time events from the server ä» docker æœåŠ¡è·å–å®¹å™¨å®æ—¶äº‹ä»¶ exec Run a command in an existing container åœ¨å·²å­˜åœ¨çš„å®¹å™¨ä¸Šè¿è¡Œå‘½ä»¤ export Stream the contents of a container as a tar archive å¯¼å‡ºå®¹å™¨çš„å†…å®¹æµä½œä¸ºä¸€ä¸ª tar å½’æ¡£æ–‡ä»¶[å¯¹åº” import ] history Show the history of an image å±•ç¤ºä¸€ä¸ªé•œåƒå½¢æˆå†å² images List images åˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ import Create a new filesystem image from the contents of a tarball ä» tar åŒ…ä¸­çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿæ˜ åƒ[å¯¹åº” export] info Display system-wide information æ˜¾ç¤ºç³»ç»Ÿç›¸å…³ä¿¡æ¯ inspect Return low-level information on a container æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ kill Kill a running container kill æŒ‡å®š docker å®¹å™¨ load Load an image from a tar archive ä»ä¸€ä¸ª tar åŒ…ä¸­åŠ è½½ä¸€ä¸ªé•œåƒ[å¯¹åº” save] login Register or Login to the docker registry server æ³¨å†Œæˆ–è€…ç™»é™†ä¸€ä¸ª docker æºæœåŠ¡å™¨ logout Log out from a Docker registry server ä»å½“å‰ Docker registry é€€å‡º logs Fetch the logs of a container è¾“å‡ºå½“å‰å®¹å™¨æ—¥å¿—ä¿¡æ¯ port Lookup the public-facing port which is NAT-ed to PRIVATE_PORT æŸ¥çœ‹æ˜ å°„ç«¯å£å¯¹åº”çš„å®¹å™¨å†…éƒ¨æºç«¯å£ pause Pause all processes within a container æš‚åœå®¹å™¨ ps List containers åˆ—å‡ºå®¹å™¨åˆ—è¡¨ pull Pull an image or a repository from the docker registry server ä» docker é•œåƒæºæœåŠ¡å™¨æ‹‰å–æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒ push Push an image or a repository to the docker registry server æ¨é€æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒè‡³ docker æºæœåŠ¡å™¨ restart Restart a running container é‡å¯è¿è¡Œçš„å®¹å™¨ rm Remove one or more containers ç§»é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ rmi Remove one or more images ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ[æ— å®¹å™¨ä½¿ç”¨è¯¥é•œåƒæ‰å¯åˆ é™¤ï¼Œå¦åˆ™éœ€åˆ é™¤ç›¸å…³å®¹å™¨æ‰å¯ç»§ç»­æˆ– -f å¼ºåˆ¶åˆ é™¤] run Run a command in a new container åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤ save Save an image to a tar archive ä¿å­˜ä¸€ä¸ªé•œåƒä¸ºä¸€ä¸ª tar åŒ…[å¯¹åº” load] search Search for an image on the Docker Hub åœ¨ docker hub ä¸­æœç´¢é•œåƒ start Start a stopped containers å¯åŠ¨å®¹å™¨ stop Stop a running containers åœæ­¢å®¹å™¨ tag Tag an image into a repository ç»™æºä¸­é•œåƒæ‰“æ ‡ç­¾ top Lookup the running processes of a container æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ unpause Unpause a paused container å–æ¶ˆæš‚åœå®¹å™¨ version Show the docker version information æŸ¥çœ‹ docker ç‰ˆæœ¬å· wait Block until a container stops, then print its exit code æˆªå–å®¹å™¨åœæ­¢æ—¶çš„é€€å‡ºçŠ¶æ€å€¼ æ›´è¯¦ç»†è¯·å‚è€ƒï¼šspringboot ä¹‹ docker åšå®¢","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Docker","slug":"Docker","permalink":"http://blog.oy6090.top/tags/Docker/"}]},{"title":"SpringCloud Alibaba Seataå¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡","slug":"SpringCloud Alibaba Seataå¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡","date":"2020-11-16T16:00:00.000Z","updated":"2021-01-20T14:49:15.216Z","comments":true,"path":"posts/a8da4fb0.html","link":"","permalink":"http://blog.oy6090.top/posts/a8da4fb0.html","excerpt":"","text":"SpringCloud Alibaba Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡ä¸€ã€åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜â‘  åˆ†å¸ƒå¼å‰â€‹ å•æœºå•åº“æ²¡è¿™ä¸ªé—®é¢˜ ä» 1ï¼š 1 -&gt; 1:N -&gt; N: N â‘¡ åˆ†å¸ƒå¼ä¹‹åâ€‹ å•ä½“åº”ç”¨è¢«æ‹†åˆ†æˆå¾®æœåŠ¡åº”ç”¨ï¼Œ åŸæ¥çš„ä¸‰ä¸ªæ¨¡å—è¢«æ‹†åˆ†æˆä¸‰ä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„æ•°æ®æºã€‚ â€‹ ä¸šåŠ¡æ“ä½œéœ€è¦è°ƒç”¨ä¸‰ä¸ªæœåŠ¡æ¥å®Œæˆã€‚ æ­¤æ—¶æ¯ä¸ªæœåŠ¡å†…éƒ¨çš„æ•°æ®ä¸€è‡´æ€§ç”±æœ¬åœ°äº‹åŠ¡æ¥ä¿è¯ï¼Œ ä½†æ˜¯å…¨å±€çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ²¡æ³•ä¿è¯ã€‚ â‘¢ ä¸€å¥è¯â€‹ ä¸€æ¬¡ä¸šåŠ¡æ“ä½œéœ€è¦è·¨å¤šä¸ªæ•°æ®æºæˆ–éœ€è¦è·¨å¤šä¸ªç³»ç»Ÿè¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼Œ å°±ä¼šäº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ ã€‚ äºŒã€Seata ç®€ä»‹â‘  æ˜¯ä»€ä¹ˆâ€‹ Seata æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œ è‡´åŠ›äºåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹æä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ â€‹ å®˜ç½‘åœ°å€ http://seata.io/zh-cn/ â‘¡ èƒ½å¹²å˜›â€‹ ä¸€ä¸ªå…¸å‹çš„åˆ†å¸ƒå¼äº‹åŠ¡è¿‡ç¨‹ åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†è¿‡ç¨‹çš„-ID+ä¸‰ç»„ä»¶æ¨¡å‹ Transaction ID XID å…¨å±€å”¯ä¸€çš„äº‹åŠ¡ ID 3 ç»„ä»¶æ¦‚å¿µ ==Transaction Coordinator(TC)==äº‹åŠ¡åè°ƒå™¨ï¼Œ ç»´æŠ¤å…¨å±€äº‹åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼Œ è´Ÿè´£åè°ƒå¹¶é©±åŠ¨å…¨å±€äº‹åŠ¡çš„æäº¤æˆ–å›æ»š; ==Transaction Manager(TM)==æ§åˆ¶å…¨å±€äº‹åŠ¡çš„è¾¹ç•Œï¼Œ è´Ÿè´£å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œ å¹¶æœ€ç»ˆå‘èµ·å…¨å±€æäº¤æˆ–å…¨å±€å›æ»šçš„å†³è®®; ==Resource Manager(RM)==æ§åˆ¶åˆ†æ”¯äº‹åŠ¡ï¼Œ è´Ÿè´£åˆ†æ”¯æ³¨å†Œï¼Œ çŠ¶æ€æ±‡æŠ¥ï¼Œ å¹¶æ¥æ”¶äº‹åŠ¡åè°ƒå™¨çš„æŒ‡ä»¤ï¼Œ é©±åŠ¨åˆ†æ”¯ï¼ˆæœ¬åœ°ï¼‰ äº‹åŠ¡çš„æäº¤å’Œå›æ»šï¼› å¤„ç†è¿‡ç¨‹ å»å“ªä¸‹ å‘å¸ƒè¯´æ˜: https://github.com/seata/seata/releases æ€ä¹ˆç© Spring æœ¬åœ°@Transactional å…¨å±€@GlobalTransactional ä¸‰ã€Seata-Server å®‰è£…â‘  å®˜ç½‘åœ°å€1http:&#x2F;&#x2F;seata.io&#x2F;zh-cn&#x2F; â‘¡ ä¸‹è½½ç‰ˆæœ¬ â‘¢ ä¿®æ”¹é…ç½®æ–‡ä»¶ seata-server-0.9.0.zip è§£å‹åˆ°æŒ‡å®šç›®å½•å¹¶ä¿®æ”¹ conf ç›® å½•ä¸‹çš„ file.conf é…ç½®æ–‡ä»¶ å…ˆå¤‡ä»½åŸå§‹ file.conf æ–‡ä»¶ ã€ ä¸»è¦ä¿®æ”¹ï¼š è‡ªå®šä¹‰äº‹åŠ¡ç»„åç§°+äº‹åŠ¡æ—¥å¿—å­˜å‚¨æ¨¡å¼ä¸º db+æ•°æ®åº“è¿æ¥ä¿¡æ¯ file.conf service æ¨¡å— 1vgroup_mapping.fsp_tx_group &#x3D; &quot;default&quot; store æ¨¡å— 1234mode &#x3D; &quot;db&quot;url &#x3D; &quot;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;seata&quot;user &#x3D; &quot;root&quot;password &#x3D; &quot;ä½ è‡ªå·±çš„å¯†ç &quot; â‘£ mysql5.7 æ•°æ®åº“æ–°å»ºåº“ seata1create database seata; â‘¤ åœ¨ seata åº“é‡Œå»ºè¡¨å»º è¡¨ db_store.sql åœ¨ \\seata-server-0.9.0\\seata\\conf ç›® å½• é‡Œ é¢ db_store.sq 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152-- the table to store GlobalSession datadrop table if exists `global_table`;create table `global_table` ( `xid` varchar(128) not null, `transaction_id` bigint, `status` tinyint not null, `application_id` varchar(32), `transaction_service_group` varchar(32), `transaction_name` varchar(128), `timeout` int, `begin_time` bigint, `application_data` varchar(2000), `gmt_create` datetime, `gmt_modified` datetime, primary key (`xid`), key `idx_gmt_modified_status` (`gmt_modified`, `status`), key `idx_transaction_id` (`transaction_id`));-- the table to store BranchSession datadrop table if exists `branch_table`;create table `branch_table` ( `branch_id` bigint not null, `xid` varchar(128) not null, `transaction_id` bigint , `resource_group_id` varchar(32), `resource_id` varchar(256) , `lock_key` varchar(128) , `branch_type` varchar(8) , `status` tinyint, `client_id` varchar(64), `application_data` varchar(2000), `gmt_create` datetime, `gmt_modified` datetime, primary key (`branch_id`), key `idx_xid` (`xid`));-- the table to store lock datadrop table if exists `lock_table`;create table `lock_table` ( `row_key` varchar(128) not null, `xid` varchar(96), `transaction_id` long , `branch_id` long, `resource_id` varchar(256) , `table_name` varchar(32) , `pk` varchar(36) , `gmt_create` datetime , `gmt_modified` datetime, primary key(`row_key`)); â‘¥ ä¿® æ”¹ seata-server-0.9.0\\seata\\conf ç›® å½• ä¸‹ çš„ registry.conf é…ç½®æ–‡ä»¶ ã€123456789registry &#123; # file ã€nacos ã€eurekaã€redisã€zkã€consulã€etcd3ã€sofa type = &quot;nacos&quot; nacos &#123; serverAddr = &quot;localhost:8848&quot; namespace = &quot;&quot; cluster = &quot;default&quot; &#125; ==ç›®çš„æ˜¯==ï¼š æŒ‡æ˜æ³¨å†Œä¸­å¿ƒä¸º nacosï¼Œ åŠä¿®æ”¹ nacos è¿æ¥ä¿¡æ¯ â‘¦ å…ˆå¯åŠ¨ Nacos ç«¯å£å· 8848â‘§ å†å¯åŠ¨ seata-server seata-server.bat å››ã€è®¢å•/åº“å­˜/è´¦æˆ·ä¸šåŠ¡æ•°æ®åº“å‡†å¤‡â‘  ä»¥ä¸‹æ¼”ç¤ºéƒ½éœ€è¦å…ˆå¯åŠ¨ Nacos åå¯åŠ¨ Seataï¼Œ ä¿è¯ä¸¤ä¸ªéƒ½ OK â‘¡ åˆ†å¸ƒå¼äº‹åŠ¡ä¸šåŠ¡è¯´æ˜==ä¸šåŠ¡è¯´æ˜== ä¸‹è®¢å•â€“&gt;æ‰£åº“å­˜â€“&gt;å‡è´¦æˆ·ï¼ˆ ä½™é¢ï¼‰ â‘¢ åˆ›å»ºä¸šåŠ¡æ•°æ®åº“ seata_order: å­˜å‚¨è®¢å•çš„æ•°æ®åº“ seata_storage:å­˜å‚¨åº“å­˜çš„æ•°æ®åº“ seata_account: å­˜å‚¨è´¦æˆ·ä¿¡æ¯çš„æ•°æ®åº“ å»ºè¡¨ SQL 123CREATE DATABASE seata_orderï¼›CREATE DATABASE seata_storageï¼›CREATE DATABASE seata_account; â‘£ æŒ‰ç…§ä¸Šè¿° 3 åº“åˆ†åˆ«å»ºå¯¹åº”ä¸šåŠ¡è¡¨ seata_order åº“ä¸‹å»º t_order è¡¨ 12345678910CREATE TABLE t_order( `id` BIGINT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY, `user_id` BIGINT(11) DEFAULT NULL COMMENT &#x27;ç”¨æˆ· id&#x27;, `product_id` BIGINT(11) DEFAULT NULL COMMENT &#x27;äº§å“ id&#x27;, `count` INT(11) DEFAULT NULL COMMENT &#x27;æ•°é‡&#x27;, `money` DECIMAL(11,0) DEFAULT NULL COMMENT &#x27;é‡‘é¢&#x27;, `status` INT(1) DEFAULT NULL COMMENT &#x27;è®¢å•çŠ¶æ€ï¼š 0ï¼š åˆ›å»ºä¸­; 1ï¼š å·²å®Œç»“&#x27;) ENGINE=INNODB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;SELECT * FROM t_order; seata_storage åº“ä¸‹å»º t_storage è¡¨ 12345678910CREATE TABLE t_storage( `id` BIGINT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY, `product_id` BIGINT(11) DEFAULT NULL COMMENT &#x27;äº§å“ id&#x27;, `total` INT(11) DEFAULT NULL COMMENT &#x27;æ€»åº“å­˜&#x27;, `used` INT(11) DEFAULT NULL COMMENT &#x27;å·²ç”¨åº“å­˜&#x27;, `residue` INT(11) DEFAULT NULL COMMENT &#x27;å‰©ä½™åº“å­˜&#x27;) ENGINE=INNODB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;INSERT INTO t_storage(`id`,`product_id`,`total`,`used`,`residue`)VALUES(&#x27;1&#x27;,&#x27;1&#x27;,&#x27;100&#x27;,&#x27;0&#x27;,&#x27;100&#x27;);SELECT * FROM t_storage; seata_account åº“ä¸‹å»º t_account è¡¨ 12345678910CREATE TABLE t_account( `id` BIGINT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT &#x27;id&#x27;, `user_id` BIGINT(11) DEFAULT NULL COMMENT &#x27;ç”¨æˆ· id&#x27;, `total` DECIMAL(10,0) DEFAULT NULL COMMENT &#x27;æ€»é¢åº¦&#x27;, `used` DECIMAL(10,0) DEFAULT NULL COMMENT &#x27;å·²ç”¨ä½™é¢&#x27;, `residue` DECIMAL(10,0) DEFAULT &#x27;0&#x27; COMMENT &#x27;å‰©ä½™å¯ç”¨é¢åº¦&#x27;) ENGINE=INNODB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;INSERT INTO seata_account.t_account(`id`,`user_id`,`total`,`used`,`residue`)VALUES(&#x27;1&#x27;,&#x27;1&#x27;,&#x27;1000&#x27;,&#x27;0&#x27;,&#x27;1000&#x27;)SELECT * FROM t_account; â‘¤ æŒ‰ç…§ä¸Šè¿° 3 åº“åˆ†åˆ«å»ºå¯¹åº”çš„å›æ»šæ—¥å¿—è¡¨ è®¢å•-åº“å­˜-è´¦æˆ· 3 ä¸ªåº“ä¸‹éƒ½éœ€è¦å»ºå„è‡ªçš„å›æ»šæ—¥å¿—è¡¨ \\seata-server-0.9.0\\seata\\conf ç›®å½•ä¸‹çš„ db_undo_log.sql å»ºè¡¨ SQL 1234567891011121314drop table `undo_log`;CREATE TABLE `undo_log` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `branch_id` bigint(20) NOT NULL, `xid` varchar(100) NOT NULL, `context` varchar(128) NOT NULL, `rollback_info` longblob NOT NULL, `log_status` int(11) NOT NULL, `log_created` datetime NOT NULL, `log_modified` datetime NOT NULL, `ext` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `ux_undo_log` (`xid`,`branch_id`)) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; â‘¥ æœ€ç»ˆæ•ˆæœ äº”ã€è®¢å•/åº“å­˜/è´¦æˆ·ä¸šåŠ¡å¾®æœåŠ¡å‡†å¤‡1. ä¸šåŠ¡éœ€æ±‚ ä¸‹è®¢å•-&gt;å‡åº“å­˜-&gt;æ‰£ä½™é¢-&gt;æ”¹ï¼ˆè®¢å•ï¼‰ çŠ¶æ€ 2. æ–°å»ºè®¢å• Order-Module å»º Module : seata-order-service2001 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;dependencies&gt; &lt;!--nacos--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--seata--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-seata&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;seata-all&lt;/artifactId&gt; &lt;groupId&gt;io.seata&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.seata&lt;/groupId&gt; &lt;artifactId&gt;seata-all&lt;/artifactId&gt; &lt;version&gt;0.9.0&lt;/version&gt; &lt;/dependency&gt; &lt;!--feign--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--web-actuator--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--mysql-druid--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.37&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 1234567891011121314151617181920212223242526272829303132server: port: 2001spring: application: name: seata-order-service cloud: alibaba: seata: # è‡ªå®šä¹‰äº‹åŠ¡ç»„åç§°éœ€è¦ä¸seata-serverä¸­çš„å¯¹åº” tx-service-group: fsp_tx_group nacos: discovery: server-addr: localhost:8848 datasource: # å½“å‰æ•°æ®æºæ“ä½œç±»å‹ type: com.alibaba.druid.pool.DruidDataSource # mysqlé©±åŠ¨ç±» driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://localhost:3306/seata_order username: root password: 6090feign: hystrix: enabled: falselogging: level: io: seata: infomybatis: mapper-locations: classpath:mapper/*.xml file.conf â€‹ æ‹·è´ seata-server/conf ç›®å½•ä¸‹çš„ file.conf åˆ°é¡¹ç›® resources é‡Œé¢ registry.conf â€‹ æ‹·è´ seata-server/conf ç›®å½•ä¸‹çš„ registry.conf åˆ°é¡¹ç›® resources é‡Œé¢ domain CommonResult 123456789101112@Data@AllArgsConstructor@NoArgsConstructorpublic class CommonResult&lt;T&gt;&#123; private Integer code; private String message; private T date; public CommonResult(Integer code, String message)&#123; this(code, message,null); &#125;&#125; Order 12345678910111213141516@Data@AllArgsConstructor@NoArgsConstructorpublic class Order &#123; private Long userId; private Long productId; private Integer count; private BigDecimal money; private Integer status; //è®¢å•çŠ¶æ€ï¼š 0 åˆ›å»ºä¸­ï¼› 1:å·²å®Œç»“&#125; Dao æ¥å£åŠå®ç° OrderDao 123456789@Mapperpublic interface OrderDao &#123; // æ–°å»ºè®¢å• void create(Order order); // ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œä»é›¶å¼€å§‹ void update(@Param(&quot;userId&quot;)Long userId, @Param(&quot;status&quot;) Integer status);&#125; resources æ–‡ ä»¶ å¤¹ ä¸‹ æ–° å»º mapper æ–‡ ä»¶ å¤¹ å æ·» åŠ  OrderMapper.xml 123456789101112131415161718192021222324252627&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.oy.springcloud.dao.OrderDao&quot;&gt; &lt;resultMap id=&quot;BaseResultMap&quot; type=&quot;com.oy.springcloud.domain.Order&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot; jdbcType=&quot;BIGINT&quot;&gt;&lt;/id&gt; &lt;result column=&quot;user_id&quot; property=&quot;userId&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;result column=&quot;product_id&quot; property=&quot;productId&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;result column=&quot;count&quot; property=&quot;count&quot; jdbcType=&quot;INTEGER&quot;/&gt; &lt;result column=&quot;money&quot; property=&quot;money&quot; jdbcType=&quot;DECIMAL&quot;/&gt; &lt;result column=&quot;status&quot; property=&quot;status&quot; jdbcType=&quot;INTEGER&quot;/&gt; &lt;/resultMap&gt; &lt;!-- void create(Order order);--&gt; &lt;insert id=&quot;create&quot;&gt; insert into t_order(id,user_id, product_id, count, money,status) values(null,#&#123;userId&#125;,#&#123;productId&#125;,#&#123;count&#125;,#&#123;money&#125;,0); &lt;/insert&gt; &lt;!-- void update(@Param(&quot;useId&quot;)Long userId, @Param(&quot;status&quot;) Integer status);--&gt; &lt;update id=&quot;update&quot;&gt; update t_order set status = 1 where user_id=#&#123;userId&#125; and status = #&#123;status&#125;; &lt;/update&gt;&lt;/mapper&gt; Service æ¥å£åŠå®ç° OrderService 123public interface OrderService &#123; void create(Order order);&#125; OrderServiceImpl 1234567891011121314151617181920212223242526272829303132333435@Service@Slf4jpublic class OrderServiceImpl implements OrderService &#123; @Resource private OrderDao orderDao; @Resource private StorageService storageService; @Resource private AccountService accountService; @Override @GlobalTransactional(name = &quot;fsp-create-order&quot;,rollbackFor = Exception.class) public void create(Order order) &#123; log.info(&quot;-----&gt;å¼€å§‹æ–°å»ºè®¢å•&quot;); //æ–°å»ºè®¢å• orderDao.create(order); //æ‰£å‡åº“å­˜ log.info(&quot;-----&gt;è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨åº“å­˜ï¼Œ åšæ‰£å‡ Count&quot;); storageService.decrease(order.getProductId(),order.getCount()); log.info(&quot;-----&gt;è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨åº“å­˜ï¼Œ åšæ‰£å‡ end&quot;); //æ‰£å‡è´¦æˆ· log.info(&quot;-----&gt;è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨è´¦æˆ·ï¼Œ åšæ‰£å‡ Money&quot;); accountService.decrease(order.getUserId(),order.getMoney()); log.info(&quot;-----&gt;è®¢å•å¾®æœåŠ¡å¼€å§‹è°ƒç”¨è´¦æˆ·ï¼Œ åšæ‰£å‡ end&quot;); //ä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œ ä»é›¶åˆ° 1 ä»£è¡¨å·²ç»å®Œæˆ log.info(&quot;-----&gt;ä¿®æ”¹è®¢å•çŠ¶æ€å¼€å§‹&quot;); orderDao.update(order.getUserId(),0); log.info(&quot;-----&gt;ä¿®æ”¹è®¢å•çŠ¶æ€ç»“æŸ&quot;); log.info(&quot;-----&gt;ä¸‹è®¢å•ç»“æŸäº†&quot;); &#125;&#125; StorageService 123456@FeignClient(value = &quot;seata-storage-service&quot;)public interface StorageService &#123; @PostMapping(value = &quot;/storage/decrease&quot;) CommonResult decrease(@RequestParam(&quot;productId&quot;) Long productId, @RequestParam(&quot;count&quot;) Integer count);&#125; AccountService 123456@FeignClient(value = &quot;seata-account-service&quot;)public interface AccountService &#123; @PostMapping(value = &quot;/account/decrease&quot;) CommonResult decrease(@RequestParam(&quot;userId&quot;) Long userId, @RequestParam(&quot;money&quot;) BigDecimal money);&#125; Controller 12345678910111213@RestControllerpublic class OrderController &#123; @Resource private OrderService orderService; @GetMapping(&quot;/order/create&quot;) public CommonResult create(Order order) &#123; orderService.create(order); return new CommonResult(200,&quot;è®¢å•åˆ›å»ºæˆåŠŸ&quot;); &#125;&#125; Config é…ç½® MyBatisConfig 12345@Configuration@MapperScan(&#123;&quot;com.oy.springcloud.dao&quot;&#125;)public class MyBatisConfig &#123;&#125; DataSourceProxyConfig 123456789101112131415161718192021222324252627282930313233343536373839404142package com.oy.springcloud.config;import com.alibaba.druid.pool.DruidDataSource;import io.seata.rm.datasource.DataSourceProxy;import org.apache.ibatis.session.SqlSessionFactory;import org.mybatis.spring.SqlSessionFactoryBean;import org.mybatis.spring.transaction.SpringManagedTransactionFactory;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.core.io.support.PathMatchingResourcePatternResolver;import javax.sql.DataSource;@Configurationpublic class DataSourceProxyConfig &#123; @Value(&quot;$&#123;mybatis.mapperLocations&#125;&quot;) private String mapperLocations; @Bean @ConfigurationProperties(prefix = &quot;spring.datasource&quot;) public DataSource druidDataSource()&#123; return new DruidDataSource(); &#125; @Bean public DataSourceProxy dataSourceProxy(DataSource dataSource) &#123; return new DataSourceProxy(dataSource); &#125; @Bean public SqlSessionFactory sqlSessionFactoryBean(DataSourceProxy dataSourceProxy) throws Exception &#123; SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean(); sqlSessionFactoryBean.setDataSource(dataSourceProxy); sqlSessionFactoryBean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(mapperLocations)); sqlSessionFactoryBean.setTransactionFactory(new SpringManagedTransactionFactory()); return sqlSessionFactoryBean.getObject(); &#125;&#125; ä¸»å¯åŠ¨ 12345678@EnableDiscoveryClient@EnableFeignClients@SpringBootApplication(exclude = DataSourceAutoConfiguration.class) // å–æ¶ˆæ•°æ®æºè‡ªåŠ¨åˆ›å»ºçš„é…ç½®public class SeataOrderMainApp2001 &#123; public static void main(String[] args) &#123; SpringApplication.run(SeataOrderMainApp2001.class, args); &#125;&#125; 3.æ–°å»ºåº“å­˜ Storage-Module **seata-order-service2002 ** POM 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;dependencies&gt; &lt;!--nacos--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--seata--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-seata&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;seata-all&lt;/artifactId&gt; &lt;groupId&gt;io.seata&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.seata&lt;/groupId&gt; &lt;artifactId&gt;seata-all&lt;/artifactId&gt; &lt;version&gt;0.9.0&lt;/version&gt; &lt;/dependency&gt; &lt;!--feign--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.37&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt; YML 1234567891011121314151617181920212223242526server: port: 2002spring: application: name: seata-storage-service cloud: alibaba: seata: tx-service-group: fsp_tx_group nacos: discovery: server-addr: localhost:8848 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://localhost:3306/seata_storage username: root password: 123456logging: level: io: seata: infomybatis: mapperLocations: classpath:mapper/*.xml file.conf registry.conf æ‹·è´ seata-server/conf ç›®å½•ä¸‹çš„file.conf ã€registry.conf åˆ°é¡¹ç›® resources é‡Œé¢ domain CommonResult 12345678910111213@Data@AllArgsConstructor@NoArgsConstructorpublic class CommonResult&lt;T&gt; &#123; private Integer code; private String message; private T data; public CommonResult(Integer code, String message) &#123; this(code,message,null); &#125;&#125; Storage 1234567891011121314151617@Datapublic class Storage &#123; private Long id; // äº§å“id private Long productId; // æ€»åº“å­˜ private Integer total; // å·²ç”¨åº“å­˜ private Integer used; // å‰©ä½™åº“å­˜ private Integer residue;&#125; Dao æ¥å£åŠå®ç° StorageDao 12345678@Mapperpublic interface StorageDao &#123; /** * æ‰£å‡åº“å­˜ä¿¡æ¯ */ void decrease(@Param(&quot;productId&quot;)Long productId, @Param(&quot;count&quot;) Integer count);&#125; resources æ–‡ ä»¶ å¤¹ ä¸‹ æ–° å»º mapper æ–‡ ä»¶ å¤¹ å æ·» åŠ  StorageMapper.xml 123456789101112131415161718192021&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.oy.springcloud.dao.StorageDao&quot;&gt; &lt;resultMap id=&quot;BaseResultMap&quot; type=&quot;com.oy.springcloud.domain.Storage&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;result column=&quot;product_id&quot; property=&quot;productId&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;result column=&quot;total&quot; property=&quot;total&quot; jdbcType=&quot;INTEGER&quot;/&gt; &lt;result column=&quot;used&quot; property=&quot;used&quot; jdbcType=&quot;INTEGER&quot;/&gt; &lt;result column=&quot;residue&quot; property=&quot;residue&quot; jdbcType=&quot;INTEGER&quot;/&gt; &lt;/resultMap&gt; &lt;!--void decrease(@Param(&quot;productId&quot;)Long productId, @Param(&quot;count&quot;) Integer count);--&gt; &lt;update id=&quot;decrease&quot;&gt; UPDATE t_storage SET used = used + #&#123;count&#125;, residue = residue - #&#123;count&#125; WHERE product_id = #&#123;productId&#125; &lt;/update&gt;&lt;/mapper&gt; Service æ¥å£åŠå®ç° StorageService 1234567public interface StorageService &#123; /** * æ‰£å‡åº“å­˜ */ void decrease(Long productId, Integer count);&#125; StorageServiceImpl 12345678910111213141516171819@Service@Slf4jpublic class StorageServiceImpl implements StorageService &#123; private static final Logger LOGGER = LoggerFactory.getLogger(StorageServiceImpl.class); @Resource private StorageDao storageDao; /** * æ‰£å‡åº“å­˜ */ @Override public void decrease(Long productId, Integer count) &#123; LOGGER.info(&quot;-------&gt;storage-service ä¸­æ‰£å‡åº“å­˜å¼€å§‹&quot;); storageDao.decrease(productId, count); LOGGER.info(&quot;-------&gt;storage-service ä¸­æ‰£å‡åº“å­˜ç»“æŸ&quot;); &#125;&#125; Controller 123456789101112131415@RestControllerpublic class StorageController &#123; @Autowired private StorageService storageService; /** * æ‰£å‡åº“å­˜ */ @RequestMapping(&quot;/storage/decrease&quot;) public CommonResult decrease(Long productId, Integer count)&#123; storageService.decrease(productId, count); return new CommonResult(200,&quot;æ‰£å‡åº“å­˜æˆåŠŸï¼ &quot;); &#125;&#125; Config é…ç½® MyBatisConfig 1234@Configuration@MapperScan(&#123;&quot;com.oy.springcloud.dao&quot;&#125;)public class MyBatisConfig &#123;&#125; DataSourceProxyConfig 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.oy.springcloud.config;import com.alibaba.druid.pool.DruidDataSource;import io.seata.rm.datasource.DataSourceProxy;import org.apache.ibatis.session.SqlSessionFactory;import org.mybatis.spring.SqlSessionFactoryBean;import org.mybatis.spring.transaction.SpringManagedTransactionFactory;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.core.io.support.PathMatchingResourcePatternResolver;import javax.sql.DataSource;/** * @Author OY * @Date 2020/11/16 */@Configurationpublic class DataSourceProxyConfig &#123; @Value(&quot;$&#123;mybatis.mapperLocations&#125;&quot;) private String mapperLocations; @Bean @ConfigurationProperties(prefix = &quot;spring.datasource&quot;) public DataSource druidDataSource()&#123; return new DruidDataSource(); &#125; @Bean public DataSourceProxy dataSourceProxy(DataSource dataSource) &#123; return new DataSourceProxy(dataSource); &#125; @Bean public SqlSessionFactory sqlSessionFactoryBean(DataSourceProxy dataSourceProxy) throws Exception &#123; SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean(); sqlSessionFactoryBean.setDataSource(dataSourceProxy); sqlSessionFactoryBean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(mapperLocations)); sqlSessionFactoryBean.setTransactionFactory(new SpringManagedTransactionFactory()); return sqlSessionFactoryBean.getObject(); &#125;&#125; ä¸»å¯åŠ¨ 12345678@SpringBootApplication@EnableDiscoveryClient@EnableFeignClientspublic class SeataStorageServiceApplication2002 &#123; public static void main(String[] args) &#123; SpringApplication.run(SeataStorageServiceApplication2002.class, args); &#125;&#125; 4.æ–°å»ºè´¦æˆ· Account-Module seata-account-service2003 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859 &lt;dependencies&gt; &lt;!--nacos--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--seata--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-seata&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;seata-all&lt;/artifactId&gt; &lt;groupId&gt;io.seata&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.seata&lt;/groupId&gt; &lt;artifactId&gt;seata-all&lt;/artifactId&gt; &lt;version&gt;0.9.0&lt;/version&gt; &lt;/dependency&gt; &lt;!--feign--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.37&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 123456789101112131415161718192021222324252627282930server: port: 2003spring: application: name: seata-account-service cloud: alibaba: seata: tx-service-group: fsp_tx_group nacos: discovery: server-addr: localhost:8848 datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://localhost:3306/seata_account username: root password: 6090feign: hystrix: enabled: falselogging: level: io: seata: infomybatis: mapperLocations: classpath:mapper/*.xml file.conf registry.conf domain CommonResult 12345678910111213@Data@AllArgsConstructor@NoArgsConstructorpublic class CommonResult&lt;T&gt; &#123; private Integer code; private String message; private T data; public CommonResult(Integer code, String message) &#123; this(code,message,null); &#125;&#125; Account 12345678910111213141516171819202122@Data@AllArgsConstructor@NoArgsConstructorpublic class Account &#123; private Long id; /** * ç”¨æˆ· id */ private Long userId; /** * æ€»é¢åº¦ */ private BigDecimal total; /** * å·²ç”¨é¢åº¦ */ private BigDecimal used; /** * å‰©ä½™é¢åº¦ */ private BigDecimal residue;&#125; Dao æ¥å£åŠå®ç° AccountDao 1234567@Mapperpublic interface AccountDao &#123; /** * æ‰£å‡è´¦æˆ·ä½™é¢ */ void decrease(@Param(&quot;userId&quot;) Long userId, @Param(&quot;money&quot;) BigDecimal money);&#125; resources æ–‡ ä»¶ å¤¹ ä¸‹ æ–° å»º mapper æ–‡ ä»¶ å¤¹ å æ·» åŠ  AccountMapper.xml 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.oy.springcloud.dao.AccountDao&quot;&gt; &lt;resultMap id=&quot;BaseResultMap&quot; type=&quot;com.oy.springcloud.domain.Account&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;result column=&quot;user_id&quot; property=&quot;userId&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;result column=&quot;total&quot; property=&quot;total&quot; jdbcType=&quot;DECIMAL&quot;/&gt; &lt;result column=&quot;used&quot; property=&quot;used&quot; jdbcType=&quot;DECIMAL&quot;/&gt; &lt;result column=&quot;residue&quot; property=&quot;residue&quot; jdbcType=&quot;DECIMAL&quot;/&gt; &lt;/resultMap&gt; &lt;update id=&quot;decrease&quot;&gt; UPDATE t_account SET residue = residue - #&#123;money&#125;,used = used + #&#123;money&#125; WHERE user_id = #&#123;userId&#125;; &lt;/update&gt;&lt;/mapper&gt; Service æ¥å£åŠå®ç° AccountService 123456public interface AccountService &#123; /** * æ‰£å‡è´¦æˆ·ä½™é¢ */ void decrease(@RequestParam(&quot;userId&quot;) Long userId, @RequestParam(&quot;money&quot;) BigDecimal money);&#125; AccountServiceImpl 1234567891011121314public class AccountServiceImpl implements AccountService &#123; private static final Logger LOGGER = LoggerFactory.getLogger(AccountServiceImpl.class); @Resource AccountDao accountDao; @Override public void decrease(Long userId, BigDecimal money) &#123; LOGGER.info(&quot;-------&gt;account-service ä¸­æ‰£å‡è´¦æˆ·ä½™é¢å¼€å§‹&quot;); try &#123; TimeUnit.SECONDS.sleep(20); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; accountDao.decrease(userId,money); LOGGER.info(&quot;-------&gt;account-service ä¸­æ‰£å‡è´¦æˆ·ä½™é¢ç»“æŸ&quot;); &#125;&#125; Controller 12345678910111213@RestControllerpublic class AccountController &#123; @Resource AccountService accountService; /** * æ‰£å‡è´¦æˆ·ä½™é¢ */ @RequestMapping(&quot;/account/decrease&quot;) public CommonResult decrease(@RequestParam(&quot;userId&quot;) Long userId, @RequestParam(&quot;money&quot;) BigDecimal money)&#123; accountService.decrease(userId,money);return new CommonResult(200,&quot;æ‰£å‡è´¦æˆ·ä½™é¢æˆåŠŸï¼ &quot;); &#125;&#125; Config é…ç½® MyBatisConfig 12345@Configuration@MapperScan(&#123;&quot;com.oy.springcloud.dao.AccountDao&quot;&#125;)public class MyBatisConfig &#123;&#125; DataSourceProxyConfig 123456789101112131415161718192021222324252627282930313233343536373839404142package com.oy.springcloud.config;import com.alibaba.druid.pool.DruidDataSource;import io.seata.rm.datasource.DataSourceProxy;import org.apache.ibatis.session.SqlSessionFactory;import org.mybatis.spring.SqlSessionFactoryBean;import org.mybatis.spring.transaction.SpringManagedTransactionFactory;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.core.io.support.PathMatchingResourcePatternResolver;import javax.sql.DataSource;@Configurationpublic class DataSourceProxyConfig &#123; @Value(&quot;$&#123;mybatis.mapperLocations&#125;&quot;) private String mapperLocations; @Bean @ConfigurationProperties(prefix = &quot;spring.datasource&quot;) public DataSource druidDataSource()&#123; return new DruidDataSource(); &#125; @Bean public DataSourceProxy dataSourceProxy(DataSource dataSource) &#123; return new DataSourceProxy(dataSource); &#125; @Bean public SqlSessionFactory sqlSessionFactoryBean(DataSourceProxy dataSourceProxy) throws Exception &#123; SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean(); sqlSessionFactoryBean.setDataSource(dataSourceProxy); sqlSessionFactoryBean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources(mapperLocations)); sqlSessionFactoryBean.setTransactionFactory(new SpringManagedTransactionFactory()); return sqlSessionFactoryBean.getObject(); &#125;&#125; ä¸»å¯åŠ¨ 123456789@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)@EnableDiscoveryClient@EnableFeignClientspublic class SeataAccountMainApp2003 &#123; public static void main(String[] args) &#123; SpringApplication.run(SeataAccountMainApp2003.class, args); &#125;&#125; æ³¨æ„ï¼šå¦‚æœæŠ¥é”™ A component required a bean of type &#39;com.oy.springcloud.dao.AccountDao&#39; that could not be found. è¯·åœ¨å¯åŠ¨ç±»ä¸ŠåŠ ï¼š å…­ã€Testâ‘  ä¸‹è®¢å•-&gt;å‡åº“å­˜-&gt;æ‰£ä½™é¢-&gt;æ”¹ï¼ˆè®¢å•ï¼‰ çŠ¶æ€ æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä¸€ä¸ª @GlobalTransactional æ³¨è§£åœ¨ä¸šåŠ¡æ–¹æ³•ä¸Šï¼› â‘¡ æ•°æ®åº“åˆå§‹åŒ–æƒ…å†µ â‘¢ æ­£å¸¸ä¸‹å• http://localhost:2001/order/create?userId=1&amp;producId=1&amp;count=10&amp;money=100 æ•°æ®åº“æƒ…å†µ â‘£ è¶…æ—¶å¼‚å¸¸ï¼Œ æ²¡åŠ @GlobalTransactional AccountServiceImpl æ·»åŠ è¶…æ—¶ æ•°æ®åº“æƒ…å†µ ä½™é¢å’Œåº“å­˜éƒ½å·²ç»æ‰£é™¤ï¼Œä½†æ˜¯è®¢å•çŠ¶æ€è¿˜æ˜¯æœªæ”¯ä»˜ï¼Œç»“æœå°±æ˜¯ï¼Œè¿™ä¸ªè®¢å•ä»è¦å†æ¬¡æ”¯ä»˜ æ•…éšœæƒ…å†µ å½“åº“å­˜å’Œè´¦æˆ·ä½™é¢æ‰£å‡åï¼Œ è®¢å•çŠ¶æ€å¹¶æ²¡æœ‰è®¾ç½®ä¸ºå·²ç»å®Œæˆï¼Œæ²¡æœ‰ä»é›¶æ”¹ä¸º 1 è€Œä¸”ç”±äº feign çš„é‡è¯•æœºåˆ¶ï¼Œ è´¦æˆ·ä½™é¢è¿˜æœ‰å¯èƒ½è¢«å¤šæ¬¡æ‰£å‡ â‘¤ è¶…æ—¶å¼‚å¸¸ï¼Œ æ·»åŠ @GlobalTransactional AccountServiceImpl æ·»åŠ è¶…æ—¶ OrderServiceImpl @GlobalTransactional ä¸‹å•åæ•°æ®åº“æ•°æ®å¹¶æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œ è®°å½•éƒ½æ·»åŠ ä¸è¿›æ¥ ä¸ƒã€Seata ä¹‹åŸç†ç®€ä»‹â‘  Seataâ€‹ 2019 å¹´ 1 æœˆä»½èš‚èšé‡‘æœå’Œé˜¿é‡Œå·´å·´å…±åŒå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ Simple Extensible Autonomous Transaction Architecture,ç®€å•å¯æ‰©å±•è‡ªæ²»äº‹åŠ¡æ¡†æ¶ 2020 èµ·åˆï¼Œ å‚åŠ å·¥ä½œåç”¨ 1.0 ä»¥åçš„ç‰ˆæœ¬ â‘¡ å†çœ‹ TC/TM/RM ä¸‰å¤§ç»„ä»¶åˆ†å¸ƒå¼äº‹åŠ¡çš„æ‰§è¡Œæµç¨‹ TM å¼€å¯åˆ†å¸ƒå¼äº‹åŠ¡(TM å‘ TC æ³¨å†Œå…¨å±€äº‹åŠ¡è®°å½•) æ¢ä¸šåŠ¡åœºæ™¯ï¼Œ ç¼–æ’æ•°æ®åº“ï¼Œ æœåŠ¡ç­‰äº‹åŠ¡å†…èµ„æºï¼ˆRM æŠ¥èµ„æºå‡†å¤‡çŠ¶æ€ï¼‰ TM ç»“æŸåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œ äº‹åŠ¡ä¸€é˜¶æ®µç»“æŸï¼ˆTM é€šçŸ¥ TC æ»šåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ TC æ±‡æ€»äº‹åŠ¡ä¿¡æ¯ï¼Œ å†³å®šåˆ†å¸ƒå¼äº‹åŠ¡æ˜¯æäº¤è¿˜æ˜¯å›æ»š TC é€šçŸ¥æ‰€æœ‰ RM æäº¤/å›æ»šèµ„æºï¼Œ äº‹åŠ¡äºŒé˜¶æ®µç»“æŸ â‘¢ AT æ¨¡å¼å¦‚ä½•åšåˆ°å¯¹ä¸šåŠ¡çš„æ— ä¾µå…¥ ä¸€é˜¶æ®µåŠ è½½ äºŒé˜¶æ®µæäº¤ äºŒé˜¶æ®µå›æ»š â‘£ è¡¥å……","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud Alibaba Sentinelå®ç°ç†”æ–­ä¸é™æµ","slug":"SpringCloud Alibaba Sentinelå®ç°ç†”æ–­ä¸é™æµ","date":"2020-11-12T16:00:00.000Z","updated":"2021-01-20T14:49:25.374Z","comments":true,"path":"posts/13005592.html","link":"","permalink":"http://blog.oy6090.top/posts/13005592.html","excerpt":"","text":"åšå®¢å‚è€ƒå­¦ä¹ è§†é¢‘ SpringCloud Alibaba Sentinel å®ç°ç†”æ–­ä¸é™æµä¸€ã€Sentinelâ‘  å®˜ç½‘ è‹±æ–‡ï¼š https://github.com/alibaba/Sentinel ä¸­æ–‡ï¼šhttps://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D â‘¡ æ˜¯ä»€ä¹ˆ ä¸€å¥è¯è§£é‡Šï¼Œ ä¹‹å‰æˆ‘ä»¬è®²è§£è¿‡çš„ Hystrix â‘¢ å»å“ªä¸‹â€‹ https://github.com/alibaba/Sentinel/releases â‘£ èƒ½å¹²å˜› â‘¤ æ€ä¹ˆç©https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_sentinel%E6%9C%8D%E5%8A%A1%E4%BD%BF%E7%94%A8%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE æœåŠ¡ä½¿ç”¨ä¸­çš„å„ç§é—®é¢˜ æœåŠ¡é›ªå´© æœåŠ¡é™çº§ æœåŠ¡ç†”æ–­ æœåŠ¡é™æµ äºŒã€å®‰è£… Sentinel æ§åˆ¶å°â‘  sentinel ç»„ä»¶ç”± 2 éƒ¨åˆ†ç»„æˆ åå° å‰å° 8080 â‘¡ å®‰è£…æ­¥éª¤ä¸‹è½½ï¼š https://github.com/alibaba/Sentinel/releases ä¸‹è½½åˆ°æœ¬åœ° sentinel-dashboard-1.8.0.jar è¿è¡Œå‘½ä»¤ å‰æï¼š java8 ç¯å¢ƒ OK 8080 ç«¯å£ä¸èƒ½è¢«å ç”¨ å‘½ä»¤ï¼š java -jar sentinel-dashboard-1.8.0.jar è®¿é—® sentinel ç®¡ç†ç•Œé¢ http://localhost:8080 ç™»å½•è´¦å·å¯†ç å‡ä¸º sentinel ä¸‰ã€åˆå§‹åŒ–æ¼”ç¤ºå·¥ç¨‹â‘  å¯åŠ¨ Nacos8848 æˆåŠŸ http://localhost:8848/nacos/#/login â‘¡ Module å»º Module cloudalibaba-sentinel-service8401 POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;dependencies&gt; &lt;dependency&gt;&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba nacos --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba sentinel-datasource-nacos åç»­åšæŒä¹…åŒ–ç”¨åˆ°--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt; &lt;artifactId&gt;sentinel-datasource-nacos&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba sentinel --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-sentinel&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--openfeign--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- SpringBootæ•´åˆWebç»„ä»¶+actuator --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æ—¥å¸¸é€šç”¨jaråŒ…é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;4.6.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 1234567891011121314151617181920212223242526272829303132server: port: 8401spring: application: name: cloudalibaba-sentinel-service cloud: nacos: discovery: server-addr: localhost:8848 #NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ sentinel: transport: dashboard: localhost:8080 #é…ç½®Sentinel dashboardåœ°å€ port: 8719 datasource: ds1: nacos: server-addr: localhost:8848 dataId: cloudalibaba-sentinel-service groupId: DEFAULT_GROUP data-type: json rule-type: flowmanagement: endpoints: web: exposure: include: &quot;*&quot;feign: sentinel: enabled: true # æ¿€æ´»Sentinelå¯¹Feignçš„æ”¯æŒ ä¸»å¯åŠ¨ 1234567@EnableDiscoveryClient@SpringBootApplicationpublic class MainApp8401 &#123; public static void main(String[] args) &#123; SpringApplication.run(MainApp8401.class, args); &#125;&#125; ä¸šåŠ¡ç±» FlowLimitController 12345678910111213@RestControllerpublic class FlowLimitController &#123; @GetMapping(&quot;/testA&quot;) public String testA()&#123; return &quot;-----testA&quot;; &#125; @GetMapping(&quot;/testB&quot;) public String testB()&#123; return &quot;----testB&quot;; &#125;&#125; â‘¢ å¯åŠ¨ Sentinel80801java -jar sentinel-dashboard-1.8.0 â‘£ å¯åŠ¨å¾®æœåŠ¡ 8401â‘¤ å¯åŠ¨ 8401 å¾®æœåŠ¡åæŸ¥çœ‹ sentienl æ§åˆ¶å° ç©ºç©ºå¦‚ä¹Ÿï¼Œ å•¥éƒ½æ²¡æœ‰ ==Sentinel é‡‡ç”¨çš„æ‡’åŠ è½½è¯´æ˜== æ‰§è¡Œä¸€æ¬¡è®¿é—®å³å¯ ç»“è®º sentinel8080 æ­£åœ¨ç›‘æ§å¾®æœåŠ¡ 8401 å››ã€æµæ§è§„åˆ™â‘  åŸºæœ¬ä»‹ç» â‘¡ æµæ§æ¨¡å¼ ç›´æ¥ï¼ˆé»˜è®¤ï¼‰ ç›´æ¥-&gt;å¿«é€Ÿå¤±è´¥ï¼Œ ç³»ç»Ÿé»˜è®¤ é…ç½®åŠè¯´æ˜ æµ‹è¯• å¿«é€Ÿç‚¹å‡»è®¿é—® http://localhost:8401/testA ç»“æœ æ€è€ƒï¼š ç›´æ¥è°ƒç”¨é»˜è®¤æŠ¥é”™ä¿¡æ¯ï¼Œ æŠ€æœ¯æ–¹é¢ OK butï¼Œ æ˜¯å¦åº”è¯¥æœ‰æˆ‘ä»¬è‡ªå·±çš„åç»­å¤„ç†ï¼Ÿç±»ä¼¼æœ‰ä¸€ä¸ª fallback çš„å…œåº•æ–¹æ³•ï¼Ÿ å…³è” æ˜¯ä»€ä¹ˆï¼Ÿ å½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œ å°±é™æµè‡ªå·±,å½“ä¸ A å…³è”çš„èµ„æº B è¾¾åˆ°é˜ˆå€¼åï¼Œ å°±é™æµè‡ªå·± B æƒ¹äº‹ï¼Œ A æŒ‚äº† ã€‚ é…ç½® A postman æ¨¡æ‹Ÿå¹¶å‘å¯†é›†è®¿é—® testB è®¿é—® testB æˆåŠŸ postman é‡Œæ–°å»ºå¤šçº¿ç¨‹é›†åˆç»„ å°†è®¿é—®åœ°å€æ·»åŠ è¿›æ–°çº¿ç¨‹ç»„Runï¼š å¤§æ‰¹é‡çº¿ç¨‹é«˜å¹¶å‘è®¿é—® Bï¼Œ å¯¼è‡´ A å¤±æ•ˆäº† è¿è¡Œåå‘ç° testA æŒ‚äº† ç‚¹å‡»è®¿é—® http://localhost:8401/testA ç»“æœï¼š Blocked by Sentinel (flow limiting) é“¾è·¯ é“¾è·¯æ¨¡å¼é’ˆå¯¹çš„æ˜¯ä¸Šçº§æ¥å£ï¼Œç²’åº¦æ§åˆ¶çš„æ›´ç»†ã€‚ è¿™ä¸ªæ¨¡å¼éœ€è¦é…åˆ@SentinelResource æ³¨è§£ä½¿ç”¨ï¼Œåœ¨èµ„æºä¸Šæ·»åŠ  @SentinelResource æ³¨è§£ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªèµ„æºï¼ŒåŒæ—¶ç»™å‡ºèµ„æºåã€‚ æ–°å¢ TestService æ¥å£ç±»ï¼š 123public interface TestService &#123; void message();&#125; æ–°å¢ TestServiceImpl ç±»ï¼Œè¯¥ç±»çš„ message()æ–¹æ³•ä¸ŠåŠ ä¸Š@SentinelResource(â€œmessageâ€)æ³¨è§£ï¼Œè¡¨ç¤ºèµ„æºåä¸º messgeï¼š 12345678910111213import com.alibaba.csp.sentinel.annotation.SentinelResource;import com.example.mallorder.service.TestService;import org.springframework.stereotype.Service;@Servicepublic class TestServiceImpl implements TestService &#123; @Override @SentinelResource(&quot;message&quot;) public void message() &#123; System.out.println(&quot;message&quot;); &#125;&#125; ä¿®æ”¹ TestController ç±»ï¼Œè®©ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•éƒ½è°ƒç”¨ TestService æä¾›çš„æ–¹æ³•ï¼š 12345678910111213141516171819202122package com.oy.springcloud.config;import com.alibaba.csp.sentinel.adapter.servlet.CommonFilter;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;@Configurationpublic class FilterContextConfig &#123; @Bean public FilterRegistrationBean sentinelFilterRegistration() &#123; FilterRegistrationBean registration = new FilterRegistrationBean(); registration.setFilter(new CommonFilter()); registration.addUrlPatterns(&quot;/*&quot;); // å…¥å£èµ„æºå…³é—­èšåˆ registration.addInitParameter(CommonFilter.WEB_CONTEXT_UNIFY, &quot;false&quot;); registration.setName(&quot;sentinelFilter&quot;); registration.setOrder(1); return registration; &#125;&#125; æ­¤æ—¶çš„è·¯å£èµ„æºå°±æ˜¯ /testA /testB å½“å…¥å£èµ„æºè¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œå°±ä¼šå¯åŠ¨æ­¤èµ„æºåä¸º message çš„å¯¹åº”è·¯å£èµ„æºçš„æµæ§ã€‚ ==å‘æ¥äº†ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ== ç¦æ­¢æ”¶æ•› URL çš„å…¥å£ context ä» 1.6.3 ç‰ˆæœ¬å¼€å§‹ï¼ŒSentinel Web filter é»˜è®¤æ”¶æ•›æ‰€æœ‰ URL çš„å…¥å£ contextï¼Œå› æ­¤é“¾è·¯é™æµä¸ç”Ÿæ•ˆã€‚ 1.7.0 ç‰ˆæœ¬å¼€å§‹ï¼ˆå¯¹åº” SCA çš„ 2.1.1.RELEASE)ï¼Œå®˜æ–¹åœ¨ CommonFilter å¼•å…¥äº† WEB_CONTEXT_UNIFY å‚æ•°ï¼Œç”¨äºæ§åˆ¶æ˜¯å¦æ”¶æ•› contextã€‚å°†å…¶é…ç½®ä¸º false å³å¯æ ¹æ®ä¸åŒçš„ URL è¿›è¡Œé“¾è·¯é™æµã€‚ SCA 2.1.1.RELEASE ä¹‹åçš„ç‰ˆæœ¬,å¯ä»¥é€šè¿‡é…ç½® spring.cloud.sentinel.web-context-unify=false å³å¯å…³é—­æ”¶æ•›ï¼Œæˆ‘ä»¬å½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ SpringCloud Alibaba 2.1.0.RELEASEï¼Œæ— æ³•å®ç°é“¾è·¯é™æµã€‚ ç›®å‰å®˜æ–¹è¿˜æœªå‘å¸ƒ SCA 2.1.2.RELEASEï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ä½¿ç”¨ 2.1.1.RELEASEï¼Œéœ€è¦å†™ä»£ç çš„å½¢å¼å®ç°ã€‚ æš‚æ—¶å°† SpringCloud Alibaba çš„ç‰ˆæœ¬è°ƒæ•´ä¸º 2.1.1.RELEASE é…ç½®æ–‡ä»¶ä¸­å…³é—­ sentinel çš„ CommonFilter å®ä¾‹åŒ– æ·»åŠ ä¸€ä¸ªé…ç½®ç±»ï¼Œè‡ªå·±æ„å»º CommonFilter å®ä¾‹ 12345678910111213141516171819202122package com.oy.springcloud.config;import com.alibaba.csp.sentinel.adapter.servlet.CommonFilter;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;@Configurationpublic class FilterContextConfig &#123; @Bean public FilterRegistrationBean sentinelFilterRegistration() &#123; FilterRegistrationBean registration = new FilterRegistrationBean(); registration.setFilter(new CommonFilter()); registration.addUrlPatterns(&quot;/*&quot;); // å…¥å£èµ„æºå…³é—­èšåˆ registration.addInitParameter(CommonFilter.WEB_CONTEXT_UNIFY, &quot;false&quot;); registration.setName(&quot;sentinelFilter&quot;); registration.setOrder(1); return registration; &#125;&#125; åˆ†åˆ«é€šè¿‡ä¸¤ä¸ªè·¯å£èµ„æºè¿›è¡Œè®¿é—®ï¼Œå‘ç°è®¾ç½®çš„å…¥å£èµ„æºè¢«é™æµäº†ã€‚ â‘¢ æµæ§æ•ˆæœç›´æ¥-&gt;å¿«é€Ÿå¤±è´¥ï¼ˆé»˜è®¤çš„æµæ§å¤„ç†ï¼‰ ï¼š ç›´æ¥å¤±è´¥ï¼Œ æŠ›å‡ºå¼‚å¸¸ 1Blocked by Sentinel (flow limiting) æºç  1com.alibaba.csp.sentinel.slots.block.flow.controller.DefaultController é¢„çƒ­ï¼š è¯´æ˜ å…¬å¼ï¼š é˜ˆå€¼é™¤ä»¥ coldFactorï¼ˆé»˜è®¤å€¼ä¸º 3ï¼‰ ï¼Œ ç»è¿‡é¢„çƒ­æ—¶é•¿åæ‰ä¼šè¾¾åˆ°é˜ˆå€¼ å®˜ç½‘ é»˜è®¤ coldFactor ä¸º 33. é»˜è®¤ coldFactor ä¸º 3ï¼Œ å³è¯·æ±‚ QPS ä» threshold/3 å¼€å§‹ï¼Œ ç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„ QPS é˜ˆå€¼ã€‚ é™æµå†·å¯åŠ¨ ï¼š https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81---%E5%86%B7%E5%90%AF%E5%8A%A8 æºç  Warmup é…ç½® å¤šæ¬¡ç‚¹å‡» http://localhost:8401/testB åˆšå¼€å§‹ä¸è¡Œï¼Œ åç»­æ…¢æ…¢ OK åº”ç”¨åœºæ™¯ å¦‚ç§’æ€ç³»ç»Ÿåœ¨å¼€å¯çš„ç¬é—´ä¼šæœ‰å¾ˆå¤šæµé‡ä¸Šæ¥ï¼Œ å¾ˆæœ‰å¯èƒ½æŠŠç³»ç»Ÿæ‰“æ­»ï¼Œ é¢„çƒ­æ–¹å¼å°±æ˜¯ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿï¼Œ å¯æ…¢æ…¢çš„æŠŠæµé‡æ”¾è¿›æ¥ï¼Œ æ…¢æ…¢çš„æŠŠé˜ˆå€¼å¢é•¿åˆ°è®¾ç½®çš„é˜ˆå€¼ æ’é˜Ÿç­‰å¾…ï¼š åŒ€é€Ÿæ’é˜Ÿï¼Œ é˜ˆå€¼å¿…é¡»è®¾ç½®ä¸º QPS å®˜ç½‘ æºç  com.alibaba.csp.sentinel.slots.block.flow.controller.RateLimiterController æµ‹è¯• äº”ã€é™çº§è§„åˆ™â‘  åŸºæœ¬ä»‹ç» è¿›ä¸€æ­¥è¯´æ˜ â€‹ Sentinel ç†”æ–­é™çº§ä¼šåœ¨è°ƒç”¨é“¾è·¯ä¸­æŸä¸ªå‡ºç°ç¨³å®šçš„èµ„æºä¸ç¨³å®šçŠ¶æ€æ—¶ï¼ˆä¾‹å¦‚è°ƒç”¨è¶…æ—¶æˆ–å¼‚å¸¸æ¯”ä¾‹é«˜ï¼‰ï¼Œå¯¹è¿™ä¸ªèµ„æºçš„è°ƒç”¨è¿›è¡Œé™åˆ¶ï¼Œè®©è¯·æ±‚å¿«é€Ÿå¤±è´¥ï¼Œé¿å…å½±å“åˆ°å…¶ä»–çš„èµ„æºè€Œå¯¼è‡´çº§è”é”™è¯¯ã€‚ â€‹ å½“èµ„æºè¢«é™çº§åï¼Œåœ¨æ¥ä¸‹æ¥çš„é™çº§æ—¶é—´çª—å£ä¹‹å†…ï¼Œå¯¹è¯¥èµ„æºçš„è°ƒç”¨éƒ½è‡ªåŠ¨ç†”æ–­ï¼ˆé»˜è®¤è¡Œä¸ºæ˜¯æŠ›å‡º DegradeExceptionï¼‰ã€‚ Sentinel çš„æ–­è·¯å™¨æ˜¯æ²¡æœ‰åŠå¼€çŠ¶æ€çš„ â€‹ åŠå¼€çš„çŠ¶æ€ç³»ç»Ÿè‡ªåŠ¨å»æ£€æµ‹æ˜¯å¦è¯·æ±‚æœ‰å¼‚å¸¸ï¼Œ æ²¡æœ‰å¼‚å¸¸å°±å…³é—­æ–­è·¯å™¨æ¢å¤ä½¿ç”¨ï¼Œ æœ‰å¼‚å¸¸åˆ™ç»§ç»­æ‰“å¼€æ–­è·¯å™¨ä¸å¯ç”¨ã€‚ å…·ä½“å¯ä»¥å‚è€ƒ Hystrix å¤ä¹  Hystrix â€‹ â‘¡ é™çº§ç­–ç•¥å®æˆ˜ RT æ˜¯ä»€ä¹ˆ æµ‹è¯• ä»£ç  1234567891011@GetMappingpublic String testD()&#123; try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; log.info(&quot;TestD æµ‹è¯• RT&quot;); return &quot;-----testD&quot;;&#125; é…ç½® æ³¨æ„ï¼šæˆ‘è¿™é‡Œæ›´æ¢äº†ç‰ˆæœ¬ï¼Œæœ‰äº›é…ç½®é€‰é¡¹ä¸ä¸€æ ·äº†ã€‚ç‰ˆæœ¬æ˜¯ 1.7 jmeter å‹æµ‹ ç»“è®ºï¼š â€‹ æŒ‰ç…§ä¸€ç§’é’Ÿæ‰“è¿›æ¥ 10 ä¸ªçº¿ç¨‹ï¼ˆå¤§äº 5 ä¸ªäº†ï¼‰è°ƒç”¨ testD ,æˆ‘ä»¬å¸Œæœ› 200 æ¯«ç§’å¤„ç†æœ¬æ¬¡ä»»åŠ¡ï¼Œå¦‚æœè¶…è¿‡ 200 æ¯«ç§’è¿˜æ²¡å¤„ç†å®Œï¼Œåœ¨æœªæ¥ 1 ç§’é’Ÿçš„æ—¶é—´çª—å£å†…ï¼Œæ–­è·¯å™¨æ‰“å¼€ï¼ˆä¿é™©ä¸è·³é—¸ï¼‰å¾®æœåŠ¡ä¸å¯ç”¨ï¼Œä¿é™©ä¸è·³é—¸æ–­ç”µäº†ï¼Œåç»­æˆ‘åœæ­¢ jmeterï¼Œ æ²¡æœ‰è¿™ä¹ˆå¤§çš„è®¿é—®é‡ï¼Œæ–­è·¯å™¨å…³é—­ï¼ˆä¿é™©ä¸æ¢å¤ï¼‰ï¼Œå¾®æœåŠ¡æ¢å¤ OKã€‚ å¼‚å¸¸æ¯”ä¾‹ 1. æ˜¯ä»€ä¹ˆ 2. æµ‹è¯• ä»£ç  1234567@GetMapping(&quot;/testE&quot;)public String testE()&#123; log.info(&quot;testE å¼‚å¸¸æ¯”ä¾‹&quot;); int age = 10/0; return &quot;------testE&quot;;&#125; é…ç½® Jmeter ç»“è®ºï¼š â€‹ æŒ‰ç…§ä¸Šè¿°é…ç½®ï¼Œå•ç‹¬è®¿é—®ä¸€æ¬¡ï¼Œå¿…é¡»æ¥ä¸€æ¬¡æŠ¥é”™ä¸€æ¬¡ï¼ˆint age = 10/0ï¼‰,è°ƒç”¨ä¸€æ¬¡é”™ä¸€æ¬¡ï¼› å¼€å¯ jmeter åï¼Œ ç›´æ¥é«˜å¹¶å‘å‘é€è¯·æ±‚ï¼Œå¤šæ¬¡è°ƒç”¨è¾¾åˆ°æˆ‘ä»¬çš„é…ç½®æ¡ä»¶äº†ã€‚æ–­è·¯å™¨å¼€å¯ï¼ˆä¿é™©ä¸è·³é—¸ï¼‰ï¼Œå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼Œä¸åœ¨æŠ¥é”™ error è€Œæ˜¯æœåŠ¡é™çº§äº†ã€‚ å¼‚å¸¸æ•° æ˜¯ä»€ä¹ˆ å¼‚å¸¸æ•°æ˜¯æŒ‰ç…§åˆ†é’Ÿç»Ÿè®¡çš„ æµ‹è¯• 123456@GetMapping(&quot;/testF&quot;)public String testF()&#123; log.info(&quot;testF æµ‹è¯•å¼‚å¸¸æ•°&quot;); int age = 10/0; return &quot;------testF æµ‹è¯•å¼‚å¸¸æ•°&quot;;&#125; é…ç½® â€‹ http://localhost:8041/testF, ç¬¬ä¸€æ¬¡è®¿é—®å†³å®šæŠ¥é”™ï¼Œå› ä¸ºé™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼Œæˆ‘ä»¬çœ‹åˆ° error çª—å£ï¼Œä½†æ˜¯è¾¾åˆ° 5 æ¬¡æŠ¥é”™åï¼Œè¿›å…¥ç†”æ–­åé™çº§ã€‚ å…­ã€çƒ­ç‚¹ key é™æµâ‘  åŸºæœ¬ä»‹ç» æ˜¯ä»€ä¹ˆï¼š â‘¡ å®˜ç½‘https://github.com/alibaba/Sentinel/wiki/ çƒ­ç‚¹å‚æ•°é™æµ â‘¢ æ‰¿ä¸Šå¯ä¸‹å¤ä¹  startå…œåº•æ–¹æ³•ï¼š åˆ†ä¸ºç³»ç»Ÿé»˜è®¤å’Œå®¢æˆ·è‡ªå®šä¹‰ï¼Œä¸¤ç§ä¹‹å‰çš„ Case, é™æµå‡ºé—®é¢˜ï¼Œéƒ½æ˜¯ sentinel ç³»ç»Ÿé»˜è®¤çš„æç¤ºï¼š Blocked by sentinel ï¼ˆflow limitingï¼‰æˆ‘ä»¬èƒ½ä¸èƒ½è‡ªå®šï¼Ÿ ç±»ä¼¼ hystrixï¼Œ æŸä¸ªæ–¹æ³•å‡ºé—®é¢˜äº†ï¼Œå°±æ‰¾å¯¹åº”çš„å…œåº•é™çº§æ–¹æ³•ï¼Ÿ ç»“è®ºï¼š ä» ==HystrixCommand== åˆ° ==@SentinelResource== â‘£ ä»£ç 123456789101112131415 /** * çƒ­ç‚¹ key é™æµ */@GetMapping(&quot;/testHotKey&quot;)@SentinelResource(value = &quot;testHotKey&quot;, blockHandler = &quot;deal_testHotKey&quot;)public String testHotKey(@RequestParam(value = &quot;p1&quot;, required = false) String p1, @RequestParam(value = &quot;p2&quot;, required = false) String p2)&#123; return &quot;----testHotKey&quot;;&#125; /** * å…œåº•æ–¹æ³• */public String deal_testHotKey(String p1, String p2, BlockException exception)&#123; return &quot;-----deal_testHotKey,o(â•¥ï¹â•¥)o&quot;;&#125; com.alibaba.csp.sentinel.slots.block.BlockException â‘¤ é…ç½®â€‹ @SentinelResource(value = â€œtestHotKeyâ€), å¼‚å¸¸æ‰“åˆ°äº†å‰å°ç”¨æˆ·ç•Œé¢çœ‹ä¸åˆ°ï¼Œä¸å‹å¥½ â€‹ @SentinelResource(value = â€œtestHotKey â€œ, blockHandler = â€œdeal_testHotKeyâ€), æ–¹æ³• testHostKey é‡Œé¢çš„ä¸€ä¸ªå‚æ•°åªè¦ QPS è¶…è¿‡æ¯ç§’ 1 æ¬¡ï¼Œé©¬ä¸Šé™çº§å¤„ç†ã€‚ç”¨äº†æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ blockHandler ã€‚ â‘¥ æµ‹è¯• Errorï¼š http://localhost:8401/testHotKey?p1=abc Errorï¼š http://localhost:8401/testHotKey?p1=abc&amp;p2=33 Rightï¼š http://localhost:8401/testHotKey?p2=abc â‘¦ å‚æ•°ä¾‹å¤–é¡¹ä¸Šè¿°æ¡ˆä¾‹æ¼”ç¤ºäº†ç¬¬ä¸€ä¸ªå‚æ•° p1,å½“ QPS è¶…è¿‡ 1 ç§’ 1 æ¬¡ç‚¹å‡»åé©¬ä¸Šè¢«é™æµ æ™®é€š è¶…è¿‡ 1 ç§’é’Ÿä¸€ä¸ªåï¼Œ è¾¾åˆ°é˜ˆå€¼ 1 åé©¬ä¸Šè¢«é™æµ æˆ‘ä»¬æœŸæœ› p1 å‚æ•°å½“å®ƒæ˜¯æŸä¸ªç‰¹æ®Šå€¼æ—¶ï¼Œ å®ƒçš„é™æµå€¼å’Œå¹³æ—¶ä¸ä¸€æ · ç‰¹ä¾‹ å‡å¦‚å½“ p1 çš„å€¼ç­‰äº 5 æ—¶ï¼Œ å®ƒçš„é˜ˆå€¼å¯ä»¥è¾¾åˆ° 200 é…ç½® æµ‹è¯• 1. http://localhost:8401/testHotKey?p1=5 âˆš http://localhost:8401/testHotKey?p1=3 Ã— å½“ p1 ç­‰äº 5 çš„æ—¶å€™ï¼Œ é˜ˆå€¼å˜ä¸º 200 å½“ p1 ä¸ç­‰äº 5 çš„æ—¶å€™ï¼Œ é˜ˆå€¼å°±æ˜¯å¹³å¸¸çš„ 1 å‰ææ¡ä»¶ çƒ­ç‚¹å‚æ•°çš„æ³¨æ„ç‚¹ï¼Œ å‚æ•°å¿…é¡»æ˜¯åŸºæœ¬ç±»å‹æˆ–è€… String â‘§ å…¶ä»–==@SentinelResource== â€‹ å¤„ç†çš„æ˜¯ Sentinel æ§åˆ¶å°é…ç½®çš„è¿è§„æƒ…å†µï¼Œæœ‰ blockHandler æ–¹æ³•é…ç½®çš„å…œåº•å¤„ç† ==RuntimeException== â€‹ int age = 10/ 0, è¿™ä¸ªæ˜¯ java è¿è¡Œæ—¶æŠ¥å‡ºçš„è¿è¡Œæ—¶å¼‚å¸¸ RuntimeException, @SentinelException, @SentineResource ä¸ç®¡ ==æ€»ç»“== @SentineIResource ä¸»ç®¡é…ç½®å‡ºé”™ï¼Œè¿è¡Œå‡ºé”™è¯¥èµ°å¼‚å¸¸èµ°å¼‚å¸¸ ä¸ƒã€ç³»ç»Ÿè§„åˆ™â‘  æ˜¯ä»€ä¹ˆhttps://github.com/alibaba/Sentinel/wiki/%E7%B3%BB%E7%BB%9F%E8%87%AA%E9%80%82%E5%BA%94%E9%99%90%E6%B5%81 â‘¡ å„é¡¹é…ç½®å‚æ•°è¯´æ˜ç³»ç»Ÿä¿æŠ¤è§„åˆ™æ˜¯ä»åº”ç”¨çº§åˆ«çš„å…¥å£æµé‡è¿›è¡Œæ§åˆ¶ï¼Œä»å•å°æœºå™¨çš„ loadã€CPU ä½¿ç”¨ç‡ã€å¹³å‡ RTã€å…¥å£ QPS å’Œå¹¶å‘çº¿ç¨‹æ•°ç­‰å‡ ä¸ªç»´åº¦ç›‘æ§åº”ç”¨æŒ‡æ ‡ï¼Œè®©ç³»ç»Ÿå°½å¯èƒ½è·‘åœ¨æœ€å¤§ååé‡çš„åŒæ—¶ä¿è¯ç³»ç»Ÿæ•´ä½“çš„ç¨³å®šæ€§ã€‚ ç³»ç»Ÿä¿æŠ¤è§„åˆ™æ˜¯åº”ç”¨æ•´ä½“ç»´åº¦çš„ï¼Œè€Œä¸æ˜¯èµ„æºç»´åº¦çš„ï¼Œå¹¶ä¸”ä»…å¯¹å…¥å£æµé‡ç”Ÿæ•ˆã€‚å…¥å£æµé‡æŒ‡çš„æ˜¯è¿›å…¥åº”ç”¨çš„æµé‡ï¼ˆEntryType.INï¼‰ï¼Œæ¯”å¦‚ Web æœåŠ¡æˆ– Dubbo æœåŠ¡ç«¯æ¥æ”¶çš„è¯·æ±‚ï¼Œéƒ½å±äºå…¥å£æµé‡ã€‚ ç³»ç»Ÿè§„åˆ™æ”¯æŒä»¥ä¸‹çš„æ¨¡å¼ï¼š Load è‡ªé€‚åº”ï¼ˆä»…å¯¹ Linux/Unix-like æœºå™¨ç”Ÿæ•ˆï¼‰ï¼šç³»ç»Ÿçš„ load1 ä½œä¸ºå¯å‘æŒ‡æ ‡ï¼Œè¿›è¡Œè‡ªé€‚åº”ç³»ç»Ÿä¿æŠ¤ã€‚å½“ç³»ç»Ÿ load1 è¶…è¿‡è®¾å®šçš„å¯å‘å€¼ï¼Œä¸”ç³»ç»Ÿå½“å‰çš„å¹¶å‘çº¿ç¨‹æ•°è¶…è¿‡ä¼°ç®—çš„ç³»ç»Ÿå®¹é‡æ—¶æ‰ä¼šè§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼ˆBBR é˜¶æ®µï¼‰ã€‚ç³»ç»Ÿå®¹é‡ç”±ç³»ç»Ÿçš„ maxQps * minRt ä¼°ç®—å¾—å‡ºã€‚è®¾å®šå‚è€ƒå€¼ä¸€èˆ¬æ˜¯ CPU cores * 2.5ã€‚ CPU usageï¼ˆ1.5.0+ ç‰ˆæœ¬ï¼‰ï¼šå½“ç³»ç»Ÿ CPU ä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼ˆå–å€¼èŒƒå›´ 0.0-1.0ï¼‰ï¼Œæ¯”è¾ƒçµæ•ã€‚ å¹³å‡ RTï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹³å‡ RT è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚ å¹¶å‘çº¿ç¨‹æ•°ï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹¶å‘çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚ å…¥å£ QPSï¼šå½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„ QPS è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚ â‘¢ é…ç½®å…¨å±€ QPS å…«ã€@SentinelResourceâ‘  æŒ‰èµ„æºåç§°é™æµ+åç»­å¤„ç† å¯åŠ¨ Nacos æˆåŠŸ å¯åŠ¨ Sentinel æˆåŠŸ Module â€‹ cloudalibaba-sentinel-service8401 POM 12345&lt;dependency&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt;&lt;/dependency&gt; YML 1234567891011121314151617181920server: port: 8401spring: application: name: cloudalibaba-sentinel-service cloud: nacos: discovery: server-addr: localhost:8848 #NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ sentinel: transport: dashboard: localhost:8080 #é…ç½®Sentinel dashboardåœ°å€ port: 8719 #é»˜è®¤ 8719ï¼Œ å‡å¦‚è¢«å ç”¨äº†ä¼šè‡ªåŠ¨ä» 8719 å¼€å§‹ä¾æ¬¡+1 æ‰«æã€‚ ç›´è‡³æ‰¾åˆ°æœªè¢«å ç”¨çš„ç«¯å£management: endpoints: web: exposure: include: &quot;*&quot; ä¸šåŠ¡ç±» RateLimitController 12345678910111213@RestControllerpublic class RateLimitController &#123; @GetMapping(&quot;/byResource&quot;) @SentinelResource(value = &quot;byResource&quot;,blockHandler = &quot;handleException&quot;) public CommonResult byResource()&#123; return new CommonResult(200,&quot; æŒ‰ èµ„ æº å ç§° é™ æµ æµ‹ è¯• OK&quot;,new Payment(2020L,&quot;serial001&quot;)); &#125; public CommonResult handleException(BlockException exception)&#123; return new CommonResult(444,&quot;exception.getClass().getCanonicalName()+\\&quot;t æœåŠ¡\\n&quot; + &quot;ä¸å¯ç”¨&quot;); &#125;&#125; ä¸»å¯åŠ¨ 1234567@EnableDiscoveryClient@SpringBootApplicationpublic class MainApp8401 &#123; public static void main(String[] args) &#123; SpringApplication.run(MainApp8401.class, args); &#125;&#125; é…ç½®æµæ§è§„åˆ™ é…ç½®æ­¥éª¤ å›¾å½¢é…ç½®å’Œä»£ç å…³ç³» è¡¨ç¤º 1 ç§’é’Ÿå†…æŸ¥è¯¢æ¬¡æ•°å¤§äº 1ï¼Œ å°±è·‘åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„å¤„æµï¼Œ é™æµ ã€‚ æµ‹è¯• 1 ç§’é’Ÿç‚¹å‡» 1 ä¸‹ï¼Œ OK è¶…è¿‡ä¸Šè¿°é—®é¢˜ï¼Œ ç–¯ç‹‚ç‚¹å‡»ï¼Œ è¿”å›äº†è‡ªå·±å®šä¹‰çš„é™æµå¤„ç†ä¿¡æ¯. é™æµå‘é€ â‘¡ æŒ‰ç…§ Url åœ°å€é™æµ+åç»­å¤„ç† é€šè¿‡è®¿é—®çš„ URL æ¥é™æµï¼Œ ä¼šè¿”å› Sentinel è‡ªå¸¦é»˜è®¤çš„é™æµå¤„ç†ä¿¡æ¯ ã€‚ ä¸šåŠ¡ç±» RateLimitController 1234@GetMapping(value = &quot;byUrl&quot;)public CommonResult byUrl()&#123; return new CommonResult(200,&quot;æŒ‰ url é™æµæµ‹è¯• OK&quot;,new Payment(2020L,&quot;serial002&quot;));&#125; è®¿é—®ä¸€æ¬¡ Sentinel æ§åˆ¶å°é…ç½® æµ‹è¯• ç–¯ç‹‚ç‚¹å‡» http://localhost:8401/rateLimit/byUrl ç»“æœ ä¼šè¿”å› Sentinel è‡ªå¸¦çš„é™æµå¤„ç†é™æµç»“æœ â‘¢ ä¸Šé¢å…œåº•æ–¹æ³•é¢ä¸´çš„é—®é¢˜ ç³»ç»Ÿé»˜è®¤çš„ï¼Œæ²¡æœ‰ä½“ç°æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡è¦æ±‚ã€‚ ä¾ç…§ç°æœ‰çš„æ¡ä»¶ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„å¤„ç†æ–¹æ³•åˆå’Œä¸šåŠ¡ä»£ç å—è€¦åˆåœ¨ä¸€å—ï¼Œä¸ç›´è§‚ã€‚ æ¯ä¸ªä¸šåŠ¡æ–¹æ³•éƒ½æ·»åŠ ä¸€ä¸ªå…œåº•çš„ï¼Œé‚£ä»£ç è†¨èƒ€åŠ å‰§ã€‚ å…¨å±€ç»Ÿä¸€çš„å¤„ç†æ–¹æ³•æ²¡æœ‰ä½“ç°ã€‚ â‘£ å®¢æˆ·è‡ªå®šä¹‰é™æµå¤„ç†é€»è¾‘ åˆ›å»º customerBlockHandler ç±»ç”¨äºè‡ªå®šä¹‰é™æµå¤„ç†é€»è¾‘,è‡ªå®šä¹‰é™æµå¤„ç†ç±» CustomerBlockHandler 12345678910public class CustomerBlockHandler &#123; public static CommonResult handleException(BlockedException exception)&#123; return new CommonResult(2020, &quot;è‡ªå®šä¹‰é™æµå¤„ç†ä¿¡æ¯....CustomerBlockHandler&quot;); &#125; public static CommonResult handleException2(BlockedException exception)&#123; return new CommonResult(2020, &quot;è‡ªå®šä¹‰é™æµå¤„ç†ä¿¡æ¯2....CustomerBlockHandler--2&quot;); &#125;&#125; RateLimitController 12345678910111213import com.oy.springcloud.entities.CommonResult;import com.alibaba.csp.sentinel.slots.block.BlockException;public class CustomerBlockHandler &#123; public static CommonResult handleException(BlockException exception)&#123; return new CommonResult(2020, &quot;è‡ªå®šä¹‰é™æµå¤„ç†ä¿¡æ¯....CustomerBlockHandler&quot;); &#125; public static CommonResult handleException2(BlockException exception)&#123; return new CommonResult(2020, &quot;è‡ªå®šä¹‰é™æµå¤„ç†ä¿¡æ¯2....CustomerBlockHandler--2&quot;); &#125;&#125; å¯åŠ¨å¾®æœåŠ¡åå…ˆè°ƒç”¨ä¸€æ¬¡ http://localhost:8401/rateLimit/customerBlockHandler Sentinel æ§åˆ¶å°é…ç½® æµ‹è¯•åæˆ‘ä»¬è‡ªå®šä¹‰çš„å‡ºæ¥äº† è¿›ä¸€æ­¥è¯´æ˜ â‘¤ æ›´å¤šæ³¨è§£å±æ€§è¯´æ˜ @SentinelResource ç”¨äºå®šä¹‰èµ„æºï¼Œå¹¶æä¾›å¯é€‰çš„å¼‚å¸¸å¤„ç†å’Œ fallback é…ç½®é¡¹ã€‚ @SentinelResource æ³¨è§£åŒ…å«ä»¥ä¸‹å±æ€§ï¼š valueï¼šèµ„æºåç§°ï¼Œå¿…éœ€é¡¹ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰ entryTypeï¼šentry ç±»å‹ï¼Œå¯é€‰é¡¹ï¼ˆé»˜è®¤ä¸º EntryType.OUTï¼‰ blockHandler / blockHandlerClass: blockHandler å¯¹åº”å¤„ç† BlockException çš„å‡½æ•°åç§°ï¼Œå¯é€‰é¡¹ã€‚blockHandler å‡½æ•°è®¿é—®èŒƒå›´éœ€è¦æ˜¯ publicï¼Œè¿”å›ç±»å‹éœ€è¦ä¸åŸæ–¹æ³•ç›¸åŒ¹é…ï¼Œå‚æ•°ç±»å‹éœ€è¦å’ŒåŸæ–¹æ³•ç›¸åŒ¹é…å¹¶ä¸”æœ€ååŠ ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œç±»å‹ä¸º BlockExceptionã€‚blockHandler å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š blockHandlerClass ä¸ºå¯¹åº”çš„ç±»çš„ Class å¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚ fallback / fallbackClassï¼šfallback å‡½æ•°åç§°ï¼Œå¯é€‰é¡¹ï¼Œç”¨äºåœ¨æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™æä¾› fallback å¤„ç†é€»è¾‘ã€‚fallback å‡½æ•°å¯ä»¥é’ˆå¯¹æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ï¼ˆé™¤äº† exceptionsToIgnore é‡Œé¢æ’é™¤æ‰çš„å¼‚å¸¸ç±»å‹ï¼‰è¿›è¡Œå¤„ç†ã€‚fallback å‡½æ•°ç­¾åå’Œä½ç½®è¦æ±‚ï¼š è¿”å›å€¼ç±»å‹å¿…é¡»ä¸åŸå‡½æ•°è¿”å›å€¼ç±»å‹ä¸€è‡´ï¼› æ–¹æ³•å‚æ•°åˆ—è¡¨éœ€è¦å’ŒåŸå‡½æ•°ä¸€è‡´ï¼Œæˆ–è€…å¯ä»¥é¢å¤–å¤šä¸€ä¸ª Throwable ç±»å‹çš„å‚æ•°ç”¨äºæ¥æ”¶å¯¹åº”çš„å¼‚å¸¸ã€‚ fallback å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š fallbackClass ä¸ºå¯¹åº”çš„ç±»çš„ Class å¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚ defaultFallbackï¼ˆsince 1.6.0ï¼‰ï¼šé»˜è®¤çš„ fallback å‡½æ•°åç§°ï¼Œå¯é€‰é¡¹ï¼Œé€šå¸¸ç”¨äºé€šç”¨çš„ fallback é€»è¾‘ï¼ˆå³å¯ä»¥ç”¨äºå¾ˆå¤šæœåŠ¡æˆ–æ–¹æ³•ï¼‰ã€‚é»˜è®¤ fallback å‡½æ•°å¯ä»¥é’ˆå¯¹æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ï¼ˆé™¤äº† exceptionsToIgnore é‡Œé¢æ’é™¤æ‰çš„å¼‚å¸¸ç±»å‹ï¼‰è¿›è¡Œå¤„ç†ã€‚è‹¥åŒæ—¶é…ç½®äº† fallback å’Œ defaultFallbackï¼Œåˆ™åªæœ‰ fallback ä¼šç”Ÿæ•ˆã€‚defaultFallback å‡½æ•°ç­¾åè¦æ±‚ï¼š è¿”å›å€¼ç±»å‹å¿…é¡»ä¸åŸå‡½æ•°è¿”å›å€¼ç±»å‹ä¸€è‡´ï¼› æ–¹æ³•å‚æ•°åˆ—è¡¨éœ€è¦ä¸ºç©ºï¼Œæˆ–è€…å¯ä»¥é¢å¤–å¤šä¸€ä¸ª Throwable ç±»å‹çš„å‚æ•°ç”¨äºæ¥æ”¶å¯¹åº”çš„å¼‚å¸¸ã€‚ defaultFallback å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š fallbackClass ä¸ºå¯¹åº”çš„ç±»çš„ Class å¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚ exceptionsToIgnoreï¼ˆsince 1.6.0ï¼‰ï¼šç”¨äºæŒ‡å®šå“ªäº›å¼‚å¸¸è¢«æ’é™¤æ‰ï¼Œä¸ä¼šè®¡å…¥å¼‚å¸¸ç»Ÿè®¡ä¸­ï¼Œä¹Ÿä¸ä¼šè¿›å…¥ fallback é€»è¾‘ä¸­ï¼Œè€Œæ˜¯ä¼šåŸæ ·æŠ›å‡ºã€‚ æ³¨ï¼š1.6.0 ä¹‹å‰çš„ç‰ˆæœ¬ fallback å‡½æ•°åªé’ˆå¯¹é™çº§å¼‚å¸¸ï¼ˆDegradeExceptionï¼‰è¿›è¡Œå¤„ç†ï¼Œä¸èƒ½é’ˆå¯¹ä¸šåŠ¡å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚ ç‰¹åˆ«åœ°ï¼Œè‹¥ blockHandler å’Œ fallback éƒ½è¿›è¡Œäº†é…ç½®ï¼Œåˆ™è¢«é™æµé™çº§è€ŒæŠ›å‡º BlockException æ—¶åªä¼šè¿›å…¥ blockHandler å¤„ç†é€»è¾‘ã€‚è‹¥æœªé…ç½® blockHandlerã€fallback å’Œ defaultFallbackï¼Œåˆ™è¢«é™æµé™çº§æ—¶ä¼šå°† BlockException ç›´æ¥æŠ›å‡ºï¼ˆè‹¥æ–¹æ³•æœ¬èº«æœªå®šä¹‰ throws BlockException åˆ™ä¼šè¢« JVM åŒ…è£…ä¸€å±‚ UndeclaredThrowableExceptionï¼‰ã€‚ å®˜ç½‘ï¼šhttps://github.com/alibaba/Sentinel/wiki/%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81 å¤šè¯´ä¸€å¥ Sentinel ä¸»è¦æœ‰ä¸‰ä¸ªæ ¸å¿ƒ API SphU å®šä¹‰èµ„æº Tracer å®šä¹‰ç»Ÿè®¡ ContextUtil å®šä¹‰äº†ä¸Šä¸‹æ–‡ ä¹ã€æœåŠ¡ç†”æ–­åŠŸèƒ½â‘  sentinel æ•´åˆ ribbon+openFeign+fallbackâ‘¡ Ribbon ç³»åˆ—1. å¯åŠ¨ nacos å’Œ sentinel,æä¾›è€… 9003/9004 æ–°å»º cloudalibaba-provider-payment9003/9004 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloudalibaba-provider-payment9003&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--SpringCloud openfeign --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba nacos --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba sentinel --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-sentinel&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;!-- SpringBootæ•´åˆWebç»„ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æ—¥å¸¸é€šç”¨jaråŒ…é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YMLï¼š è®°å¾—ä¿®æ”¹ä¸åŒçš„ç«¯å£å· 12345678910111213141516server: port: 9003spring: application: name: nacos-payment-provider cloud: nacos: discovery: server-addr: localhost:8848 #é…ç½®Nacosåœ°å€management: endpoints: web: exposure: include: &quot;*&quot; ä¸»å¯åŠ¨ 1234567@SpringBootApplication@EnableDiscoveryClientpublic class PaymentMain9003 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain9003.class, args); &#125;&#125; ä¸šåŠ¡ç±» 123456789101112131415161718192021@RestControllerpublic class PaymentController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; public static HashMap&lt;Long, Payment&gt; hashMap = new HashMap&lt;&gt;(); static&#123; hashMap.put(1L,new Payment(1L,&quot;28a8c1e3bc2742d8848569891fb42181&quot;)); hashMap.put(2L,new Payment(2L,&quot;bba8c1e3bc2742d8848569891ac32182&quot;)); hashMap.put(3L,new Payment(3L,&quot;6ua8c1e3bc2742d8848569891xt92183&quot;)); &#125; @GetMapping(value = &quot;/paymentSQL/&#123;id&#125;&quot;) public CommonResult&lt;Payment&gt; paymentSQL(@PathVariable(&quot;id&quot;) Long id)&#123; Payment payment = hashMap.get(id); CommonResult&lt;Payment&gt; result = new CommonResult(200,&quot;frommysql,serverPort: &quot;+serverPort,payment); return result; &#125;&#125; æµ‹è¯• åœ°å€ï¼š http://localhost:9003/paymentSQL/1 2.æ¶ˆè´¹è€… 84 æ–°å»º cloudalibaba-consumer-nacos-order84 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;dependencies&gt; &lt;!--SpringCloud openfeign --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba nacos --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringCloud ailibaba sentinel --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-sentinel&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt; &lt;dependency&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- SpringBootæ•´åˆWebç»„ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æ—¥å¸¸é€šç”¨jaråŒ…é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678910111213141516171819202122232425server: port: 84spring: application: name: nacos-order-consumer cloud: nacos: discovery: server-addr: localhost:8848 sentinel: transport: #é…ç½®Sentinel dashboardåœ°å€ dashboard: localhost:8080 #é»˜è®¤8719ç«¯å£ï¼Œå‡å¦‚è¢«å ç”¨ä¼šè‡ªåŠ¨ä»8719å¼€å§‹ä¾æ¬¡+1æ‰«æ,ç›´è‡³æ‰¾åˆ°æœªè¢«å ç”¨çš„ç«¯å£ port: 8719#æ¶ˆè´¹è€…å°†è¦å»è®¿é—®çš„å¾®æœåŠ¡åç§°(æ³¨å†ŒæˆåŠŸè¿›nacosçš„å¾®æœåŠ¡æä¾›è€…)service-url: nacos-user-service: http://nacos-payment-provider# æ¿€æ´»Sentinelå¯¹Feignçš„æ”¯æŒfeign: sentinel: enabled: true ä¸»å¯åŠ¨ 12345678@EnableDiscoveryClient@SpringBootApplication@EnableFeignClientspublic class OrderNacosMain84 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderNacosMain84.class, args); &#125;&#125; ä¸šåŠ¡ç±» ApplicationContextConfig 123456789@Configurationpublic class ApplicationContextConfig &#123; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; CircleBreakerController çš„å…¨éƒ¨æºç  123456789101112131415161718192021222324252627282930313233343536@RestController@Slf4jpublic class CircleBreakerController &#123; public static final String SERVICE_URL = &quot;http://nacos-payment-provider&quot;; @Resource private RestTemplate restTemplate; @RequestMapping(&quot;/consumer/fallback/&#123;id&#125;&quot;) //@SentinelResource(value = &quot;fallback&quot;) //æ²¡æœ‰é…ç½® //@SentinelResource(value = &quot;fallback&quot;,fallback = &quot;handlerFallback&quot;) //fallback åªè´Ÿè´£ä¸šåŠ¡å¼‚å¸¸ //@SentinelResource(value = &quot;fallback&quot;,blockHandler = &quot;blockHandler&quot;) //blockHandleråªè´Ÿè´£ sentinel æ§åˆ¶å°é…ç½®è¿è§„ //@SentinelResource(value = &quot;fallback&quot;,fallback = &quot;handlerFallback&quot;,blockHandler = &quot;blockHandler&quot;, exceptionsToIgnore = &#123;IllegalArgumentException.class&#125;) public CommonResult&lt;Payment&gt; fallback(@PathVariable Long id) &#123; CommonResult&lt;Payment&gt; result = restTemplate.getForObject(SERVICE_URL +&quot;/paymentSQL/&quot;+id, CommonResult.class,id); if (id == 4) &#123; throw new IllegalArgumentException (&quot;IllegalArgumentException,éæ³•å‚æ•°å¼‚å¸¸....&quot;); &#125;else if (result.getData() == null) &#123; throw new NullPointerException (&quot;NullPointerException,è¯¥ ID æ²¡æœ‰å¯¹åº”è®°å½•,ç©ºæŒ‡é’ˆå¼‚å¸¸&quot;); &#125; return result; &#125; //fallback public CommonResult handlerFallback(@PathVariable Long id,Throwable e) &#123; Payment payment = new Payment(id,&quot;null&quot;); return new CommonResult&lt;&gt;(444,&quot; å…œ åº• å¼‚ å¸¸ handlerFallback,exception å†… å®¹ &quot;+e.getMessage(),payment); &#125; //blockHandler public CommonResult blockHandler(@PathVariable Long id, BlockException blockException) &#123; Payment payment = new Payment(id,&quot;null&quot;); return new CommonResult&lt;&gt;(445,&quot;blockHandler-sentinel é™ æµ , æ—  æ­¤ æµ æ°´ : blockException &quot;+blockException.getMessage(),payment); &#125;&#125; ä¿®æ”¹åé‡å¯å¾®æœåŠ¡ çƒ­éƒ¨ç½²å¯¹ java ä»£ç çº§ç”Ÿæ•ˆå³ä½¿ å¯¹@SentinelResource æ³¨è§£å†…å±æ€§ï¼Œæœ‰æ—¶æ•ˆæœä¸å¥½ ç›®çš„ fallback ç®¡è¿è¡Œå¼‚å¸¸ blockHandler ç®¡é…ç½®è¿è§„ æµ‹è¯•åœ°å€ http://localhost:84/consumer/fallback/1 æ²¡æœ‰ä»»ä½•é…ç½® 123456789101112131415161718192021222324252627282930313233@RestController@Slf4jpublic class CircleBreakerController &#123; public static final String SERVICE_URL = &quot;http://nacos-payment-provider&quot;; @Resource private RestTemplate restTemplate; @RequestMapping(&quot;/consumer/fallback/&#123;id&#125;&quot;) @SentinelResource(value = &quot;fallback&quot;) //æ²¡æœ‰é…ç½® public CommonResult&lt;Payment&gt; fallback(@PathVariable Long id) &#123; CommonResult&lt;Payment&gt; result = restTemplate.getForObject(SERVICE_URL +&quot;/paymentSQL/&quot;+id, CommonResult.class,id); if (id == 4) &#123; throw new IllegalArgumentException (&quot;IllegalArgumentException,éæ³•å‚æ•°å¼‚å¸¸....&quot;); &#125;else if (result.getData() == null) &#123; throw new NullPointerException (&quot;NullPointerException,è¯¥ ID æ²¡æœ‰å¯¹åº”è®°å½•,ç©ºæŒ‡é’ˆå¼‚å¸¸&quot;); &#125; return result; &#125; //fallback public CommonResult handlerFallback(@PathVariable Long id,Throwable e) &#123; Payment payment = new Payment(id,&quot;null&quot;); return new CommonResult&lt;&gt;(444,&quot; å…œ åº• å¼‚ å¸¸ handlerFallback,exception å†… å®¹ &quot;+e.getMessage(),payment); &#125; //blockHandler public CommonResult blockHandler(@PathVariable Long id, BlockException blockException) &#123; Payment payment = new Payment(id,&quot;null&quot;); return new CommonResult&lt;&gt;(445,&quot;blockHandler-sentinel é™ æµ , æ—  æ­¤ æµ æ°´ : blockException &quot;+blockException.getMessage(),payment); &#125;&#125; ç»™å®¢æˆ· error é¡µé¢ï¼Œ ä¸å‹å¥½ åªé…ç½® fallback ç¼–ç ï¼ˆé‚£ä¸ªä¸šåŠ¡ç±»ä¸‹é¢çš„ CircleBreakerController çš„å…¨éƒ¨æºç ï¼‰ 1@SentinelResource(value = &quot;fallback&quot;,fallback = &quot;handlerFallback&quot;) åªé…ç½® blockHandler ç¼–ç ï¼ˆé‚£ä¸ªä¸šåŠ¡ç±»ä¸‹é¢çš„ CircleBreakerController çš„å…¨éƒ¨æºç ï¼‰ 1@SentinelResource(value = &quot;fallback&quot;,blockHandler = &quot;blockHandler&quot;) fallback å’Œ blockHandler éƒ½é…ç½® ç»“æœ å¿½ç•¥å±æ€§â€¦ ç¼–ç ï¼ˆé‚£ä¸ªä¸šåŠ¡ç±»ä¸‹é¢çš„ CircleBreakerController çš„å…¨éƒ¨æºç ï¼‰==å›¾è¯´== 3.Feign ç³»åˆ— ä¿®æ”¹ 84 æ¨¡å— POM 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;&lt;/dependency&gt; YML 12345678910111213141516171819202122232425server: port: 84spring: application: name: nacos-order-consumer cloud: nacos: discovery: server-addr: localhost:8848 sentinel: transport: #é…ç½®Sentinel dashboardåœ°å€ dashboard: localhost:8080 #é»˜è®¤8719ç«¯å£ï¼Œå‡å¦‚è¢«å ç”¨ä¼šè‡ªåŠ¨ä»8719å¼€å§‹ä¾æ¬¡+1æ‰«æ,ç›´è‡³æ‰¾åˆ°æœªè¢«å ç”¨çš„ç«¯å£ port: 8719#æ¶ˆè´¹è€…å°†è¦å»è®¿é—®çš„å¾®æœåŠ¡åç§°(æ³¨å†ŒæˆåŠŸè¿›nacosçš„å¾®æœåŠ¡æä¾›è€…)service-url: nacos-user-service: http://nacos-payment-provider# æ¿€æ´»Sentinelå¯¹Feignçš„æ”¯æŒfeign: sentinel: enabled: true ä¸šåŠ¡ç±» å¸¦@FeignClient æ³¨è§£çš„ä¸šåŠ¡æ¥å£ 12345@FeignClient(value = &quot;nacos-payment-provider&quot;,fallback = PaymentFallbackService.class)public interface PaymentService &#123; @GetMapping(&quot;/paymentSQL/&#123;id&#125;&quot;) public CommonResult&lt;Payment&gt; paymentSQL(@PathVariable(&quot;id&quot;) Long id);&#125; fallback=PaymentFallbackService.class 12345678@Componentpublic class PaymentFallbackService implements PaymentService &#123; @Override public CommonResult&lt;Payment&gt; paymentSQL(Long id) &#123; return new CommonResult&lt;&gt;(44444,&quot; æœ åŠ¡ é™ çº§ è¿” å›,---PaymentFallbackService&quot;,new Payment(id,&quot;errorSerial&quot;)); &#125;&#125; Controller 12345678// OpenFeign@Resourceprivate PaymentService paymentService;@GetMapping(value = &quot;/consumer/paymentSQL/&#123;id&#125;&quot;)public CommonResult&lt;Payment&gt; paymentSQL(@PathVariable(&quot;id&quot;) Long id) &#123; return paymentService.paymentSQL(id);&#125; ä¸»å¯åŠ¨ æ·»åŠ @EnableFeignClients å¯åŠ¨ Feign çš„åŠŸèƒ½ 12345678@EnableDiscoveryClient@SpringBootApplication@EnableFeignClientspublic class OrderNacosMain84 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderNacosMain84.class, args); &#125;&#125; http://localhost:84/consumer/paymentSQL/1 æµ‹è¯• 84 è°ƒç”¨ 9003ï¼Œ æ­¤æ—¶æ•…æ„å…³é—­ 9003 å¾®æœåŠ¡æä¾›è€…ï¼Œ çœ‹ 84 æ¶ˆè´¹ä¾§è‡ªåŠ¨é™çº§ï¼Œ ä¸ä¼šè¢«è€—æ­»ã€‚ 4.ç†”æ–­æ¡†æ¶æ¯”è¾ƒ åã€è§„åˆ™æŒä¹…åŒ–â‘  æ˜¯ä»€ä¹ˆâ€‹ ä¸€æ—¦æˆ‘ä»¬é‡å¯åº”ç”¨ï¼Œ Sentinel è§„åˆ™å°†æ¶ˆå¤±ï¼Œ ç”Ÿäº§ç¯å¢ƒéœ€è¦å°†é…ç½®è§„åˆ™è¿›è¡ŒæŒä¹…åŒ– â‘¡ æ€ä¹ˆç©å°†é™æµé…ç½®è§„åˆ™æŒä¹…åŒ–è¿› Nacos ä¿å­˜ï¼Œ åªè¦åˆ·æ–° 8401 æŸä¸ª rest åœ°å€ï¼Œ sentinel æ§åˆ¶å°çš„æµæ§è§„åˆ™å°±èƒ½çœ‹åˆ°ï¼Œ åªè¦ Nacos é‡Œé¢çš„é…ç½®ä¸åˆ é™¤ï¼Œ é’ˆå¯¹ 8401 ä¸Š Sentinel ä¸Šçš„æµæ§è§„åˆ™æŒç»­æœ‰æ•ˆ ã€‚ â‘¢ æ­¥éª¤ ä¿®æ”¹ cloudalibaba-sentinel-service8401 POM 1234&lt;dependency&gt; &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt; &lt;artifactId&gt;sentinel-datasource-nacos&lt;/artifactId&gt;&lt;/dependency&gt; YML 1234567891011121314151617181920212223242526272829303132server: port: 8401spring: application: name: cloudalibaba-sentinel-service cloud: nacos: discovery: server-addr: localhost:8848 #NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ sentinel: transport: dashboard: localhost:8080 #é…ç½®Sentinel dashboardåœ°å€ port: 8719 datasource: ds1: nacos: server-addr: localhost:8848 dataId: cloudalibaba-sentinel-service groupId: DEFAULT_GROUP data-type: json rule-type: flowmanagement: endpoints: web: exposure: include: &quot;*&quot;feign: sentinel: enabled: true # æ¿€æ´»Sentinelå¯¹Feignçš„æ”¯æŒ æ·»åŠ  Nacos æ•°æ®æºé…ç½® 123456789101112spring: cloud: sentinel: datasource: ds1: nacos: server-addr: localhost:8848 dataId: cloudalibaba-sentinel-service groupId: DEFAULT_GROUP data-type: json rule-type: flow æ·»åŠ  Nacos ä¸šåŠ¡è§„åˆ™é…ç½® å†…å®¹è§£æ 1234567891011[ &#123; &quot;resource&quot;: &quot;/rateLimit/byUrl&quot;, &quot;limitApp&quot;: &quot;default&quot;, &quot;grade&quot;: 1, &quot;count&quot;: 1, &quot;strategy&quot;: 0, &quot;controlBehavior&quot;: 0, &quot;clusterMode&quot;: false &#125;] å¯åŠ¨ 8401 ååˆ·æ–° sentinel å‘ç°ä¸šåŠ¡è§„åˆ™æœ‰äº† å¿«é€Ÿè®¿é—®æµ‹è¯•æ¥å£ http://localhost:8401/rateLimit/byUrl é»˜è®¤ åœæ­¢ 8401 å†çœ‹ sentinel é‡æ–°å¯åŠ¨ 8401 å†çœ‹ sentinel ä¹ä¸€çœ‹è¿˜æ˜¯æ²¡æœ‰ï¼Œ ç¨ç­‰ä¸€ä¼šå„¿ , å¤šæ¬¡è°ƒç”¨ï¼š http://localhost:8401/rateLimit/byUrl , é‡æ–°é…ç½®å‡ºç°äº†ï¼Œ æŒä¹…åŒ–éªŒè¯é€šè¿‡","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ","slug":"SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ","date":"2020-11-05T16:00:00.000Z","updated":"2021-01-20T14:49:39.910Z","comments":true,"path":"posts/dfb9e877.html","link":"","permalink":"http://blog.oy6090.top/posts/dfb9e877.html","excerpt":"","text":"åšå®¢å‚è€ƒå­¦ä¹ è§†é¢‘ SpringCloud Alibaba Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒä¸€ã€Nacos ç®€ä»‹â‘  ä¸ºä»€ä¹ˆå« Nacoså‰å››ä¸ªå­—æ¯åˆ†åˆ«ä¸º Naming å’Œ Configuration çš„å‰ä¸¤ä¸ªå­—æ¯ï¼Œæœ€åçš„ s ä¸º Serviceã€‚ â‘¡ æ˜¯ä»€ä¹ˆä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ï¼Œé…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†ä¸­å¿ƒã€‚ Nacos : Dynamic Naming and Configuration Service Nacos å°± æ˜¯ æ³¨ å†Œ ä¸­ å¿ƒ + é… ç½® ä¸­ å¿ƒ çš„ ç»„ åˆ ç­‰ ä»· äº Nacos = Eureka + Config+Bus â‘¢ èƒ½å¹²å˜› ä»£æ›¿ Eureka åšæœåŠ¡æ³¨å†Œä¸­å¿ƒ æ›¿ä»£ Config åšæœåŠ¡é…ç½®ä¸­å¿ƒ â‘£ å»å“ªä¸‹https://github.com/alibaba/Nacos å®˜ç½‘æ–‡æ¡£ï¼š https://nacos.io/zh-cn/index.html https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_nacos_discovery â‘¤ å„ç§æ³¨å†Œä¸­å¿ƒæ¯”è¾ƒ äºŒã€å®‰è£…å¹¶è¿è¡Œ Nacosâ‘  æœ¬åœ° Java8+Maven ç¯å¢ƒå·²ç» OK â‘¡ å…ˆä»å®˜ç½‘ä¸‹è½½ Nacoshttps://github.com/alibaba/nacos/releases/tag/1.1.4 â‘¢ è§£å‹å®‰è£…åŒ…ï¼Œ ç›´æ¥è¿è¡Œ bin ç›®å½•ä¸‹çš„ startup.cmd â‘£ å‘½ä»¤è¿è¡ŒæˆåŠŸåç›´æ¥è®¿é—® http://localhost:8848/nacosâ€‹ é»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯ nacos ä¸‰ã€Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤ºâ‘  å®˜ç½‘æ–‡æ¡£â€‹ https://nacos.io/zh-cn/docs/what-is-nacos.html â‘¡ åŸºäº Nacos çš„æœåŠ¡æä¾›è€… æ–°å»º Moduleï¼š cloudalibaba-provider-payment9001 POM çˆ¶ POM 12345678&lt;!--Spring cloud alibaba 2.1.0.RELEASE--&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.cloud.alibaba.version&#125;&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt;&lt;/dependency&gt; æœ¬æ¨¡å— POM 123456789101112131415161718192021222324252627282930313233&lt;dependencies&gt; &lt;!--SpringCloud ailibaba nacos --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- SpringBootæ•´åˆWebç»„ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æ—¥å¸¸é€šç”¨jaråŒ…é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; YML 12345678910111213141516server: port: 9001spring: application: name: nacos-payment-provider cloud: nacos: discovery: server-addr: localhost:8848 #é…ç½®Nacosåœ°å€management: endpoints: web: exposure: include: &quot;*&quot; ä¸»å¯åŠ¨ 1234567@EnableDiscoveryClient@SpringBootApplicationpublic class PaymentMain9001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain9001.class, args); &#125;&#125; ä¸šåŠ¡ç±» 123456789101112@RestControllerpublic class PaymentController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @GetMapping(value = &quot;/payment/nacos/&#123;id&#125;&quot;) public String getPayment(@PathVariable(&quot;id&quot;) Integer id) &#123; return &quot;nacos registry, serverPort: &quot;+ serverPort+&quot;\\t id:&quot;+id; &#125;&#125; æµ‹è¯• http://lcoalhost:9001/payment/nacos/1 nacos æ§åˆ¶å° nacos æœåŠ¡æ³¨å†Œä¸­å¿ƒ + æœåŠ¡æä¾›è€… 9001 éƒ½ OK â‘¢ æ¼”ç¤º nacos çš„è´Ÿè½½å‡è¡¡ï¼Œå‚ç…§ 9001 æ–°å»º 9002 æ–°å»º cloudalibaba-provider-payment9002 9002 å…¶ä»–æ­¥éª¤å‚è€ƒ 9001 æˆ–è€…å–å·§ä¸æƒ³æ–°å»ºé‡å¤çš„åŠ³åŠ¨åŠ›ï¼Œç›´æ¥æ‹·è´è™šæ‹Ÿç«¯å£æ˜ å°„ â‘£ åŸºäº Nacos çš„æœåŠ¡æ¶ˆè´¹è€… æ–°å»º Module: cloudalibaba-consumer-nacos-order83 POM 12345678910111213141516171819202122232425262728293031323334353637383940&lt;dependencies&gt; &lt;!--SpringCloud ailibaba nacos --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt; &lt;dependency&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- SpringBootæ•´åˆWebç»„ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æ—¥å¸¸é€šç”¨jaråŒ…é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ==ä¸ºä»€ä¹ˆ nacos æ”¯æŒè´Ÿè½½å‡è¡¡ï¼š å› ä¸ºä¾èµ–äº† ribbon== YML 1234567891011121314server: port: 83spring: application: name: nacos-order-consumer cloud: nacos: discovery: server-addr: localhost:8848#æ¶ˆè´¹è€…å°†è¦å»è®¿é—®çš„å¾®æœåŠ¡åç§°(æ³¨å†ŒæˆåŠŸè¿›nacosçš„å¾®æœåŠ¡æä¾›è€…)service-url: nacos-user-service: http://nacos-payment-provider ä¸»å¯åŠ¨ 1234567@EnableDiscoveryClient@SpringBootApplicationpublic class OrderNacosMain83 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderNacosMain83.class, args); &#125;&#125; ä¸šåŠ¡ç±» â‘  ApplicationContextBean 123456789@Configurationpublic class ApplicationContextConfig &#123; @Bean @LoadBalanced public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; â‘¡ OrderNacosController 123456789101112131415@RestController@Slf4jpublic class OrderNacosController &#123; @Resource private RestTemplate restTemplate; @Value(&quot;$&#123;service-url.nacos-user-service&#125;&quot;) private String serverURL; @GetMapping(value = &quot;/consumer/payment/nacos/&#123;id&#125;&quot;) public String paymentInfo(@PathVariable(&quot;id&quot;) Long id)&#123; return restTemplate.getForObject(serverURL+&quot;/payment/nacos/&quot;+id,String.class); &#125;&#125; æµ‹è¯• â‘  nacos æ§åˆ¶å° â‘¡ http://localhost:83/consumer/payment/nacos/13 â‘¢ 83 è®¿é—® 9001/9002ï¼Œ è½®è¯¢è´Ÿè½½ OK â‘¤ æœåŠ¡æ³¨å†Œä¸­å¿ƒå¯¹æ¯”Nacos å…¨æ™¯å›¾æ‰€ç¤º Nacos å’Œ CAP Nacos æ”¯æŒ AP å’Œ CP æ¨¡å¼çš„åˆ‡æ¢ 1curl -X PUT &#x27;$NACOS_SERVER:8848/nacos/v1/ns/operator/switches?entry=serverMode&amp;value=CP&#x27; å››ã€Nacos ä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤ºâ‘  Nacos ä½œä¸ºé…ç½®ä¸­å¿ƒ-åŸºç¡€é…ç½® cloudalibaba-config-nacos-client3377 POM 123456789101112131415161718192021222324252627282930313233343536373839&lt;dependencies&gt; &lt;!--nacos-config--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--nacos-discovery--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--web + actuator--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--ä¸€èˆ¬åŸºç¡€é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML why é…ç½®ä¸¤ä¸ª Nacos åŒ springcloud-config ä¸€æ ·ï¼Œåœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œè¦ä¿è¯å…ˆä»é…ç½®ä¸­å¿ƒé…ç½®æ‹‰å–ï¼Œæ‹‰å–é…ç½®ä¹‹åï¼Œæ‰èƒ½ä¿è¯é¡¹ç›®çš„æ­£å¸¸å¯åŠ¨ã€‚ springboot ä¸­é…ç½®æ–‡ä»¶çš„åŠ è½½æ˜¯å­˜åœ¨ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œbootstrap ä¼˜å…ˆçº§é«˜äº application bootstrap 1234567891011121314# nacosé…ç½®server: port: 3377spring: application: name: nacos-config-client cloud: nacos: discovery: server-addr: localhost:8848 #NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ config: server-addr: localhost:8848 #Nacosä½œä¸ºé…ç½®ä¸­å¿ƒåœ°å€ file-extension: yaml #æŒ‡å®šyamlæ ¼å¼çš„é…ç½® application.yml 123spring: profiles: active: dev ä¸»å¯åŠ¨ 1234567@EnableDiscoveryClient@SpringBootApplicationpublic class NacosConfigClientMain3377 &#123; public static void main(String[] args) &#123; SpringApplication.run(NacosConfigClientMain3377.class, args); &#125;&#125; ä¸šåŠ¡ç±»(controller) 123456789101112@RestController@RefreshScopepublic class ConfigClientController &#123; @Value(&quot;$&#123;config.info&#125;&quot;) private String configinfo; @GetMapping(&quot;/config/info&quot;) public String getConfiginfo()&#123; return configinfo; &#125;&#125; æ³¨æ„ï¼š@RefreshScope é€šè¿‡ Spring Cloud åŸç”Ÿæ³¨è§£ @RefreshScope å®ç°é…ç½®è‡ªåŠ¨æ›´æ–° â‘¡ åœ¨ Nacos ä¸­æ·»åŠ é…ç½®ä¿¡æ¯ Nacos ä¸­çš„åŒ¹é…è§„åˆ™ ç†è®ºï¼š â€‹ Nacos ä¸­çš„ dataid çš„ç»„æˆæ ¼å¼ä¸ springBoot é…ç½®æ–‡ä»¶ä¸­çš„åŒ¹é…è§„åˆ™ â€‹ å®˜ç½‘ï¼šhttps://nacos.io/zh-cn/docs/quick-start-spring-cloud.html â€‹ â‘¢ å®æ“ é…ç½®æ–°å¢ï¼š nacos-config-client-dev Nacos ç•Œé¢é…ç½®å¯¹åº” ==è®¾ç½® DataId== å…¬ å¼ : ${spring.application.name}-${spring.profile.active}.${spring.cloud.nacos.config.file-extension} prefix é»˜è®¤ä¸º spring.application.name çš„å€¼ spring.profile.active æ—¢ ä¸º å½“ å‰ ç¯ å¢ƒ å¯¹ åº” çš„ profile, å¯ ä»¥ é€š è¿‡ é… ç½® é¡¹ spring.profile.active æ¥é…ç½® file-exetension ä¸º é… ç½® å†… å®¹ çš„ æ•° æ® æ ¼ å¼ ï¼Œ å¯ ä»¥ é€š è¿‡ é… ç½® é¡¹ spring.cloud.nacos.config.file-extension é…ç½® å°æ€»ç»“è¯´æ˜ æµ‹è¯• å¯åŠ¨å‰éœ€è¦åœ¨ nacos å®¢æˆ·ç«¯-é…ç½®ç®¡ç†-é…ç½®ç®¡ç†æ ç›®ä¸‹æœ‰æ²¡æœ‰å¯¹åº”çš„ yaml é…ç½®æ–‡ä»¶ è¿è¡Œ cloud-config-nacos-client3377 çš„ä¸»å¯åŠ¨ç±» è°ƒç”¨æ¥å£æŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼š http://localhost:3377/config/info è‡ªå¸¦åŠ¨æ€åˆ·æ–° è‡ªå¸¦åŠ¨æ€åˆ·æ–° ä¿®æ”¹ä¸‹ Nacos ä¸­çš„ yaml é…ç½®æ–‡ä»¶ï¼Œ å†æ¬¡è°ƒç”¨æŸ¥çœ‹é…ç½®çš„æ¥å£ï¼Œ å°±ä¼šå‘ç°é…ç½®å·²ç»åˆ·æ–° â‘£ Nacos ä½œä¸ºé…ç½®ä¸­å¿ƒ-åˆ†ç±»é…ç½®é—®é¢˜ï¼š å¤šç¯å¢ƒå¤šé¡¹ç›®ç®¡ç† Nacos çš„å›¾å½¢åŒ–ç®¡ç†ç•Œé¢ é…ç½®ç®¡ç† å‘½åç©ºé—´ Namespace+Group+Data ID ä¸‰è€…å…³ç³»ï¼Ÿ ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ Case 1.DataID æ–¹æ¡ˆæŒ‡å®š spring.profile.active å’Œé…ç½®æ–‡ä»¶çš„ DataID æ¥ä½¿ä¸åŒç¯å¢ƒä¸‹è¯»å–ä¸åŒçš„é…ç½®é»˜è®¤ç©ºé—´+é»˜è®¤åˆ†ç»„+æ–°å»º dev å’Œ test ä¸¤ä¸ª DataID æ–°å»º dev é…ç½® DataID æ–°å»º test é…ç½® DataID é€šè¿‡ spring.profile.active å±æ€§å°±èƒ½è¿›è¡Œå¤šç¯å¢ƒä¸‹é…ç½®æ–‡ä»¶çš„è¯»å– æµ‹è¯• http://localhost:3377/config/info é…ç½®æ˜¯ä»€ä¹ˆå°±åŠ è½½ä»€ä¹ˆï¼š test 2.Group æ–¹æ¡ˆ é€šè¿‡ Group å®ç°ç¯å¢ƒåŒºåˆ†æ–°å»º Group åœ¨ nacos å›¾å½¢ç•Œé¢æ§åˆ¶å°ä¸Šé¢æ–°å»ºé…ç½®æ–‡ä»¶ DataID bootstrap+application â€‹ åœ¨ config ä¸‹ å¢ åŠ  ä¸€ æ¡ group çš„ é… ç½® å³ å¯ ã€‚ å¯ é… ç½® ä¸º DEV_GROUP æˆ– TEST_GROUP 3.Namespace æ–¹æ¡ˆ æ–°å»º dev/test çš„ Namespace å›åˆ°æœåŠ¡ç®¡ç†-æœåŠ¡åˆ—è¡¨æŸ¥çœ‹ æŒ‰ç…§åŸŸåé…ç½®å¡«å†™ YML Bootstrap 1namespace: Applicationï¼š ä¸å˜ äº”ã€Nacos é›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®â‘  å®˜ç½‘è¯´æ˜https://nacos.io/zh-cn/docs/cluster-mode-quick-start.html å®˜ç½‘æ¶æ„å›¾ï¼š ä¸Šå›¾å®˜ç½‘ç¿»è¯‘ï¼Œ çœŸå®æƒ…å†µ ==è¯´æ˜== â€‹ é»˜è®¤ä½¿ç”¨ Nacos ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“å®ç°æ•°æ®çš„å­˜å‚¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¯åŠ¨å¤šä¸ªé»˜è®¤é…ç½®ä¸‹çš„ Nacos èŠ‚ç‚¹ï¼Œæ•°æ®å­˜å‚¨æ˜¯å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒNacos é‡‡ç”¨äº†é›†ä¸­å¼å­˜å‚¨çš„æ–¹å¼é›†ç¾¤åŒ–éƒ¨ç½²ï¼Œç›®å‰åªæ”¯æŒ MySQL çš„å­˜å‚¨ã€‚ Nacos æ”¯æŒä¸‰ç§éƒ¨ç½²ï¼Œæ¨¡å¼ å•æœºæ¨¡å¼ï¼Œç”¨äºæµ‹è¯•å’Œå•æœºè¯•ç”¨ é›†ç¾¤éƒ¨ç½²ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œç¡®ä¿é«˜å¯ç”¨ã€‚ å¤šé›†ç¾¤æ¨¡å¼ï¼Œç”¨äºå¤šæ•°æ®ä¸­å¿ƒåœºæ™¯ã€‚ windows cmd starup.cmd æˆ–è€…åŒå‡» startup.cmd æ–‡ä»¶ å•æœºæ¨¡å¼æ”¯æŒ mysql æŒ‰ç…§ä¸Šè¿°ï¼š æˆ‘ä»¬éœ€è¦ mysql æ•°æ®åº“ã€‚ ==å®˜ç½‘è¯´æ˜== https://nacos.io/zh-cn/docs/deployment.html â‘¡ Nacos æŒä¹…åŒ–é…ç½®è§£é‡Šâ€‹ Nacos é»˜è®¤è‡ªå¸¦çš„æ˜¯åµŒå…¥å¼æ•°æ®åº“ derby derby åˆ° mysql åˆ‡æ¢é…ç½®æ­¥éª¤ nacos-server-1.1.4\\nacos\\conf ç›®å½•ä¸‹æ‰¾åˆ° sql è„šæœ¬ æ‰§è¡Œè„šæœ¬: 1234567891011121314151617181920212223242526CREATE DATABASE nacos_config;USE nacos_config;/* æ•°æ®åº“å…¨å = nacos_config *//* è¡¨åç§° = config_info *//******************************************/CREATE TABLE `config_info` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;, `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;, `group_id` varchar(255) DEFAULT NULL, `content` longtext NOT NULL COMMENT &#x27;content&#x27;, `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;, `gmt_create` datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;, `gmt_modified` datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;ä¿®æ”¹æ—¶é—´&#x27;, `src_user` text COMMENT &#x27;source user&#x27;, `src_ip` varchar(20) DEFAULT NULL COMMENT &#x27;source ip&#x27;,`app_name` varchar(128) DEFAULT NULL, `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;ç§Ÿæˆ·å­—æ®µ&#x27;, `c_desc` varchar(256) DEFAULT NULL, `c_use` varchar(64) DEFAULT NULL, `effect` varchar(64) DEFAULT NULL, `type` varchar(64) DEFAULT NULL, `c_schema` text, PRIMARY KEY (`id`), UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info&#x27;;....çœç•¥åé¢çš„ã€‚å‚è€ƒè‡ªå·±çš„ nacos-server-1.1.4\\nacos\\conf ç›® å½• ä¸‹ æ‰¾ åˆ° application.properties åœ¨æ–‡ä»¶ä¸‹é¢æ·»åŠ  12345spring.datasource.platform=mysqldb.num=1db.url.0=jdbc:mysql://11.162.196.16:3306/nacos_devtest?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=truedb.user=nacos_devtestdb.password=youdontknow â€‹ å‚è€ƒ å¯åŠ¨ nacosï¼Œ å¯ä»¥çœ‹åˆ°æ˜¯ä¸ªå…¨æ–°çš„ç©ºè®°å½•ç•Œé¢ï¼Œ ä»¥å‰æ˜¯è®°å½•è¿› derby â‘¢ Linux ç‰ˆ Nacos+MySQL ç”Ÿäº§ç¯å¢ƒé…ç½® é¢„è®¡éœ€è¦ï¼Œ 1 ä¸ª nginx+3 ä¸ª nacos æ³¨å†Œä¸­å¿ƒ+1 ä¸ª mysql Nacos ä¸‹è½½ linux ç‰ˆæœ¬ https://github.com/alibaba/nacos/releases/tag/1.1.4 nacos-server-1.1.4.tar.gz è§£å‹åå®‰è£… é›†ç¾¤é…ç½®æ­¥éª¤ï¼ˆ==é‡ç‚¹==ï¼‰ Linux æœåŠ¡å™¨ä¸Š mysql æ•°æ®åº“é…ç½® application.properties é…ç½® ä½ç½®: å†…å®¹ 12345spring.datasource.platform=mysqldb.num=1db.url.0=jdbc:mysql://1.7.0.1:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=truedb.user=rootdb.password=HF_mysql_654321 **==æ³¨æ„==**ï¼š mysql æˆæƒè¿œç¨‹è®¿é—® 12GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27; WITH GRANT OPTION;flush privileges; â‘£ Linux æœåŠ¡å™¨ä¸Š nacos çš„é›†ç¾¤é…ç½® cluster.conf æ¢³ç†å‡º 3 å° nacos æœºå™¨çš„ä¸åŒæœåŠ¡ç«¯å£å·å¤åˆ¶å‡º cluster.conf å†…å®¹ è¿™ä¸ª IP ä¸èƒ½å†™ 127.0.0.1,å¿…é¡»æ˜¯ Linux å‘½ä»¤ hostname -I èƒ½å¤Ÿè¯†åˆ«çš„ IP â‘¤ ç¼–è¾‘ Nacos çš„å¯åŠ¨è„šæœ¬ startup.shï¼Œ ä½¿å®ƒèƒ½å¤Ÿæ¥å—ä¸åŒçš„å¯åŠ¨ç«¯ /mynacos/nacos/bin ç›®å½•ä¸‹æœ‰ startup.sh åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œ ä¿®æ”¹ä»€ä¹ˆï¼Œ æ€ä¹ˆä¿®æ”¹æ€è€ƒ ä¿®æ”¹å†…å®¹ ==æ³¨æ„ï¼š== 1è¿™é‡Œæ˜¯ â€”Dserver.port&#x3D;$&#123;PORT&#125;, ä¸è¦è¯¯è®¤ä¸ºæ˜¯â€œ.â€ åœ¨å¯åŠ¨å‰ä¸€å®šè¦å…ˆå¯åŠ¨ mysql æœåŠ¡ï¼Œä¸ç„¶ nacos ä¼šæŠ¥é”™ï¼š 1[root@localhost ~]# service mysql start æ‰§è¡Œæ–¹å¼ åŒæ—¶é€šè¿‡ window æµè§ˆå™¨è®¿é—® http://192.168.64.129:3333/nacos/#/login http://192.168.64.129:4444/nacos/#/login http://192.168.64.129:5555/nacos/#/login â‘¥ Nginx çš„é…ç½®ï¼Œ ç”±å®ƒä½œä¸ºè´Ÿè½½å‡è¡¡å™¨å®‰è£… nginx è¯·å‚è€ƒæˆ‘è¿™ç¯‡åšå®¢ï¼š ä¿®æ”¹ nginx çš„é…ç½®æ–‡ä»¶ nginx.conf 123456789101112upstream cluster&#123; server 127.0.0.1:3333; server 127.0.0.1:4444; server 127.0.0.1:5555;&#125;server&#123; listen 1111; server_name localhost; location &#x2F;&#123; proxy_pass http:&#x2F;&#x2F;cluster &#125; ....çœç•¥ æŒ‰ç…§æŒ‡å®šå¯åŠ¨ â‘¦ æˆªæ­¢åˆ°æ­¤å¤„ï¼Œ 1 ä¸ª Nginx+3 ä¸ª nacos æ³¨å†Œä¸­å¿ƒ+1 ä¸ª mysql æµ‹è¯•é€šè¿‡ nginx è®¿é—® nacoshttps://å†™ä½ è‡ªå·±è™šæ‹Ÿæœºçš„ ip:1111/nacos/#/login æ–°å»ºä¸€ä¸ªé…ç½®æµ‹è¯• linux æœåŠ¡å™¨çš„ mysql æ’å…¥ä¸€æ¡è®°å½• â‘§ æµ‹è¯•â€‹ å¾®æœåŠ¡ cloudalibaba-provider-payment9002 å¯åŠ¨æ³¨å†Œè¿› nacos é›†ç¾¤ Yml 1server-addr: å†™ä½ è‡ªå·±çš„è™šæ‹Ÿæœº ip:1111 ç»“æœ å…­ã€é«˜å¯ç”¨å°æ€»ç»“","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud Sleuth åˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯","slug":"SpringCloud Sleuth åˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯","date":"2020-10-22T16:00:00.000Z","updated":"2021-01-20T14:49:48.471Z","comments":true,"path":"posts/1330258666.html","link":"","permalink":"http://blog.oy6090.top/posts/1330258666.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ ä¸€ã€æ¦‚è¿°â‘  ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªæŠ€æœ¯ï¼Ÿ éœ€è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿâ€‹ åœ¨å¾®æœåŠ¡æ¡†æ¶ä¸­ï¼Œä¸€ä¸ªç”±å®¢æˆ·ç«¯å‘èµ·çš„è¯·æ±‚åœ¨åç«¯ç³»ç»Ÿä¸­ä¼šç»è¿‡å¤šä¸ªä¸åŒçš„æœåŠ¡ç‚¹è°ƒç”¨æ¥ååŒäº§ç”Ÿæœ€åçš„è¯·æ±‚ç»“æœï¼Œæ¯ä¸€ä¸ªå‰ç«¯è¯·æ±‚éƒ½ä¼šå½¢æˆä¸€æ¡å¤æ‚çš„åˆ†å¸ƒå¼æœåŠ¡è°ƒç”¨é“¾è·¯ï¼Œé“¾è·¯ä¸­çš„ä»»ä½•ä¸€ç¯å‡ºç°é«˜å»¶è¿Ÿæˆ–é”™è¯¯éƒ½ä¼šå¼•èµ·æ•´ä¸ªè¯·æ±‚æœ€åçš„å¤±è´¥ã€‚ â‘¡ æ˜¯ä»€ä¹ˆhttps://github.com/spring-cloud/spring-cloud-sleuth Spring Cloud Sleuth æä¾›äº†ä¸€å¥—å®Œæ•´çš„æœåŠ¡è·Ÿè¸ªçš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æä¾›è¿½è¸ªè§£å†³æ–¹æ¡ˆå¹¶ä¸”å…¼å®¹æ”¯æŒäº† zipkinã€‚ â‘¢ è§£å†³ äºŒã€æ­å»ºé“¾è·¯ç›‘æ§æ­¥éª¤â‘  zipkin ä¸‹è½½ SpringCloud ä» F ç‰ˆèµ·å·²ä¸éœ€è¦è‡ªå·±æ„å»º Zipkin server äº†ï¼Œåªéœ€è¦è°ƒç”¨ jar åŒ…å³å¯ https://dl.bintray.com/openzipkin/maven/io/zipkin/java/zipkin-server/ zipkin-server-2.12.9.exec.jar è¿è¡Œ jar è¿è¡Œæ§åˆ¶å° http://localhost:9411/zipkin/ æœ¯è¯­ å®Œæ•´çš„è°ƒç”¨é“¾è·¯ ä¸Šå›¾ what åè¯è§£é‡Š Traceï¼š ç±»ä¼¼äºæ ‘ç»“æ„çš„ Span é›†åˆï¼Œè¡¨ç¤ºä¸€æ¡è°ƒç”¨é“¾è·¯ï¼Œå­˜åœ¨å”¯ä¸€æ ‡è¯† span: è¡¨ç¤ºè°ƒç”¨é“¾è·¯æ¥æºï¼Œé€šä¿—çš„ç†è§£ span å°±æ˜¯ä¸€æ¬¡è¯·æ±‚ä¿¡æ¯ â‘¡ æœåŠ¡æä¾›è€… cloud-provider-payment8001 POM 12345&lt;!--åŒ…å«äº† sleuth+zipkin--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;&lt;/dependency&gt; YML 12345678910111213141516171819202122232425262728293031server: port: 8001spring: application: name: cloud-payment-service zipkin: base-url: http://localhost:9411 sleuth: sampler: #é‡‡æ ·ç‡å€¼ä»‹äº 0 åˆ° 1 ä¹‹é—´ï¼Œ1 åˆ™è¡¨ç¤ºå…¨éƒ¨é‡‡é›† probability: 1 datasource: type: com.alibaba.druid.pool.DruidDataSource driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/db2019?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC username: root password: 6090mybatis: mapperLocations: classpath:mapper/*.xml type-aliases-package: com.oy.springcloud.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ…eureka: client: register-with-eureka: true fetch-registry: true service-url: # é›†ç¾¤ç‰ˆ defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka instance: instance-id: payment8001 prefer-ip-address: true ä¸šåŠ¡ç±» PaymentController 123456// ====================&gt; zipkin+sleuth@GetMapping(&quot;/payment/zipkin&quot;)public String paymentZipkin()&#123; return &quot;hi ,i&#x27;am paymentzipkin server fall backï¼Œwelcome to atguiguï¼ŒO(âˆ©_âˆ©)Oå“ˆå“ˆ~&quot;;&#125; â‘¢ æœåŠ¡æ¶ˆè´¹è€…ï¼ˆè°ƒç”¨æ–¹ï¼‰ cloud-consumer-order80 POM 12345&lt;!--åŒ…å«äº† sleuth+zipkin--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;&lt;/dependency&gt; YML 12345zipkin: base-url: http://localhost:9411sleuth: sampler: probability: 1 ä¸šåŠ¡ç±» OrderController 1234567@GetMapping(&quot;/consumer/payment/zipkin&quot;)public String paymentZipkin()&#123; String result = restTemplate.getForObject(&quot;http://localhost:8001&quot;+&quot;/payment/zipkin/&quot;, String.class); return result;&#125; â‘£ ä¾æ¬¡å¯åŠ¨ eureka7001/8001/8080 è°ƒç”¨ 8001 å‡ æ¬¡æµ‹è¯•ä¸‹ ï¼š http://localhost/consumer/payment/zipkin â‘¤ æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp:localhost:9411 ä¼šå‡ºç°ä»¥ä¸‹ç•Œé¢ æŸ¥çœ‹ä¾èµ–å…³ç³» åŸç†","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud Stream æ¶ˆæ¯é©±åŠ¨","slug":"SpringCloud Stream æ¶ˆæ¯é©±åŠ¨","date":"2020-10-20T16:00:00.000Z","updated":"2021-01-22T03:52:54.713Z","comments":true,"path":"posts/1677637013.html","link":"","permalink":"http://blog.oy6090.top/posts/1677637013.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ ä¸€ã€æ¶ˆæ¯é©±åŠ¨æ¦‚è¿°â‘  æ˜¯ä»€ä¹ˆâ€‹ ä¸€å¥è¯ï¼š å±è”½åº•å±‚æ¶ˆæ¯ä¸­é—´ä»¶çš„å·®å¼‚ï¼Œé™ä½åˆ‡æ¢ç‰ˆæœ¬ï¼Œç»Ÿä¸€æ¶ˆæ¯çš„ç¼–ç¨‹æ¨¡å‹ å®˜ç½‘ https://spring.io/projects/spring-cloud-stream#overview Spring Cloud Stream æ˜¯ç”¨äºæ„å»ºä¸å…±äº« æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ è¿æ¥çš„é«˜åº¦å¯ä¼¸ç¼©çš„äº‹ä»¶é©±åŠ¨å¾®æœåŠ¡æ¡†æ¶ï¼Œè¯¥æ¡†æ¶æä¾›ä¸€ä¸ªçµæ´»çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå®ƒå»ºç«‹åœ¨ spring çš„åŸºç¡€ä¸Šï¼ŒåŒ…æ‹¬æ”¯æŒæŒä¹…åŒ–çš„å‘å¸ƒ/è®¢é˜…ã€æ¶ˆè´¹ä»¥åŠåˆ†åŒº è¿™ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ https://cloud.spring.io/spring-cloud-static/spring-cloud-stream/3.0.1.RELEASE/reference/html/ Spring Cloud Stream ä¸­ æ–‡ æŒ‡ å¯¼ æ‰‹ å†Œ ï¼šhttps://m.wang1314.com/doc/webapp/topic/20971999.html â‘¡ è®¾è®¡æ€æƒ³ æ ‡å‡† MQ ç”Ÿäº§è€…/æ¶ˆè´¹è€… ä¹‹é—´é æ¶ˆæ¯åª’ä»‹ä¼ é€’æ¶ˆæ¯å†…å®¹ â€“ Message æ¶ˆæ¯å¿…é¡»èµ°ç‰¹å®šçš„é€šé“ â€“ æ¶ˆæ¯é€šé“ MessageChannel æ¶ˆæ¯é€šé“é‡Œçš„æ¶ˆæ¯å¦‚ä½•è¢«æ¶ˆè´¹å‘¢ï¼Œè°è´Ÿè´£å¤„ç† â€“ æ¶ˆæ¯é€šé“ MessageChannel çš„å­æ¥å£ SubscribaleChannelï¼Œ ç”± MessageHandle æ¶ˆæ¯å¤„ç†å™¨è®¢é˜… ä¸ºä»€ä¹ˆç”¨ Cloud Stream æ¯”æ–¹è¯´æˆ‘ä»¬ç”¨åˆ°çš„äº† RabbitMQ å’Œ Kafkaï¼Œç”±äºè¿™ä¸¤ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶çš„æ¶æ„ä¸Šçš„ä¸åŒï¼Œåƒ RabbitMQ æœ‰ exchange, kafka æœ‰ Topic å’Œ Partitions åˆ†åŒº è¿™äº›ä¸­é—´ä»¶çš„å·®å¼‚æ€§å¯¼è‡´æˆ‘ä»¬å®é™…é¡¹ç›®å¼€å‘ä¸­ä¼šé€ æˆä¸€å®šå›°æ‰°ï¼Œ æˆ‘ä»¬å¦‚æœç”¨äº†ä¸¤ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„å…¶ä¸­ä¸€ç§ï¼Œ åé¢çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æƒ³å¾€å¦å¤–ä¸€ç§æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œè¿ç§»ï¼Œ è¿™æ—¶å€™æ— ç–‘å°±æ˜¯ä¸€ä¸ªç¾éš¾æ€§çš„ï¼Œ ä¸€å¤§å †ä¸œè¥¿éƒ½è¦ä¸­å¿ƒæ¨å€’é‡æ–°åšï¼Œ å› ä¸ºä»–è·Ÿæˆ‘ä»¬çš„ç³»ç»Ÿè€¦åˆäº†ï¼Œ è¿™æ—¶å€™ springcloud Stream ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§è§£è€¦åˆçš„æ–¹å¼ã€‚ stream å‡­ä»€ä¹ˆå¯ä»¥ç»Ÿä¸€åº•å±‚å·®å¼‚ ã€‚ 4.Binder INPUT å¯¹åº”æ¶ˆè´¹è€… OUTPUT å¯¹åº”äºç”Ÿäº§è€… Stream ä¸­çš„æ¶ˆæ¯é€šä¿¡æ–¹å¼éµå¾ªäº†å‘å¸ƒ-è®¢é˜…æ¨¡å¼ Topic ä¸»é¢˜è¿›è¡Œå¹¿æ’­ åœ¨ RabbitMQ å°±æ˜¯ Exchange åœ¨ Kafka ä¸­å°±æ˜¯ Topic â‘¢ Spring Cloud Stream æ ‡å‡†æµç¨‹å¥—è·¯ Binderï¼šå¾ˆæ–¹ä¾¿çš„è¿æ¥ä¸­é—´ä»¶ï¼Œå±è”½å·®å¼‚ Channelï¼š é€šé“ï¼Œæ˜¯é˜Ÿåˆ— Query çš„ä¸€ç§æŠ½è±¡ï¼Œåœ¨æ¶ˆæ¯é€šè®¯ç³»ç»Ÿä¸­å°±æ˜¯å®ç°å­˜å‚¨å’Œè½¬å‘çš„åª’ä»‹ï¼Œé€šè¿‡å¯¹ Channel å¯¹é˜Ÿåˆ—è¿›è¡Œé…ç½® Source å’Œ Sinkï¼š ç®€ç­”çš„å¯ç†è§£ä¸ºå‚ç…§å¯¹è±¡æ˜¯ Spring Cloud Stream è‡ªèº«ï¼Œä» Stream å‘å¸ƒæ¶ˆæ¯å°±æ˜¯è¾“å‡ºï¼Œæ¥æ”¶æ¶ˆæ¯å°±æ˜¯è¾“å…¥ â‘£ ç¼–ç  API å’Œå¸¸ç”¨æ³¨è§£ äºŒã€æ¡ˆä¾‹è¯´æ˜â‘  RabbitaMQ ç¯å¢ƒå·²ç» OKâ€‹ è¯·å‚è€ƒè¿™ç¯‡åšå®¢ï¼š SpringBoot ä¸æ¶ˆæ¯ â‘¡ å·¥ç¨‹ä¸­æ–°å»ºä¸‰ä¸ªå­æ¨¡å— cloud-stream-rabbitmq-provider8801,ä½œä¸ºç”Ÿäº§è€…è¿›è¡Œå‘æ¶ˆæ¯æ¨¡å— cloud-stream-rabbitmq-consumer8802,ä½œä¸ºæ¶ˆæ¯æ¥æ”¶æ¨¡å— cloud-stream-rabbitmq-consumer8803,ä½œä¸ºæ¶ˆæ¯æ¥æ”¶æ¨¡å— ä¸‰ã€æ¶ˆæ¯é©±åŠ¨ä¹‹ç”Ÿäº§è€… æ–°å»º Moduleï¼š cloud-stream-rabbitmq-provider8801 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-stream-rabbitmq-provider8801&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-stream-rabbit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--åŸºç¡€é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 123456789101112131415161718192021222324252627282930313233server: port: 8801spring: application: name: cloud-stream-provider cloud: stream: binders: # åœ¨æ­¤å¤„é…ç½®è¦ç»‘å®šçš„rabbitmqçš„æœåŠ¡ä¿¡æ¯ï¼› defaultRabbit: # è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºäºbindingæ•´åˆ type: rabbit # æ¶ˆæ¯ç»„ä»¶ç±»å‹ environment: # è®¾ç½®rabbitmqçš„ç›¸å…³çš„ç¯å¢ƒé…ç½® spring: rabbitmq: host: 116.63.177.72 port: 5672 username: guest password: guest bindings: # æœåŠ¡çš„æ•´åˆå¤„ç† output: # è¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªé€šé“çš„åç§° destination: studyExchange # è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°å®šä¹‰ content-type: application/json # è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºjsonï¼Œæ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€ binder: defaultRabbit # è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“è®¾ç½®eureka: client: # å®¢æˆ·ç«¯è¿›è¡ŒEurekaæ³¨å†Œçš„é…ç½® service-url: defaultZone: http://localhost:7001/eureka instance: lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯30ç§’ï¼‰ lease-expiration-duration-in-seconds: 5 # å¦‚æœç°åœ¨è¶…è¿‡äº†5ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰ instance-id: send-8801.com # åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§° prefer-ip-address: true # è®¿é—®çš„è·¯å¾„å˜ä¸ºIPåœ°å€ ä¸»å¯åŠ¨ç±» 123456@SpringBootApplicationpublic class StreamMQMain8801 &#123; public static void main(String[] args) &#123; SpringApplication.run(StreamMQMain8801.class, args); &#125;&#125; ä¸šåŠ¡ç±» å‘æ¶ˆæ¯æ¥å£ï¼š 1234public interface IMessageProvider &#123; public String send();&#125; å‘é€æ¶ˆæ¯æ¥å£å®ç°ç±» 1234567891011121314@EnableBinding(Source.class) // å®šä¹‰æ¶ˆæ¯çš„æ¨é€ç®¡é“public class MessionProvicerImpl implements IMessageProvider &#123; @Resource private MessageChannel output; // æ¶ˆæ¯å‘é€ç®¡é“ @Override public String send() &#123; String serial = UUID.randomUUID().toString(); output.send(MessageBuilder.withPayload(serial).build()); System.out.println(&quot;******serial:&quot; + serial); return null; &#125;&#125; Controller 123456789101112@RestControllerpublic class SendMessageController &#123; @Resource private IMessageProvider messageProvider; @GetMapping(value = &quot;/sendMessage&quot;) public String sendMessage() &#123; return messageProvider.send(); &#125;&#125; æµ‹è¯• å¯åŠ¨ 7001eureka å¯åŠ¨ rabbitmq http://localhost:15672/ ï¼ˆè‡ªå·±ä½¿ç”¨çš„æ˜¯ Dockerï¼‰ å¯åŠ¨ 8801 è®¿é—®ï¼š http://localhost:8801/sendMessage æ³¨æ„ï¼šæœ‰ä¸ªå¤§å‘,è§†é¢‘é‡Œçš„ application.yml ä½¿ç”¨äº† spring.cloud.stream.binders.defaultRabbit.environment.spring.rabbitmq.xx æ¥é…ç½® rabbitmq çš„ç¯å¢ƒå¦‚æœä½ æ˜¯ç”¨çš„å…¶ä»–æœåŠ¡å™¨ä¸Šçš„ rabbitmqï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨çš„æˆ‘è‡ªå·±çš„åä¸ºäº‘æœåŠ¡å™¨ç„¶ååˆ›å»º docker å®¹å™¨æ¥è¿è¡Œ rabbitmqã€‚æŒ‰ç…§è§†é¢‘ä¸­çš„é…ç½®æ–¹å¼çš„è¯ï¼Œå¯åŠ¨æ—¶ä¼šè¯•å›¾è¿æ¥ä¸¤æ¬¡ rabbitmq ç¨‹åºç¬¬ä¸€æ¬¡è¯•å›¾è¿æ¥è®¿é—®çš„å°±æ˜¯ application.yml ä¸­é…ç½® çš„åœ°å€ï¼Œæ­¤æ—¶å·²ç»è®¢é˜…æˆåŠŸäº†ä½†æ˜¯ç¨‹åºè¿˜ä¼šåœ¨ä¹‹åè¿›è¡Œç¬¬äºŒæ¬¡è¿æ¥ï¼Œæ­¤æ—¶è®¿é—®çš„åœ°å€å°±æ˜¯ localhost:5672ï¼Œåœ¨æˆ‘çš„ç¯å¢ƒä¸­ï¼Œæˆ‘æœ¬åœ° æ²¡æœ‰ rabbitmq ç¯å¢ƒï¼Œæ‰€ä»¥ç›´æ¥æŠ¥ IOException æ‰€ä»¥ï¼Œå¦‚æœæ˜¯ä½¿ç”¨çš„è‡ªå·±çš„æœåŠ¡å™¨æ¥é…ç½®ï¼Œåˆ™éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°† rabbitmq çš„é…ç½® ä¿¡æ¯ç§»åŠ¨åˆ° application.yml ä¸­çš„ spring èŠ‚ç‚¹ä¸‹ä¿®æ”¹åçš„é…ç½®å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031server: port: 8801spring: application: name: cloud-stream-provider rabbitmq: host: åä¸ºäº‘ip port: 5672 username: guest password: guest cloud: stream: binders: defaultRabbit: type: rabbit bindings: output: destination: studyExchange content-type: application/json binder: defaultRabbiteureka: client: # å®¢æˆ·ç«¯è¿›è¡ŒEurekaæ³¨å†Œçš„é…ç½® service-url: defaultZone: http://localhost:7001/eureka instance: lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯30ç§’ï¼‰ lease-expiration-duration-in-seconds: 5 # å¦‚æœç°åœ¨è¶…è¿‡äº†5ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰ instance-id: send-8801.com # åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§° prefer-ip-address: true # è®¿é—®çš„è·¯å¾„å˜ä¸ºIPåœ°å€ å››ã€æ¶ˆæ¯é©±åŠ¨ä¹‹æ¶ˆè´¹è€… æ–°å»º Module â€‹ cloud-stream-rabbitmq-consumer8802 POM 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-stream-rabbitmq-consumer8802&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-stream-rabbit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eure ka-server --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678910111213141516171819202122232425262728293031server: port: 8802spring: application: name: cloud-stream-consumer rabbitmq: host: åä¸ºäº‘ip // localhost port: 5672 username: guest password: guest cloud: stream: binders: # åœ¨æ­¤å¤„é…ç½®è¦ç»‘å®šçš„rabbitmqçš„æœåŠ¡ä¿¡æ¯ï¼› defaultRabbit: # è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºäºbindingæ•´åˆ type: rabbit # æ¶ˆæ¯ç»„ä»¶ç±»å‹ bindings: # æœåŠ¡çš„æ•´åˆå¤„ç† input: # è¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªé€šé“çš„åç§° destination: studyExchange # è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°å®šä¹‰ content-type: application/json # è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºå¯¹è±¡jsonï¼Œå¦‚æœæ˜¯æ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€ binder: defaultRabbit # è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“è®¾ç½®eureka: client: # å®¢æˆ·ç«¯è¿›è¡Œ Eureka æ³¨å†Œçš„é…ç½® service-url: defaultZone: http://localhost:7001/eureka instance: lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯ 30 ç§’ï¼‰ lease-expiration-duration-in-seconds: 5 # å¦‚æœç°åœ¨è¶…è¿‡äº† 5 ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯ 90ç§’ï¼‰ instance-id: receive-8802.com # åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§° prefer-ip-address: true # è®¿é—®çš„è·¯å¾„å˜ä¸º IP åœ°å€ ä¸»å¯åŠ¨ 123456@SpringBootApplicationpublic class StreamMQMain8802 &#123; public static void main(String[] args) &#123; SpringApplication.run(StreamMQMain8802.class, args); &#125;&#125; ä¸šåŠ¡ç±» 12345678910111213141516171819202122232425package com.oy.springcloud.controller;import org.springframework.cloud.stream.annotation.EnableBinding;import org.springframework.messaging.Message;import org.springframework.beans.factory.annotation.Value;import org.springframework.cloud.stream.annotation.StreamListener;import org.springframework.cloud.stream.messaging.Sink;import org.springframework.stereotype.Component;/** * @Author OY * @Date 2020/10/22 */@Component@EnableBinding(Sink.class)public class ReceiveMessageListenerController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @StreamListener(Sink.INPUT) public void input(Message&lt;String&gt; message)&#123; System.out.println(&quot; æ¶ˆ è´¹ è€… 1 å· ï¼Œ æ¥ å— ï¼š &quot;+message.getPayload()+&quot;\\t port:&quot;+serverPort); &#125;&#125; æµ‹è¯• 8801 å‘é€ 8802 æ¥æ”¶æ¶ˆæ¯ï¼š â€‹ http://localhost:8801/sendMessage äº”ã€åˆ†ç»„æ¶ˆè´¹ä¸æŒä¹…åŒ–â‘  é…ç½® 8803 ä¾ç…§ 8802ï¼Œ clone å‡ºæ¥ä¸€ä»½è¿è¡Œ 8803 cloud-stream-rabbitmq-consumer8803 POM 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-stream-rabbitmq-consumer8803&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-stream-rabbit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--åŸºç¡€é…ç½®--&gt; &lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678910111213141516171819202122232425262728293031server: port: 8803spring: application: name: cloud-stream-consumer rabbitmq: host: 116.63.177.72 port: 5672 username: guest password: guest cloud: stream: binders: # åœ¨æ­¤å¤„é…ç½®è¦ç»‘å®šçš„rabbitmqçš„æœåŠ¡ä¿¡æ¯ï¼› defaultRabbit: # è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºäºbindingæ•´åˆ type: rabbit # æ¶ˆæ¯ç»„ä»¶ç±»å‹ bindings: # æœåŠ¡çš„æ•´åˆå¤„ç† input: # è¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªé€šé“çš„åç§° destination: studyExchange # è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°å®šä¹‰ content-type: application/json # è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºå¯¹è±¡jsonï¼Œå¦‚æœæ˜¯æ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€ binder: defaultRabbit # è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“è®¾ç½®eureka: client: # å®¢æˆ·ç«¯è¿›è¡Œ Eureka æ³¨å†Œçš„é…ç½® service-url: defaultZone: http://localhost:7001/eureka instance: lease-renewal-interval-in-seconds: 2 # è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯ 30 ç§’ï¼‰ lease-expiration-duration-in-seconds: 5 # å¦‚æœç°åœ¨è¶…è¿‡äº† 5 ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯ 90ç§’ï¼‰ instance-id: receive-8803.com # åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§° prefer-ip-address: true # è®¿é—®çš„è·¯å¾„å˜ä¸º IP åœ°å€ ä¸»å¯åŠ¨ç±» 123456@SpringBootApplicationpublic class StreamMQMain8803 &#123; public static void main(String[] args) &#123; SpringApplication.run(StreamMQMain8803.class, args); &#125;&#125; Controller 12345678910111213141516171819202122232425package com.oy.springcloud.controller;import org.springframework.beans.factory.annotation.Value;import org.springframework.cloud.stream.annotation.EnableBinding;import org.springframework.cloud.stream.annotation.StreamListener;import org.springframework.cloud.stream.messaging.Sink;import org.springframework.messaging.Message;import org.springframework.stereotype.Component;/** * @Author OY * @Date 2020/10/22 */@Component@EnableBinding(Sink.class)public class ReceiveMessageListenerController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @StreamListener(Sink.INPUT) public void input(Message&lt;String&gt; message)&#123; System.out.println(&quot; æ¶ˆ è´¹ è€… 2 å· ï¼Œ æ¥ å— ï¼š &quot;+message.getPayload()+&quot;\\t port:&quot;+serverPort); &#125;&#125; â‘¡ å¯åŠ¨ RabbitMQ 7001ï¼š æœåŠ¡æ³¨å†Œ 8801ï¼š æ¶ˆæ¯ç”Ÿäº§ 8802ï¼š æ¶ˆæ¯æ¶ˆè´¹ 8803ï¼š æ¶ˆæ¯æ¶ˆè´¹ â‘¢ è¿è¡Œåä¸¤ä¸ªé—®é¢˜ æœ‰é‡å¤æ¶ˆè´¹é—®é¢˜ æ¶ˆæ¯æŒä¹…åŒ–é—®é¢˜ ã€ â‘£ æ¶ˆè´¹ï¼š ç›®å‰æ˜¯ 8802/8803 åŒæ—¶éƒ½æ”¶åˆ°äº†ï¼Œ å­˜åœ¨é‡å¤æ¶ˆè´¹é—®é¢˜ http://localhost:8801/sendMessage å¦‚ä½•è§£å†³ï¼š åˆ†ç»„å’ŒæŒä¹…åŒ–å±æ€§ group ç”Ÿäº§å®é™…æ¡ˆä¾‹ â‘¤ åˆ†ç»„åŸç† â€‹ å¾®æœåŠ¡åº”ç”¨æ”¾ç½®äºåŒä¸€ä¸ª group ä¸­ï¼Œå°±èƒ½ä¿è¯æ¶ˆæ¯åªä¼šè¢«å…¶ä¸­ä¸€ä¸ªåº”ç”¨æ¶ˆè´¹ä¸€æ¬¡ã€‚ä¸åŒçš„ç»„æ˜¯å¯ä»¥æ¶ˆè´¹çš„ã€‚åŒä¸€ä¸ªç»„å†…å‘ç”Ÿçš„ç«äº‰çš„å…³ç³»ï¼Œåªæœ‰ä¸€ä¸ªå¯ä»¥æ¶ˆè´¹ã€‚ 8802/8803 éƒ½å˜æˆä¸åŒç»„ï¼Œ group ä¸¤ä¸ªä¸åŒ group: atguiguAã€ atguiguB 8802 ä¿®æ”¹ YML 1group: atguiguA 8803 ä¿®æ”¹ YML 1group: atguiguB æˆ‘ä»¬è‡ªå·±é…ç½® â€‹ åˆ†å¸ƒå¼å¾®æœåŠ¡åº”ç”¨ä¸ºäº†å®ç°é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡ï¼Œå®é™…ä¸Šéƒ½ä¼šæˆ·æ•°å¤šä¸ªå®ä¾‹ï¼Œæœ¬ä¾‹å¯åŠ¨äº†ä¸¤ä¸ªæ¶ˆè´¹å¾®æœåŠ¡ï¼ˆ8802/8803ï¼‰å¤šæ•°æƒ…å†µï¼Œç”Ÿäº§è€…å‘é€æ¶ˆæ¯ç»™æŸä¸ªå…·ä½“å¾®æœåŠ¡åªå¸Œæœ›è¢«æ¶ˆè´¹ä¸€æ¬¡ï¼ŒæŒ‰ç…§ä¸Šé¢æˆ‘ä»¬å¯åŠ¨ä¸¤ä¸ªåº”ç”¨çš„ä¾‹å­ï¼Œè™½ç„¶å®ƒä»¬åŒå±ä¸€ä¸ªåº”ç”¨ï¼Œä½†æ˜¯è¿™ä¸ªæ¶ˆæ¯å‡ºç°äº†è¢«é‡å¤æ¶ˆè´¹ä¸¤æ¬¡çš„æƒ…å†µã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ Spring Cloud Stream ä¸­æä¾›äº†æ¶ˆè´¹ç»„çš„æ¦‚å¿µã€‚ ç»“è®ºï¼š è¿˜æ˜¯é‡å¤æ¶ˆè´¹ 8802/8803 å®ç°äº†è½®è¯¢åˆ†ç»„ï¼Œ æ¯æ¬¡åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€… 8801 æ¨¡å—çš„å‘çš„æ¶ˆæ¯åªèƒ½è¢« 8802 æˆ– 8803 å…¶ä¸­ä¸€ä¸ªæ¥æ”¶åˆ°ï¼Œ è¿™æ ·é¿å…äº†é‡å¤ æ¶ˆè´¹ ã€‚ 8802/8803 éƒ½å˜æˆç›¸åŒç»„ï¼Œ group ä¸¤ä¸ªç›¸åŒ ã€‚ group: atguiguA 8802 ä¿®æ”¹ YML 1group: atguiguA 8803 ä¿®æ”¹ YML 1group: atguiguA ç»“è®ºï¼š åŒä¸€ä¸ªç»„çš„å¤šä¸ªå¾®æœåŠ¡å®ä¾‹ï¼Œ æ¯æ¬¡åªä¼šæœ‰ä¸€ä¸ªæ‹¿åˆ° â‘¥ æŒä¹…åŒ–é€šè¿‡ä¸Šè¿°ï¼Œ è§£å†³äº†é‡å¤æ¶ˆè´¹é—®é¢˜ï¼Œ å†çœ‹çœ‹æŒä¹…åŒ–ï¼Œåœæ­¢ 8802/8803 å¹¶å»é™¤æ‰ 8802 çš„åˆ†ç»„ group:atguiguAï¼Œ8803 çš„åˆ†ç»„ group:atguiguA æ²¡æœ‰å»æ‰ã€‚8801 å…ˆå‘é€ 4 æ¡ä¿¡æ¯åˆ° rabbitmqã€‚ å…ˆå¯åŠ¨ 8802ï¼Œ æ— åˆ†ç»„å±æ€§é…ç½®ï¼Œ åå°æ²¡æœ‰æ‰“å‡ºæ¥æ¶ˆæ¯ å…ˆå¯åŠ¨ 8803ï¼Œ æœ‰åˆ†ç»„å±æ€§é…ç½®ï¼Œ åå°æ‰“å‡ºæ¥äº† MQ ä¸Šçš„æ¶ˆæ¯","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud Alibaba å…¥é—¨ç®€ä»‹","slug":"SpringCloud Alibaba å…¥é—¨ç®€ä»‹","date":"2020-10-19T16:00:00.000Z","updated":"2020-11-06T14:53:31.708Z","comments":true,"path":"posts/80f09d1c.html","link":"","permalink":"http://blog.oy6090.top/posts/80f09d1c.html","excerpt":"","text":"åšå®¢å‚è€ƒå­¦ä¹ è§†é¢‘ SpringCloud Alibaba å…¥é—¨ç®€ä»‹ä¸€ã€ why ä¼šå‡ºç° SpringCloud Alibaba å…¥é—¨ç®€ä»‹â‘  spring cloud Netflix é¡¹ç›®è¿›å…¥ç»´æŠ¤æ¨¡å¼ è¯´æ˜ï¼š Spring Cloud Netflix é¡¹ç›®è¿›å…¥ç»´æŠ¤æ¨¡å¼ æœ€è¿‘ï¼ŒNetflix æ­£å¼è¿›å…¥ç»´æŠ¤é˜¶æ®µæ¨¡å¼ã€‚è‡ª2016å¹´ä»¥æ¥ï¼Œ Ribbonå·²å¤„äºç±»ä¼¼çš„çŠ¶æ€ã€‚è™½ç„¶Hystrix å’Œ Raibbon ç°å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œä½†å®ƒä»¬ä»åœ¨Netflixå¤§è§„æ¨¡çš„éƒ¨ç½²ã€‚ Hystrixä»ªè¡¨æ¿å’Œæ¶¡è½®å·²è¢«Atlaså–ä»£ã€‚å¯¹è¿™äº›é¡¹ç›®çš„æœ€åæ‰¿è¯ºåˆ†åˆ«æ˜¯2å¹´å’Œ4å¹´å‰ã€‚Zuul 1å’ŒArchaius 1éƒ½å·²è¢«ä¸å‘åå…¼å®¹çš„æ›´é«˜ç‰ˆæœ¬æ‰€å–ä»£ã€‚ ä»¥ä¸‹Spring Cloud Netflixæ¨¡å—å’Œç›¸åº”çš„å¯åŠ¨å™¨å°†è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼š spring-cloud-netflix-archaiusspring-cloud-netflix-hystrix-contractspring-cloud-netflix-hystrix-dashboardspring-cloud-netflix-hystrix-streamspring-cloud-netflix-hystrixspring-cloud-netflix-ribbonspring-cloud-netflix-turbine-streamspring-cloud-netflix-turbinespring-cloud-netflix-zuul è¿™ä¸åŒ…æ‹¬Eurekaæˆ–å¹¶å‘é™åˆ¶æ¨¡å—ã€‚ ä»€ä¹ˆæ˜¯ç»´æŠ¤æ¨¡å¼ï¼Ÿå°†æ¨¡å—ç½®äºç»´æŠ¤æ¨¡å¼æ„å‘³ç€Spring Cloudå›¢é˜Ÿå°†ä¸å†å‘è¯¥æ¨¡å—æ·»åŠ æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬å°†ä¿®å¤é˜»æ­¢ç¨‹åºé”™è¯¯å’Œå®‰å…¨æ€§é—®é¢˜ï¼Œè¿˜å°†è€ƒè™‘å¹¶å®¡æŸ¥ç¤¾åŒºçš„ä¸€äº›å°è¯·æ±‚ã€‚ â‘¡ SpringCloud NetFlix Projects Entering Maintenance Modeä»€ä¹ˆæ˜¯ç»´æŠ¤æ¨¡å¼ è¿›å…¥ç»´æŠ¤æ¨¡å¼æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ äºŒã€SpringBoot alibaba å¸¦æ¥äº†ä»€ä¹ˆ æ˜¯ä»€ä¹ˆ å®˜ç½‘ï¼š https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md èƒ½å¹²å˜› å»å“ªä¸‹ https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md æ€ä¹ˆç© Sentinelï¼š æŠŠæµé‡ä½œä¸ºåˆ‡å…¥ç‚¹ï¼Œ ä»æµé‡æ§åˆ¶ã€ ç†”æ–­é™çº§ã€ ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§ã€‚ Nacosï¼š ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€ é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚ RocketMQï¼š ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œ åŸºäºé«˜å¯ç”¨åˆ†å¸ƒå¼é›†ç¾¤æŠ€æœ¯ï¼Œ æä¾›ä½å»¶æ—¶çš„ã€ é«˜å¯é çš„æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…æœåŠ¡ã€‚ Dubboï¼š Apache Dubboâ„¢ æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ Java RPC æ¡†æ¶ã€‚ Seataï¼š é˜¿é‡Œå·´å·´å¼€æºäº§å“ï¼Œ ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„é«˜æ€§èƒ½å¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚ Alibaba Cloud ACMï¼š ä¸€æ¬¾åœ¨åˆ†å¸ƒå¼æ¶æ„ç¯å¢ƒä¸­å¯¹åº”ç”¨é…ç½®è¿›è¡Œé›†ä¸­ç®¡ç†å’Œæ¨é€çš„åº”ç”¨é…ç½®ä¸­å¿ƒäº§å“ã€‚ Alibaba Cloud OSS: é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ˆObject Storage Serviceï¼Œ ç®€ç§° OSSï¼‰ ï¼Œæ˜¯é˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€ å®‰å…¨ã€ ä½æˆæœ¬ã€ é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚ æ‚¨å¯ä»¥åœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚ Alibaba Cloud SchedulerX: é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦äº§å“ï¼Œæä¾›ç§’çº§ã€ ç²¾å‡†ã€ é«˜å¯é ã€ é«˜å¯ç”¨çš„å®šæ—¶ï¼ˆåŸºäº Cron è¡¨è¾¾å¼ï¼‰ ä»»åŠ¡è°ƒåº¦æœåŠ¡ã€‚ Alibaba Cloud SMS: è¦†ç›–å…¨çƒçš„çŸ­ä¿¡æœåŠ¡ï¼Œ å‹å¥½ã€ é«˜æ•ˆã€ æ™ºèƒ½çš„äº’è”åŒ–é€šè®¯èƒ½åŠ›ï¼Œ å¸®åŠ©ä¼ä¸šè¿…é€Ÿæ­å»ºå®¢æˆ·è§¦è¾¾é€šé“ã€‚ SpringCloud alibaba å­¦ä¹ èµ„æ–™è·å– ä¸‰ã€SpringCloud alibaba å­¦ä¹ èµ„æ–™è·å–â‘  å®˜ç½‘https://spring.io/projects/spring-cloud-alibaba#overview â‘¡ è‹±æ–‡ https://github.com/alibaba/spring-cloud-alibaba https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html â‘¢ ä¸­æ–‡ https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud Bus æ¶ˆæ¯æ€»çº¿","slug":"SpringCloud Bus æ¶ˆæ¯æ€»çº¿","date":"2020-10-19T16:00:00.000Z","updated":"2020-10-25T02:32:29.042Z","comments":true,"path":"posts/272460835.html","link":"","permalink":"http://blog.oy6090.top/posts/272460835.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ ä¸€ã€æ¦‚è¿°â‘  ä¸Šä¸€è®²è§£çš„åŠ æ·±å’Œæ‰©å……ï¼Œ ä¸€è¨€ä»¥è”½ä¹‹â€‹ åˆ†å¸ƒå¼è‡ªåŠ¨åˆ·æ–°é…ç½®åŠŸèƒ½ï¼ŒSpring Cloud Bus é…åˆ Spring Cloud Config ä½¿ç”¨å¯ä»¥å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°ã€‚ â‘¡ æ˜¯ä»€ä¹ˆ Bus æ”¯æŒä¸¤ç§æ¶ˆæ¯ä»£ç†ï¼š RabbitMQ å’Œ Kafka â‘¢ èƒ½å¹²å˜› â‘£ ä¸ºä½•è¢«ç§°ä¸ºæ€»çº¿ äºŒã€RabbitMQ ç¯å¢ƒé…ç½®å®‰è£…é‡‡ç”¨çš„æ˜¯ Linux CentOS7 çš„ Docker å®¹å™¨ï¼Œå…·ä½“å®‰è£…è¯·å‚è€ƒè¿™ç¯‡åšå®¢ï¼šhttps://oy6090.top/2020/10011634411798.html å®‰è£…å®Œæˆä¹‹åï¼Œæµ‹è¯•ï¼šä½ çš„ linux åœ°å€:15672 è¾“å…¥è´¦å·å¯†ç å¹¶ç™»å½•: guest guest ä¸‰ã€SpringCloud Bus åŠ¨æ€åˆ·æ–°å…¨å±€å¹¿æ’­1.å¿…é¡»å…ˆå…·å¤‡è‰¯å¥½çš„ RabbitMQ ç¯å¢ƒ2.æ¼”ç¤ºå¹¿æ’­æ•ˆæœï¼Œ å¢åŠ å¤æ‚åº¦ï¼Œ å†ä»¥ 3355 ä¸ºæ¨¡æ¿å†åˆ¶ä½œä¸€ä¸ª 3366 æ–°å»ºï¼š cloud-config-client-3366 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-config-client-3366&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML (bootstrap.yml) 123456789101112131415161718192021222324252627282930313233server: port: 3366spring: application: name: config-client cloud: #Configå®¢æˆ·ç«¯é…ç½® config: label: main #åˆ†æ”¯åç§° ,æ³¨æ„æœ€æ–°GitHubå¯¹masterè¿›è¡Œäº†è°ƒæ•´ï¼Œæ”¹ä¸ºmainäº†ã€‚ name: config #é…ç½®æ–‡ä»¶åç§° profile: dev #è¯»å–åç¼€åç§° ä¸Šè¿°3ä¸ªç»¼åˆï¼šmasteråˆ†æ”¯ä¸Šconfig-dev.ymlçš„é…ç½®æ–‡ä»¶è¢«è¯»å–http://config-3344.com:3344/master/config-dev.yml uri: http://localhost:3344 #é…ç½®ä¸­å¿ƒåœ°å€ #rabbitmqç›¸å…³é…ç½® 15672æ˜¯Webç®¡ç†ç•Œé¢çš„ç«¯å£ï¼›5672æ˜¯MQè®¿é—®çš„ç«¯å£ rabbitmq: host: localhost port: 5672 username: guest password: guest#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eureka# æš´éœ²ç›‘æ§ç«¯ç‚¹management: endpoints: web: exposure: include: &quot;*&quot; ä¸»å¯åŠ¨ 1234567@SpringBootApplication@EnableEurekaClientpublic class ConfigClientMain3366 &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigClientMain3366.class, args); &#125;&#125; 3.è®¾è®¡æ€æƒ³ åˆ©ç”¨æ¶ˆæ¯æ€»çº¿è§¦å‘ä¸€ä¸ªå®¢æˆ·ç«¯ /bus/refresh , è€Œåˆ·æ–°æ‰€æœ‰çš„å®¢æˆ·ç«¯çš„é…ç½® 2.åˆ©ç”¨æ¶ˆæ¯æ€»çº¿è§¦å‘ä¸€ä¸ªæœåŠ¡ç«¯ ConfigServer çš„ /bus/refresh ç«¯ç‚¹ï¼Œè€Œåˆ·æ–°æ‰€æœ‰å®¢æˆ·ç«¯çš„é…ç½®ï¼ˆæ›´åŠ æ¨èï¼‰ å›¾äºŒçš„æ¶æ„æ˜¾ç„¶æ›´åŠ åˆé€‚ï¼Œ å›¾ä¸€ä¸é€‚åˆçš„åŸå› å¦‚ä¸‹ æ‰“ç ´äº†å¾®æœåŠ¡çš„èŒè´£å•ä¸€æ€§ï¼Œå› ä¸ºå¾®æœåŠ¡æœ¬èº«çš„ä¸šåŠ¡æ¨¡å—ï¼Œå®ƒæœ¬èº«ä¸åº”è¯¥æ‰¿æ‹…é…ç½®åˆ·æ–°èŒè´£ã€‚ ç ´åäº†å¾®æœåŠ¡ä¸ªèŠ‚ç‚¹çš„å¯¹ç­‰æ€§ æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚ä¾‹å¦‚ï¼Œå¾®æœåŠ¡åœ¨è¿ç§»æ—¶ï¼Œå®ƒçš„ç½‘ç»œåœ°å€å¸¸å¸¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ­¤æ—¶å¦‚æœæƒ³è¦åšåˆ°è‡ªåŠ¨åˆ·æ–°ï¼Œé‚£å°±ä¼šå¢åŠ æ›´å¤šçš„ä¿®æ”¹ã€‚ 4.ç»™ cloud-config-center-3344 é…ç½®ä¸­å¿ƒæœåŠ¡ç«¯æ·»åŠ æ¶ˆæ¯æ€»çº¿æ”¯æŒ POM 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;&lt;/dependency&gt; YML 12345678910111213141516171819202122232425262728293031323334353637server: port: 3344spring: application: name: cloud-config-center #æ³¨å†Œè¿›EurekaæœåŠ¡å™¨çš„å¾®æœåŠ¡å cloud: config: server: git: uri: https://github.com/18731049401/springcloud-config.git #GitHubä¸Šé¢çš„gitä»“åº“åå­— ####æœç´¢ç›®å½• search-paths: - springcloud-config ####è¯»å–åˆ†æ”¯ label: main # æ³¨æ„æœ€æ–°GitHubå¯¹masterè¿›è¡Œäº†è°ƒæ•´ï¼Œæ”¹ä¸ºmainäº†ã€‚#rabbitmqç›¸å…³é…ç½® rabbitmq: host: localhost port: 5672 username: guest password: guest#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eureka##rabbitmqç›¸å…³é…ç½®,æš´éœ²busåˆ·æ–°é…ç½®çš„ç«¯ç‚¹management: endpoints: #æš´éœ²busåˆ·æ–°é…ç½®çš„ç«¯ç‚¹ web: exposure: include: &#x27;bus-refresh&#x27; 5.ç»™ cloud-config-center-3355 å®¢æˆ·ç«¯æ·»åŠ æ¶ˆæ¯æ€»çº¿æ”¯æŒ POM 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;&lt;/dependency&gt; YML 123456789101112131415161718192021222324252627282930313233server: port: 3355spring: application: name: config-client cloud: #Configå®¢æˆ·ç«¯é…ç½® config: label: main #åˆ†æ”¯åç§° name: config #é…ç½®æ–‡ä»¶åç§° profile: dev #è¯»å–åç¼€åç§° ä¸Šè¿°3ä¸ªç»¼åˆï¼šmasteråˆ†æ”¯ä¸Šconfig-dev.ymlçš„é…ç½®æ–‡ä»¶è¢«è¯»å–http://config-3344.com:3344/master/config-dev.yml uri: http://localhost:3344 #é…ç½®ä¸­å¿ƒåœ°å€k #rabbitmqç›¸å…³é…ç½® 15672æ˜¯Webç®¡ç†ç•Œé¢çš„ç«¯å£ï¼›5672æ˜¯MQè®¿é—®çš„ç«¯å£ rabbitmq: host: localhost port: 5672 username: guest password: guest#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eureka# æš´éœ²ç›‘æ§ç«¯ç‚¹management: endpoints: web: exposure: include: &quot;*&quot; 6.ç»™ cloud-config-center-3366 å®¢æˆ·ç«¯æ·»åŠ æ¶ˆæ¯æ€»çº¿æ”¯æŒ POM 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;&lt;/dependency&gt; YML 123456789101112131415161718192021222324252627282930313233server: port: 3366spring: application: name: config-client cloud: #Configå®¢æˆ·ç«¯é…ç½® config: label: main #åˆ†æ”¯åç§° name: config #é…ç½®æ–‡ä»¶åç§° profile: dev #è¯»å–åç¼€åç§° ä¸Šè¿°3ä¸ªç»¼åˆï¼šmasteråˆ†æ”¯ä¸Šconfig-dev.ymlçš„é…ç½®æ–‡ä»¶è¢«è¯»å–http://config-3344.com:3344/master/config-dev.yml uri: http://localhost:3344 #é…ç½®ä¸­å¿ƒåœ°å€ #rabbitmqç›¸å…³é…ç½® 15672æ˜¯Webç®¡ç†ç•Œé¢çš„ç«¯å£ï¼›5672æ˜¯MQè®¿é—®çš„ç«¯å£ rabbitmq: host: localhost port: 5672 username: guest password: guest#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eureka# æš´éœ²ç›‘æ§ç«¯ç‚¹management: endpoints: web: exposure: include: &quot;*&quot; 7.æµ‹è¯• ä¿®æ”¹ Github ä¸Šé…ç½®æ–‡ä»¶å¢åŠ ç‰ˆæœ¬å· å‘é€ Post è¯·æ±‚ 1curl -X POST &quot;http://localhost:3344/actuator/bus-refresh&quot; ä¸€æ¬¡å‘é€ï¼Œ å¤„å¤„ç”Ÿæ•ˆ é…ç½®ä¸­å¿ƒ http://config-3344.com/config-dev.yml å®¢æˆ·ç«¯ http://localhost:3355/configInfo , http://localhost:3366/configInfo è·å–é…ç½®ä¿¡æ¯ï¼Œ å‘ç°éƒ½å·²ç»åˆ·æ–°äº† 8.ä¸€æ¬¡ä¿®æ”¹ï¼Œ å¹¿æ’­é€šçŸ¥ï¼Œ å¤„å¤„ç”Ÿæ•ˆå››ã€SpringCloud Bus åŠ¨æ€åˆ·æ–°å®šç‚¹é€šçŸ¥1.ä¸æƒ³å…¨éƒ¨é€šçŸ¥ï¼Œ åªæƒ³å®šç‚¹é€šçŸ¥ åªé€šçŸ¥ 3355ä¸é€šçŸ¥ 3366 2.ç®€å•ä¸€å¥è¯æŒ‡å®šå…·ä½“æŸä¸€ä¸ªå®ä¾‹ç”Ÿæ•ˆè€Œä¸æ˜¯å…¨éƒ¨ å…¬ å¼ ï¼š http://localhost: é… ç½® ä¸­ å¿ƒ çš„ ç«¯ å£ å· /actuator/bus-refresh/{destination} /bus/refresh è¯·æ±‚ä¸å†å‘é€åˆ°å…·ä½“çš„æœåŠ¡å®ä¾‹ä¸Šï¼Œ è€Œæ˜¯å‘ç»™ config server å¹¶é€šè¿‡ destination å‚æ•°ç±»æŒ‡å®šéœ€è¦æ›´æ–°é…ç½®çš„æœåŠ¡æˆ–å®ä¾‹ 3.æ¡ˆä¾‹ æˆ‘ä»¬è¿™é‡Œä»¥åˆ·æ–°è¿è¡Œåœ¨ 3355 ç«¯å£ä¸Šçš„ config-client ä¸ºä¾‹ åªé€šçŸ¥ 3355,ä¸é€šçŸ¥ 3366 1curl -X POST http:&#x2F;&#x2F;localhost:3344&#x2F;actuator&#x2F;bus-refresh&#x2F;config-client:3355 4.é€šçŸ¥æ€»ç»“ All","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ","slug":"SpringCloud config åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ","date":"2020-10-17T16:00:00.000Z","updated":"2020-10-25T02:32:53.006Z","comments":true,"path":"posts/1519064184.html","link":"","permalink":"http://blog.oy6090.top/posts/1519064184.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ â‘  æ¦‚è¿°1.åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é…ç½®é—®é¢˜â€‹ å¾®æœåŠ¡æ„å‘³ç€è¦å°†å•ä½“åº”ç”¨ä¸­çš„ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸ªå­æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡çš„ç²’åº¦ç›¸å¯¹å°ï¼Œå› æ­¤ç³»ç»Ÿä¸­å‡ºç°å¤§é‡çš„æœåŠ¡ï¼Œç”±äºæ¯ä¸ªæœåŠ¡éƒ½éœ€è¦é…ç½®ä¿¡æ¯æ‰èƒ½è¿è¡Œï¼Œæ‰€ä»¥ä¸€å¥—é›†ä¸­å¼çš„ã€åŠ¨æ€çš„é…ç½®ç®¡ç†è®¾æ–½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ â€‹ SpringCloud æä¾›äº† ConfigServer æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªå¾®æœåŠ¡è‡ªå·±çš„å¸¦ç€ä¸€ä¸ª application.ymlï¼Œ ä¸Šç™¾ä¸ªé…ç½®æ–‡ä»¶çš„ç®¡ç†â€¦o(â•¥ï¹â•¥)o 2.æ˜¯ä»€ä¹ˆ æ˜¯ä»€ä¹ˆSpringCloud Config ä¸ºå¾®æœåŠ¡æ¶æ„ä¸­å¾®æœåŠ¡æä¾›äº†é›†ä¸­åŒ–çš„å¤–éƒ¨é…ç½®æ”¯æŒï¼Œé…ç½®æœåŠ¡å™¨ä¸ºå„ä¸ªä¸åŒå¾®æœåŠ¡åº”ç”¨çš„çš„æ‰€æœ‰ç¯å¢ƒæä¾›äº†ä¸€ä¸ªä¸­å¿ƒåŒ–çš„å¤–éƒ¨é…ç½®ã€‚ å¦‚ä½•ä½¿ç”¨ Spring Cloud åˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤éƒ¨åˆ† æœåŠ¡ç«¯ä¹Ÿç§°ä¸ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨ï¼Œ ç”¨æ¥è¿æ¥é…ç½®æœåŠ¡å™¨å¹¶ä¸ºå®¢æˆ·ç«¯æä¾›è·å–é…ç½®ä¿¡æ¯ï¼ŒåŠ å¯†/ è§£å¯†ä¿¡æ¯ç­‰è®¿é—®æ¥å£ã€‚ å®¢æˆ·ç«¯åˆ™æ˜¯é€šè¿‡åˆ¶å®šçš„é…ç½®ä¸­å¿ƒæ¥ç®¡ç†åº”ç”¨èµ„æºï¼Œä»¥åŠä¸ä¸šåŠ¡ç›¸å…³çš„é…ç½®å†…å®¹ï¼Œå¹¶åœ¨å¯åŠ¨çš„æ—¶å€™ä»é…ç½®ä¸­å¿ƒè·å–å¥½åŠ è½½é…ç½®ä¿¡æ¯é…ç½®æœåŠ¡å™¨é»˜è®¤é‡‡ç”¨ git æ¥å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œè¿™æ ·å°±æœ‰åŠ©äºç¼“è§£é…ç½®æƒŠé†’ç‰ˆæœ¬ç®¡ç†ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ git å®¢æˆ·ç«¯å·¥å…·æ¥æ–¹ä¾¿ç®¡ç†å’Œè®¿é—®é…ç½®å†…å®¹ã€‚ 3.èƒ½å¹²å˜› é›†ä¸­ç®¡ç†é…ç½®æ–‡ä»¶ ä¸åŒçš„ç¯å¢ƒä¸åŒé…ç½®ï¼ŒåŠ¨æ€åŒ–çš„é…ç½®æ›´æ–°ï¼Œåˆ†ç¯å¢ƒéƒ¨ç½²æ¯”å¦‚ dev/test/prod/beta/release è¿è¡ŒæœŸé—´åŠ¨æ€è°ƒæ•´é…ç½®ï¼Œä¸åœ¨éœ€è¦åœ¨æ¯ä¸ªæœåŠ¡éƒ¨ç½²çš„æœºå™¨ä¸Šç¼–å†™é…ç½®æ–‡ä»¶ï¼ŒæœåŠ¡å›å‘é…ç½®ä¸­å¿ƒç»Ÿä¸€æ‹‰å–é…ç½®è‡ªå·±çš„ä¿¡æ¯ å½“é…ç½®å‘ç”Ÿå˜åŠ¨æ—¶ï¼ŒæœåŠ¡ä¸éœ€è¦é‡å¯å³å¯æ„ŸçŸ¥åˆ°é…ç½®çš„å˜åŒ–å¹¶ç”¨æ–°çš„é…ç½® å°†é…ç½®ä¿¡æ¯ä»¥ REST æ¥å£çš„å½¢å¼æš´éœ²ï¼Œ postã€curl è®¿é—®åˆ·æ–°å‡å¯â€¦ 4.ä¸ Github æ•´åˆé…ç½®ç”±äº SpringCloud Config é»˜è®¤ä½¿ç”¨ Git æ¥å­˜å‚¨é…ç½®æ–‡ä»¶ï¼ˆä¹Ÿæœ‰å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚æ”¯æŒ svn å’Œ æœ¬åœ°æ–‡ä»¶ï¼Œä½†æ˜¯æ¨èçš„è¿˜æ˜¯ git ,è€Œä¸”ä½¿ç”¨çš„æ˜¯ http/https è®¿é—®çš„å½¢å¼ï¼‰ 5.å®˜ç½‘https://cloud.spring.io/spring-cloud-static/spring-cloud-config/2.2.1.RELEASE/reference/html/ â‘¡ Config æœåŠ¡ç«¯é…ç½®ä¸æµ‹è¯•1.ç”¨ ä½  è‡ª å·± çš„ è´¦ å· åœ¨ Github ä¸Š æ–° å»º ä¸€ ä¸ª å ä¸º sprincloud-config çš„æ–° Repository2.ç”±ä¸Šä¸€æ­¥è·å¾—åˆšæ–°å»ºçš„ git åœ°å€å†™ä½ è‡ªå·±çš„ä»“åº“åœ°å€3.æœ¬åœ°ç¡¬ç›˜ä¸Šæ–°å»º git ä»“åº“å¹¶ clone æœ¬åœ°åœ°å€ï¼š D:\\44\\SpringCloud2020 git å‘½ä»¤ï¼š git clone xxx 4.æ­¤ æ—¶ åœ¨ æœ¬ åœ° D ç›˜ ç¬¦ ä¸‹ D:\\44\\SpringCloud2020\\springcloud-config è¡¨ç¤ºå¤šä¸ªç¯å¢ƒçš„é…ç½®æ–‡ä»¶,ä¿å­˜æ ¼å¼å¿…é¡»ä¸º UTF-8,å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œ æ­¤å¤„æ¨¡æ‹Ÿè¿ç»´äººå‘˜æ“ä½œ git å’Œ g ã€‚ git add git commit -m â€œinit ymlâ€ git push origin master 5.æ–°å»º Module æ¨¡å— cloud-config-center-3344 å®ƒæ—¢ä¸º Cloud çš„é…ç½®ä¸­å¿ƒæ¨¡å— cloudConfig Center POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-config-center-3344&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678910111213141516171819202122server: port: 3344spring: application: name: cloud-config-center #æ³¨å†Œè¿›EurekaæœåŠ¡å™¨çš„å¾®æœåŠ¡å cloud: config: server: git: uri: https://github.com/OY6090/sprincloud-config.git #GitHubä¸Šé¢çš„gitä»“åº“åå­— ####æœç´¢ç›®å½• search-paths: - springcloud-config ####è¯»å–åˆ†æ”¯ label: main#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eureka ä¸»å¯åŠ¨ç±» 1234567@SpringBootApplication@EnableConfigServerpublic class ConfigCenterMain3344 &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigCenterMain3344.class, args); &#125;&#125; Windows ä¸‹ä¿®æ”¹ hosts æ–‡ä»¶ï¼Œ å¢åŠ æ˜ å°„ è·¯å¾„ï¼šC:\\WINDOWS\\System32\\drivers\\etc æµ‹è¯•é€šè¿‡ Config å¾®æœåŠ¡æ˜¯å¦å¯ä»¥ä» Github ä¸Šè·å–é…ç½®å†…å®¹ å¯åŠ¨å¾®æœåŠ¡ 3344 http://config-3344.com:3344/main/config-dev.yml 6.è¯»å–é…ç½®è§„åˆ™ å®˜ç½‘ /{label}/{application}-{profile}.ymlï¼ˆæœ€æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼‰ main(maste) åˆ†æ”¯ http://config-3344.com:3344/main/config-dev.yml http://config-3344.com:3344/main/config-test.yml http://config-3344.com:3344/main/config-prod.yml dev åˆ†æ”¯ http://config-3344.com:3344/dev/config-dev.yml http://config-3344.com:3344/dev/config-test.yml http://config-3344.com:3344/dev/config-prod.yml /{application}-{profile}.yml http://config-3344.com:3344/config-dev.yml http://config-3344.com:3344/config-test.yml http://config-3344.com:3344/config-prod.yml http://config-3344.com:3344/config-xxxx.yml(ä¸å­˜åœ¨çš„é…ç½®) /{application}-{profile}[/{label}] http://config-3344.com:3344/config/dev/main http://config-3344.com:3344/config/test/main http://config-3344.com:3344/config/prod/main é‡è¦é…ç½®ç»†èŠ‚æ€»ç»“ /{name}-{profiles}.yml /{label}-{name}-{profiles}.yml label:åˆ†æ”¯ï¼ˆbranchï¼‰ name:æœåŠ¡å profilesï¼šç¯å¢ƒ(dev/test/prod) æˆåŠŸå®ç°äº†ç”¨ SpringCloud Config é€šè¿‡ GitHub è·å–é…ç½®ä¿¡æ¯ â‘¢ Config å®¢æˆ·ç«¯é…ç½®ä¸æµ‹è¯•1. æ–°å»º cloud-config-client-33552.POM12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-config-client-3355&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; 3.bootstrap.yml 123456789101112131415161718server: port: 3355spring: application: name: config-client cloud: #Configå®¢æˆ·ç«¯é…ç½® config: label: main #åˆ†æ”¯åç§° name: config #é…ç½®æ–‡ä»¶åç§° profile: dev #è¯»å–åç¼€åç§° ä¸Šè¿°3ä¸ªç»¼åˆï¼šmasteråˆ†æ”¯ä¸Šconfig-dev.ymlçš„é…ç½®æ–‡ä»¶è¢«è¯»å–http://config-3344.com:3344/master/config-dev.yml uri: http://localhost:3344 #é…ç½®ä¸­å¿ƒåœ°å€k#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eureka è¯´æ˜ï¼š 4.ä¿®æ”¹ config-dev.yml é…ç½®å¹¶æäº¤åˆ° GitHub ä¸­ï¼Œ æ¯”å¦‚åŠ ä¸ªå˜é‡ age æˆ–è€…ç‰ˆæœ¬å· version5.ä¸»å¯åŠ¨123456@SpringBootApplicationpublic class ConfigClientMain3355 &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigClientMain3355.class, args); &#125;&#125; 6.ä¸šåŠ¡ç±»1234567891011@RestControllerpublic class ConfigClientController &#123; @Value(&quot;$&#123;config.info&#125;&quot;) private String configInfo; @GetMapping(&quot;/configInfo&quot;) public String getConfigInfo()&#123; return configInfo; &#125;&#125; 7.æµ‹è¯• å¯åŠ¨ Config é…ç½®ä¸­å¿ƒ 3344 å¾®æœåŠ¡å¹¶è‡ªæµ‹ http://config-3344.com:3344/main/config-dev.yml http://config-3344.com:3344/main/config-test.yml å¯åŠ¨ 3355 ä½œä¸º Client å‡†å¤‡è®¿é—® http://localhost:3355/configInfo 8.æˆåŠŸå®ç°äº†å®¢æˆ·ç«¯ 3355 è®¿é—® SpringCloud Config3344 é€šè¿‡ GitHub è·å–é…ç½®ä¿¡æ¯9.é—®é¢˜éšä¹‹è€Œæ¥ï¼Œ åˆ†å¸ƒå¼é…ç½®çš„åŠ¨æ€åˆ·æ–° Linux è¿ç»´ä¿®æ”¹ GitHub ä¸Šçš„é…ç½®æ–‡ä»¶å†…å®¹åšè°ƒæ•´ åˆ·æ–° 3344ï¼Œ å‘ç° ConfigServer é…ç½®ä¸­å¿ƒç«‹åˆ»å“åº” åˆ·æ–° 3355ï¼Œ å‘ç° ConfigServer å®¢æˆ·ç«¯æ²¡æœ‰ä»»ä½•å“åº” 3355 æ²¡æœ‰å˜åŒ–é™¤éè‡ªå·±é‡å¯æˆ–è€…é‡æ–°åŠ è½½ éš¾é“æ¯æ¬¡è¿ç»´ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ å®¢æˆ·ç«¯éƒ½éœ€è¦é‡å¯ï¼Ÿ ï¼Ÿ å™©æ¢¦ â‘£ Config å®¢æˆ·ç«¯ä¹‹åŠ¨æ€åˆ·æ–°1.é¿å…æ¯æ¬¡æ›´æ–°é…ç½®éƒ½è¦é‡å¯2.åŠ¨æ€åˆ·æ–° ä¿®æ”¹ 3355 æ¨¡å—ï¼Œ POM æ–‡ä»¶å¼•å…¥ actuator ç›‘æ§ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt; ä¿®æ”¹ YMLï¼Œ æš´éœ²ç›‘æ§ç«¯å£ 1234567891011121314151617181920212223server: port: 3355spring: application: name: config-client cloud: #Configå®¢æˆ·ç«¯é…ç½® config: label: main #åˆ†æ”¯åç§° name: config #é…ç½®æ–‡ä»¶åç§° profile: dev #è¯»å–åç¼€åç§° ä¸Šè¿°3ä¸ªç»¼åˆï¼šmasteråˆ†æ”¯ä¸Šconfig-dev.ymlçš„é…ç½®æ–‡ä»¶è¢«è¯»å–http://config-3344.com:3344/master/config-dev.yml uri: http://localhost:3344 #é…ç½®ä¸­å¿ƒåœ°å€k#æœåŠ¡æ³¨å†Œåˆ°eurekaåœ°å€eureka: client: service-url: defaultZone: http://localhost:7001/eurekamanagement: endpoints: web: exposure: include: &quot;*&quot; @RefreshScope ä¸šåŠ¡ç±» Controller ä¿®æ”¹ 123456789101112@RestController@RefreshScopepublic class ConfigClientController &#123; @Value(&quot;$&#123;config.info&#125;&quot;) private String configInfo; @GetMapping(&quot;/configInfo&quot;) public String getConfigInfo() &#123; return configInfo; &#125;&#125; æ­¤æ—¶ä¿®æ”¹ githubâ€”&gt; 3344 â€”&gt; 3355 http://localhost:3355/configInfo 3355 æ”¹å˜äº†æ²¡æœ‰ï¼Ÿ ï¼Ÿ ï¼Ÿ æ²¡æœ‰æ”¹å˜ï¼Œ (â”¬ï¼¿â”¬) éœ€è¦è¿ç»´äººå‘˜å‘é€ Post è¯·æ±‚åˆ·æ–° 3355 å¿… é¡» æ˜¯ Post è¯· æ±‚ ï¼š curl -X POST â€œhttp://localhost:3355/actuator/refresh&quot; å†æ¬¡ï¼š http://localhost:3355/configInfo ,æˆåŠŸå®ç°äº†å®¢æˆ·ç«¯ 3355 åˆ·æ–°åˆ°æœ€æ–°é…ç½®å†…å®¹,é¿å…äº†æœåŠ¡çš„é‡å¯ 3.æƒ³æƒ³è¿˜æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿâ€‹ å‡å¦‚æœ‰å¤šä¸ªå¾®æœåŠ¡å®¢æˆ·ç«¯ 3355/3366/3377ã€‚ã€‚ã€‚ã€‚æ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰§è¡Œä¸€æ¬¡ post è¯·æ±‚ï¼Œ æ‰‹åŠ¨åˆ·æ–°ï¼Ÿå¯å¦å¹¿æ’­ï¼Œ ä¸€æ¬¡é€šçŸ¥ï¼Œ å¤„å¤„ç”Ÿæ•ˆï¼Ÿæˆ‘ä»¬æƒ³å¤§èŒƒå›´çš„è‡ªåŠ¨åˆ·æ–°ï¼Œ æ±‚æ–¹æ³•â€”â€”â€”â€“ç»“åˆæ¶ˆæ¯æ€»çº¿ Bus è§£å†³ä»¥ä¸Šé—®é¢˜ ã€‚ â€‹ å…·ä½“è¯·å‚è€ƒä¸‹ç¯‡åšå®¢ï¼šSpringCloud Bus æ¶ˆæ¯æ€»çº¿: https://oy6090.top/2020/1020272460835.html","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud æœåŠ¡ç½‘å…³","slug":"SpringCloud æœåŠ¡ç½‘å…³","date":"2020-10-17T16:00:00.000Z","updated":"2021-01-22T03:52:49.469Z","comments":true,"path":"posts/3556927238.html","link":"","permalink":"http://blog.oy6090.top/posts/3556927238.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ GateWay æ–°ç½‘å…³â‘  æ¦‚è¿°ç®€ä»‹1.å®˜ç½‘ ä¸Šä¸€ä»£ç½‘å…³ zuul 1.Xï¼šhttps://github.com/Netflix/zuul/wiki å½“ å‰ ç½‘ å…³ gateway ï¼šhttps://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/ 2.æ˜¯ä»€ä¹ˆæ¦‚è¿°ï¼š ä¸€å¥è¯ï¼š SpringCloud Getaway ä½¿ç”¨çš„ Webflux ä¸­çš„ reactor-netty å“åº”å¼ç¼–ç¨‹ç»„ä»¶ï¼Œåº•å±‚ä½¿ç”¨çš„ Netty é€šè®¯æ¡†æ¶ æºç æ¡†æ¶ 3.èƒ½å¹²å˜› åå‘ä»£ç† é‰´æƒ æµè§ˆæ§åˆ¶ ç†”æ–­ æ—¥å¿—ç›‘æ§ â€¦. 4.å¾®æœåŠ¡æ¶æ„ä¸­ç½‘å…³åœ¨å“ªé‡Œ 5.æœ‰äº† Zuul äº†æ€ä¹ˆåˆå‡ºæ¥äº† gateway æˆ‘ä»¬ä¸ºä»€ä¹ˆé€‰æ‹© Gatway? neflix ä¸å¤ªé è°±ï¼Œ zuul2.0 ä¸€ç›´è·³ç¥¨,è¿Ÿè¿Ÿä¸å‘å¸ƒ SpringCloud Gateway å…·æœ‰å¦‚ä¸‹ç‰¹æ€§ SpringCloud Gateway ä¸ Zuul çš„åŒºåˆ« Zuul1.x æ¨¡å‹ GateWay æ¨¡å‹ WebFlux æ˜¯ä»€ä¹ˆ â‘¡ ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ1.Route(è·¯ç”±)â€‹ è·¯ç”±çš„æ„å»ºç½‘å…³çš„åŸºæœ¬æ¨¡å—ï¼Œå®ƒç”± ID ï¼Œç›®æ ‡ URI ï¼Œ ä¸€ç³»åˆ—çš„æ–­è¨€å’Œè¿‡æ»¤å™¨ç»„æˆï¼Œå¦‚æœæ–­è¨€ä¸º true åˆ™åŒ¹é…è¯¥è·¯ç”± 2. Predicate(æ–­è¨€)â€‹ å‚è€ƒçš„æ˜¯ java8 çš„ java.util.function.Predicate å¼€å‘äººå‘˜å¯ä»¥åŒ¹é… HTTP è¯·æ±‚ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ˆä¾‹å¦‚è¯·æ±‚å¤´æˆ–è¯·æ±‚å‚æ•°ï¼‰ï¼Œå¦‚æœè¯·æ±‚åŸŸæ–­è¨€ç›¸åŒ¹é…åˆ™è¿›è¡Œè·¯ç”±ã€‚ 3. Filter(è¿‡æ»¤)â€‹ æŒ‡çš„æ˜¯ Spring æ¡†æ¶ä¸­ GatewayFilter çš„å®ä¾‹ï¼Œä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå¯ä»¥åœ¨è¯·æ±‚è¢«è·¯ç”±å‰æˆ–è€…ä¹‹åå¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ã€‚ 4. æ€»ä½“ â‘¢ Gateway å·¥ä½œæµç¨‹1.å®˜ç½‘æ€»ç»“ 2.æ ¸å¿ƒé€»è¾‘â€‹ è·¯ç”±è½¬å‘+æ‰§è¡Œè¿‡æ»¤å™¨é“¾ â‘£ å…¥é—¨é…ç½® æ–°å»º Module: cloud-gateway-gateway9527 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-gateway-gateway9527&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--æ–°å¢ gateway--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678910111213server: port: 9527spring: application: name: cloud-gatewayeureka: instance: hostname: cloud-gateway-service client: #æœåŠ¡æä¾›è€…provideræ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨ä¸­ service-url: register-with-eureka: true fetch-registry: true defaultZone: http://eureka7001.com:7001/eureka ä¸šåŠ¡ç±» ï¼ˆæ— ï¼‰ ä¸»å¯åŠ¨ç±» 1234567@SpringBootApplication@EnableEurekaClientpublic class GateWayMain9527 &#123; public static void main(String[] args) &#123; SpringApplication.run(GateWayMain9527.class, args); &#125;&#125; **9527 ç½‘å…³å¦‚ä½•åšè·¯ç”±æ˜ å°„é‚£ï¼Ÿ ï¼Ÿ ï¼Ÿ ** cloud-provider-payment8001 çœ‹çœ‹ controller çš„è®¿é—®åœ°å€ get lb æˆ‘ä»¬ç›®å‰ä¸æƒ³æš´éœ² 8001 ç«¯å£ï¼Œå¸Œæœ›åœ¨ 8001 å¤–é¢å¥—ä¸€å±‚ 9527 YML æ–°å¢ç½‘å…³é…ç½® 123456789101112131415161718192021222324252627server: port: 9527spring: application: name: cloud-gateway cloud: gateway: discovery: locator: enabled: true # å¼€å¯ä»æ³¨å†Œä¸­å¿ƒåŠ¨æ€åˆ›å»ºè·¯ç”±çš„åŠŸèƒ½ï¼Œåˆ©ç”¨å¾®æœåŠ¡åç§°jè¿›è¡Œè·¯ç”± routes: - id: payment_route # è·¯ç”±çš„id,æ²¡æœ‰è§„å®šè§„åˆ™ä½†è¦æ±‚å”¯ä¸€,å»ºè®®é…åˆæœåŠ¡å #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€ uri: http://localhost:8001 predicates: - Path=/payment/get/** # æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”± - id: payment_route2 uri: http://localhost:8001 predicates: Path=/payment/lb/** #æ–­è¨€,è·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±eureka: instance: hostname: cloud-gateway-service client: #æœåŠ¡æä¾›è€…provideræ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨ä¸­ service-url: register-with-eureka: true fetch-registry: true defaultZone: http://eureka7001.com:7001/eureka æµ‹è¯• å¯åŠ¨ 7001 å¯åŠ¨ 8001ï¼š cloud-provider-payment8001 å¯åŠ¨ 8001ï¼š cloud-provider-payment8001 è®¿é—®è¯´æ˜ æ·»åŠ ç½‘å…³å‰ï¼š http://localhost:8001/payment/get/1 æ·»åŠ ç½‘å…³åï¼š http://localhost:9527/payment/get/1 YML é…ç½®è¯´æ˜ Gateway ç½‘å…³è·¯ç”±æœ‰ä¸¤ç§é…ç½®æ–¹å¼ åœ¨é…ç½®æ–‡ä»¶ yml ä¸­é…ç½® (è§å‰é¢æ­¥éª¤) ä»£ç ä¸­æ³¨å…¥ RouteLocator çš„ Bean å®˜ç½‘æ¡ˆä¾‹ ï¼š è‡ªå·±å†™ä¸€ä¸ªï¼šä¸š åŠ¡ éœ€ æ±‚ ï¼š é€š è¿‡ 9527 ç½‘ å…³ è®¿ é—® åˆ° å¤– ç½‘ çš„ ç™¾ åº¦ æ–° é—» ç½‘ å€ http://news.baidu.com/guoji 123456789101112131415161718192021222324/** * é…ç½®ç½‘å…³ * @Author OY * @Date 2020/10/18 */@Configurationpublic class GateWayConfig &#123; @Bean public RouteLocator customRouteLocator(RouteLocatorBuilder routeLocatorBuilder)&#123; RouteLocatorBuilder.Builder routes = routeLocatorBuilder.routes(); routes.route(&quot;path_rote_oy&quot;, r -&gt; r.path(&quot;/guonei&quot;).uri(&quot;http://news.baidu.com/guonei&quot;)).build(); return routes.build(); &#125; @Bean public RouteLocator customRouteLocator2(RouteLocatorBuilder routeLocatorBuilder)&#123; RouteLocatorBuilder.Builder routes = routeLocatorBuilder.routes(); routes.route(&quot;path_rote_oy2&quot;, r -&gt; r.path(&quot;/guoji&quot;).uri(&quot;http://news.baidu.com/guoji&quot;)).build(); return routes.build(); &#125;&#125; æµ‹è¯•ï¼š â‘¤ é€šè¿‡æœåŠ¡åå®ç°åŠ¨æ€â€‹ é»˜è®¤æƒ…å†µä¸‹ Gateway ä¼šæ ¹æ®æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡åˆ—è¡¨ï¼Œä»¥æ³¨å†Œä¸­å¿ƒä¸Šå¾®æœåŠ¡åä¸ºè·¯å¾„è·¯å¾„åˆ›å»ºåŠ¨æ€è·¯ç”±åˆ›å»ºåŠ¨æ€è·¯ç”±è¿›è¡Œè½¬å‘ï¼Œä»è€Œå®ç°åŠ¨æ€è·¯ç”±çš„åŠŸèƒ½ å¯åŠ¨ï¼š ä¸€ä¸ª eureka7001 + ä¸¤ä¸ªæœåŠ¡æä¾›è€… 8001/8002 POM YML: uri: lb//cloud-payment-service 1234567891011121314151617181920212223242526272829server: port: 9527spring: application: name: cloud-gateway cloud: gateway: discovery: locator: enabled: true # å¼€å¯ä»æ³¨å†Œä¸­å¿ƒåŠ¨æ€åˆ›å»ºè·¯ç”±çš„åŠŸèƒ½ï¼Œåˆ©ç”¨å¾®æœåŠ¡åç§°jè¿›è¡Œè·¯ç”± routes: - id: payment_route # è·¯ç”±çš„id,æ²¡æœ‰è§„å®šè§„åˆ™ä½†è¦æ±‚å”¯ä¸€,å»ºè®®é…åˆæœåŠ¡å #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€ #uri: http://localhost:8001 uri: lb//cloud-payment-service predicates: - Path=/payment/get/** # æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”± - id: payment_route2 #uri: http://localhost:8001 uri: lb//cloud-payment-service predicates: Path=/payment/lb/** #æ–­è¨€,è·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±eureka: instance: hostname: cloud-gateway-service client: #æœåŠ¡æä¾›è€…provideræ³¨å†Œè¿›eurekaæœåŠ¡åˆ—è¡¨ä¸­ service-url: register-with-eureka: true fetch-registry: true defaultZone: http://eureka7001.com:7001/eureka éœ€è¦æ³¨æ„çš„æ˜¯uri çš„åè®®ä¸º lb ï¼Œè¡¨ç¤ºå¯ç”¨ Gateway è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚ lb ://serviceName æ˜¯ spring cloud gateway åœ¨å¾®æœåŠ¡ä¸­è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºè´Ÿè½½å‡è¡¡ uriã€‚ æµ‹è¯•ï¼š â€‹ http://localhost:9527/payment/lbï¼š 8001/8002 ä¸¤ä¸ªç«¯å£åˆ‡æ¢ â‘¥ Predicate çš„ä½¿ç”¨1.æ˜¯ä»€ä¹ˆå¯åŠ¨æˆ‘ä»¬çš„ gateway9527 2.Route Predicate Factories æ˜¯ä»€ä¹ˆ? 3.å¸¸ç”¨çš„ Route Predicate After Route Predicate é—®é¢˜ä¸€ï¼šä¸Šè¿°è¿™ä¸ª After å¥½æ‡‚ï¼Œè¿™ä¸ªæ—¶é—´æ—¶é—´ä¸²ä¸²ï¼Œæœ‰ç‚¹ä¸èƒ½ç†è§£ã€‚ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å³å¯è§£å¼€è°œå›¢ã€‚ 12345678@Testpublic void test1()&#123; ZonedDateTime zbj = ZonedDateTime.now(); // é»˜è®¤æ—¶åŒº System.out.println(zbj); // 2020-10-18T10:35:52.127+08:00[Asia/Shanghai] ZonedDateTime zny = ZonedDateTime.now(ZoneId.of(&quot;America/Denver&quot;));// ç”¨æŒ‡å®šæ—¶åŒºè·å–å½“å‰æ—¶é—´ System.out.println(zny); // 2020-10-17T20:38:37.693-06:00[America/Denver]&#125; YML 1- After=2020-10-18T10:38:37.692+08:00[Asia/Shanghai] Before Route Predicate YML 12- After=2020-10-18T10:38:37.692+08:00[Asia/Shanghai]- Before=2020-10-18T10:38:37.692+08:00[Asia/Shanghai] Between Route Predicate YML 1- Between=2020-10-18T10:38:37.692+08:00[Asia/Shanghai],2020-10-19T10:38:37.692+08:00[Asia/Shanghai] Cookie Route Predicate 1) ä¸å¸¦ cookies è®¿é—® 2) å¸¦ä¸Š cookies è®¿é—® åŠ  å…¥ curl è¿” å› ä¸­ æ–‡ ä¹± ç  ï¼šhttps://blog.csdn.net/leedee/article/details/82685636 1curl http://localhost:9527/payment/lb --cookie &quot;username=oy&quot; 3ï¼‰YML 1- Cookie=username,oy #å¹¶ä¸”Cookieæ˜¯username=oyæ‰èƒ½è®¿é—® Header Route Predicate YML 1- Header=X-Request-Id, \\d+ #è¯·æ±‚å¤´ä¸­è¦æœ‰X-Request-Idå±æ€§å¹¶ä¸”å€¼ä¸ºæ•´æ•°çš„æ­£åˆ™è¡¨è¾¾å¼ Host Route Predicate YML 1- Host=**.somehost.org,**.anotherhost.org Method Route Predicate YML 1- Method=GET,POST Path Route Predicate YML 1- Path=/red/&#123;segment&#125;,/blue/&#123;segment&#125; Query Route Predicate YML 1- Query=username, \\d+ #è¦æœ‰å‚æ•°åç§°å¹¶ä¸”æ˜¯æ­£æ•´æ•°æ‰èƒ½è·¯ç”± æµ‹è¯•ï¼š http://localhost:9527/payment/lb?username=1 å°æ€»ç»“ All â€‹ è¯´ç™½äº†,Predicateå°±æ˜¯ä¸ºäº†å®ç°ä¸€ç»„åŒ¹é…è§„åˆ™, è®©è¯·æ±‚è¿‡æ¥æ‰¾åˆ°å¯¹åº”çš„Routeè¿›è¡Œå¤„ç† â‘¦ Filter çš„ä½¿ç”¨1.æ˜¯ä»€ä¹ˆ 2.Spring Cloud Gateway çš„ Filter ç”Ÿå‘½å‘¨æœŸï¼Œ Only Two Pre : åœ¨ä¸šåŠ¡é€»è¾‘ä¹‹å‰ Post: åœ¨ä¸šåŠ¡é€»è¾‘ä¹‹å ç§ç±»ï¼š Only Two GatewayFilterï¼š å•ä¸€ GlobalFilter: å…¨å±€ 3.å¸¸ç”¨çš„ GatewayFilter AddRequestParameter YML 4.è‡ªå®šä¹‰è¿‡æ»¤å™¨ è‡ªå®šä¹‰å…¨å±€ GlobalFilter ä¸¤ä¸ªä¸»è¦æ¥å£ä»‹ç» 1impiemerts GlobalFilter ï¼Œ Ordered èƒ½å¹²å˜› å…¨å±€æ—¥å¿—è®°å½• ç»Ÿä¸€ç½‘å…³é‰´æƒ â€¦â€¦ æ¡ˆä¾‹ä»£ç  1234567891011121314151617181920@Component@Slf4jpublic class MyLogGateWayFilter implements GlobalFilter, Ordered &#123; @Override public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) &#123; log.info(&quot;*********come in MyLogGateWayFilter: &quot;+new Date()); String username = exchange.getRequest().getQueryParams().getFirst(&quot;username&quot;); if(username == null)&#123; log.info(&quot;*****ç”¨æˆ·åä¸º NUll éæ³•ç”¨æˆ·.(â”¬ï¼¿â”¬)&quot;); exchange.getResponse().setStatusCode(HttpStatus.NOT_ACCEPTABLE);// ç»™äººå®¶ä¸€ä¸ªå›åº” return exchange.getResponse().setComplete(); &#125; return chain.filter(exchange); &#125; @Override public int getOrder() &#123; return 0; &#125;&#125; æµ‹è¯• å¯åŠ¨ æ­£ç¡®ï¼š http://localhost:9527/payment/lb?username=1 é”™è¯¯ ï¼š http://localhost:9527/payment/lb?usernameaa=1","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud æœåŠ¡é™çº§","slug":"SpringCloud æœåŠ¡é™çº§","date":"2020-10-15T16:00:00.000Z","updated":"2020-10-25T02:33:19.635Z","comments":true,"path":"posts/2164673978.html","link":"","permalink":"http://blog.oy6090.top/posts/2164673978.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ ä¸€ã€Hystrix æ–­è·¯å™¨â‘  æ¦‚è¿°1.åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é—®é¢˜ 2.æ˜¯ä»€ä¹ˆ 3.èƒ½å¹²å˜› æœåŠ¡é™çº§ æœåŠ¡ç†”æ–­ æ¥è¿‘å®æ—¶çš„ç›‘æ§ 4.å®˜ ç½‘ èµ„ æ–™â€‹ https://github.com/Netflix/Hystrix/wiki/How-To-Use 5.Hystrix å®˜å®£ï¼Œåœæ›´è¿›ç»´â€‹ https://github.com/Netflix/Hystrix ä¸åœ¨ä¿®å¤ Bug ä¸åœ¨æ¥æ”¶åˆå¹¶è¯·æ±‚ ä¸åœ¨å‘å¸ƒæ–°ç‰ˆæœ¬ â‘¡ Hystrix é‡è¦æ¦‚å¿µ1.æœåŠ¡é™çº§æœåŠ¡å™¨å¿™ï¼Œ è¯·ç¨å€™å†è¯•ï¼Œ ä¸è®©å®¢æˆ·ç«¯ç­‰å¾…å¹¶ç«‹åˆ»è¿”å›ä¸€ä¸ªå‹å¥½æç¤ºï¼Œ fallback å“ªäº›æƒ…å†µä¼šè§¦å‘é™çº§ï¼š 1 ç¨‹åºè¿è¡Œå¼‚å¸¸ã€ 2 è¶…æ—¶ã€ 3 æœåŠ¡ç†”æ–­è§¦å‘æœåŠ¡é™çº§ ã€4 çº¿ç¨‹æ± /ä¿¡å·é‡æ‰“æ»¡ä¹Ÿä¼šå¯¼è‡´æœåŠ¡é™çº§ 2.æœåŠ¡ç†”æ–­â€‹ ç±»æ¯”ä¿é™©ä¸è¾¾åˆ°æœ€å¤§æœåŠ¡è®¿é—®åï¼Œ ç›´æ¥æ‹’ç»è®¿é—®ï¼Œ æ‹‰é—¸é™ç”µï¼Œ ç„¶åè°ƒç”¨æœåŠ¡é™çº§çš„æ–¹æ³•å¹¶è¿”å›å‹å¥½æç¤ºï¼Œå°±æ˜¯ä¿é™©ä¸ã€‚ â€‹ æœåŠ¡çš„é™çº§-&gt;è¿›è€Œç†”æ–­-&gt;æ¢å¤è°ƒç”¨é“¾è·¯ 3.æœåŠ¡é™æµâ€‹ ç§’æ€é«˜å¹¶å‘ç­‰æ“ä½œï¼Œ ä¸¥ç¦ä¸€çªèœ‚çš„è¿‡æ¥æ‹¥æŒ¤ï¼Œ å¤§å®¶æ’é˜Ÿï¼Œ ä¸€ç§’é’Ÿ N ä¸ªï¼Œ æœ‰åºè¿›è¡Œ â‘¢ hystrix æ¡ˆä¾‹1.æ„å»º æ–°å»º cloud-provider-hystrix-payment8001 POM 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-provider-hystrix-payment8001&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--æ–°å¢ hystrix--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678server: port: 8001eureka: client: register-with-eureka: true #è¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·± fetch-registry: true #è¡¨åè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼ŒèŒè´£ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka ä¸»å¯åŠ¨ç±» 1234567@SpringBootApplication@EnableEurekaClientpublic class PaymentHystrixMain8001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentHystrixMain8001.class, args); &#125;&#125; ä¸šåŠ¡ç±» â€‹ Service 123456789101112131415161718192021@Servicepublic class PaymentService &#123; // æˆåŠŸ public String paymentInfo_OK(Integer id)&#123; return &quot;çº¿ç¨‹æ± ï¼š&quot; + Thread.currentThread().getName() + &quot;paymentInfo_OK,id:&quot;+id+&quot;\\t&quot;+&quot;O(âˆ©_âˆ©)Oå“ˆå“ˆ~&quot;; &#125; // å¤±è´¥ public String paymentInfo_TimeOut(Integer id)&#123; int timeNumber = 3; try &#123; TimeUnit.SECONDS.sleep(timeNumber); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; return &quot;çº¿ç¨‹æ± ï¼š&quot; + Thread.currentThread().getName()+ &quot;paymentInfo_TimeOut,id:&quot; + id +&quot;\\t&quot; +&quot;â”­â”®ï¹â”­â”®&quot;+&quot;è€—æ—¶(ç§’)&quot; + timeNumber; &#125;&#125; Controller 12345678910111213141516171819202122232425@RestController@Slf4jpublic class PaymentController &#123; @Resource private PaymentService paymentService; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @GetMapping(value = &quot;/payment/hystrix/ok/&#123;id&#125;&quot;) public String paymentInfo_OK(@PathVariable(&quot;id&quot;) Integer id)&#123; String result = paymentService.paymentInfo_OK(id); log.info(&quot;*************result:&quot; + result); return result; &#125; @GetMapping(value = &quot;/payment/hystrix/timeout/&#123;id&#125;&quot;) public String paymentInfo_TimeOut(@PathVariable(&quot;id&quot;) Integer id)&#123; String result = paymentService.paymentInfo_TimeOut(id); log.info(&quot;******result:&quot; + result); return result; &#125;&#125; æµ‹è¯•ï¼š å…ˆå¯åŠ¨ eureka 7001, å¯åŠ¨ cloud-provider-hystrix-payment8001 è®¿é—®ï¼š http://localhost:8001/payment/hystrix/ok/1 åœ¨æµ‹è¯•è®¿é—®ï¼šhttp://localhost:8001/payment/hystrix/timeout/1ï¼Œæ¯ æ¬¡ è°ƒ ç”¨ è€— è´¹ 3 ç§’ é’Ÿ ä¸Šè¿° module å‡ OKï¼Œä»¥ä¸Šè¿°ä¸ºæ ¹åŸºå¹³å°ï¼Œä»æ­£ç¡®-&gt;é”™è¯¯-&gt;é™çº§ç†”æ–­-&gt;æ¢å¤ 2.é«˜å¹¶å‘æµ‹è¯• Jmeter å‹æµ‹æµ‹è¯• â€‹ å¼€ å¯ Jmeter ï¼Œ æ¥ 20000 ä¸ª å¹¶ å‘ å‹ æ­» 8001 ï¼Œ 20000 ä¸ª è¯· æ±‚ éƒ½ å» è®¿ é—® paymentInfo_TimeOut æœåŠ¡ã€‚ å†æ¥ä¸€ä¸ªè®¿é—®ï¼šhttp://localhost:8001/payment/hystrix/ok/1ï¼Œ http://localhost:8001/payment/hystrix/timeout/1 çœ‹æ¼”ç¤ºç»“æœï¼š ä¸¤ä¸ªéƒ½åœ¨è‡ªå·±è½¬åœˆåœˆ ä¸ºä»€ä¹ˆä¼šè¢«å¡æ­»ï¼š tomcat çš„é»˜è®¤çš„å·¥ä½œçº¿ç¨‹æ•°è¢«æ‰“æ»¡äº†ã€‚æ²¡æœ‰å¤šä½™çš„çº¿ç¨‹æ¥åˆ†è§£å‹åŠ›å’Œå¤„ç† 3.Jmeter å‹æµ‹ç»“è®ºâ€‹ ä¸Šé¢è¿˜æ˜¯æœåŠ¡æä¾›è€… 8001 è‡ªå·±æµ‹è¯•ï¼Œ å‡å¦‚æ­¤æ—¶å¤–éƒ¨çš„æ¶ˆè´¹è€… 80 ä¹Ÿæ¥è®¿é—®ï¼Œé‚£æ¶ˆè´¹è€…åªèƒ½å¹²ç­‰ï¼Œ æœ€ç»ˆå¯¼è‡´æ¶ˆè´¹ç«¯ 80 ä¸æ»¡æ„ï¼Œ æœåŠ¡ç«¯ 8001 ç›´æ¥è¢«æ‹–æ­» 4.çœ‹çƒ­é—¹ä¸å«Œå¼ƒäº‹å¤§ï¼Œ 80 æ–°å»ºåŠ å…¥ æ–°å»º cloud-consumer-feign-hystrix-order80 POM 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-consumer-feign-hystrix-order80&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--æ–°å¢ hystrix--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678server: port: 80eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka ä¸»å¯åŠ¨ç±» 1234567@SpringBootApplication@EnableEurekaClientpublic class PaymentHystrixMain8001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentHystrixMain8001.class, args); &#125;&#125; ä¸šåŠ¡ç±» PaymentHystrixService 123456789101112131415161718192021222324252627282930313233package com.oy.springcloud.service;import org.springframework.cloud.openfeign.FeignClient;import org.springframework.stereotype.Component;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;/** * @Author OY * @Date 2020/10/16 */@Component@FeignClient(value = &quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;)public interface PaymentHystrixService &#123; /** * æ­£å¸¸è®¿é—® * * @param id * @return */ @GetMapping(&quot;/payment/hystrix/ok/&#123;id&#125;&quot;) public String paymentInfo_OK(@PathVariable(&quot;id&quot;) Integer id); /** * è¶…æ—¶è®¿é—® * * @param id * @return */ @GetMapping(&quot;/payment/hystrix/timeout/&#123;id&#125;&quot;) public String paymentInfo_TimeOut(@PathVariable(&quot;id&quot;) Integer id);&#125; Controller 12345678910111213141516171819202122232425262728293031323334@RestController@Slf4jpublic class OrderHyrixController &#123; @Resource private PaymentHystrixService paymentHystrixService; /** * æ­£å¸¸è®¿é—® * * @param id * @return */ @GetMapping(&quot;/consumer/payment/hystrix/ok/&#123;id&#125;&quot;) public String paymentInfo_OK(@PathVariable(&quot;id&quot;) Integer id) &#123; String result = paymentHystrixService.paymentInfo_OK(id); log.info(&quot;*****result:&quot; + result); return result; &#125; /** * è¶…æ—¶è®¿é—® * * @param id * @return */ @GetMapping(&quot;/consumer/payment/hystrix/timeout/&#123;id&#125;&quot;) public String paymentInfo_TimeOut(@PathVariable(&quot;id&quot;) Integer id) &#123; String result = paymentHystrixService.paymentInfo_TimeOut(id); log.info(&quot;*****result:&quot; + result); return result; &#125;&#125; æ­£å¸¸æµ‹è¯• http://localhost/consumer/payment/hystrix/ok/1 http://localhost/consumer/payment/hystrix/timeout/1 æ³¨æ„ï¼šæµ‹è¯•è¿™ä¸ªæ—¶æœ‰å¯èƒ½ä¼šæŠ¥è¶…æ—¶é”™è¯¯ï¼Œå¦‚æœå‡ºç°é”™è¯¯åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® 12345ribbon: # æŒ‡çš„æ˜¯å»ºç«‹è¿æ¥æ‰€ç”¨çš„æ—¶é—´,é€‚ç”¨äºç½‘ç»œçŠ¶æ€æ­£å¸¸çš„æƒ…å†µä¸‹,ä¸¤ç«¯è¿æ¥æ‰€ç”¨çš„æ—¶é—´ ReadTimeout: 5000 # æŒ‡çš„æ˜¯å»ºç«‹è¿æ¥åä»æœåŠ¡å™¨è¯»å–åˆ°å¯ç”¨èµ„æºæ‰€ç”¨çš„æ—¶é—´ ConnectTimeout: 5000 é«˜å¹¶å‘æµ‹è¯• 2W ä¸ªçº¿ç¨‹å‹ 8001ï¼Œæ¶ˆè´¹ç«¯ 80 å¾®æœåŠ¡å†å»è®¿é—®æ­£å¸¸çš„ OK å¾®æœåŠ¡ 8001 åœ°å€ http://localhost/consumer/payment/hystrix/timeout/1 â€‹ æ¶ˆè´¹è€… 80ï¼Œ è¦ä¹ˆè½¬åœˆåœˆç­‰å¾…ã€ è¦ä¹ˆæ¶ˆè´¹ç«¯æŠ¥è¶…æ—¶é”™è¯¯ 5.æ•…éšœç°è±¡å’Œå¯¼è‡´åŸå›  8001 åŒä¸€å±‚æ¬¡çš„æ¥å£æœåŠ¡è¢«å›°æ­»ï¼Œå› ä¸º tomcat çº¿ç¨‹é‡Œé¢çš„å·¥ä½œçº¿ç¨‹å·²ç»è¢«æŒ¤å å®Œæ¯• 80 æ­¤æ—¶è°ƒç”¨ 8001ï¼Œå®¢æˆ·ç«¯è®¿é—®çš„å“åº”ç¼“æ…¢ï¼Œè½¬åœˆåœˆ 6.ä¸Šè¯‰ç»“è®ºâ€‹ æ­£å› ä¸ºæœ‰ä¸Šè¿°æ•…éšœæˆ–ä¸ä½³è¡¨ç°ï¼Œ æ‰æœ‰æˆ‘ä»¬çš„é™çº§/å®¹é”™/é™æµç­‰æŠ€æœ¯è¯ç”Ÿ 7.å¦‚ä½•è§£å†³ï¼Ÿè§£å†³çš„è¦æ±‚ è¶…æ—¶å¯¼è‡´æœåŠ¡å™¨å˜æ…¢ï¼ˆè½¬åœˆï¼‰ ï¼š è¶…æ—¶ä¸å†ç­‰å¾… å‡ºé”™ï¼ˆå®•æœºæˆ–ç¨‹åºè¿è¡Œå‡ºé”™ï¼‰ ï¼š å‡ºé”™è¦æœ‰å…œåº• è§£å†³ï¼š å¯¹æ–¹æœåŠ¡ï¼ˆ8001ï¼‰ è¶…æ—¶äº†ï¼Œ è°ƒç”¨è€…ï¼ˆ80ï¼‰ ä¸èƒ½ä¸€ç›´å¡æ­»ç­‰å¾…ï¼Œå¿…é¡»æœ‰æœåŠ¡é™çº§ã€‚ å¯¹æ–¹æœåŠ¡ï¼ˆ8001ï¼‰ down æœºäº†ï¼Œ è°ƒç”¨è€…ï¼ˆ80ï¼‰ ä¸èƒ½ä¸€ç›´å¡æ­»ç­‰å¾…ï¼Œ å¿…é¡»æœ‰æœåŠ¡é™çº§ã€‚ å¯¹æ–¹æœåŠ¡ï¼ˆ8001ï¼‰ OKï¼Œ è°ƒç”¨è€…ï¼ˆ80ï¼‰ è‡ªå·±å‡ºæ•…éšœæˆ–æœ‰è‡ªæˆ‘è¦æ±‚ï¼ˆè‡ªå·±çš„ç­‰å¾…æ—¶é—´å°äºæœåŠ¡æä¾›è€…ï¼‰ ï¼Œ è‡ªå·±å¤„ç†é™çº§ â‘£ æœåŠ¡é™çº§1.é™ä½é…ç½®ï¼š @HystrixCommand2.8001 å…ˆä»è‡ªèº«æ‰¾é—®é¢˜â€‹ ç½®è‡ªèº«è°ƒç”¨è¶…æ—¶æ—¶é—´çš„å³°å€¼ï¼Œå³°å€¼å†…å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè¶…è¿‡äº†éœ€è¦æœ‰å…œåº•çš„æ–¹æ³•å¤„ç†ï¼ŒåšæœåŠ¡é™çº§ fallback 3.8001fallback ä¸šåŠ¡ç±»å¯ç”¨ 12345678910111213141516171819202122232425262728293031@Servicepublic class PaymentService &#123; // æˆåŠŸ public String paymentInfo_OK(Integer id)&#123; return &quot;çº¿ç¨‹æ± ï¼š&quot; + Thread.currentThread().getName() + &quot;paymentInfo_OK,id:&quot;+id+&quot;\\t&quot;+&quot;O(âˆ©_âˆ©)Oå“ˆå“ˆ~&quot;; &#125; /** * è¶…æ—¶è®¿é—®ï¼Œæ¼”ç¤ºé™çº§ * @param id * @return */ @HystrixCommand(fallbackMethod = &quot;paymentInfo_TimeOutHandler&quot;, commandProperties = &#123; @HystrixProperty(name =&quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value=&quot;3000&quot;) &#125;) public String paymentInfo_TimeOut(Integer id)&#123; int timeNumber = 5; try &#123; TimeUnit.SECONDS.sleep(timeNumber); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; return &quot;çº¿ç¨‹æ± ï¼š&quot; + Thread.currentThread().getName()+ &quot;paymentInfo_TimeOut,id:&quot; + id +&quot;\\t&quot; +&quot;â”­â”®ï¹â”­â”®&quot;+&quot;è€—æ—¶(ç§’)&quot; + timeNumber; &#125; public String paymentInfo_TimeOutHandler(Integer id)&#123; return &quot;o(â•¥ï¹â•¥)o è°ƒç”¨æ”¯ä»˜æ¥å£è¶…æ—¶å¼‚å¸¸ï¼š\\t&quot; + &quot;\\tå½“å‰çº¿ç¨‹æ± åå­—ï¼š&quot; + Thread.currentThread().getName(); &#125;&#125; @HystrixCommandæŠ¥å¼‚å¸¸åå¦‚ä½•å¤„ç† ä¸€æ—¦è°ƒç”¨æœåŠ¡æ–¹æ³•å¤±è´¥å¹¶æŠ›å‡ºäº†é”™è¯¯ä¿¡æ¯å,ä¼šè‡ªåŠ¨è°ƒç”¨@HystrixCommandæ ‡æ³¨å¥½çš„fallbckMethodè°ƒç”¨ç±»ä¸­çš„æŒ‡å®šæ–¹æ³• å›¾ç¤ºï¼š ä¸»å¯åŠ¨ç±»æ¿€æ´»ï¼š æ·»åŠ æ–°æ³¨è§£**@EnableCircuitBreaker** 12345678@SpringBootApplication@EnableEurekaClient@EnableCircuitBreakerpublic class PaymentHystrixMain8001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentHystrixMain8001.class, args); &#125;&#125; 4.80fallback80 è®¢å•å¾®æœåŠ¡ï¼Œ ä¹Ÿå¯ä»¥æ›´å¥½çš„ä¿æŠ¤è‡ªå·±ï¼Œ è‡ªå·±ä¹Ÿä¾æ ·ç”»è‘«èŠ¦è¿›è¡Œå®¢æˆ·ç«¯é™çº§ä¿æŠ¤ã€‚ é¢˜å¤–è¯ åˆ‡è®°æˆ‘ ä»¬ è‡ª å·± é… ç½® è¿‡ çš„ çƒ­ éƒ¨ ç½² æ–¹ å¼ å¯¹ java ä»£ ç  çš„ æ”¹ åŠ¨ æ˜ æ˜¾ ï¼Œ ä½†å¯¹@HystrixCommand å†…å±æ€§çš„ä¿®æ”¹å»ºè®®é‡å¯å¾®æœåŠ¡ YML 123feign: hystrix: enabled: true # å¦‚æœå¤„ç†è‡ªèº«çš„å®¹é”™å°±å¼€å¯ã€‚å¼€å¯æ–¹å¼ä¸ç”Ÿäº§ç«¯ä¸ä¸€æ ·ã€‚ ä¸»å¯åŠ¨ï¼š @EnableHystrix 123456789@SpringBootApplication@EnableEurekaClient@EnableFeignClients@EnableHystrixpublic class OrderHystrixMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderHystrixMain80.class, args); &#125;&#125; ä¸šåŠ¡ç±» 12345678910111213@GetMapping(&quot;/consumer/payment/hystrix/timeout/&#123;id&#125;&quot;)@HystrixCommand(fallbackMethod = &quot;paymentTimeOutFallbackMethod&quot;,commandProperties = &#123; @HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value = &quot;15000&quot;)&#125;)public String paymentInfo_TimeOut(@PathVariable(&quot;id&quot;) Integer id) &#123; String result = paymentHystrixService.paymentInfo_TimeOut(id); log.info(&quot;*****result:&quot; + result); return result;&#125;public String paymentTimeOutFallbackMethod(@PathVariable(&quot;id&quot;) Integer id)&#123; return &quot;æˆ‘æ˜¯æ¶ˆè´¹è€…80,å¯¹æ–¹æ”¯ä»˜ç³»ç»Ÿç¹å¿™è¯·10ç§’é’Ÿåå†è¯•æˆ–è€…è‡ªå·±è¿è¡Œå‡ºé”™è¯·æ£€æŸ¥è‡ªå·±ï¼Œo(â•¥ï¹â•¥)o&quot;;&#125; 5.ç›®å‰æ–¹æ³• æ¯ä¸ªä¸šåŠ¡æ–¹æ³•å¯¹åº”ä¸€ä¸ªå…œåº•çš„æ–¹æ³•ï¼Œä»£ç è†¨èƒ€ ç»Ÿä¸€å’Œè‡ªå®šä¹‰çš„éœ€è¦åˆ†å¼€ 6.è§£å†³é—®é¢˜ æ¯ä¸ªæ–¹æ³•é…ç½®ä¸€ä¸ªï¼Ÿ ï¼Ÿ ï¼Ÿ è†¨èƒ€ feign æ¥å£ç³»åˆ— @DefaultProperties(defaultFallback = â€œâ€) è¯´æ˜ï¼š controller é…ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849@RestController@Slf4j@DefaultProperties(defaultFallback = &quot;payment_Global_FallbackMethod&quot;)public class OrderHyrixController &#123; @Resource private PaymentHystrixService paymentHystrixService; /** * æ­£å¸¸è®¿é—® * * @param id * @return */ @GetMapping(&quot;/consumer/payment/hystrix/ok/&#123;id&#125;&quot;) public String paymentInfo_OK(@PathVariable(&quot;id&quot;) Integer id) &#123; String result = paymentHystrixService.paymentInfo_OK(id); log.info(&quot;*****result:&quot; + result); return result; &#125; /** * è¶…æ—¶è®¿é—® * * @param id * @return */ @GetMapping(&quot;/consumer/payment/hystrix/timeout/&#123;id&#125;&quot;) @HystrixCommand public String paymentInfo_TimeOut(@PathVariable(&quot;id&quot;) Integer id) &#123; String result = paymentHystrixService.paymentInfo_TimeOut(id); log.info(&quot;*****result:&quot; + result); return result; &#125; // å…œåº•æ–¹æ³• public String paymentTimeOutFallbackMethod(@PathVariable(&quot;id&quot;) Integer id)&#123; return &quot;æˆ‘æ˜¯æ¶ˆè´¹è€…80,å¯¹æ–¹æ”¯ä»˜ç³»ç»Ÿç¹å¿™è¯·10ç§’é’Ÿåå†è¯•æˆ–è€…è‡ªå·±è¿è¡Œå‡ºé”™è¯·æ£€æŸ¥è‡ªå·±ï¼Œo(â•¥ï¹â•¥)o&quot;; &#125; /** * å…¨å±€fallback * @return */ public String payment_Global_FallbackMethod() &#123; return &quot;Globalå¼‚å¸¸å¤„ç†ä¿¡æ¯,è¯·ç¨åé‡è¯•.o(â•¥ï¹â•¥)o&quot;; &#125;&#125; **å’Œä¸šåŠ¡é€»è¾‘æ··ä¸€èµ·ï¼Ÿ ï¼Ÿ ï¼Ÿ æ··ä¹± ** æœåŠ¡é™çº§ï¼Œå®¢æˆ·ç«¯å»è°ƒç”¨æœåŠ¡ç«¯ï¼Œç¢°ä¸ŠæœåŠ¡å™¨å®•æœºæˆ–å…³é—­ æœ¬æ¬¡æ¡ˆä¾‹æœåŠ¡æ¡ˆä¾‹çº§å¤„ç†æ˜¯åœ¨å®¢æˆ·ç«¯ 80 å®ç°å®Œæˆçš„ï¼Œä¸æœåŠ¡ç«¯ 8001 æ²¡æœ‰å…³ç³»ï¼Œåªéœ€è¦ä¸º Feign å®¢æˆ·ç«¯å®šä¹‰çš„æ¥å£æ·»åŠ ä¸€ä¸ªæœåŠ¡é™çº§å¤„ç†çš„å®ç°ç±»å³å¯å®ç°è§£è€¦ã€‚ æœªæ¥æˆ‘ä»¬è¦é¢å¯¹çš„å¼‚å¸¸ è¿è¡Œã€è¶…æ—¶ã€å®•æœº å†çœ‹æˆ‘ä»¬çš„ä¸šåŠ¡ç±» PaymentController ä¿®æ”¹ cloud-consumer-feign-hystrix-order80 æ ¹ æ® cloud-consumer-feign-hystrix-order80 å·² ç» æœ‰ çš„ PaymentHystrixService æ¥ å£ ï¼Œ é‡ æ–° æ–° å»º ä¸€ ä¸ª ç±»ï¼ˆPaymentFallbackServiceï¼‰ å®ç°è¯¥æ¥å£ï¼Œ ç»Ÿä¸€ä¸ºæ¥å£é‡Œé¢çš„æ–¹æ³•è¿›è¡Œå¼‚å¸¸å¤„ç† ã€‚ PaymentFallbackService ç±» å® ç° PaymentFeignClientService æ¥å£ 123456789101112@Componentpublic class PaymentFallbackService implements PaymentHystrixService&#123; @Override public String paymentInfo_OK(Integer id) &#123; return &quot;-----PaymentFallbackService fall back-paymentInfo_OK , (â”¬ï¼¿â”¬)&quot;; &#125; @Override public String paymentInfo_TimeOut(Integer id) &#123; return &quot;-----PaymentFallbackService fall back-paymentInfo_TimeOut , (â”¬ ï¼¿â”¬)&quot;; &#125;&#125; YML 123feign: hystrix: enabled: true # å¦‚æœå¤„ç†è‡ªèº«çš„å®¹é”™å°±å¼€å¯ã€‚å¼€å¯æ–¹å¼ä¸ç”Ÿäº§ç«¯ä¸ä¸€æ ·ã€‚ PaymentFeignClientService æ¥å£ 12345678910111213141516171819202122@Component@FeignClient(value = &quot;CLOUD-PROVIDER-HYSTRIX-PAYMENT&quot;,fallback = PaymentFallbackService.class)public interface PaymentHystrixService &#123; /** * æ­£å¸¸è®¿é—® * * @param id * @return */ @GetMapping(&quot;/payment/hystrix/ok/&#123;id&#125;&quot;) public String paymentInfo_OK(@PathVariable(&quot;id&quot;) Integer id); /** * è¶…æ—¶è®¿é—® * * @param id * @return */ @GetMapping(&quot;/payment/hystrix/timeout/&#123;id&#125;&quot;) public String paymentInfo_TimeOut(@PathVariable(&quot;id&quot;) Integer id);&#125; æµ‹è¯• å•ä¸ª eureka å…ˆå¯åŠ¨ 7001ï¼ŒPaymentHystrixMain8001 å¯åŠ¨ æ­£å¸¸æµ‹è¯•ï¼š http://localhost/consumer/payment/hystrix/ok/1 æ•…æ„å…³é—­å¾®æœåŠ¡ 8001 â€‹ å®¢æˆ·ç«¯è‡ªå·±è°ƒç”¨æå‡ï¼š æ­¤æ—¶æœåŠ¡ç«¯ provider å·²ç» down äº†ï¼Œ ä½†æ˜¯æˆ‘ä»¬åšäº†æœåŠ¡é™çº§å¤„ç†ï¼Œ è®©å®¢æˆ·ç«¯åœ¨æœåŠ¡ç«¯ä¸å¯ç”¨æ—¶ä¹Ÿä¼šè·å¾—æç¤ºä¿¡æ¯è€Œä¸ä¼šæŒ‚èµ·è€—æ­»æœåŠ¡å™¨ ã€‚ â‘¤ æœåŠ¡ç†”æ–­1.æ–­è·¯å™¨â€‹ ä¸€å¥è¯å°±æ˜¯å®¶é‡Œä¿é™©ä¸ 2.ç†”æ–­æ˜¯ä»€ä¹ˆ å¤§ç¥è®ºæ–‡ï¼šhttps://martinfowler.com/bliki/CircuitBreaker.html 3.å®æ“ ä¿®æ”¹ cloud-provider-hystrix-payment8001 PaymentService 123456789101112131415161718 @HystrixCommand(fallbackMethod = &quot;paymentCircuitBreaker_fallback&quot;,commandProperties = &#123; @HystrixProperty(name = &quot;circuitBreaker.enabled&quot;,value = &quot;true&quot;), //æ˜¯å¦å¼€å¯æ–­è·¯å™¨ @HystrixProperty(name = &quot;circuitBreaker.requestVolumeThreshold&quot;,value = &quot;10&quot;), //è¯·æ±‚æ¬¡æ•° @HystrixProperty(name = &quot;circuitBreaker.sleepWindowInMilliseconds&quot;,value = &quot;10000&quot;), //æ—¶é—´èŒƒå›´ @HystrixProperty(name = &quot;circuitBreaker.errorThresholdPercentage&quot;,value = &quot;60&quot;), //å¤±è´¥ç‡è¾¾åˆ°å¤šå°‘åè·³é—¸ &#125;)public String paymentCircuitBreaker(@PathVariable(&quot;id&quot;) Integer id)&#123; if (id &lt; 0)&#123; throw new RuntimeException(&quot;*****id ä¸èƒ½è´Ÿæ•°&quot;); &#125; String serialNumber = IdUtil.simpleUUID(); return Thread.currentThread().getName()+&quot;\\t&quot;+&quot;è°ƒç”¨æˆåŠŸ,æµæ°´å·ï¼š &quot;+serialNumber;&#125;public String paymentCircuitBreaker_fallback(@PathVariable(&quot;id&quot;) Integer id)&#123; return &quot;id ä¸èƒ½è´Ÿæ•°ï¼Œ è¯·ç¨å€™å†è¯•,(â”¬ï¼¿â”¬)/~~ id: &quot; +id;&#125; why é…ç½®è¿™äº›å‚æ•°ï¼š PaymentController 123456@GetMapping(&quot;/payment/circuit/&#123;id&#125;&quot;)public String paymentCircuitBreaker(@PathVariable(&quot;id&quot;) Integer id)&#123; String result = paymentService.paymentCircuitBreaker(id); log.info(&quot;*******result:&quot;+result); return result;&#125; æµ‹è¯• è‡ªæµ‹ cloud-provider-hystrix-payment8001 æ­£ç¡®ï¼š http://localhost:8001/payment/circuit/1 é”™è¯¯ï¼š http://localhost:8001/payment/circuit/-1 ä¸€æ¬¡æ­£ç¡®ä¸€æ¬¡é”™è¯¯ trytry é‡ç‚¹æµ‹è¯•ï¼š å¤šæ¬¡é”™è¯¯,ç„¶åæ…¢æ…¢æ­£ç¡®ï¼Œ å‘ç°åˆšå¼€å§‹ä¸æ»¡è¶³æ¡ä»¶ï¼Œå°±ç®—æ˜¯æ­£ç¡®çš„è®¿é—®åœ°å€ä¹Ÿä¸èƒ½è¿›è¡Œè®¿é—®ï¼Œ éœ€è¦æ…¢æ…¢çš„æ¢å¤é“¾è·¯ 4.åŸç†ï¼ˆå°æ€»ç»“ï¼‰ å¤§ç¥ç»“è®º ç†”æ–­ç±»å‹ ç†”æ–­æ‰“å¼€ è¯·æ±‚ä¸å†è¿›è¡Œè°ƒç”¨å½“å‰æœåŠ¡ï¼Œ å†…éƒ¨è®¾ç½®æ—¶é’Ÿä¸€èˆ¬ä¸º MTTR(å¹³å‡æ•…éšœå¤„ç†æ—¶é—´)ï¼Œå½“æ‰“å¼€æ—¶é•¿è¾¾åˆ°æ‰€è®¾æ—¶é’Ÿåˆ™è¿›å…¥ç†”æ–­çŠ¶æ€ ã€‚ ç†”æ–­å…³é—­ ç†”æ–­å…³é—­ä¸ä¼šå¯¹æœåŠ¡è¿›è¡Œç†”æ–­ã€‚ ç†”æ–­åŠå¼€ éƒ¨åˆ†è¯·æ±‚æ ¹æ®è§„åˆ™è°ƒç”¨å½“å‰æœåŠ¡ï¼Œ å¦‚æœè¯·æ±‚æˆåŠŸä¸”ç¬¦åˆè§„åˆ™åˆ™è®¤ä¸ºå½“å‰æœåŠ¡æ¢å¤æ­£å¸¸ï¼Œ å…³é—­ç†”æ–­ ã€‚ å®˜ç½‘æ–­è·¯å™¨æµç¨‹å›¾ å®˜ç½‘æ­¥éª¤ æ–­è·¯å™¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¼€å§‹èµ·ä½œç”¨ æ–­è·¯å™¨å¼€å¯æˆ–è€…å…³é—­çš„æ¡ä»¶ å½“æ»¡è¶³ä¸€å®šé˜€å€¼çš„æ—¶å€™ï¼ˆé»˜è®¤ 10 ç§’å†…è¶…è¿‡ 20 ä¸ªè¯·æ±‚æ¬¡æ•°ï¼‰ å½“å¤±è´¥ç‡è¾¾åˆ°ä¸€å®šçš„æ—¶å€™ï¼ˆé»˜è®¤ 10 ç§’å†…è¶…è¿‡ 50%è¯·æ±‚å¤±è´¥ï¼‰ åˆ°è¾¾ä»¥ä¸Šé˜€å€¼ï¼Œ æ–­è·¯å™¨å°†ä¼šå¼€å¯ å½“å¼€å¯çš„æ—¶å€™ï¼Œ æ‰€æœ‰è¯·æ±‚éƒ½ä¸ä¼šè¿›è¡Œè½¬å‘ ä¸€æ®µæ—¶é—´ä¹‹åï¼ˆé»˜è®¤æ˜¯ 5 ç§’ï¼‰ï¼Œ è¿™ä¸ªæ—¶å€™æ–­è·¯å™¨æ˜¯åŠå¼€çŠ¶æ€ï¼Œ ä¼šè®©å…¶ä¸­ä¸€ä¸ªè¯·æ±‚è¿›è¡Œè½¬å‘ã€‚ å¦‚æœæˆåŠŸï¼Œ æ–­è·¯å™¨ä¼šå…³é—­ï¼Œ è‹¥å¤±è´¥ï¼Œ ç»§ç»­å¼€å¯ã€‚ é‡å¤ 4 å’Œ 5 ã€‚ æ–­è·¯å™¨æ‰“å¼€ä¹‹å All é…ç½® â‘¥ æœåŠ¡é™æµ å‚è€ƒæˆ‘åé¢çš„å…³äºé«˜çº§ç¯‡çš„ alibaba çš„ Sentinel è¯´æ˜ â‘¦ hystrix å·¥ä½œæµç¨‹1.hystrix å·¥ä½œæµç¨‹â€‹ https://github.com/Netflix/Hystrix/wiki/How-it-Works 2.hystrix å·¥ä½œæµç¨‹**å®˜ç½‘å›¾ä¾‹ : ** æ­¥éª¤è¯´æ˜: â‘§ æœåŠ¡ç›‘æ§ hystrixDashboard1.æ¦‚è¿° 2.ä»ªè¡¨ç›˜ 9001 æ–°å»º cloud-consumer-hystrix-dashboard9001 POM 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-consumer-hystrix-dashboard9001&lt;/artifactId&gt; &lt;dependencies&gt;&lt;!--æ–°å¢ hystrix dashboard--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix-dashboard&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12server: port: 9001 HystrixDashboardMain9001+æ–°æ³¨è§£**@EnableHystrixDashboard** 1234567@SpringBootApplication@EnableHystrixDashboardpublic class HystrixDashboardMain9001 &#123; public static void main(String[] args) &#123; SpringApplication.run(HystrixDashboardMain9001.class, args); &#125;&#125; æ‰€æœ‰ Provider å¾®æœåŠ¡æä¾›ç±»ï¼ˆ8001/8002/8003ï¼‰ éƒ½éœ€è¦ç›‘æ§ä¾èµ–é…ç½® 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt; å¯åŠ¨ cloud-consumer-hystrix-dashboard9001 è¯¥å¾®æœåŠ¡åç»­å°†ç›‘æ§å¾®æœåŠ¡ 8001 â€‹ http://localhost:9001/hystrix 3.æ–­è·¯å™¨æ¼”ç¤º(æœåŠ¡ç›‘æ§ hystrixDashboard) ä¿®æ”¹ cloud-provider-hystrix-payment8001 æ³¨æ„:æ–°ç‰ˆæœ¬ Hystrix éœ€è¦åœ¨ä¸»å¯åŠ¨ PaymentHystrixMain8001 ä¸­æŒ‡å®šç›‘æ§è·¯å¾„ 123456789101112131415/** * æ­¤é…ç½®æ˜¯ä¸ºäº†æœåŠ¡ç›‘æ§è€Œé…ç½®ï¼Œä¸æœåŠ¡å®¹é”™æœ¬èº«æ— è§‚ï¼ŒspringCloud å‡çº§ä¹‹åçš„å‘ * ServletRegistrationBeanå› ä¸ºspringbootçš„é»˜è®¤è·¯å¾„ä¸æ˜¯/hystrix.stream * åªè¦åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­é…ç½®ä¸Šä¸‹é¢çš„servletå³å¯ * @return */@Beanpublic ServletRegistrationBean getServlet()&#123; HystrixMetricsStreamServlet streamServlet = new HystrixMetricsStreamServlet(); ServletRegistrationBean&lt;HystrixMetricsStreamServlet&gt; registrationBean = new ServletRegistrationBean&lt;&gt;(streamServlet); registrationBean.setLoadOnStartup(1); registrationBean.addUrlMappings(&quot;/hystrix.stream&quot;); registrationBean.setName(&quot;HystrixMetricsStreamServlet&quot;); return registrationBean;&#125; Unable to connect to Command Metric Stream. 404 ç›‘æ§æµ‹è¯• å¯åŠ¨ 1 ä¸ª eureka æˆ–è€… 3 ä¸ª eureka é›†ç¾¤å‡å¯ è§‚å¯Ÿç›‘æ§çª—å£ 9001 ç›‘æ§ 8001 å¡«å†™ç›‘æ§åœ°å€ï¼š http://localhost:8001/hystrix.stream æµ‹è¯•åœ°å€ï¼š http://localhost:8001/payment/circuit/1ã€http://localhost:8001/payment/circuit/1 ä¸Šè¿°æµ‹è¯•é€šè¿‡ï¼š ok å…ˆè®¿é—®æ­£ç¡®åœ°å€ï¼Œ å†è®¿é—®é”™è¯¯åœ°å€ï¼Œ å†æ­£ç¡®åœ°å€ï¼Œ ä¼šå‘ç°å›¾ç¤ºæ–­è·¯å™¨éƒ½ï¼Œæ˜¯æ…¢æ…¢æ”¾å¼€çš„ ã€‚ ç›‘æ§ç»“æœï¼ŒæˆåŠŸ ç›‘æ§ç»“æœï¼Œ å¤±è´¥ å¦‚ä½•çœ‹ï¼š 7 è‰² 1 åœˆ 1 çº¿ æ•´å›¾è¯´æ˜ æ•´å›¾è¯´æ˜ 2 ææ‡‚ä¸€ä¸ªæ‰èƒ½çœ‹æ‡‚å¤æ‚çš„","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud æœåŠ¡æ³¨å†Œä¸å‘ç°","slug":"SpringCloudæœåŠ¡æ³¨å†Œä¸å‘ç°","date":"2020-10-11T16:00:00.000Z","updated":"2020-10-25T02:33:45.948Z","comments":true,"path":"posts/368886813.html","link":"","permalink":"http://blog.oy6090.top/posts/368886813.html","excerpt":"","text":"æœ¬ç¯‡åšå®¢å‚è€ƒå­¦ä¹ è§†é¢‘ ä¸€ã€Eureka æœåŠ¡æ³¨å†Œä¸å‘ç°â‘  Eureka åŸºç¡€çŸ¥è¯†1. æœåŠ¡æ²»ç†â€‹ SpringCloud å°è£…äº† Netflix å…¬å¸å¼€å‘çš„ Eureka æ¨¡å—æ¥å®ç°æœåŠ¡æ²»ç†ã€‚ åœ¨ä¼ ç»Ÿçš„ RPC è¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œ ç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œ æ‰€ä»¥éœ€è¦ä½¿ç”¨æœåŠ¡æ²»ç†ç®¡ç†æœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œ äº†ä»¥å®ç°æœåŠ¡è°ƒç”¨ã€ è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œ å®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œ ã€‚ 2. æœåŠ¡æ³¨å†Œ 3.Eureka ä¸¤ç»„ä»¶ â‘¡ å•æœº Eureka æ„å»ºæ­¥éª¤1.IDEA ç”Ÿæˆ EurekaServer ç«¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ ç±»ä¼¼ç‰©ä¸šå…¬å¸ å»º Module æ”¹ POM 12345678910111213141516171819202122232425262728293031323334353637&lt;dependencies&gt; &lt;!--eureka-server--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-common&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--ä¸€èˆ¬ä¸ºé€šç”¨é…ç½®--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 1.X å’Œ 2.X çš„å¯¹æ¯”è¯´æ˜ å†™ YML 1234567891011server: port: 7001eureka: instance: hostname: localhost #eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/ ä¸»å¯åŠ¨ 1234567@SpringBootApplication@EnableEurekaServerpublic class EurekaMain7001 &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaMain7001.class, args); &#125;&#125; æ³¨æ„ï¼šéœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šé…ç½®æ³¨è§£ @EnableEurekaServer,å¼€å¯æ³¨å†Œä¸­å¿ƒ æµ‹è¯• http://localhost:7001/ ï¼Œæ•ˆæœé¡µé¢ 2.EurekaClient ç«¯ cloud-provider-payment8001 å°†æ³¨å†Œè¿› EurekaServer æˆä¸ºæœåŠ¡æä¾›è€… provider æ”¹ POM ( cloud-provider-payment8001) 12345&lt;!--https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; 1.X å’Œ 2.X çš„å¯¹æ¯”è¯´æ˜ å†™ YML 12345678eureka: client: # è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›eurekaServer é»˜è®¤ä¸º trueã€‚ register-with-eureka: true # æ˜¯å¦ä»EureaServer æŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrue.å•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®trueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡ fetchRegistry: true service-url: defaultZone: http://localhost:7001/eureka ä¸»å¯åŠ¨ 1234567@EnableEurekaClient@SpringBootApplicationpublic class PaymentMain8001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain8001.class, args); &#125;&#125; æ·»åŠ ï¼šæ³¨è§£ @EnableEurekaClient æµ‹è¯• å…ˆå¯åŠ¨ EurekaServer http://localhost:7001/ å¾®æœåŠ¡é…ç½®è¯´æ˜ è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ 3.EurekaClient ç«¯ cloud-consumer-order80 å°†æ³¨å†Œè¿› EurekaServer æˆä¸ºæœåŠ¡æ¶ˆè´¹è€… consumer æ”¹ POM 12345&lt;!--https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; å†™ YML 123456789spring: application: name: cloud-order-serviceeureka: client: register-with-eureka: true fetchRegistry: true service-url: defaultZone: http://localhost:7001/eureka ä¸»å¯åŠ¨ @EnableEurekaClient 1234567@SpringBootApplication@EnableEurekaClientpublic class OrderMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderMain80.class, args); &#125;&#125; æµ‹è¯• å…ˆå¯åŠ¨ EurekaServer, 7001 æœåŠ¡ï¼Œåœ¨å¯åŠ¨æœåŠ¡æä¾›è€… provider 8001 æœåŠ¡ï¼Œåœ¨å¯åŠ¨æ¶ˆè´¹è€… consumer 80 http://localhost/consumer/payment/get/1 BUG â‘¢ Eureka æ„å»ºæ­¥éª¤1.Eureka é›†ç¾¤åŸç†è¯´æ˜ **å¾®æœåŠ¡ RPC è¿œç¨‹æœåŠ¡è°ƒç”¨æœ€æ ¸å¿ƒçš„æ˜¯ä»€ä¹ˆ ** 1é«˜å¯ç”¨ è§£å†³åŠæ³•ï¼šæ­å»º Eureka æ³¨å†Œä¸­å¿ƒé›†ç¾¤ï¼Œå®ç°è´Ÿè½½å‡è¡¡+æ•…éšœå®¹é”™ 2.EurekaServer é›†ç¾¤ç¯å¢ƒæ„å»ºæ­¥éª¤ æ–°å»º cloud-eureka-server7002 å’Œ POM â€‹ å‚è€ƒ cloud-eureka-server7001 é¡¹ç›®å·¥ç¨‹ ä¿®æ”¹æ˜ å°„é…ç½® æ‰¾åˆ° C:\\Windows\\System32\\drivers\\etc è·¯å¾„ä¸‹çš„ hosts æ–‡ä»¶ ä¿®æ”¹æ˜ å°„é…ç½®æ·»åŠ è¿› hosts æ–‡ä»¶ 127.0.0.1 eureka7001.com 127.0.0.1 eureka7002.com å†™ YML ä»¥å‰å•æœº 7001 1234567891011server: port: 7001eureka: instance: hostname: eureka7001.com #eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://eureka7002.com:7002/eureka/ #è®¾ç½®ä¸ eureka server äº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ 7002 1234567891011server: port: 7002eureka: instance: hostname: eureka7002.com #eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§° client: register-with-eureka: false #falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚ fetch-registry: false #falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡ service-url: defaultZone: http://eureka7001.com:7001/eureka/ #è®¾ç½®ä¸ eureka server äº¤äº’çš„åœ°å€æŸ¥è¯¢æœåŠ¡å’Œæ³¨å†ŒæœåŠ¡éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€ ä¸»å¯åŠ¨ç±» ï¼ˆå‚è€ƒ cloud-eureka-server7001 çš„ä¸»å¯åŠ¨ç±» ï¼‰ 1234567@SpringBootApplication@EnableEurekaServerpublic class EurekaMain7002 &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaMain7002.class, args); &#125;&#125; 3.å°†æ”¯ä»˜æœåŠ¡ 8001 å¾®æœåŠ¡å‘å¸ƒåˆ°ä¸Šé¢ 2 å° Eureka é›†ç¾¤é…ç½®ä¸­ YML 123456eureka: client: register-with-eureka: true fetch-registry: true service-url: defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka # é›†ç¾¤ç‰ˆ 4.å°†è®¢å•æœåŠ¡ 80 å¾®æœåŠ¡å‘å¸ƒåˆ°ä¸Šé¢ 2 å° Eureka é›†ç¾¤é…ç½®ä¸­ YML 1234567eureka: client: register-with-eureka: true fetchRegistry: true service-url: # defaultZone: http://localhost:7001/eureka defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka #é›†ç¾¤ç‰ˆ 5.æµ‹è¯• 01 å…ˆè¦å¯åŠ¨ EurekaServerï¼Œ 7001/7002 æœåŠ¡ï¼Œå†è¦å¯åŠ¨æœåŠ¡æä¾›è€… providerï¼Œ 8001 æœåŠ¡ï¼Œå†è¦å¯åŠ¨æ¶ˆè´¹è€…ï¼Œ 80 http://localhost/consumer/payment/get/1 6.æ”¯ä»˜æœåŠ¡æä¾›è€… 8001 é›†ç¾¤ç¯å¢ƒæ„å»º æ–°å»º cloud-provider-payment8002 å’Œ POM â€‹ å‚è€ƒ cloud-provider-payment8001 å†™ YML 12345678910111213141516171819202122server: port: 8002spring: application: name: cloud-payment-service datasource: type: com.alibaba.druid.pool.DruidDataSource driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/db2019?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC username: root password: 6090mybatis: mapperLocations: classpath:mapper/*.xml type-aliases-package: com.oy.springcloud.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ…eureka: client: register-with-eureka: true fetch-registry: true service-url: # é›†ç¾¤ç‰ˆ defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka ä¸»å¯åŠ¨ 1234567@EnableEurekaClient@SpringBootApplicationpublic class PaymentMain8002 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain8002.class, args); &#125;&#125; ä¸šåŠ¡ç±» ç›´æ¥ä» 8001 ç²˜è´´ ä¿®æ”¹ 8001/8002 çš„ controller 12@Value(&quot;$&#123;server.port&#125;&quot;)private String serverPort; 8001 å’Œ 8002 7.è´Ÿè½½å‡è¡¡ Bugï¼š è®¢å•æœåŠ¡è®¿é—®åœ°å€ä¸èƒ½å†™æ­» åŸæœ¬ï¼šï¼ˆcloud-consumer-order80ï¼‰ æ›´æ”¹ï¼š 1public static final String PAYMENT_URL = &quot;http://CLOUD-PAYMENT-SERVICE&quot;; ä½¿ç”¨@LoadBalanced æ³¨è§£èµ‹äºˆ RestTemplate è´Ÿè½½å‡è¡¡çš„èƒ½åŠ› ï¼ˆcloud-consumer-order80ï¼‰ 8.æµ‹è¯• 02 å…ˆè¦å¯åŠ¨ EurekaServerï¼Œ 7001/7002 æœåŠ¡ å†è¦å¯åŠ¨æœåŠ¡æä¾›è€… providerï¼Œ 8001/8002 æœåŠ¡ åœ¨å¯åŠ¨ consumer 80 æœåŠ¡ http://localhost/consumer/payment/get/1 **è´Ÿè½½å‡è¡¡ç”Ÿæ•ˆï¼Œ 8001/8002 ç«¯å£äº¤æ›¿å‡ºç° ** â‘£ actuator å¾®æœåŠ¡ä¿¡æ¯å®Œå–„1.ä¸»æœºåç§°ï¼šæœåŠ¡åç§°ä¿®æ”¹ ä¿®æ”¹ YML (cloud-provider-payment8001) éƒ¨åˆ† 12instance: instance-id: payment8001 2.è®¿é—®ä¿¡æ¯æœ‰ ip ä¿¡æ¯æç¤ºâ€‹ å½“å‰é—®é¢˜ï¼šæ²¡æœ‰ ip æç¤º ä¿®æ”¹ cloud-provider-payment8001 YML éƒ¨åˆ† 1prefer-ip-address: true _æ•ˆæœ_ï¼š â‘¤ æœåŠ¡å‘ç° Discovery1.å¯¹äºæ³¨å†Œè¿› eureka é‡Œé¢çš„å¾®æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æ¥è·å–æœåŠ¡çš„ä¿¡æ¯2.ä¿®æ”¹ cloud-provider-payment8001 çš„ Controller123456789101112131415161718@Resourceprivate DiscoveryClient discoveryClient;@GetMapping(value = &quot;/payment/discovery&quot;)public Object discovery()&#123; List&lt;String&gt; services = discoveryClient.getServices(); for (String element : services) &#123; log.info(&quot;**** element:&quot;+ element); &#125; List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;CLOUD-PAYMENT-SERVICE&quot;); for (ServiceInstance instance : instances) &#123; log.info(instance.getServiceId()+&quot;\\t&quot;+instance.getHost()+&quot;\\t&quot;+instance.getPort()+&quot;\\t&quot;+instance.getUri()); &#125; return this.discoveryClient;&#125; 3.8001 ä¸»å¯åŠ¨ç±» @EnableDiscoveryClient 12345678@EnableEurekaClient@EnableDiscoveryClient // æœåŠ¡å‘ç°@SpringBootApplicationpublic class PaymentMain8001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain8001.class, args); &#125;&#125; 4.æµ‹è¯• å…ˆå¯åŠ¨ EurekaServerï¼Œ 7001/7002 æœåŠ¡ï¼Œå†å¯åŠ¨ 8001 ä¸»å¯åŠ¨ç±»ï¼Œéœ€è¦ç¨ç­‰ä¸€ä¼š http://localhost:8001/payment/discovery â‘¥ Eureka è‡ªæˆ‘ä¿æŠ¤1.æ•…éšœç°è±¡ 2.å¯¼è‡´åŸå›  â€‹ æ€»ç»“ï¼šæŸæ—¶åˆ»æŸä¸€ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼ŒEureka ä¸ä¼šç«‹å³æ¸…ç†ï¼Œä¾æ—§ä¼šå¯¹è¯¥æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ï¼Œå±äº CAP é‡Œçš„ AP åˆ†æ”¯ 3.æ€ä¹ˆç¦æ­¢è‡ªæˆ‘ä¿æŠ¤ï¼ˆä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä¼šç¦æ­¢è‡ªæˆ‘ä¿æŠ¤ï¼‰ æ³¨å†Œä¸­å¿ƒ eureakeServer ç«¯ 7001: å‡º å‚ é»˜ è®¤ ï¼Œ è‡ª æˆ‘ ä¿ æŠ¤ æœº åˆ¶ æ˜¯ å¼€ å¯çš„:eureka.server.enable-self-preservation = true ä½¿ç”¨ eureka.server.enable-self-preservation = false å¯ä»¥ç¦ç”¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ åœ¨ eurekaServer ç«¯ 7001 å¤„è®¾ç½®å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ æ•ˆæœå›¾ï¼š ç”Ÿäº§è€…å®¢æˆ·ç«¯ eureakeClient ç«¯ 8001 é»˜è®¤: 12eureka.instance.lease-renewal-interval-in-seconds=30 å•ä½ä¸ºç§’ï¼ˆ é»˜è®¤æ˜¯ 30 ç§’ï¼‰eureka.instance.lease-expiration-duration-in-seconds=90 å• ä½ ä¸º ç§’ï¼ˆ é»˜è®¤æ˜¯ 90 ç§’ï¼‰ é…ç½®: 1234567instance: instance-id: payment8001 prefer-ip-address: true #Eurekaå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’(é»˜è®¤æ˜¯30ç§’) lease-renewal-interval-in-seconds: 1 #EurekaæœåŠ¡ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ä¸ºç§’(é»˜è®¤æ˜¯90ç§’)ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡ lease-expiration-duration-in-seconds: 2 4.æµ‹è¯• 7001 å’Œ 8001 éƒ½é…ç½®å®Œæˆ å…ˆå¯åŠ¨ 7001 å†å¯åŠ¨ 8001 ï¼Œå…ˆå…³é—­ 8001 ï¼Œé©¬ä¸Šè¢«åˆ é™¤äº† äºŒã€Zookeeper æœåŠ¡æ³¨å†Œä¸å‘ç°â‘  Eukeka åœæ­¢æ›´æ–°äº†æ€ä¹ˆåŠâ€‹ https://github.com/Netflix/eureka/wiki â‘¡ SpringCloud æ•´åˆ Zookeeper ä»£æ›¿ Eureka1.æ³¨å†Œä¸­å¿ƒ zookeeper zookeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒå·¥å…·ï¼Œå¯ä»¥å®ç°æ³¨å†Œä¸­å¿ƒåŠŸèƒ½ ä½¿ç”¨ docker å¿«é€Ÿåˆ›å»º zookeeper å®¹å™¨ å…³é—­ Linux æœåŠ¡å™¨é˜²ç«å¢™åå¯åŠ¨ zookeeper æœåŠ¡å™¨ CentOS 7 å…³é—­é˜²ç«å¢™æŒ‡ä»¤ 1234567891011// æŸ¥çœ‹å½“å‰é˜²ç«å¢™çŠ¶æ€å¦‚æœé˜²ç«å¢™å¤„äºå¼€å¯çŠ¶æ€ï¼Œfirewalld.serviceå‰é¢çš„ç‚¹æ˜¯é«˜äº®çš„ï¼ŒActiveï¼šactiveï¼ˆå¼€å¯ï¼‰ï¼‰systemctl status firewalld.service//å…³é—­å½“å‰çš„é˜²ç«å¢™ï¼ˆä»…å¯¹æœ¬æ¬¡å¼€æœºæœ‰æ•ˆï¼Œé‡å¯åé˜²ç«å¢™ä¼šå†æ¬¡å¯ç”¨ï¼‰systemctl stop firewalld.service//æ°¸ä¹…å…³é—­é˜²ç«å¢™ï¼ˆé‡å¯åé˜²ç«å¢™ä¾ç„¶å…³é—­ï¼‰systemctl disable firewalld.service// å¯åŠ¨é˜²ç«å¢™ systemctl start firewalld zookeeper æœåŠ¡å™¨å–ä»£ Eureka æœåŠ¡å™¨ï¼Œzk ä½œä¸ºæœåŠ¡å™¨æ³¨å†Œä¸­å¿ƒ 2.æœåŠ¡æä¾›è€… æ–°å»º cloud-provider-payment8004 POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-provider-payment8004&lt;/artifactId&gt; &lt;description&gt;ZookeeperæœåŠ¡æä¾›è€…&lt;/description&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringBootæ•´åˆZookeeperå®¢æˆ·ç«¯--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zookeeper-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 1234567891011server: # 8004è¡¨ç¤ºæ³¨å†Œåˆ°zookeeperæœåŠ¡å™¨çš„æ”¯ä»˜æœåŠ¡æä¾›è€…ç«¯å£å· port: 8004spring: application: # æœåŠ¡åˆ«å---æ³¨å†Œzookeeperåˆ°æ³¨å†Œä¸­å¿ƒçš„åç§° name: cloud-provider-payment cloud: zookeeper: connect-string: 116.63.177.72:2181 ä¸»å¯åŠ¨ç±» 123456789101112import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;@EnableDiscoveryClient@SpringBootApplicationpublic class PaymentMain8004 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain8004.class, args); &#125;&#125; Controller 123456789101112@RestController@Slf4jpublic class PaymentController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @GetMapping(value = &quot;/payment/zk&quot;) public String paymentzk()&#123; return &quot;springcloud with zookeeper:&quot;+serverPort+&quot;\\t&quot;+ UUID.randomUUID().toString(); &#125;&#125; å¯åŠ¨ 8004 æ³¨å†Œè¿› zookeeper æ³¨æ„ï¼šå¯åŠ¨åé—®é¢˜å­˜åœ¨ä¸‹é¢é—®é¢˜ Whyï¼š è§£å†³ zookeeper ç‰ˆæœ¬ jar åŒ…å†²çªé—®é¢˜ï¼š æ’å‡º zk å†²çªåçš„æ–° POMï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;cloud2020&lt;/artifactId&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-provider-payment8004&lt;/artifactId&gt; &lt;description&gt;ZookeeperæœåŠ¡æä¾›è€…&lt;/description&gt; &lt;dependencies&gt; &lt;!--SpringBootæ•´åˆZookeeperå®¢æˆ·ç«¯--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zookeeper-discovery&lt;/artifactId&gt; &lt;exclusions&gt; &lt;!--å…ˆæ’é™¤è‡ªå¸¦çš„zookeeper3.5.3--&gt; &lt;exclusion&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;!--æ·»åŠ zookeeper3.4.9ç‰ˆæœ¬--&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;version&gt;3.4.9&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; æµ‹è¯• åœ¨ Linux ä¸ŠæŸ¥è¯¢ å’Œ æµè§ˆå™¨ä¸Šï¼ˆhttp://localhost:8004/payment/zk ï¼‰ è·å¾— json ä¸²åç”¨åœ¨çº¿å·¥å…·æŸ¥çœ‹è¯•è¯• ï¼ˆdokcer å®¹å™¨ï¼‰ å…·ä½“è¯¦ç»†çš„æ“ä½œå‚è€ƒï¼šhttps://blog.csdn.net/qq_45738810/article/details/109002435 æ€è€ƒï¼š æœåŠ¡èŠ‚ç‚¹æ˜¯ä¸´æ—¶èŠ‚ç‚¹è¿˜æ˜¯æŒä¹…èŠ‚ç‚¹â€”â€”æ˜¯ä¸´æ—¶èŠ‚ç‚¹ 3.æœåŠ¡æ¶ˆè´¹è€… æ–°å»º cloud-consumerzk-order80 POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;cloud2020&lt;/artifactId&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-consumerzk-order80&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-common&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--SpringBootæ•´åˆZookeeperå®¢æˆ·ç«¯--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-zookeeper-discovery&lt;/artifactId&gt; &lt;exclusions&gt; &lt;!--å…ˆæ’é™¤è‡ªå¸¦çš„zookeeper3.5.3--&gt; &lt;exclusion&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;!--æ·»åŠ zookeeper3.4.9ç‰ˆæœ¬--&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;version&gt;3.4.9&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 12345678910server: port: 80spring: application: # æœåŠ¡åˆ«å name: cloud-consumer-order cloud: zookeeper: # æ³¨å†Œåˆ°zookeeperåœ°å€ connect-string: localhost:2181 ä¸»å¯åŠ¨ 1234567@SpringBootApplication@EnableDiscoveryClientpublic class OrderZkMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderZkMain80.class, args); &#125;&#125; ä¸»ä¸šåŠ¡ç±» bean 123456789101112131415161718package com.springcloud.config;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.client.RestTemplate;/** * @Author OY * @Date 2020/10/10 */@Configurationpublic class ApplicationContextConfig &#123; @Bean public RestTemplate restTemplate()&#123; return restTemplate(); &#125;&#125; controller 1234567891011121314151617181920212223242526272829package com.springcloud.controller;import lombok.extern.slf4j.Slf4j;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RestController;import org.springframework.web.client.RestTemplate;import javax.annotation.Resource;/** * @Author OY * @Date 2020/10/10 */@RestController@Slf4jpublic class OrderZkController &#123; @Resource private RestTemplate restTemplate; public static final String INVOKE_URL = &quot;http://cloud-provider-payment&quot;; @GetMapping(&quot;/consumer/payment/zk&quot;) public String paymentInfo() &#123; return restTemplate.getForObject(INVOKE_URL + &quot;/payment/zk&quot;, String.class); &#125;&#125; éªŒè¯æµ‹è¯• è®¿é—®æµ‹è¯•åœ°å€ â€‹ http://localhost/consumer/payment/zk ä¸‰ã€Consul æœåŠ¡æ³¨å†Œä¸å‘ç°â‘  Consul ç®€ä»‹1.æ˜¯ä»€ä¹ˆï¼šhttps://www.consul.io/intro/index.html 2.èƒ½å¹²å˜›ï¼š æœåŠ¡å‘ç°ï¼š æä¾› HTTP å’Œ DNS ä¸¤ç§å‘ç°æ–¹å¼ å¥åº·æ£€æŸ¥ï¼š æ”¯æŒå¤šç§åè®®ï¼ŒHTTPã€TCPã€Dockerã€Shell è„šæœ¬å®šåˆ¶åŒ– KV å­˜å‚¨ï¼š Keyï¼ŒValue çš„å­˜å‚¨æ–¹å¼ å¤šæ•°æ®ä¸­å¿ƒï¼š Consul æ”¯æŒå¤šæ•°æ®ä¸­å¿ƒ å¯è§†åŒ– Web ç•Œé¢ 3.ä¸‹è½½https://www.consul.io/downloads.html 4.æ€ä¹ˆç©https://www.springcloud.cc/spring-cloud-consul.html â‘¡ å®‰è£…å¹¶è¿è¡Œ Consul1.å®˜ç½‘å®‰è£…è¯´æ˜https://learn.hashicorp.com/consul/getting-started/install.html 2.ä¸‹è½½å®Œæˆååªæœ‰ä¸€ä¸ª consul.exe æ–‡ä»¶ï¼Œç¡¬ç›˜è·¯å¾„ä¸‹åŒå‡»è¿è¡Œï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ 3.ä½¿ç”¨å¼€å‘è€…æ¨¡å¼å¯åŠ¨1consul agent -dev é€šè¿‡ä»¥ä¸‹åœ°å€å¯ä»¥è®¿é—® Consul çš„é¦–é¡µï¼šhttp://localhost:8500/ â‘¢ æœåŠ¡æä¾›è€… æ–° å»º Module æ”¯ ä»˜ æœ åŠ¡ provider8006 cloud-providerconsul-payment8006 POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-providerconsul-payment8006&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-consul-discovery --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 1234567891011server: port: 8006spring: application: name: consul-provider-payment cloud: consul: host: localhost port: 8500 discovery: service-name: $&#123;spring.application.name&#125; ä¸»å¯åŠ¨ç±» 1234567@EnableDiscoveryClient@SpringBootApplicationpublic class PaymentMain8006 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain8006.class, args); &#125;&#125; ä¸»ä¸šåŠ¡ç±» Controller 123456789101112@RestController@Slf4jpublic class PaymentController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @GetMapping(value = &quot;/payment/consul&quot;) public String paymentConsul()&#123; return &quot;SpringCloud with consul:&quot; + serverPort + &quot;\\t&quot;+ UUID.randomUUID().toString(); &#125;&#125; éªŒè¯æµ‹è¯• â€‹ http://localhost:8006/payment/consul â‘£ æœåŠ¡æ¶ˆè´¹è€… æ–° å»º Module æ¶ˆ è´¹ æœ åŠ¡ order8006 â€‹ cloud-consumerconsul-order80 POM 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-consumerconsul-order80&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-consul-discovery --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 123456789101112server: port: 80spring: application: name: consul-consumer-order cloud: consul: host: localhost port: 8500 discovery: service-name: $&#123;spring.application.name&#125; ä¸»å¯åŠ¨ç±» 12345678910111213package com.oy.springcloud;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;@SpringBootApplication@EnableDiscoveryClientpublic class OrderConsulMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderConsulMain80.class, args); &#125;&#125; é…ç½® Bean 12345678910111213141516package com.oy.springcloud.config;import org.springframework.cloud.client.loadbalancer.LoadBalanced;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.client.RestTemplate;@Configurationpublic class ApplicationConfig &#123; @LoadBalanced // è´Ÿè½½å‡è¡¡ @Bean public RestTemplate restTemplate()&#123; return new RestTemplate(); &#125;&#125; Controller 12345678910111213141516171819202122232425262728package com.oy.springcloud.controller;import lombok.extern.slf4j.Slf4j;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RestController;import org.springframework.web.client.RestTemplate;import javax.annotation.Resource;/** * @Author OY * @Date 2020/10/11 */@RestController@Slf4jpublic class OrderConsulController &#123; public static final String INVOME_URL = &quot;http://consul-provider-payment&quot;; @Resource public RestTemplate restTemplate; @GetMapping(&quot;/consumer/payment/consul&quot;) public String payment()&#123; String result = restTemplate.getForObject(INVOME_URL+&quot;/payment/consul&quot;,String.class ); return result; &#125;&#125; éªŒè¯æµ‹è¯• è®¿é—®æµ‹è¯•åœ°å€ï¼šhttp://localhost/consumer/payment/consul â‘¤ ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹1.CAP Cï¼š Consistency (å¼ºä¸€è‡´æ€§) A: Availability ï¼ˆå¯ç”¨æ€§ï¼‰ P: Partition tolerance ï¼ˆåˆ†åŒºå®¹é”™ï¼‰ CAP ç†è®ºå…³æ³¨ç²’åº¦æ˜¯æ•°æ®ï¼Œ è€Œä¸æ˜¯æ•´ä½“ç³»ç»Ÿè®¾è®¡çš„ç­–ç•¥ 2.ç»å…¸ CAP å›¾ AP(Eureka) æ¶æ„ å½“ç½‘ç»œåˆ†åŒºå‡ºç°åï¼Œä¸ºäº†ä¿è¯å¯ç”¨æ€§ï¼Œç³»ç»Ÿ Bå¯ä»¥è¿”å›å€¼ï¼Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚ ç»“è®ºï¼šè¿èƒŒäº†ä¸€è‡´æ€§ C çš„è¦æ±‚ï¼Œåªæ»¡è¶³å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™ï¼Œå³ AP CP(Zookeeper/Consul) æ¶æ„","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringCloud æœåŠ¡è°ƒç”¨","slug":"SpringCloudæœåŠ¡è°ƒç”¨","date":"2020-10-10T16:00:00.000Z","updated":"2020-10-25T02:33:56.301Z","comments":true,"path":"posts/1872245415.html","link":"","permalink":"http://blog.oy6090.top/posts/1872245415.html","excerpt":"","text":"åšå®¢å­¦ä¹ å‚è€ƒè§†é¢‘ ä¸€ã€Ribbon è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨â‘  æ¦‚è¿°1.æ˜¯ä»€ä¹ˆ 2.å®˜ç½‘èµ„æ–™â€‹ https://github.com/Netflix/ribbon/wiki/Getting-Started Ribbon ç›®å‰ä¹Ÿè¿›å…¥ç»´æŠ¤æ¨¡å¼ æœªæ¥æ›¿æ¢æ–¹æ¡ˆ 3.èƒ½å¹²å˜› LBï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ ï¼š é›†ä¸­å¼ LBã€ è¿›ç¨‹å†… LB ï¼Œå‰é¢æˆ‘ä»¬å†™è¿‡äº† 80 é€šè¿‡è½®è¯¢è´Ÿè½½è®¿é—® 8001/8002 ä¸€å¥è¯ï¼š è´Ÿè½½å‡è¡¡+RestTemplate è°ƒç”¨ â‘¡ Ribbon è´Ÿè½½å‡è¡¡æ¼”ç¤º1.æ¶æ„è¯´æ˜ æ€»ç»“: Ribbon å…¶å®å°±æ˜¯ä¸€ä¸ªè½¯è´Ÿè½½å‡è¡¡çš„å®¢æˆ·ç«¯ç»„ä»¶ï¼Œä»–å¯ä»¥å’Œå…¶ä»–æ‰€éœ€è¯·æ±‚çš„å®¢æˆ·ç«¯ç»“åˆä½¿ç”¨ï¼Œå’Œ eureka ç»“åˆåªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªå®ä¾‹ã€‚ 2.POM 3.RestTemplate çš„ä½¿ç”¨å®˜ç½‘ï¼šhttps://docs.spring.io/spring-framework/docs/5.2.2.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html getForObject æ–¹æ³•/getForEntity æ–¹æ³• postForObject/postForEntity â‘¢ Ribbon æ ¸å¿ƒç»„ä»¶ IRule1.IRuleæ ¹æ®ç‰¹å®šç®—æ³•ä»æœåŠ¡åˆ—è¡¨ä¸­é€‰å–ä¸€ä¸ªè¦è®¿é—®çš„æœåŠ¡ com.netflix.loadbalancer.RoundRobinRule è½®è¯¢ com.netflix.loadbalancer.RandomRule éšæœº com.netflix.loadbalancer.RetryRuleï¼š å…ˆæŒ‰ç…§ RoundRobinRule çš„ç­–ç•¥è·å–æœåŠ¡ï¼Œ å¦‚æœè·å–æœåŠ¡å¤±è´¥åˆ™åœ¨æŒ‡å®šæ—¶é—´å†…ä¼šè¿›è¡Œé‡è¯• WeightedResponseTimeRule ï¼š å¯¹ RoundRobinRule çš„æ‰©å±•ï¼Œ å“åº”é€Ÿåº¦è¶Šå¿«çš„å®ä¾‹é€‰æ‹©æƒé‡è¶Šå¤§ï¼Œ è¶Šå®¹æ˜“è¢«é€‰æ‹© BestAvailableRule ï¼š ä¼šå…ˆè¿‡æ»¤æ‰ç”±äºå¤šæ¬¡è®¿é—®æ•…éšœè€Œå¤„äºæ–­è·¯å™¨è·³é—¸çŠ¶æ€çš„æœåŠ¡ï¼Œ ç„¶åé€‰æ‹©ä¸€ä¸ªå¹¶å‘é‡æœ€å°çš„æœåŠ¡ AvailabilityFilteringRule ï¼š å…ˆè¿‡æ»¤æ‰æ•…éšœå®ä¾‹ï¼Œ å†é€‰æ‹©å¹¶å‘è¾ƒå°çš„å®ä¾‹ ZoneAvoidanceRuleï¼š é»˜è®¤è§„åˆ™ï¼Œ å¤åˆåˆ¤æ–­ server æ‰€åœ¨åŒºåŸŸçš„æ€§èƒ½å’Œ server çš„å¯ç”¨æ€§é€‰æ‹©æœåŠ¡å™¨ 2.å¦‚ä½•æ›¿æ¢ ä¿®æ”¹ cloud-consumer-order80 æ³¨æ„é…ç½®ç»†èŠ‚ æ–°å»º packageï¼š com.oy.myrule ä¸»å¯åŠ¨ç±»æ·»åŠ @RibbonClient 1234567891011121314import com.oy.myrule.MySelfRule;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.EnableEurekaClient;import org.springframework.cloud.netflix.ribbon.RibbonClient;@SpringBootApplication@EnableEurekaClient@RibbonClient(name = &quot;CLOUD-PAYMENT-SERVICE&quot;,configuration = MySelfRule.class)public class OrderMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderMain80.class, args); &#125;&#125; æµ‹è¯• â€‹ http://localhost/consumer/payment/get/1 â‘£ Ribbon è´Ÿè½½å‡è¡¡ç®—æ³•1.åŸç† 2.RoundRobinRule æºç 3.æ‰‹å†™ 7001/7002 é›†ç¾¤å¯åŠ¨ 8001/8002 å¾®æœåŠ¡æ”¹é€  Controller: 1234@GetMapping(value = &quot;/payment/lib&quot;)public String getPaymentLB()&#123; return serverPort;&#125; 80 è®¢å•å¾®æœåŠ¡æ”¹é€  ApplicationContextBean å»æ‰@LoadBalanced LoadBalancer æ¥å£ 123456789101112131415161718192021222324252627282930313233package com.oy.springcloud.lb;import org.springframework.cloud.client.ServiceInstance;import org.springframework.stereotype.Component;import java.util.List;import java.util.concurrent.atomic.AtomicInteger;@Componentpublic class MyLB implements LoadBalancer&#123; private AtomicInteger atomicInteger = new AtomicInteger(0); // åæ ‡ private final int getAndIncrement()&#123; int current; int next; do&#123; current = this.atomicInteger.get(); next = current &gt;= 2147483647 ? 0 : current+1; &#125;while (!this.atomicInteger.compareAndSet(current,next)); // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœŸæœ›å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¿®æ”¹å€¼æ˜¯ System.out.println(&quot;******ç¬¬å‡ æ¬¡è®¿é—®ï¼Œæ¬¡æ•°next:&quot; + next + &quot;,current:&quot;+ current); return next; &#125; @Override public ServiceInstance instances(List&lt;ServiceInstance&gt; serviceInstances) &#123;// å¾—åˆ°æœºå™¨åˆ—è¡¨ // è·å–æœåŠ¡å™¨çš„ä¸‹æ ‡ä½ç½® int index = getAndIncrement() % serviceInstances.size(); return serviceInstances.get(index); &#125;&#125; OrderController 123456789101112131415161718192021222324252627282930/** * @Author OY * @Date 2020/10/7 */@RestControllerpublic class OrderController &#123; @Resource private RestTemplate restTemplate; @Resource LoadBalancer loadBalancer; @GetMapping(value = &quot;/consumer/payment/lb&quot;) public String getPaymentLB()&#123; List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;CLOUD-PAYMENT-SERVICE&quot;); if(instances == null || instances.size() &lt;= 0)&#123; return null; &#125; ServiceInstance serviceInstance = loadBalancer.instances(instances); URI uri = serviceInstance.getUri(); return restTemplate.getForObject(uri+&quot;/payment/lb&quot;,String.class); &#125;&#125; æµ‹è¯• http://localhost/consumer/payment/lb _æ•ˆæœ_ï¼š äºŒã€OpenFeign æœåŠ¡æ¥å£è°ƒç”¨â‘  æ¦‚è¿°1.OpenFeign æ˜¯ä»€ä¹ˆ Feign æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ web æœåŠ¡å®¢æˆ·ç«¯ï¼Œè®©ç¼–å†™ web æœåŠ¡å®¢æˆ·ç«¯å˜å¾—éå¸¸å®¹æ˜“ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£ä¸Šæ·»åŠ æ³¨è§£å³å¯ â€‹ GitHub: https://github.com/spring-cloud/spring-cloud-openfeign 2.èƒ½å¹²å˜› 3.Feign å’Œ OpenFeign ä¸¤è€…åŒºåˆ« â‘¡ OpenFeign ä½¿ç”¨æ­¥éª¤ æ¥å£ + æ³¨è§£ï¼š å¾®æœåŠ¡è°ƒç”¨æ¥å£ + @FeignClient æ–°å»º cloud-consumer-feign-order80 Feign åœ¨æ¶ˆè´¹ç«¯ä½¿ç”¨ POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-consumer-feign-order80&lt;/artifactId&gt; &lt;!--openfeign--&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; YML 1234567server: port: 80eureka: client: register-with-eureka: false service-url: defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka ä¸»å¯åŠ¨ç±» : @ EnableFeignClients 1234567@SpringBootApplication@EnableFeignClientspublic class OrderFeignMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderFeignMain80.class, args); &#125;&#125; ä¸šåŠ¡ç±» ä¸šåŠ¡é€»è¾‘æ¥å£ + @FeignClient é…ç½®è°ƒç”¨ provider æœåŠ¡ æ–°å»º PaymentFeignService æ¥å£å¹¶æ–°å¢æ³¨è§£ @FeignClient 1234567@Component@FeignClient(value = &quot;CLOUD-PAYMENT-SERVICE&quot;)public interface PaymentFeignService &#123; @GetMapping(value = &quot;/payment/get/&#123;id&#125;&quot;) public CommonResult getPaymentById(@PathVariable(&quot;id&quot;) Long id);&#125; Controller 123456789101112@RestControllerpublic class OrderFeignController &#123; @Resource private PaymentFeignService paymentFeignService; @GetMapping(value = &quot;/consumer/payment/get/&#123;id&#125;&quot;) public CommonResult&lt;Payment&gt; getPaymentById(@PathVariable(&quot;id&quot;)Long id)&#123; return paymentFeignService.getPaymentById(id); &#125;&#125; æµ‹è¯• å…ˆå¯åŠ¨ 2 ä¸ª eureka é›†ç¾¤ 7001/7002 åœ¨å¯åŠ¨ 2 ä¸ªå¾®æœåŠ¡ 8001/8002 å¯åŠ¨ OpenFeign å¯åŠ¨ http://localhost/consumer/payment/get/1 å°æ€»ç»“ â‘¢ OpenFeign è¶…æ—¶æ§åˆ¶1.è¶…æ—¶è®¾ç½®ï¼Œæ•…æ„è®¾ç½®è¶…æ—¶æ¼”ç¤ºå‡ºé”™æƒ…å†µâ€‹ æœåŠ¡æä¾›æ–¹ 8001 æ•…æ„å†™æš‚åœç¨‹åº 12345678910@GetMapping(value = &quot;/payment/feign/timeout&quot;)public String paymentFeignTimeOut()&#123; try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; return serverPort;&#125; â€‹ æœåŠ¡æ¶ˆè´¹æ–¹ 80 æ·»åŠ è¶…æ—¶æ–¹æ³• PaymentFeignService 1234567891011@Component@FeignClient(value = &quot;CLOUD-PAYMENT-SERVICE&quot;)public interface PaymentFeignService &#123; // æ·»åŠ è¶…æ—¶æ–¹æ³• PaymentFeignService @GetMapping(value = &quot;/payment/feign/timeout&quot;) public String paymentFeignTimeOut(); @GetMapping(value = &quot;/payment/get/&#123;id&#125;&quot;) public CommonResult getPaymentById(@PathVariable(&quot;id&quot;) Long id);&#125; â€‹ æœåŠ¡æ¶ˆè´¹æ–¹ 80 æ·»åŠ è¶…æ—¶æ–¹æ³• OrderFeignController 1234@GetMapping(value = &quot;/consumer/payment/feign/timeout&quot;)public String paymentFeignTimeOut()&#123; return paymentFeignService.paymentFeignTimeOut();&#125; æµ‹è¯•ï¼š é”™è¯¯é¡µé¢ 2.OpenFeign é»˜è®¤ç­‰å¾…ä¸€ç§’é’Ÿï¼Œ è¶…è¿‡åæŠ¥é”™3.æ˜¯ä»€ä¹ˆâ€‹ é»˜è®¤ Feign å®¢æˆ·ç«¯ç­‰å¾…ä¸€ç§’ï¼Œä½†æ˜¯æœåŠ¡å™¨å¤„ç†éœ€è¦è¶…è¿‡ 1 ç§’é’Ÿï¼Œå¯¼è‡´ Feign å®¢æˆ·ç«¯ä¸æƒ³ç­‰å¾…äº†ï¼Œç›´æ¥è¿”å›æŠ¥é”™ã€‚ä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è®¾ç½® Feign å®¢æˆ·ç«¯çš„è¶…æ—¶æ§åˆ¶ã€‚ åœ¨ yml æ–‡ä»¶ä¸­å¼€å¯é…ç½® 4.YML æ–‡ä»¶é‡Œéœ€è¦å¼€å¯ OpenFeign å®¢æˆ·ç«¯è¶…æ—¶æ§åˆ¶12345678910111213server: port: 80eureka: client: register-with-eureka: false service-url: defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka# è®¾ç½®feignå®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´(OpenFeigné»˜è®¤æ”¯æŒribbon)ribbon: # æŒ‡çš„æ˜¯å»ºç«‹è¿æ¥æ‰€ç”¨çš„æ—¶é—´,é€‚ç”¨äºç½‘ç»œçŠ¶æ€æ­£å¸¸çš„æƒ…å†µä¸‹,ä¸¤ç«¯è¿æ¥æ‰€ç”¨çš„æ—¶é—´ ReadTimeout: 5000 # æŒ‡çš„æ˜¯å»ºç«‹è¿æ¥åä»æœåŠ¡å™¨è¯»å–åˆ°å¯ç”¨èµ„æºæ‰€ç”¨çš„æ—¶é—´ ConnectTimeout: 5000 æµ‹è¯•ï¼š â€‹ http://localhost/consumer/payment/feign/timeout â‘£ OpenFeign æ—¥å¿—æ‰“å°åŠŸèƒ½1.æ—¥å¿—æ‰“å°åŠŸèƒ½2.æ˜¯ä»€ä¹ˆ 3.æ—¥å¿—çº§åˆ« 4.é…ç½®æ—¥å¿— bean1234567891011121314151617181920package com.oy.springcloud;import feign.Logger;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;/** * @Author OY * @Date 2020/10/16 */@Configurationpublic class FeignConfig &#123; @Bean Logger.Level feignLoggerLevel()&#123; return Logger.Level.FULL; &#125;&#125; 5.YML æ–‡ä»¶é‡Œé¢éœ€è¦å¼€å¯æ—¥å¿—çš„ Feign å®¢æˆ·ç«¯123logging: level: com.oy.springcloud.service.PaymentFeignService: debug 6.åå°æ—¥å¿—æŸ¥çœ‹","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringBootä¸ç›‘æ§ç®¡ç†(Actuator)","slug":"Spring Bootä¸ç›‘æ§ç®¡ç†(Actuator)","date":"2020-10-05T16:00:00.000Z","updated":"2020-10-25T02:34:34.781Z","comments":true,"path":"posts/1175849155.html","link":"","permalink":"http://blog.oy6090.top/posts/1175849155.html","excerpt":"","text":"ä¸€ã€ç›‘æ§ç®¡ç†â€‹ é€šè¿‡å¼•å…¥ spring-boot-starter-actuatorï¼Œå¯ä»¥ä½¿ç”¨ Spring Boot ä¸ºæˆ‘ä»¬æä¾›çš„å‡†ç”Ÿäº§ç¯å¢ƒä¸‹çš„åº”ç”¨ç›‘æ§å’Œç®¡ç†åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ HTTPï¼Œ JMXï¼Œ SSH åè®®æ¥è¿›è¡Œæ“ä½œï¼Œè‡ªåŠ¨å¾—åˆ°å®¡è®¡ã€å¥åº·åŠæŒ‡æ ‡ä¿¡æ¯ç­‰ ã€‚ æ­¥éª¤ï¼š å¼•å…¥ spring-boot-starter-actuctor 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt; é€šè¿‡ http æ–¹å¼è®¿é—®ç›‘æ§ç‚¹ç«¯ç‚¹ é¦–å…ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æŠŠç«¯ç‚¹æš´éœ²å‡ºæ¥ åœ¨ application.properties ä¸­é…ç½®ç«¯ç‚¹ï¼Œ æš´éœ²éƒ¨åˆ†ç«¯ç‚¹ management.endpoints.web.exposure.include=info,health,beans,env æš´éœ²æ‰€æœ‰ç«¯ç‚¹ management.endpoints.web.exposure.include=* ä¸æš´éœ² beans ç«¯ç‚¹ management.endpoints.web.exposure.exclude=beans åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ management.endpoints.web.exposure.include æš´éœ²æ‰€æœ‰çš„ç«¯ç‚¹ï¼Œæ¥ç€ä½¿ç”¨ management.endpoints .web.exposure.exclud æ’é™¤ en ç«¯ç‚¹ï¼Œè¿™æ ·å°±èƒ½å¤Ÿæš´éœ²é™¤ env å¤–çš„æ‰€æœ‰ ctuator ç«¯ç‚¹äº†ã€‚ http://localhost:8080/actuator/health è®¿é—®é¡¹ç›®ç›‘æ§éœ€è¦åŠ å‰ç¼€ /actuator â€‹ å¦‚æœä¸åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æŠŠç«¯å£æš´éœ²å‡ºæ¥ï¼Œåˆ™ä¼šå‡ºç°ä»¥ä¸‹è¿™æ ·çš„æƒ…å†µã€‚ â€‹ å› ä¸º actuator é»˜è®¤åªæ”¯æŒç«¯ç‚¹ /healthã€/info æ‰€ä»¥è®¿é—® /env ä¼šå‡ºç° 404 é¡µé¢ã€‚ ç›‘æ§ç‚¹å’Œç®¡ç†ç«¯ç‚¹ ç«¯ç‚¹å æè¿° autoconfig æ‰€æœ‰è‡ªåŠ¨é…ç½®ä¿¡æ¯ auditevents å®¡è®¡äº‹ä»¶ beans æ‰€æœ‰ Bean çš„ä¿¡æ¯ configprops æ‰€æœ‰é…ç½®å±æ€§ dump çº¿ç¨‹çŠ¶æ€ä¿¡æ¯ env å½“å‰ç¯å¢ƒä¿¡æ¯ health åº”ç”¨å¥åº·çŠ¶å†µ info å½“å‰åº”ç”¨ä¿¡æ¯ metrics åº”ç”¨çš„å„é¡¹æŒ‡æ ‡ mappings åº”ç”¨@RequestMapping æ˜ å°„è·¯å¾„ shutdown å…³é—­å½“å‰åº”ç”¨ï¼ˆé»˜è®¤å…³é—­ï¼‰ trace è¿½è¸ªä¿¡æ¯ï¼ˆæœ€æ–°çš„ http è¯·æ±‚ï¼‰ ç¤ºä¾‹ï¼šè®¿é—®å¿…é¡»æ·»åŠ å‰ç¼€/actuator å¯è¿›è¡Œ shutdown ï¼ˆPOST æäº¤ï¼Œ æ­¤ç«¯ç‚¹é»˜è®¤å…³é—­ï¼‰ åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® 12#å¯ç”¨shutdownmanagement.endpoint.shutdown.enabled=true äºŒã€å®šåˆ¶ç«¯ç‚¹ # Actuator ç®¡ç†ç«¯å£management.server.port=8000 ï¼ƒæš´éœ² æœ‰ç«¯management.endpoints.web.exposure.include ï¼å¥³ ï¼ƒé»˜è®¤æƒ…å†µä¸‹ æœ‰ç«¯ç‚¹éƒ½ä¸å¯ç”¨ï¼Œæ­¤æ—¶éœ€è¦æŒ‰éœ€å¯ç”¨ç«¯ç‚¹management.endpoints.enabled-by-default=false ï¼ƒå¯ç”¨ç«¯ç‚¹ infomanagement.endpoint.info.enabled=true ï¼ƒå¯ç”¨ç«¯ç‚¹ beansmanagement.endpoint.beans.enabled=true ï¼ƒå¯ç”¨ç«¯ç‚¹ configpropsmanagement.endpoint.configprops.enabled=true ï¼ƒå¯ç”¨ç«¯ç‚¹ envmanagement.endpont.env.enabled=true ï¼ƒå¯ç”¨ç«¯ç‚¹ healthmanagement.endpoint.health.enabled=true ï¼ƒå¯ç”¨ç«¯ç‚¹ mappingsmanagement.endpont.mappings.enabed=true ï¼ƒå¯ç”¨ç«¯ç‚¹ shutdownmanagement.endpoint.shutdown.enabled=true /# Actuator ç«¯ç‚¹å‰ç¼€management.endpoints.web.base -path=/manage ï¼ƒå°†åŸæ¥çš„ mappings ç«¯ç‚¹çš„è¯·æ±‚è·¯å¾„ä¿®æ”¹ä¸º urlMappingsmanagement.endpoints.web.path-mapping.mappings=request_mappings # Spring MVC è§†å›¾è§£æå™¨é…ç½®spring.mvc.view.prefix=/WEB-INF/jsp/spring.mvc.view.suffix=.Jsp","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringCloud å¾®æœåŠ¡æ­å»º","slug":"SpringCloud å¾®æœåŠ¡æ­å»º","date":"2020-10-05T16:00:00.000Z","updated":"2020-10-25T02:34:05.623Z","comments":true,"path":"posts/2086819267.html","link":"","permalink":"http://blog.oy6090.top/posts/2086819267.html","excerpt":"","text":"åšå®¢å‚è€ƒå­¦ä¹ è§†é¢‘ï¼š https://www.bilibili.com/video/BV18E411x7eT?from=search&amp;seid=4388336378730572330 ä¸€ã€å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»ºâ‘  çº¦å®š &gt; é…ç½® &gt; ç¼–ç  slave ä¼šä» master è¯»å– binlog æ¥è¿›è¡Œæ•°æ®åŒæ­¥ ä¸‰æ­¥éª¤+åŸç†å›¾ MySQL å¤åˆ¶è¿‡ç¨‹åˆ†æˆä¸‰æ­¥ï¼š1 master å°†æ”¹å˜è®°å½•åˆ°äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinary logï¼‰ã€‚è¿™äº›è®°å½•è¿‡ç¨‹å«åšäºŒè¿›åˆ¶æ—¥å¿—äº‹ä»¶ï¼Œbinary log eventsï¼›2 slave å°† master çš„ binary log events æ‹·è´åˆ°å®ƒçš„ä¸­ç»§æ—¥å¿—ï¼ˆrelay logï¼‰ï¼›3 slave é‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†æ”¹å˜åº”ç”¨åˆ°è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚ MySQL å¤åˆ¶æ˜¯å¼‚æ­¥çš„ä¸”ä¸²è¡ŒåŒ–çš„ â‘¡ IDEA æ–°å»º project å·¥ä½œç©ºé—´1.å¾®æœåŠ¡ cloud æ•´ä½“èšåˆçˆ¶å·¥ç¨‹ Projectâ€‹ çˆ¶å·¥ç¨‹æ­¥éª¤ï¼š 1ï¼‰ New Project 2ï¼‰èšåˆæ€»å·¥ç¨‹åå­—å’Œå·¥ç¨‹åå­—ï¼ˆidea 2020.2 ç‰ˆæœ¬ï¼‰ 3ï¼‰é€‰æ‹© Maven ç‰ˆæœ¬ 4ï¼‰å­—ç¬¦ç¼–ç  5ï¼‰ æ³¨è§£ç”Ÿæ•ˆæ¿€æ´» 6ï¼‰Java ç¼–è¯‘ç‰ˆæœ¬é€‰æ‹© 8 File Type è¿‡æ»¤ 2.çˆ¶å·¥ç¨‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;modules&gt; &lt;module&gt;cloud-provider-payment8001&lt;/module&gt; &lt;/modules&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;junit.version&gt;4.12&lt;/junit.version&gt; &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt; &lt;lombok.version&gt;1.16.18&lt;/lombok.version&gt; &lt;mysql.version&gt;8.0.19&lt;/mysql.version&gt; &lt;druid.version&gt;1.1.16&lt;/druid.version&gt; &lt;spring.boot.version&gt;2.2.2.RELEASE&lt;/spring.boot.version&gt; &lt;spring.cloud.version&gt;Hoxton.SR1&lt;/spring.cloud.version&gt; &lt;spring.cloud.alibaba.version&gt;2.1.0.RELEASE&lt;/spring.cloud.alibaba.version&gt; &lt;mybatis.spring.boot.version&gt;1.3.0&lt;/mybatis.spring.boot.version&gt; &lt;/properties&gt; &lt;!--å­æ¨¡å—ç»§æ‰¿å,æä¾›ä½œç”¨:é”å®šç‰ˆæœ¬+å­moduleä¸ç”¨groupIdå’Œversion--&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;!--springboot 2.2.2--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.boot.version&#125;&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;!--Spring cloud Hoxton.SR1--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.cloud.version&#125;&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;!--Spring cloud alibaba 2.1.0.RELEASE--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.cloud.alibaba.version&#125;&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;$&#123;mysql.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;$&#123;druid.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;$&#123;mybatis.spring.boot.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;$&#123;lombok.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;addResources&gt;true&lt;/addResources&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; 3.Maven å·¥ç¨‹è½åœ°ç»†èŠ‚å¤ä¹ Maven ä¸­çš„ dependencyManagement å’Œ dependencies maven ä¸­è·³è¿‡å•å…ƒæµ‹è¯• 4.çˆ¶å·¥ç¨‹åˆ›å»ºå®Œæˆæ‰§è¡Œ mvn:insall å°†çˆ¶å·¥ç¨‹å‘å¸ƒåˆ°ä»“åº“æ–¹ä¾¿å­å·¥ç¨‹ç»§æ‰¿äºŒã€Rest å¾®æœåŠ¡å·¥ç¨‹æ„å»ºâ‘  æ„å»ºæ­¥éª¤(1) cloud-provider-payment8001 å¾®æœåŠ¡æä¾›è€…æ”¯ä»˜ Module æ¨¡å—â€‹ å»º cloud-provider-payment8001 â€‹ åˆ›å»ºå®Œæˆä¹‹åè¯·å›åˆ°çˆ¶å·¥ç¨‹äº§çœ‹ pom æ–‡ä»¶çš„å˜åŒ– 1. **æ”¹POM æ–‡ä»¶** 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-provider-payment8001&lt;/artifactId&gt; &lt;dependencies&gt;&lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -jdbc --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtoo ls --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; å†™ YML 1234567891011121314server: port: 8001spring: application: name: cloud-payment-servicedatasource: type: com.alibaba.druid.pool.DruidDataSource driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/db2019?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false username: root password: 6090mybatis: mapperLocations: classpath:mapper/*.xml type-aliases-package: com.oy.springcloud.entities # æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ… æ³¨æ„ï¼šæœ‰å¯èƒ½åœ¨ç¼–è¯‘æ—¶ä¼šå‡ºç°ä»¥ä¸‹çš„å¼‚å¸¸ The server time zone value â€˜ï¿½Ğ¹ï¿½ï¿½ï¿½×¼Ê±ï¿½ï¿½â€™ is unrecogni éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ datasource.url åé¢æ·»åŠ ä¸Š serverTimezone=UTC 1url: jdbc:mysql://localhost:3306/db2019?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC ä¸»å¯åŠ¨ç±» 123456@SpringBootApplicationpublic class PaymentMain8001 &#123; public static void main(String[] args) &#123; SpringApplication.run(PaymentMain8001.class, args); &#125;&#125; ä¸šåŠ¡ç±» å»ºè¡¨ SQL 123456789CREATE TABLE `payment`( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;ä¸»é”®&#x27;, `serial` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT &#x27;æ”¯ä»˜æµæ°´å·&#x27;, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = &#x27;æ”¯ä»˜è¡¨&#x27; ROW_FORMAT = Dynamic; emtities â€‹ ä¸»å®ä½“ Payment 1234567891011121314151617181920package com.oy.springcloud.entities;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import java.io.Serializable;/** * @Author OY * @Date 2020/10/7 */@Data@AllArgsConstructor@NoArgsConstructorpublic class Payment implements Serializable &#123; private Long id; private String serial;&#125; Json å°è£… CommonResult 1234567891011121314151617181920212223package com.oy.springcloud.entities;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;/** * @Author OY * @Date 2020/10/7 */@Data@AllArgsConstructor@NoArgsConstructorpublic class CommonResult&lt;T&gt; &#123; private Integer code; private String message; private T data; public CommonResult(Integer code, String message)&#123; this.code = code; this.message = message; &#125;&#125; Dao 123456@Mapperpublic interface PaymentDao &#123; public int create(Payment payment); public Payment getPaymentById(@Param(&quot;id&quot;) Long id);&#125; â€‹ mybatis çš„æ˜ å°„æ–‡ä»¶ä¸º PaymentMapper.xml, è·¯å¾„ä¸º src\\main\\resources\\mapper\\ParmentMapper.xml PaymentMapper.xml 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.oy.springcloud.dao.PaymentDao&quot;&gt; &lt;!--public int create(Payment payment);--&gt; &lt;insert id=&quot;create&quot; parameterType=&quot;Payment&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt; insert into payment(serial) values(#&#123;serial&#125;) &lt;/insert&gt; &lt;!--public Payment getPaymentById(@Param(&quot;id&quot;) Long id);--&gt; &lt;resultMap id=&quot;BaseResult&quot; type=&quot;com.oy.springcloud.entitles.Payment&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot; jdbcType=&quot;BIGINT&quot;/&gt; &lt;id column=&quot;serial&quot; property=&quot;serial&quot; jdbcType=&quot;VARCHAR&quot;/&gt; &lt;/resultMap&gt; &lt;select id=&quot;getPaymentById&quot; parameterType=&quot;Long&quot; resultMap=&quot;BaseResult&quot;&gt; select * from payment where id=#&#123;id&#125; &lt;/select&gt;&lt;/mapper&gt; Service â€‹ æ¥å£ç±» PaymentService 1234567891011package com.oy.springcloud.service;import com.oy.springcloud.entities.Payment;import org.apache.ibatis.annotations.Param;public interface PaymentService &#123; public int create(Payment payment); // å†™ public Payment getPaymentById(@Param(&quot;id&quot;) Long id); // è¯»å–&#125; â€‹ å®ä½“ç±» 123456789101112131415161718192021222324252627package com.oy.springcloud.service.impl;import com.oy.springcloud.dao.PaymentDao;import com.oy.springcloud.entities.Payment;import com.oy.springcloud.service.PaymentService;import org.springframework.stereotype.Service;import javax.annotation.Resource;@Servicepublic class PaymentServiceImpl implements PaymentService &#123; @Resource // @Autowired private PaymentDao paymentDao; @Override public int create(Payment payment)&#123; return paymentDao.create(payment); &#125; @Override public Payment getPaymentById(Long id)&#123; return paymentDao.getPaymentById(id); &#125;&#125; controller 12345678910111213141516171819202122232425262728293031323334@RestController@Slf4jpublic class PaymentController &#123; @Resource private PaymentService paymentService; @PostMapping(value = &quot;/payment/create&quot;) public CommonResult create(Payment payment) &#123; int result = paymentService.create(payment); log.info(&quot;*****æ’å…¥ç»“æœï¼š &quot; + result); // æˆåŠŸ if (result &gt; 0) &#123; return new CommonResult(200, &quot;æ’å…¥æ•°æ®åº“æˆåŠŸ&quot;, result); &#125; else &#123; return new CommonResult(444, &quot;æ’å…¥æ•°æ®åº“å¤±è´¥&quot;, null); &#125; &#125; @GetMapping(value = &quot;/payment/get/&#123;id&#125;&quot;) public CommonResult getPaymentById(@PathVariable(&quot;id&quot;) Long id) &#123; Payment payment = paymentService.getPaymentById(id); log.info(&quot;*****æŸ¥è¯¢ç»“æœï¼š &quot; + payment); // æˆåŠŸ if (payment != null) &#123; return new CommonResult(200, &quot;æŸ¥è¯¢æˆåŠŸ&quot;, payment); &#125; else &#123; return new CommonResult(444, &quot;æ²¡ æœ‰ å¯¹ åº” è®° å½• ï¼Œ æŸ¥ è¯¢ ID ï¼š&quot;+id, null); &#125; &#125;&#125; æµ‹è¯• http://localhost:8001/payment/get/1 postman æ¨¡æ‹Ÿ post é€šè¿‡ä¿®æ”¹ idea çš„ workpace.xml çš„æ–¹å¼æ¥å¿«é€Ÿæ‰“å¼€ Run DashBoard çª—å£ å¼€å¯ Run DashBoard(ä¸ªåˆ«ç‰ˆæœ¬éœ€è¦) 12345&lt;option name=&quot;configurationTypes&quot;&gt; &lt;set&gt; &lt;option value=&quot;SpringBootApplicationConfigurationType&quot; /&gt; &lt;/set&gt;&lt;/option&gt; æ³¨æ„ï¼šéƒ¨åˆ†åŒå­¦å¯èƒ½ç”±äº idea ç‰ˆæœ¬ä¸åŒï¼Œ éœ€è¦å…³é—­é‡å¯ (2) çƒ­éƒ¨ç½² Devtools Adding devtools to your project 1234567&lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; Adding plugin to your pom.xml 12345678910111213// ä¸‹é¢è¿™ä¸€æ®µç²˜è´´åœ¨çˆ¶POM.xmlä¸­&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;addResources&gt;true&lt;/addResources&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 3.Enabling automatic build 4.Update the value of (3) cloud-consumer-order80 å¾®æœåŠ¡æ¶ˆè´¹è€…è®¢å• Module æ¨¡å—â€‹ å»º cloud-consumer-order80 æ”¹ POM 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-consumer-order80&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -web --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtoo ls --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt; &lt;dependency&gt;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter -test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; å†™ YML 12server: port: 80 ä¸»å¯åŠ¨ 1234567891011package com.oy.springcloud;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class OrderMain80 &#123; public static void main(String[] args) &#123; SpringApplication.run(OrderMain80.class, args); &#125;&#125; ä¸šåŠ¡ç±» åˆ›å»º entities(å°† cloud-provider-payment8001 å·¥ç¨‹ä¸‹çš„ entities åŒ…ä¸‹çš„ä¸¤ä¸ªå®ä½“å¤åˆ¶è¿‡æ¥ï¼‰ RestTemplate: â€‹ å®˜ç½‘åŠä½¿ç”¨ â€‹ å®˜ç½‘åœ°å€ï¼šhttps://docs.spring.io/spring-framework/docs/5.2.2.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html â€‹ ä½¿ç”¨ï¼šä½¿ç”¨ restTemplate è®¿é—® restful æ¥å£éå¸¸çš„ç®€å•çš„ç²—æš´æ— è„‘ã€‚ï¼ˆurl, reuestMap, ResponseBean.classï¼‰è¿™ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨ REST è¯·æ±‚åœ°å€ã€è¯·æ±‚å‚æ•°ã€HTTP å“åº”è½¬æ¢æˆçš„å¯¹è±¡ç±»å‹ã€‚ config é…ç½®ç±» 1234567891011121314package com.oy.springcloud.config;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.web.client.RestTemplate;@Configurationpublic class ApplicationContextConfig &#123; @Bean public RestTemplate getRestTemplate()&#123; return new RestTemplate(); &#125;&#125; æµ‹è¯• å…ˆå¯åŠ¨ cloud-provider-payment8001 å†å¯åŠ¨ cloud-consumer-order80 http://localhost/consumer/payment/get/1 ä¸è¦å¿˜è®°@RequestBody æ³¨è§£ï¼Œä¸ç„¶åœ¨æµ‹è¯• http://localhost/consumer/payment/create?serial=&quot;å•†åº— 003â€ (4) å·¥ç¨‹é‡æ„ è§‚å¯Ÿé—®é¢˜ï¼šç³»ç»Ÿä¸­æœ‰é‡å¤çš„éƒ¨åˆ† é‡æ„ æ–°å»º cloud-api-commons POM 12345678910111213141516171819202122232425262728293031323334&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;clould&lt;/artifactId&gt; &lt;groupId&gt;com.oy&lt;/groupId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;dependencies&gt; &lt;!--https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!--https://mvnrepository.com/artifact/cn.hutool/hutool-all --&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;5.1.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; åœ¨ cloud-api-commons é¡¹ç›®ä¸‹åˆ›å»º entities çš„ Payment å’Œ CommonResult å°è£…ç±» ä½¿ç”¨ maven å‘½å clean å’Œ install å‘½ä»¤ï¼ŒæŠŠå®ƒå­˜å‚¨åˆ°ä»“åº“é‡Œï¼Œæ–¹ä¾¿å…¶ä»–çš„é¡¹ç›®çš„å¤ç”¨ã€‚ å¯¹è®¢å• 80 å’Œ æ”¯ä»˜ 8001 åˆ†åˆ«æ”¹é€ ï¼Œ åˆ é™¤å„è‡ªåŸæœ‰çš„ entities æ–‡ä»¶å¤¹, å„è‡ªé»è´´ POM å†…å®¹ 80ã€8001 12345&lt;dependency&gt; &lt;groupId&gt;è¿™é‡Œæ ¹æ®è‡ªå·±è®¾ç½®æ¥å®š&lt;/groupId&gt;// com.oy è¿™æ˜¯æˆ‘è‡ªå·±çš„ï¼Œä¸æ¸…æ¥šæŸ¥çœ‹ä¸€ä¸‹è‡ªå·±çš„ä»“åº“ &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ ç›®å‰é¡¹ç›®æ ·å›¾","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"}]},{"title":"SpringBootä¸Dubboã€Zookeeper","slug":"Spring Bootä¸Dubboã€Zookeeper","date":"2020-10-03T16:00:00.000Z","updated":"2020-10-25T02:29:59.207Z","comments":true,"path":"posts/3991296734.html","link":"","permalink":"http://blog.oy6090.top/posts/3991296734.html","excerpt":"","text":"ä¸€ã€æ¦‚å¿µZooKeeperâ€‹ ZooKeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œå¼€æ”¾æºç çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åŸŸåæœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚ Dubboâ€‹ Dubbo æ˜¯ Alibaba å¼€æºçš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æŒ‰ç…§åˆ†å±‚çš„æ–¹å¼æ¥æ¶æ„ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥ä½¿å„ä¸ªå±‚ä¹‹é—´è§£è€¦åˆï¼ˆæˆ–è€…æœ€å¤§é™åº¦åœ°æ¾è€¦åˆï¼‰ã€‚ä»æœåŠ¡æ¨¡å‹çš„è§’åº¦æ¥çœ‹ï¼Œ Dubbo é‡‡ç”¨çš„æ˜¯ä¸€ç§éå¸¸ç®€å•çš„æ¨¡å‹ï¼Œè¦ä¹ˆæ˜¯æä¾›æ–¹æä¾›æœåŠ¡ï¼Œè¦ä¹ˆæ˜¯æ¶ˆè´¹æ–¹æ¶ˆè´¹æœåŠ¡ï¼Œæ‰€ä»¥åŸºäºè¿™ä¸€ç‚¹å¯ä»¥æŠ½è±¡å‡ºæœåŠ¡æä¾›æ–¹ï¼ˆProviderï¼‰å’ŒæœåŠ¡æ¶ˆè´¹æ–¹ï¼ˆConsumerï¼‰ä¸¤ä¸ªè§’è‰²ã€‚ äºŒã€SpringBoot 2.3 æ•´åˆ Zookeeperã€Dubboâ‘  å®‰è£… zookeeper ä½œä¸ºæ³¨å†Œä¸­å¿ƒ12345&#x2F;&#x2F; å®‰è£…é•œåƒdocker pull zookeeper:latest&#x2F;&#x2F; å¯åŠ¨é•œåƒdocker run --name zk01 -p 2181:2181 --restart always -d zookeeper:latest â€‹ è¿™é‡Œåªéœ€è¦ç”¨åˆ° 2181 è¿™ä¸ªç«¯å£ï¼ŒåªæŠŠå®ƒæš´éœ²ï¼Œå…¶ä»–çš„ä¸¤ä¸ªç«¯å£ä¸éœ€è¦ã€‚ This image includes EXPOSE 2181 2888 3888 8080 (the zookeeper client port, follower port, election port, AdminServer port respectively), so standard container linking will make it automatically available to the linked containers. Since the Zookeeper â€œfails fastâ€ itâ€™s better to always restart it. â‘¡ ç¼–å†™æœåŠ¡æä¾›è€… pom.xml æ–‡ä»¶ä¸­å¼•å…¥ dubbo å’Œ zkclient ç›¸å…³ä¾èµ– 123456789101112131415&lt;!-- https://mvnrepository.com/artifact/org.apache.dubbo/dubbo-spring-boot-starter --&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.1.0&lt;/version&gt;&lt;/dependency&gt; &lt;!--å¼•å…¥zookeeperçš„å®¢æˆ·ç«¯å·¥å…·--&gt; &lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;&lt;dependency&gt; &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt; &lt;artifactId&gt;zkclient&lt;/artifactId&gt; &lt;version&gt;0.1&lt;/version&gt;&lt;/dependency&gt; é…ç½® dubbo çš„æ‰«æåŒ…å’Œæ³¨å†Œä¸­å¿ƒåœ°å€ 12345dubbo.registry.address=zookeeper://192.168.64.129:2181dubbo.application.name=provider-tickerdubbo.scan.base-packages=com.oy.providerticket.service ä½¿ç”¨@Service å‘å¸ƒæœåŠ¡ ã€TicketService.javaã€‘ 123public interface TicketService &#123; public String getTicket();&#125; ã€TicketServiceImpl.javaã€‘ 123456789101112import com.alibaba.dubbo.config.annotation.Service;import org.springframework.stereotype.Component;@Component// å°†æœåŠ¡å‘é€å‡ºå»@Servicepublic class TicketServiceImpl implements TicketService&#123; @Override public String getTicket() &#123; return &quot;ã€Šå§œå­ç‰™ã€‹&quot;; &#125;&#125; æ·»åŠ åœ¨ Applicaiton ä¸Šé¢@EnableDubbo æ³¨è§£ 123456789@SpringBootApplication@EnableDubbo // å¼€å¯DubboæœåŠ¡public class ProviderTickerApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProviderTickerApplication.class, args); &#125;&#125; â‘¢ ç¼–å†™æœåŠ¡æ¶ˆè´¹è€… 1.å¼•å…¥ä¾èµ–â€˜ 123456789101112131415&lt;!-- https://mvnrepository.com/artifact/org.apache.dubbo/dubbo-spring-boot-starter --&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.1.0&lt;/version&gt;&lt;/dependency&gt;&lt;!--å¼•å…¥zookeeperçš„å®¢æˆ·ç«¯å·¥å…·--&gt;&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;&lt;dependency&gt; &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt; &lt;artifactId&gt;zkclient&lt;/artifactId&gt; &lt;version&gt;0.1&lt;/version&gt;&lt;/dependency&gt; 2.é…ç½® dubbo çš„æ³¨å†Œä¸­å¿ƒåœ°å€ 12345dubbo.application.name=consumer-userdubbo.registry.address=zookeeper://192.168.64.129:2181 3.å¼•ç”¨æœåŠ¡ ã€UserService.javaã€‘ 12345678910111213@Servicepublic class UserService&#123; @Reference TicketService ticketService; public void hello()&#123; String ticket = ticketService.getTicket(); System.out.println(&quot;ä¹°åˆ°ç¥¨äº†ï¼š&quot;+ticket); &#125;&#125; â‘£ å¯åŠ¨ å…ˆå¯åŠ¨provider-ticketç„¶åå†å¯åŠ¨consumer-user **consumer-user **ä¸­çš„ ConsumerUserApplicationTests.java æµ‹è¯• 12345678910111213@SpringBootTestclass ConsumerUserApplicationTests &#123; @Autowired UserService userService; @Test void contextLoads() &#123; userService.hello(); &#125;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¸å®‰å…¨(Spring Security)","slug":"Spring Bootä¸å®‰å…¨(Spring Security)","date":"2020-10-03T16:00:00.000Z","updated":"2020-10-25T02:30:07.599Z","comments":true,"path":"posts/2243339053.html","link":"","permalink":"http://blog.oy6090.top/posts/2243339053.html","excerpt":"","text":"åšå®¢ä¸­æ¶‰åŠçš„æºç ï¼Œä¸‹è½½åœ°å€åœ¨åšå®¢æ–‡ç« åº•éƒ¨ï¼Œæœ‰éœ€è¦çš„å°ä¼™ä¼´è‡ªè¡Œä¸‹è½½ ä¸€ã€ç®€ä»‹â€‹ SpringSecurity æ˜¯é’ˆå¯¹ Spring é¡¹ç›®çš„å®‰å…¨æ¡†æ¶ï¼Œä¹Ÿæ˜¯ Spring Boot åº•å±‚å®‰å…¨æ¨¡å—çš„æŠ€æœ¯é€‰é¡¹ã€‚ä»–å¯ä»¥å®ç°å¼ºå¤§çš„ web å®‰å…¨æ§åˆ¶ã€‚å¯¹äºå®‰å…¨æ§åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ spring-boot-starter-securiy æ¨¡å—ã€‚ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; å‡ ä¸ªç±»ï¼š WebSecurityConfigurerAdapter: è‡ªå®šä¹‰ Security ç­–ç•¥ AuthenticationManagerBuilder: è‡ªå®šä¹‰è®¤è¯çš„ç­–ç•¥ @EnableWebSecurity: å¼€å¯ WebSecurity æ¨¡å¼ å…·ä½“çš„å‚è€ƒ Spring å®˜ç½‘:https://spring.io/guides/gs/securing-web/ äºŒã€åŠŸèƒ½æ¼”ç¤ºé…ç½® thymeleaf æ¨¡æ¿ä¾èµ–ï¼ˆspringboot 2.3 ç‰ˆæœ¬ï¼‰ 12345// å…¶ä»–æœ‰å¯èƒ½éœ€è¦é…ç½®ä»¥ä¸‹é…ç½®ï¼Œ2.3ä¸éœ€è¦&lt;properties&gt; &lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt; &lt;thymeleaf-layout-dialect.version&gt;2.3.0&lt;/thymeleaf-layout-dialect.version&gt;&lt;/properties&gt; ä»¥ä¸‹éƒ½éœ€è¦é…ç½® 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt; â‘  å¼•å…¥ SpringSecurity1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt; â‘¡ ç¼–å†™ SpringSecurity çš„é…ç½®ç±»1234@EnableWebSecuritypublic class MySecurityConfig extends WebSecurityConfigurerAdapter &#123;&#125; â‘¢ ç™»å…¥æ§åˆ¶è¯·æ±‚çš„è®¿é—®æƒé™ï¼š 123456789101112@EnableWebSecuritypublic class MySecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; //super.configure(http); // å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™ http.authorizeRequests().antMatchers(&quot;/&quot;).permitAll() .antMatchers(&quot;/level1/**&quot;).hasRole(&quot;VIP1&quot;) .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP2&quot;) .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP3&quot;); &#125;&#125; å®šä¹‰è®¤è¯è§„åˆ™ æ³¨æ„ï¼šSecurity5 ä¸ä¹‹å‰çš„ä¼ è¾“å¯†ç æœ‰éƒ¨åˆ†çš„ä¸åŒ å‚è€ƒæˆ‘è¿™ç¯‡åšå®¢ï¼šhttps://blog.csdn.net/qq_45738810/article/details/108912554 12345678910111213@EnableWebSecuritypublic class MySecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;// super.configure(auth); auth.inMemoryAuthentication().passwordEncoder(new BCryptPasswordEncoder()).withUser(&quot;zhangsan&quot;).password(new BCryptPasswordEncoder().encode(&quot;123456&quot;)).roles(&quot;VIP1&quot;, &quot;VIP2&quot;) .and() .withUser(&quot;lisi&quot;).password(new BCryptPasswordEncoder().encode(&quot;123456&quot;)).roles(&quot;VIP2&quot;, &quot;VIP3&quot;) .and() .withUser(&quot;wangwu&quot;).password(new BCryptPasswordEncoder().encode(&quot;123456&quot;)).roles(&quot;VIP1&quot;, &quot;VIP3&quot;); &#125; å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½ /login æ¥ç™»å½•é¡µ é‡å®šé¡¹åˆ°/login?error è¡¨ç¤ºç™»å½•å¤±è´¥ é»˜è®¤ post å½¢å¼çš„/login ä»£è¡¨å¤„ç†ç™»å½• ä¸€ä½†å®šåˆ¶ loginPageï¼› é‚£ä¹ˆ loginPage çš„ post è¯·æ±‚å°±æ˜¯ç™»å½• 1234567891011@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; //super.configure(http); http.authorizeRequests().antMatchers(&quot;/&quot;).permitAll() .antMatchers(&quot;/level1/**&quot;).hasRole(&quot;VIP1&quot;) .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP2&quot;) .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP3&quot;); // å¼€å¯è‡ªåŠ¨ç™»å½•åŠŸèƒ½ http.formLogin();&#125; å®šåˆ¶é¡µé¢ 1http.formLogin().usernameParameter(&quot;username&quot;).passwordParameter(&quot;password&quot;).loginPage(&quot;/userlogin&quot;); â‘£ æ³¨é”€123&lt;form th:action=&quot;@&#123;/logout&#125;&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;æ³¨é”€&quot; /&gt;&lt;/form&gt; 123456789101112131415@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; //super.configure(http); http.authorizeRequests().antMatchers(&quot;/&quot;).permitAll() .antMatchers(&quot;/level1/**&quot;).hasRole(&quot;VIP1&quot;) .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP2&quot;) .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;VIP3&quot;); // å¼€å¯è‡ªåŠ¨ç™»å½•åŠŸèƒ½ http.formLogin(); // å¼€å¯æ³¨é”€åŠŸèƒ½ http.logout(); // æ³¨é”€æˆåŠŸä¼šè¿”å› /login?logout é¡µé¢ // http.logout().logoutSuccessUrl(&quot;/&quot;); æ³¨é”€æˆåŠŸä»¥åæ¥åˆ°é¦–é¡µ&#125; â‘¤ è®°ä½æˆ‘12http.rememberMe(); ç™»é™†æˆåŠŸä»¥åï¼Œå°† cookie å‘ç»™æµè§ˆå™¨ä¿å­˜ï¼Œä»¥åè®¿é—®é¡µé¢å¸¦ä¸Šè¿™ä¸ª cookieï¼Œåªè¦é€šè¿‡æ£€æŸ¥å°±å¯ä»¥å…ç™»å½• ç‚¹å‡»æ³¨é”€ä¼šåˆ é™¤ cookie å®šåˆ¶ï¼š 123456&lt;form th:action=&quot;@&#123;/userlogin&#125;&quot; method=&quot;post&quot;&gt; ç”¨æˆ·å:&lt;input name=&quot;username&quot; /&gt;&lt;br /&gt; å¯†ç :&lt;input name=&quot;password&quot; /&gt;&lt;br /&gt; &lt;input type=&quot;checkbox&quot; name=&quot;remeber&quot; /&gt; è®°ä½æˆ‘&lt;br /&gt; &lt;input type=&quot;submit&quot; value=&quot;ç™»é™†&quot; /&gt;&lt;/form&gt; 12345678@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; .....è·Ÿä¸Šé¢ä¸€è‡´ï¼Œçœç•¥äº† // è®°ä½æˆ‘ http.rememberMe().rememberMeParameter(&quot;remeber&quot;);&#125; ä¸‰ã€SpringSecurity æ ‡ç­¾ éœ€è¦å¼•å…¥ thymeleaf-extras-springsecurity5 123456789&lt;properties&gt; &lt;thymeleaf-extras-springsecurity5.version&gt;3.0.4.RELEASE&lt;/thymeleaf-extras-springsecurity5.version&gt;&lt;/properties&gt;&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; &lt;version&gt;3.0.4.RELEASE&lt;/version&gt;&lt;/dependency&gt; ä½¿ç”¨ sec:authentication=â€œnameâ€ è·å¾—å½“å‰ç”¨æˆ·çš„ç”¨æˆ·å sec:authorize=â€œhasRole(â€˜ADMINâ€™)â€ å½“å‰ç”¨æˆ·å¿…é¡»æ‹¥æœ‰ ADMIN æƒé™æ—¶æ‰ä¼šæ˜¾ç¤ºæ ‡ç­¾å†…å®¹ xmlns:sec=â€http://www.thymeleaf.org/extras/spring-security 12345&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt;&lt;/html&gt; ç¤ºä¾‹ï¼š 1234567891011121314151617&lt;div sec:authorize=&quot;!isAuthenticated()&quot;&gt; // ä¸ç™»å…¥æ˜¾ç¤ºä»¥ä¸‹ &lt;h2 align=&quot;center&quot;&gt; æ¸¸å®¢æ‚¨å¥½ï¼Œå¦‚æœæƒ³æŸ¥çœ‹æ­¦æ—ç§˜ç± &lt;a th:href=&quot;@&#123;/userlogin&#125;&quot;&gt;è¯·ç™»å½•&lt;/a&gt; &lt;/h2&gt;&lt;/div&gt;&lt;div sec:authorize=&quot;isAuthenticated()&quot;&gt; // ç™»å½•æ˜¾ç¤ºè¿™ä¸ª &lt;h2&gt; &lt;span sec:authentication=&quot;name&quot;&gt;&lt;/span&gt;ï¼Œæ‚¨å¥½,æ‚¨çš„è§’è‰²æœ‰ï¼š &lt;span sec:authentication=&quot;principal.authorities&quot;&gt;&lt;/span&gt; &lt;/h2&gt; &lt;form th:action=&quot;@&#123;/logout&#125;&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;æ³¨é”€&quot; /&gt; &lt;/form&gt;&lt;/div&gt; 12345678&lt;div sec:authorize=&quot;hasRole(&#x27;VIP1&#x27;)&quot;&gt; &lt;h3&gt;æ™®é€šæ­¦åŠŸç§˜ç±&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;/level1/1&#125;&quot;&gt;ç½—æ±‰æ‹³&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;/level1/2&#125;&quot;&gt;æ­¦å½“é•¿æ‹³&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a th:href=&quot;@&#123;/level1/3&#125;&quot;&gt;å…¨çœŸå‰‘æ³•&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; å››ã€å®˜æ–¹æ–‡æ¡£https://www.thymeleaf.org/doc/articles/springsecurity.htmlhttps://github.com/thymeleaf/thymeleaf-extras-springsecurityè¯¥æ–‡æ¡£ä»‹ç»äº†ä¸åŒç‰ˆæœ¬çš„ thymeleafã€ springsecurity ã€thymeleaf-extras-springsecurity å¯¹åº”ä½¿ç”¨ä»¥åŠä¸€äº›ä½¿ç”¨ç¤ºä¾‹ æºç ä¸‹è½½ï¼š é“¾æ¥ï¼šhttps://pan.baidu.com/s/1oT_Dro3yi4xvSJqccU8D2gæå–ç ï¼šljj7","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootå’ŒSpring Cloud","slug":"Spring Bootå’ŒSpring Cloud","date":"2020-10-03T16:00:00.000Z","updated":"2020-10-25T02:29:49.383Z","comments":true,"path":"posts/2187905911.html","link":"","permalink":"http://blog.oy6090.top/posts/2187905911.html","excerpt":"","text":"ä¸€ã€Spring Cloudâ€‹ Spring Cloud æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ•´ä½“è§£å†³æ–¹æ¡ˆã€‚ Spring Cloud ä¸ºå¼€å‘è€…æä¾›äº†åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆé…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œç†”æ–­ï¼Œè·¯ç”±ï¼Œå¾®ä»£ç†ï¼Œæ§åˆ¶æ€»çº¿ï¼Œä¸€æ¬¡æ€§ tokenï¼Œå…¨å±€çï¼Œ leader é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼ sessionï¼Œé›†ç¾¤çŠ¶æ€ï¼‰ä¸­å¿«é€Ÿæ„å»ºçš„å·¥å…·ï¼Œä½¿ç”¨ Spring Cloud çš„å¼€å‘è€…å¯ä»¥å¿«é€Ÿçš„å¯åŠ¨æœåŠ¡æˆ–æ„å»ºåº”ç”¨ã€åŒæ—¶èƒ½å¤Ÿå¿«é€Ÿå’Œäº‘å¹³å°èµ„æºè¿›è¡Œå¯¹æ¥ã€‚ SpringCloud åˆ†å¸ƒå¼å¼€å‘äº”å¤§å¸¸ç”¨ç»„ä»¶ æœåŠ¡å‘ç°â€”â€”Netflix Eureka å®¢æœç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix Ribbon æ–­è·¯å™¨â€”â€”Netflix Hystrix æœåŠ¡ç½‘å…³â€”â€”Netflix Zuul åˆ†å¸ƒå¼é…ç½®â€”â€”Spring Cloud Config äºŒã€å¾®æœåŠ¡ Martin Fowler å¾®æœåŠ¡åŸæ–‡ https://martinfowler.com/articles/microservices.html ä¸‰ã€Spring Cloud å…¥é—¨é¡¹ç›®ç»“æ„ï¼š å…ˆåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®æ¥å­˜æ”¾ â‘  ç¼–å†™ EurekaServer æ³¨å†Œä¸­å¿ƒ 1. é¡¹ç›®ç»“æ„ 2.é…ç½® Eureka ä¿¡æ¯12345678910server: port: 8761eureka: instance: hostname: eureka-server # eurekaå®ä¾‹çš„ä¸»æœºå client: register-with-eureka: false #ä¸æŠŠè‡ªå·±æ³¨å†Œåˆ°eurekaä¸Š fetch-registry: false # ä¸ä»eurekaä¸Šè·å–æœåŠ¡å™¨çš„æ³¨å†Œä¿¡æ¯ service-url: defaultZone: http://localhost:8761/eureka/ 3.@EnableEurekaServer123456789@EnableEurekaServer@SpringBootApplicationpublic class EurekaServerApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaServerApplication.class, args); &#125;&#125; 4.å¯åŠ¨ â‘¡ ç¼–å†™æœåŠ¡æä¾›è€… 1.é¡¹ç›®ç»“æ„ 2.ç¼–å†™ service å±‚ å’Œ controller å±‚12345678@Servicepublic class TicketService &#123; public String getTicket()&#123; System.out.println(&quot;8001&quot;); return &quot;ã€Šå§œå­ç‰™ã€‹&quot;; &#125;&#125; 12345678910@RestControllerpublic class TicketController &#123; @Autowired TicketService ticketService; @GetMapping(value = &quot;/ticket&quot;) public String getTicket() &#123; return ticketService.getTicket(); &#125;&#125; 3.é…ç½®ä¿¡æ¯123456789101112server: port: 8001spring: application: name: provider-ticketeureka: instance: prefer-ip-address: true # æ³¨å†ŒæœåŠ¡çš„æ—¶å€™ä½¿ç”¨æœåŠ¡çš„ipåœ°å€ client: service-url: defaultZone: http://localhost:8761/eureka/ 4.å¯åŠ¨å» Eureka æ³¨å†Œä¸­å¿ƒæŸ¥çœ‹ï¼Œhttp://localhost:8761/eureka/ 5.è´Ÿè½½å‡è¡¡ä¸ºäº†æ˜¾ç¤ºæ•ˆæœï¼Œä½¿ç”¨ Maven ä»“åº“çš„æ‰“åŒ…ï¼Œæˆ‘å¤åˆ¶ä¸€ä»½æä¾›è€…ï¼Œæ”¹ä¸€ä¸‹å¯åŠ¨ç«¯å£å—ï¼Œé˜²æ­¢å†²çªã€‚ æŠŠåŒ…å¤åˆ¶å‡ºæ¥å­˜æ”¾åœ¨æ–‡ä»¶å¤¹é‡Œï¼Œå¹¶å¯åŠ¨ â€‹ 8002 ä¸€æ ·çš„æ–¹æ³•å¯åŠ¨å³å¯ æ³¨å†Œä¸­å¿ƒæ˜¾ç¤ºï¼Œéƒ½æˆåŠŸæ³¨å…¥ â‘¢ ç¼–å†™æœåŠ¡æ¶ˆè´¹è€… 1.é¡¹ç›®ç»“æ„ 2.ç¼–å†™ controller å’Œ RestTemplate æ¨¡æ¿123456789101112@RestControllerpublic class UserController &#123; @Autowired RestTemplate restTemplate; @GetMapping(&quot;/buy&quot;) public String buyTicket(String name)&#123; String s = restTemplate.getForObject(&quot;http://PROVIDER-TICKET/ticket&quot;,String.class); return name + &quot;è´­ä¹°äº†&quot; + s; &#125;&#125; @EnableDiscoveryClient 1234567891011121314@EnableDiscoveryClient // å¼€å¯å‘ç°æœåŠ¡åŠŸèƒ½@SpringBootApplicationpublic class ConsumerUserApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConsumerUserApplication.class, args); &#125; @LoadBalanced // ä½¿ç”¨è´Ÿè½½å‡è¡¡æœºåˆ¶ @Bean public RestTemplate restTemplate()&#123; return new RestTemplate(); &#125;&#125; 3.é…ç½®ä¿¡æ¯123456789101112spring: application: name: consumer-userserver: port: 8200eureka: instance: prefer-ip-address: true # æ³¨å†ŒæœåŠ¡çš„æ—¶å€™ä½¿ç”¨æœåŠ¡çš„ipåœ°å€ client: service-url: defaultZone: http://localhost:8761/eureka/ 4.å¯åŠ¨ è´Ÿè½½å‡è¡¡ç”Ÿæ•ˆ æ•´åˆå®Œæˆï¼ï¼ï¼","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¸ä»»åŠ¡","slug":"SpringBootä¸ä»»åŠ¡","date":"2020-10-02T16:00:00.000Z","updated":"2020-10-25T02:30:52.323Z","comments":true,"path":"posts/315616543.html","link":"","permalink":"http://blog.oy6090.top/posts/315616543.html","excerpt":"","text":"ä¸€ã€å¼‚æ­¥ä»»åŠ¡ä¸¤ä¸ªæ³¨è§£ï¼š @EnableAysnsã€@Aysnc ä»£ç ç¤ºä¾‹ï¼š 123456789@EnableAsync // å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½@SpringBootApplicationpublic class SpringBoot04TaskApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot04TaskApplication.class, args); &#125;&#125; ã€AsyncService.javaã€‘ 1234567891011121314@Servicepublic class AsyncService &#123; // å‘Šè¯‰springè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³• @Async public void hello()&#123; try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(&quot;å¤„ç†æ•°æ®ä¸­....&quot;); &#125;&#125; ã€AsyncController.javaã€‘ 123456789101112@RestControllerpublic class AsyncController &#123; @Autowired private AsyncService asyncService; @GetMapping(value = &quot;/hello&quot;) public String hello()&#123; asyncService.hello(); return &quot;success&quot;; &#125;&#125; äºŒã€å®šæ—¶ä»»åŠ¡ä¸¤ä¸ªæ³¨è§£ï¼š @EnableSchedulingã€ @Scheduled cron è¡¨è¾¾å¼ï¼š å¼€å¯åŸºäºæ³¨è§£çš„å®šä»»åŠ¡ 123456789@EnableScheduling // å¼€å¯åŸºäºæ³¨è§£çš„å®šæ—¶ä»»åŠ¡@SpringBootApplicationpublic class SpringBoot04TaskApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot04TaskApplication.class, args); &#125;&#125; ã€ScheduledService.javaã€‘ second(ç§’), minuteï¼ˆåˆ†ï¼‰, hourï¼ˆæ—¶ï¼‰, day of monthï¼ˆæ—¥ï¼‰, monthï¼ˆæœˆï¼‰, day of weekï¼ˆå‘¨å‡ ï¼‰ å¯¹åº”ï¼š0 * * * * MON-FR ã€0 0/5 14,18 * * ?ã€‘ æ¯å¤© 14 ç‚¹æ•´ï¼Œå’Œ 18 ç‚¹æ•´ï¼Œæ¯éš” 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ ã€0 15 10 ? * 1-6ã€‘ æ¯ä¸ªæœˆçš„å‘¨ä¸€è‡³å‘¨å…­ 10:15 åˆ†æ‰§è¡Œä¸€æ¬¡ ã€0 0 2 ? * 6Lã€‘æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªå‘¨å…­å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œä¸€æ¬¡ ã€0 0 2 LW * ?ã€‘æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œä¸€æ¬¡ ã€0 0 2-4 ? * 1#1ã€‘æ¯ä¸ªæœˆçš„ç¬¬ä¸€ä¸ªå‘¨ä¸€å‡Œæ™¨ 2 ç‚¹åˆ° 4 ç‚¹æœŸé—´ï¼Œæ¯ä¸ªæ•´ç‚¹éƒ½æ‰§è¡Œä¸€æ¬¡ï¼› 1234567891011@Servicepublic class ScheduledService &#123; //@Scheduled(cron = &quot;0 * * * * MON-SAT&quot;) // æ•´ç‚¹æ‰§è¡Œä¸€æ¬¡// @Scheduled(cron = &quot;0,1,2,3,4 * * * * MON-SAT&quot;) // 0,1,2,3,4 å„æ‰§è¡Œä¸€æ¬¡// @Scheduled(cron = &quot;0-4 * * * * MON-SAT&quot;) //0-4æ‰§è¡Œ @Scheduled(cron = &quot;0/4 * * * * MON-SAT&quot;) // æ¯4ç§’æ‰§è¡Œä¸€æ¬¡ public void hello()&#123; System.out.println(&quot;hello...&quot;); &#125;&#125; ä¸‰ã€é‚®ä»¶ä»»åŠ¡â‘  å¯¼å…¥ pom ä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;&lt;/dependency&gt; â‘¡ é…ç½® application.properties1234spring.mail.username=// è‡ªå·±çš„é‚®ç®±spring.mail.password=spring.mail.host=smtp.qq.comspring.mail.properties.mail.smtp.ssl.enable=true spring.mail.password æ€ä¹ˆè·å–ï¼š(ä»¥ QQ é‚®ç®±ä¸ºä¾‹) ç™»å…¥ QQ é‚®ç®± â‘¢ æµ‹è¯•åŸºæœ¬æ ¼å¼ï¼š 123456789101112131415161718@AutowiredJavaMailSenderImpl javaMailSender;@Testvoid contextLoads() &#123; SimpleMailMessage message = new SimpleMailMessage(); // é‚®ä»¶è®¾ç½® message.setSubject(&quot;é€šçŸ¥-ä»Šæ™šå¼€ä¼š&quot;); message.setText(&quot;ä»Šæ™š7:30å¼€ä¼š&quot;); // é‚®ä»¶æ¥æ”¶ message.setTo(&quot;2640379231@qq.com&quot;); // é‚®ä»¶å‘é€ message.setFrom(&quot;2097291754@qq.com&quot;); javaMailSender.send(message);&#125; å¤æ‚æ ¼å¼ 123456789101112131415161718192021222324@AutowiredJavaMailSenderImpl javaMailSender;@Testpublic void test02() throws MessagingException &#123; // 1.åˆ›å»ºä¸€ä¸ªå¤æ‚çš„æ¶ˆæ¯é‚®ä»¶ MimeMessage mimeMessage = javaMailSender.createMimeMessage(); MimeMessageHelper helper = new MimeMessageHelper(mimeMessage, true); // é‚®ä»¶è®¾ç½® helper.setSubject(&quot;é€šçŸ¥-ä»Šæ™šå¼€ä¼š&quot;); // å¼€å¯html æ¸²æŸ“ï¼Œé»˜è®¤æ˜¯false helper.setText(&quot;&lt;b style=&#x27;color:red&#x27;&gt;ä»Šå¤© 7:30 å¼€ä¼š&lt;/b&gt;&quot;, true); helper.setTo(&quot;2640379231@qq.com&quot;); helper.setFrom(&quot;2097291754@qq.com&quot;); // ä¸Šä¼ æ–‡ä»¶ helper.addAttachment(&quot;1.jpg&quot;,new File(&quot;C:\\\\Users\\\\hp\\\\Desktop\\\\OY\\\\å›¾ç‰‡\\\\1.jpg&quot;)); helper.addAttachment(&quot;2.jpg&quot;,new File(&quot;C:\\\\Users\\\\hp\\\\Desktop\\\\OY\\\\å›¾ç‰‡\\\\2.jpg&quot;)); javaMailSender.send(mimeMessage);&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¸æ£€ç´¢(ElasticSearch)","slug":"SpringBootä¸æ£€ç´¢(ElasticSearch)","date":"2020-10-02T16:00:00.000Z","updated":"2020-10-25T02:30:23.064Z","comments":true,"path":"posts/4004677012.html","link":"","permalink":"http://blog.oy6090.top/posts/4004677012.html","excerpt":"","text":"ä¸€ã€ElasticSearch å®‰è£…ç¯å¢ƒ Linux CentOS 7 Docker å®¹å™¨ äºŒã€å®‰è£…æ­¥éª¤â‘  ä¸‹è½½ docker ElasticSearch å®¹å™¨é•œåƒDocker Hub é•œåƒä¸‹è½½åœ°å€ï¼šhttps://hub.docker.com/ 1docker pull elasticsearch:7.6.2 â‘¡ å¯åŠ¨é•œåƒæ˜ å°„1docker run -e ES_JAVA_OPTS=&quot;-Xms256m -Xmx256m&quot; -d -p 9200:9200 -p 9300:9300 --name ES01 elasticsearch:7.6.2 æ³¨æ„ï¼šæ ¹æ®è‡ªå·±æƒ…å†µæ¥é…ç½® ==-e ES_JAVA_OPTS=â€-Xms256m -Xmx256mâ€== ä¸é…ç½®çš„è¯ï¼Œå¯åŠ¨ä¼šå ç”¨ä½ çš„ 2G å†…å­˜ï¼Œåä¹‹ï¼Œé…ç½®çš„è¯ï¼Œå¯åŠ¨åˆ™æ ¹æ®ä½ é…ç½®çš„å†…å­˜æ¥åˆ†é…ã€‚ å¼‚å¸¸ï¼šå¦‚æœå¯åŠ¨åï¼Œdocker å®¹å™¨è‡ªåŠ¨å…³é—­ï¼Œä¸”æ— æ³•è®¿é—® 1docker logs -f id[å®¹å™¨id] // æŸ¥çœ‹å¯åŠ¨æ—¥å¿— 123456789// ä¿®æ”¹ elasticsearch.yml é…ç½®å³å¯è§£å†³// å…ˆæŸ¥æ‰¾ elasticsearch.ymlfind / -name elasticsearch.ymlvim elasticsearch.yml è·¯å¾„// åœ¨elasticsearch.ymlæ·»åŠ ä¸‹é¢å†…å®¹bootstrap.system_call_filter: falsecluster.initial_master_nodes: [&quot;node-1&quot;] è§£å†³è¯¦ç»†æ–¹æ³•ï¼Œè¯·å‚è€ƒåšå®¢ è¿è¡Œä¸‹é¢è¿™æ¡æŒ‡ä»¤ï¼Œå¹¶é‡æ–°å¯åŠ¨å®¹å™¨ 1sysctl -w vm.max_map_count=262144 12//é‡æ–°å¯åŠ¨å®¹å™¨docker start å®¹å™¨[id] â‘¢ æµ‹è¯• ä¸‰ã€ElasticSearch åŸºæœ¬è¯­æ³•è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£è¿›è¡Œå­¦ä¹  ç®€å•ç¤ºä¾‹æ¼”ç¤ºï¼šä½¿ç”¨å·¥å…·: Postman å‘é€æˆåŠŸï¼š æ³¨æ„ï¼šå¦‚æœ put å‡ºç° 503 é”™è¯¯ï¼Œéœ€è¦åœ¨é…ç½®elasticsearch.ymlæ–‡ä»¶ä¸­æ·»åŠ  1node.name: node-1 æŸ¥è¯¢ï¼š å››ã€æ•´åˆ ElasticSearch â€‹ springBoot 2.3.0 ç‰ˆæœ¬åŠä»¥åç‰ˆæœ¬ä¸æ”¯æŒ es æŸ¥è¯¢å·¥å…· jestClient è‡ªåŠ¨æ³¨å…¥ â‘  Jest2.2 ç‰ˆæœ¬ 1.å¼•å…¥ jest12345&lt;dependency&gt; &lt;groupId&gt;io.searchbox&lt;/groupId&gt; &lt;artifactId&gt;jest&lt;/artifactId&gt; &lt;version&gt;6.3.1&lt;/version&gt;&lt;/dependency&gt; 2. application.yml é…ç½®1spring.elasticsearch.jest.uris=http://192.168.64.129:9200 3.åˆ›å»º bean12345678910public class Article &#123; @JestId private Integer id; private String author; private String title; private String content;// getã€setçœç•¥ã€‚ã€‚ã€‚ã€‚&#125; 4.æµ‹è¯•1234567891011121314151617181920@Autowiredprivate JestClient jestClient;@Testvoid contextLoads() &#123; Article article = new Article(); article.setId(1); article.setTitle(&quot;ä¸‰å›½æ¼”ä¹‰&quot;); article.setAuthor(&quot;ç½—è´¯ä¸­&quot;); article.setContent(&quot;Hello World&quot;); Object source; Index index = new Index.Builder(article).index(&quot;sanguo&quot;).type(&quot;news&quot;).build(); try &#123; jestClient.execute(index); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125; 2.3 ç‰ˆæœ¬ ç”±äº springboot 2.3.0 ä»¥åç‰ˆæœ¬ä¸æ”¯æŒè‡ªåŠ¨æ³¨å…¥ JestClientï¼Œå¦‚ä¸‹å›¾æˆ‘ä»¬åœ¨ yml æ–‡ä»¶ä¸­é…ç½® JestClient æ—¶ä¼šå‡ºç°åˆ’æ‰çš„çº¿æç¤ºã€‚æˆ‘ä»¬é‡‡å–æ‰‹åŠ¨é…ç½®çš„æ–¹å¼ 1.å¼•å…¥ jest12345&lt;dependency&gt; &lt;groupId&gt;io.searchbox&lt;/groupId&gt; &lt;artifactId&gt;jest&lt;/artifactId&gt; &lt;version&gt;6.3.1&lt;/version&gt;&lt;/dependency&gt; 2.åˆ›å»º bean12345678910public class Article &#123; @JestId private Integer id; private String author; private String title; private String content;// getã€setçœç•¥ã€‚ã€‚ã€‚ã€‚&#125; 3.æ‰‹åŠ¨æ³¨å…¥å’Œæµ‹è¯•ã€jestClient.javaã€‘ 1234567891011@Repositorypublic class jestClient &#123; public JestClient getJestCline()&#123; JestClientFactory factory = new JestClientFactory(); factory.setHttpClientConfig(new HttpClientConfig .Builder(&quot;http://192.168.64.129:9200&quot;) .multiThreaded(true) .build()); return factory.getObject(); &#125;&#125; 123456789101112131415@Testvoid contextLoads() &#123; Article article = new Article(); article.setId(1); article.setTitle(&quot;è¥¿æ¸¸è®°&quot;); article.setAuthor(&quot;å´æ‰¿æ©&quot;); article.setContent(&quot;Hello World&quot;); Index index = new Index.Builder(article).index(&quot;xiyou&quot;).type(&quot;news&quot;).build(); try &#123; jestClient.getJestCline().execute(index); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125; 4.è¡¨è¾¾å¼æµ‹è¯•æœç´¢(2.2 å’Œ 2.3)æ›´å¤šæ“ä½œï¼šhttps://github.com/searchbox-io/Jest/tree/master/jest 123456789101112131415161718192021222324// æµ‹è¯•æœç´¢@Testpublic void search()&#123; // æŸ¥è¯¢è¡¨è¾¾å¼ String json =&quot;&#123;\\n&quot; + &quot; \\&quot;query\\&quot; : &#123;\\n&quot; + &quot; \\&quot;match\\&quot; : &#123;\\n&quot; + &quot; \\&quot;content\\&quot; : \\&quot;hello\\&quot;\\n&quot; + &quot; &#125;\\n&quot; + &quot; &#125;\\n&quot; + &quot;&#125;&quot;; // æ„å»ºæœç´¢åŠŸèƒ½ Search search = new Search.Builder(json).addIndex(&quot;xiyou&quot;).addType(&quot;news&quot;).build(); // æ‰§è¡Œ try &#123; // 2.2 ç‰ˆæœ¬ï¼š SearchResult result = jestClient.execute(search); // ä»¥ä¸‹æ˜¯2.3ç‰ˆæœ¬ SearchResult result = jestClient.getJestCline().execute(search); System.out.println(result); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125; â‘¡ springDataElasticSearch2.2 ç‰ˆæœ¬1.application.yml é…ç½®12spring.data.elasticsearch.cluster-name=elasticsearchspring.data.elasticsearch.cluster-nodes=118.24.44.169:9301 å…¶ä»–çš„ä¸è¿‡å¤šçš„èµ˜è¿°äº†ï¼Œä¸åœ¨å‘ä¸Šé¢åˆ†ç‰ˆæœ¬ï¼Œå…¶ä»–çš„å‚è€ƒ 2.3 ç‰ˆæœ¬ï¼Œå¯è‡ªè¡Œç™¾åº¦ã€‚ 2.3 ç‰ˆæœ¬1.å¼•å…¥ spring-boot-starter-data-elasticsearch1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;&lt;/dependency&gt; 2.å®‰è£… Spring Data å¯¹åº”ç‰ˆæœ¬çš„ ElasticSearch ç‰ˆæœ¬é€‚é…è¯´æ˜ï¼šhttps://github.com/spring-projects/spring-data-elasticsearch å¦‚æœç‰ˆæœ¬ä¸é€‚é…ï¼š 1ï¼‰ã€å‡çº§ SpringBoot ç‰ˆæœ¬ 2ï¼‰ã€å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ ES 3.æ‰‹åŠ¨é…ç½® Client ç°åœ¨ spring å®˜æ–¹æ¨èæˆ‘ä»¬ç”¨High Level REST Clientæ¥é…ç½® æ‰‹åŠ¨é…ç½®å¦‚ä¸‹ï¼š 12345678910111213141516171819@Configurationpublic class ElasticSearchConfig extends AbstractElasticsearchConfiguration &#123; @Override public RestHighLevelClient elasticsearchClient() &#123; ClientConfiguration configuration = ClientConfiguration.builder( ) .connectedTo(&quot;192.168.64.129:9200&quot;) //.withConnectTimeout(Duration.ofSeconds(5)) //.withSocketTimeout(Duration.ofSeconds(3)) //.useSsl() //.withDefaultHeaders(defaultHeaders) //.withBasicAuth(username, password) // ... other options .build(); RestHighLevelClient client = RestClients.create(configuration).rest(); return client; &#125;&#125; 4.åˆ›å»º bean123456789//6.0ç‰ˆæœ¬åï¼Œä¸€ä¸ªindexåªæœ‰ä¸€ä¸ªtypeäº†,è¿™é‡Œtypeä¹Ÿè¢«ç§»é™¤ã€‚ESé»˜è®¤typeä¸ºâ€œ_docâ€@Document(indexName = &quot;at&quot;)public class Book &#123; private Integer id; private String bookname; private String author; //get set æ„é€ å‡½æ•°ï¼ŒtoStringçš„å¾—å†™ä¸Šï¼Œè¿™é‡Œå¤ªé•¿å°±åˆ äº†å…ˆ&#125; 5.æ“ä½œ ES æœ‰ä¸¤å¤§ç±» Elasticsearch Repositories Elasticsearch Operations Elasticsearch Repositories å…ˆç”¨Elasticsearch Repositoriesï¼Œæ³¨æ„æ¥å£ä¸æ¥å£çš„å…³ç³»æ˜¯ extends 12345@Repositorypublic interface Bookrepository extends ElasticsearchRepository&lt;Book,Integer&gt; &#123; //ElasticsearchCrudRepository å·²ç»è¿‡æ—¶ List&lt;Book&gt; findBookById(int i);&#125; Elasticsearch Repositoriesæä¾›äº†è®¸å¤šå…³é”®å­—ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å®ç°æ–¹æ³•ã€‚æˆ‘ä»¬åªéœ€è¦å†™æŠ½è±¡æ–¹æ³•å³å¯ï¼ŒElasticsearch Repositoriesä¼šæ ¹æ®æ–¹æ³•åè‡ªåŠ¨æˆ‘ä»¬ä¸ºæˆ‘ä»¬å®ç°ï¼Œæ¯”å¦‚ä¸Šé¢findå’ŒByå°±æ˜¯å…³é”®å­—ã€‚æˆ‘ä»¬éœ€è¦åœ¨ springboot ä¸»é…ç½®ç±»ä¸ŠåŠ ä¸Šæ³¨è§£@EnableElasticsearchRepositorieså¯ä»¥ä½¿ç”¨ Elasticsearch æä¾›çš„çš„å…³é”®å­—ï¼ˆæ–¹æ³•ï¼‰åˆ—è¡¨,å¸¸ç”¨å…³é”®å­—å¦‚ä¸‹ ç„¶åæµ‹è¯•ä¸€ä¸‹ 123456789101112131415161718192021@SpringBootTestclass ElasticsearchApplicationTests &#123; @Autowired Bookrepository bookrepository; @Test void contextLoads() &#123; Book book=new Book(1,&quot;è¥¿æ¸¸è®°&quot;,&quot;å´æ‰¿æ©&quot;); bookrepository.save(book); &#125; @Test void testRepositories()&#123; //æŸ¥è¯¢ //Elasticsearch Repositoriesæä¾›and,byç­‰ä¸€å¤§å †å…³é”®å­—æ¥è¿æ¥JAVABEANå±æ€§ï¼Œæˆ‘ä»¬å†™æ¥å£ï¼Œä»–è‡ªåŠ¨å˜æˆä¸ºå®ç°ç±»ã€‚ List&lt;Book&gt; bookById = bookrepository.findBookById(1); System.out.println(bookById.get(0)); &#125;&#125; ç»“æœ Elasticsearch Operations ElasticsearchTemplate æ˜¯åŸºäºTransport clientçš„,Transport clientå°†ä¼šå† ES8.0 ä¸­è¢«å¼ƒç”¨,ç”¨è°ä¸ç”¨æˆ‘å¤šè¯´äº†å§ã€‚ä½¿ç”¨ Elasticsearch Operations æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸Šé¢çš„é…ç½®ç±»ï¼Œéœ€è¦ç»§æ‰¿AbstractElasticsearchConfigurationï¼Œå› ä¸ºåŸºç±»AbstractElasticsearchConfigurationå·²ç»æä¾›äº†ElasticsearchRestTemplateè¿™ä¸ªbean 12345678910111213141516171819@Configurationpublic class RestClientConfig extends AbstractElasticsearchConfiguration &#123; @Override public RestHighLevelClient elasticsearchClient() &#123; ClientConfiguration configuration = ClientConfiguration.builder( ) .connectedTo(&quot;192.168.100.126:9200&quot;)//9300ä¼šæŠ¥é”™ //.withConnectTimeout(Duration.ofSeconds(5)) //.withSocketTimeout(Duration.ofSeconds(3)) //.useSsl() //.withDefaultHeaders(defaultHeaders) //.withBasicAuth(username, password) // ... other options .build(); RestHighLevelClient client = RestClients.create(configuration).rest(); return client; &#125;&#125; ä½¿ç”¨æ–¹æ³• 12345678910111213141516171819202122232425@SpringBootTestclass ElasticsearchApplicationTests &#123; @Autowired ElasticsearchOperations elasticsearchOperations; @Test void testSaveByOperations()&#123; Book book=new Book(2,&quot;è¥¿æ¸¸è®°2&quot;,&quot;å´æ‰¿æ©äºŒä¸–&quot;); IndexQuery indexQuery= new IndexQueryBuilder() .withId(book.getId().toString()) .withObject(book) .build(); String documentId = elasticsearchOperations.index(indexQuery, IndexCoordinates.of(&quot;at&quot;));//è¿”å›_id(å¹¶éjavabeanä¸­çš„IDï¼Œè€Œæ˜¯hitsä¸­çš„) System.out.println(documentId); &#125; @Test void testFindByOperations()&#123; Book book = elasticsearchOperations.get(&quot;2&quot;,Book.class,IndexCoordinates.of(&quot;at&quot;));//IndexCoordinatesçš„å‚æ•°ä¸ºIndex System.out.println(book); &#125;&#125; ç»“æœ","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¸æ¶ˆæ¯","slug":"SpringBootä¸æ¶ˆæ¯","date":"2020-09-30T16:00:00.000Z","updated":"2020-10-25T02:31:03.746Z","comments":true,"path":"posts/1634411798.html","link":"","permalink":"http://blog.oy6090.top/posts/1634411798.html","excerpt":"","text":"ä¸€ã€æ¦‚è¿° æ¶ˆæ¯æœåŠ¡ä¸­ä¸¤ä¸ªä¸­é‡è¦çš„æ¦‚å¿µï¼šæ¶ˆæ¯ä»£ç† å’Œ ç›®çš„åœ° æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦ç”±ä¸¤ç§å½¢å¼çš„ç›®çš„åœ° é˜Ÿåˆ—ï¼š ç‚¹å¯¹ç‚¹æ¶ˆæ¯é€šä¿¡ ä¸»é¢˜ï¼š å‘å¸ƒ/è®¢é˜… æ¶ˆæ¯é€šä¿¡ å¼‚æ­¥å¤„ç†ï¼š åº”ç”¨è§£è€¦ï¼š æµé‡å‰Šå³°ï¼š ç‚¹å¯¹ç‚¹å¼ï¼š æ¶ˆæ¯å‘é€è€…å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯ä»£ç†å°†å…¶æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œæ¶ˆæ¯æ¥æ”¶è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯å†…å®¹ï¼Œæ¶ˆæ¯è¯»å–åè¢«ç§»å‡ºé˜Ÿåˆ— ã€‚ æ¶ˆæ¯åªæœ‰å”¯ä¸€çš„å‘é€è€…å’Œæ¥å—è€…ï¼Œä½†å¹¶ä¸æ˜¯è¯´åªèƒ½æœ‰ä¸€ä¸ªæ¥æ”¶è€… å‘å¸ƒè®¢é˜…å¼ï¼š å‘é€è€…ï¼ˆå‘å¸ƒè€…ï¼‰å‘é€æ¶ˆæ¯åˆ°ä¸»é¢˜ï¼Œå¤šä¸ªæ¥å—è€…ï¼ˆè®¢é˜…è€…ï¼‰ç›‘å¬ï¼ˆè®¢é˜…ï¼‰ è¿™ä¸ªä¸»é¢˜ï¼Œé‚£ä¹ˆå°±ä¼šå‘å¸ƒåˆ°è¾¾åŒæ—¶æ”¶åˆ°æ¶ˆæ¯ã€‚ JMS (Java Message Service ) JAVA æ¶ˆæ¯æœåŠ¡ åŸºäº JVM æ¶ˆæ¯ä»£ç†çš„è§„èŒƒã€‚ ActiveMQã€ HornetMQ æ˜¯ JMS å®ç° AMQPï¼ˆAdvanced Message Queuing Protocolï¼‰ é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¶ˆæ¯ä»£ç†çš„è§„èŒƒï¼Œå…¼å®¹ JMS RabbitMQ æ˜¯ AMQP çš„å®ç° Spring æ”¯æŒ spring-jms æä¾›äº†å¯¹ JMS çš„æ”¯æŒ spring-rabbit æä¾›äº†å¯¹ AMQP çš„æ”¯æŒ éœ€è¦ ConnectionFactory çš„å®ç°æ¥è¿æ¥æ¶ˆæ¯ä»£ç† æä¾› JmsTemplateã€RebbitTemplate æ¥å‘é€æ¶ˆæ¯ @JmsListenerï¼ˆJMSï¼‰ã€ @RabbitListenerï¼ˆAMQPï¼‰æ³¨è§£åœ¨æ–¹æ³•ä¸Šç›‘å¬æ¶ˆæ¯ä»£ç†å‘å¸ƒçš„æ¶ˆæ¯ @EnableJmsã€@EnableRebbit å¼€å¯æ”¯æŒ SpringBoot è‡ªåŠ¨é…ç½® JmsAutoConfiguration RabbitAutoConfiguration äºŒã€RabbitMQ ç®€ä»‹ æ ¸å¿ƒæ¦‚å¿µ Message æ¶ˆæ¯ Publisher æ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‘äº¤æ¢å™¨å‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Exchange äº¤æ¢å™¨ï¼Œç”¨æ¥æ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯å¹¶å°†è¿™äº›æ¶ˆæ¯è·¯ç”±ç»™æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ—ã€‚ Queue æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æ¥ä¿å­˜æ¶ˆæ¯ç›´åˆ°å‘é€ç»™æ¶ˆè´¹è€…ã€‚ Binding ç»‘å®šï¼Œç”¨äºæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢å™¨ä¹‹é—´çš„å…³è”ã€‚ Connection ç½‘ç»œè¿æ¥ï¼Œæ¯”å¦‚ä¸€ä¸ª TCP è¿æ¥ã€‚ Channel ä¿¡é“ï¼Œå¤šè·¯å¤ç”¨è¿æ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ Consumer æ¶ˆæ¯çš„æ¶ˆè´¹è€…ï¼Œè¡¨ç¤ºä¸€ä¸ªä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å¾—æ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Virtual Host è™šæ‹Ÿä¸»æœºï¼Œè¡¨ç¤ºä¸€æ‰¹äº¤æ¢å™¨ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œç›¸å…³å¯¹è±¡ã€‚ Broker è¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®ä½“ å›¾ç¤º: ä¸‰ã€RabbitMQ è¿è¡Œæœºåˆ¶â‘  AMQP ä¸­çš„æ¶ˆæ¯è·¯ç”±AMQP ä¸­æ¶ˆæ¯çš„è·¯ç”±è¿‡ç¨‹å’Œ Java å¼€å‘è€…ç†Ÿæ‚‰çš„ JMS å­˜åœ¨ä¸€äº›å·®åˆ«ï¼Œ AMQP ä¸­å¢åŠ äº†Exchange å’Œ Binding çš„è§’è‰²ã€‚ç”Ÿäº§è€…æŠŠæ¶ˆæ¯å‘å¸ƒåˆ° Exchange ä¸Šï¼Œæ¶ˆæ¯æœ€ç»ˆåˆ°è¾¾é˜Ÿåˆ—å¹¶è¢«æ¶ˆè´¹è€…æ¥æ”¶ï¼Œè€Œ Binding å†³å®šäº¤æ¢å™¨çš„æ¶ˆæ¯åº”è¯¥å‘é€åˆ°é‚£ä¸ªé˜Ÿåˆ—ã€‚ â‘¡ Exchange ç±»å‹Exchange åˆ†å‘æ¶ˆæ¯æ—¶æ ¹æ®ç±»å‹çš„ä¸åŒåˆ†å‘ç­–ç•¥æœ‰åŒºåˆ«ï¼Œç›®å‰å…±å››ç§ç±»å‹ï¼šdirectã€ fanoutã€ topicã€ headers ã€‚ headers åŒ¹é… AMQP æ¶ˆæ¯çš„ header è€Œä¸æ˜¯è·¯ç”±é”®ï¼Œ headers äº¤æ¢å™¨å’Œ direct äº¤æ¢å™¨å®Œå…¨ä¸€è‡´ï¼Œä½†æ€§èƒ½å·®å¾ˆå¤šï¼Œç›®å‰å‡ ä¹ç”¨ä¸åˆ°äº†ï¼Œæ‰€ä»¥ç›´æ¥çœ‹å¦å¤–ä¸‰ç§ç±»å‹ï¼š Direct Exchange æ¶ˆæ¯ä¸­çš„è·¯ç”±é”®ï¼ˆrouting keyï¼‰å¦‚æœå’Œ Binding ä¸­çš„ binding key ä¸€è‡´ï¼Œ äº¤æ¢å™¨å°±å°†æ¶ˆæ¯å‘åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚è·¯ç”±é”®ä¸é˜Ÿåˆ—åå®Œå…¨åŒ¹é…ï¼Œå¦‚æœä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºè¦æ±‚è·¯ç”±é”®ä¸ºâ€œdogâ€ï¼Œåˆ™åªè½¬å‘ routing key æ ‡è®°ä¸ºâ€œdogâ€çš„æ¶ˆæ¯ï¼Œä¸ä¼šå‘â€œdog.puppyâ€ï¼Œä¹Ÿä¸ä¼šè½¬å‘â€œdog.guardâ€ç­‰ç­‰ã€‚å®ƒæ˜¯å®Œå…¨åŒ¹é…ã€å•æ’­çš„æ¨¡å¼ã€‚ Fanout Exchange æ¯ä¸ªå‘åˆ° fanout ç±»å‹äº¤æ¢å™¨çš„æ¶ˆæ¯éƒ½ä¼šåˆ†åˆ°æ‰€æœ‰ç»‘å®šçš„é˜Ÿåˆ—ä¸Šå»ã€‚ fanout äº¤æ¢å™¨ä¸å¤„ç†è·¯ç”±é”®ï¼Œåªæ˜¯ç®€å•çš„å°†é˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢å™¨ä¸Šï¼Œæ¯ä¸ªå‘é€åˆ°äº¤æ¢å™¨çš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸è¯¥äº¤æ¢å™¨ç»‘å®šçš„æ‰€æœ‰é˜Ÿåˆ—ä¸Šã€‚å¾ˆåƒå­ç½‘å¹¿æ’­ï¼Œæ¯å°å­ç½‘å†…çš„ä¸»æœºéƒ½è·å¾—äº†ä¸€ä»½å¤åˆ¶çš„æ¶ˆæ¯ã€‚ fanout ç±»å‹è½¬å‘æ¶ˆæ¯æ˜¯æœ€å¿«çš„ ã€‚ Topic Echange topic äº¤æ¢å™¨é€šè¿‡æ¨¡å¼åŒ¹é…åˆ†é…æ¶ˆæ¯çš„è·¯ç”±é”®å±æ€§ï¼Œå°†è·¯ç”±é”®å’ŒæŸä¸ªæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œæ­¤æ—¶é˜Ÿåˆ—éœ€è¦ç»‘å®šåˆ°ä¸€ä¸ªæ¨¡å¼ä¸Šã€‚å®ƒå°†è·¯ç”±é”®å’Œç»‘å®šé”®çš„å­—ç¬¦ä¸²åˆ‡åˆ†æˆå•è¯ï¼Œè¿™äº›å•è¯ä¹‹é—´ç”¨ç‚¹éš”å¼€ã€‚å®ƒåŒæ ·ä¹Ÿä¼šè¯†åˆ«ä¸¤ä¸ªé€šé…ç¬¦ï¼šç¬¦å·â€œ#â€å’Œç¬¦å·â€œ*â€ ã€‚ #åŒ¹é… 0 ä¸ªæˆ–å¤šä¸ªå•è¯ï¼Œ *åŒ¹é…ä¸€ä¸ªå•è¯ã€‚ å››ã€RabbitMQ å®‰è£…å¯åŠ¨â‘  ç¯å¢ƒå‡†å¤‡ Linux CentOS7 docker å®¹å™¨ â‘¡ å®‰è£…æ­¥éª¤ åœ¨ docker hub ä¸­æ‰¾åˆ° rebbitMQ é•œåƒ ä¸‹è½½é•œåƒï¼Œdocker å®‰è£… 12// é€‰æ‹©3-mansgement å¸¦webç®¡ç†ç•Œé¢docker pull rabbitmq:3-management å¯åŠ¨ rebbitMQ å®¹å™¨ 1docker run -d -p 5672:5672 -p 15672:15672 --name mybebbitmq rabbitmq:3-management è®¿é—® å‰æï¼šä¿è¯ linux é˜²ç«å¢™æš‚æ—¶å…³é—­ï¼Œæ‰èƒ½ç»™å¤–ç½‘è®¿é—®ã€‚ åˆå§‹ç”¨æˆ·å’Œå¯†ç ï¼š guest äº”ã€RabbitMQ æ•´åˆidea åˆ›å»ºå·¥ç¨‹ â‘  å¼•å…¥ spring-boot-starter-amqp1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;&lt;/dependency&gt; â‘¡ application.yml é…ç½®123spring.rabbitmq.host=192.168.64.129spring.rabbitmq.username=guestspring.rabbitmq.password=guest â‘¢ æµ‹è¯• RabbitMQ1. AmqpAdminï¼šç®¡ç†ç»„ä»¶12345678910111213141516@Autowiredprivate AmqpAdmin amqpAdmin;@Testvoid createExchange() &#123; // åˆ›å»ºexchange amqpAdmin.declareExchange(new DirectExchange(&quot;amqpadmin.exchange&quot;)); System.out.println(&quot;åˆ›å»ºå®Œæˆ&quot;); // åˆ›å»ºQueue amqpAdmin.declareQueue(new Queue(&quot;amqpadmin.queue&quot;, true)); // åˆ›å»ºç»‘å®šè§„åˆ™ amqpAdmin.declareBinding(new Binding(&quot;amqpadmin.queue&quot;, Binding.DestinationType.QUEUE, &quot;amqpadmin.exchange&quot;, &quot;amqpadmin.queue&quot;, null));&#125; 2.RabbitTemplate: æ¶ˆæ¯å‘é€å¤„ç†æ–‡ä»¶ç‚¹å¯¹ç‚¹å‘é€ï¼š 1234567891011@Autowiredprivate RabbitTemplate rabbitTemplate;@Testpublic void test1()&#123; // Message éœ€è¦è‡ªå·±æ„å»ºä¸€ä¸ªï¼›å®šä¹‰æ¶ˆæ¯ä½“å†…å®¹å’Œæ¶ˆæ¯å¤´// rabbitTemplate.send(exchange,routeKey, message); // objecté»˜è®¤å½“æˆæ¶ˆæ¯ä½“ï¼Œåªéœ€è¦ä¼ å…¥è¦å‘é€çš„æ¶ˆæ¯ï¼Œè‡ªåŠ¨åºåˆ—åŒ–å‘é€ç»™rabbitmq;// rabbitTemplate.convertAndSend(exchange, object); rabbitTemplate.convertAndSend(&quot;amqpadmin.exchange&quot;,&quot;amqpadmin.queue&quot;,&quot;æµ‹è¯•:test.msg&quot;);&#125; æ¥æ”¶ï¼š 12345678// æ¥æ”¶æ•°æ®@Testpublic void receive()&#123; Object o = rabbitTemplate.receiveAndConvert(&quot;amqpadmin.queue&quot;); System.out.println(o.getClass()); System.out.println(o);&#125; ç¬¬äºŒç§å‘é€ï¼Œä»¥ Json æ–¹å¼ 1234567891011// ç¬¬äºŒç§å‘é€ï¼Œä»¥Jsonæ–¹å¼@Testpublic void test1()&#123; // ä»¥Json æ•°æ®æ ¼å¼å‘é€ HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;msg&quot;,&quot;è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯&quot;); map.put(&quot;data&quot;,Arrays.asList(&quot;helloworld&quot;,123,true)); rabbitTemplate.convertAndSend(&quot;amqpadmin.exchange&quot;,&quot;amqpadmin.queue&quot;, map); // rabbitTemplate.convertAndSend(&quot;amqpadmin.exchange&quot;,&quot;amqpadmin.queue&quot;,new Book(&quot;è¥¿æ¸¸è®°&quot;,&quot;å´æ‰¿æ©&quot;));&#125; å‘é€çš„ Json æ•°æ®è¢«åºåˆ—åŒ–ï¼Œæ²¡æœ‰æ˜¾ç¤ºæ­£å¸¸çš„ json æ•°æ®æ ¼å¼ï¼Œè§£å†³æ–¹å¼ï¼šè‡ªå®šä¹‰åºåˆ—æ–¹å¼é‡‡ç”¨ JSON 123456789@Configurationpublic class MyAMQConfig &#123; // è‡ªå®šä¹‰åºåˆ—çš„ä¸ºJson æ ¼å¼ @Bean public MessageConverter messageConverter()&#123; return new Jackson2JsonMessageConverter(); &#125;&#125; å¹¿æ’­12345678910// å…ˆåˆ›å»ºExchangeamqpAdmin.declareExchange(new FanoutExchange(&quot;amqpadmin.fanout&quot;));// ç»‘å®šBinding.DestinationType.QUEUE,&quot;amqpadmin.fanout&quot;,&quot;amqpadmin.queue&quot;,null));@Testpublic void sendMsg()&#123; rabbitTemplate.convertAndSend(&quot;amqpadmin.fanout&quot;,&quot;&quot;,new Book(&quot;çº¢æ¥¼æ¢¦&quot;,&quot;æ›¹é›ªèŠ¹&quot;));&#125; ç›‘å¬å™¨1234567891011121314@Servicepublic class BookService &#123; @RabbitListener(queues = &quot;amqpadmin.queue&quot;) public void receive(Book book)&#123; System.out.println(&quot;æ”¶åˆ°æ¶ˆæ¯:&quot; + book); &#125; @RabbitListener(queues = &quot;amqpadmin.queue&quot;) public void receive2(Message message)&#123; System.out.println(message.getBody()); System.out.println(message.getMessageProperties()); &#125;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"LayUIå¿«é€Ÿå…¥é—¨","slug":"LayUIå¿«é€Ÿå…¥é—¨","date":"2020-09-16T16:00:00.000Z","updated":"2020-12-28T00:30:44.127Z","comments":true,"path":"posts/3956353174.html","link":"","permalink":"http://blog.oy6090.top/posts/3956353174.html","excerpt":"","text":"[TOC] ä¸€ã€å¼•è¨€1.1 ä»‹ç» å®˜ç½‘ï¼šhttps://www.layui.com/ åœ¨å®˜ç½‘é¦–é¡µï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸‹è½½ LayUI äºŒã€ç¯å¢ƒæ­å»º2.1 ä¸‹è½½ åœ¨å®˜ç½‘ä¸‹è½½å³å¯å®Œæˆ ä¸‹è½½çš„ LayUI è§£å‹åï¼Œå°†å…¶ä¸­çš„ layUI ç›®å½•å¯¼å…¥é¡¹ç›®ä¸­ å°† layui ç›®å½•æ”¾åˆ° webapp ç›®å½•ä¸‹ åœ¨ JSP ä¸­å¯¼å…¥ layui ä¾èµ– 12&lt;link rel=&quot;stylesheet&quot; href=&quot;$&#123;pageContext.servletContext.contextPath&#125;/layui/css/layui.css&quot;&gt;&lt;script src=&quot;$&#123;pageContext.servletContext.contextPath&#125;&quot;&gt;&lt;/script&gt; æˆ– 12&lt;link rel=&quot;stylesheet&quot; href=&quot;$&#123;pageContext.request.contextPath&#125;/layui/css/layui.css&quot;&gt;&lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/layui/layui.js&quot;&gt;&lt;/script&gt; ä¸‰ã€é¡µé¢å…ƒç´ 3.1 å¸ƒå±€ å“åº”å¼æ …æ ¼å¸ƒå±€ï¼Œæ¯è¡Œåˆ† 12 ç­‰åˆ† 123456789101112131415161718192021222324252627&lt;!--layui-containerå±…ä¸­æ˜¾ç¤ºæœ‰å›ºå®šçš„å°ºå¯¸ï¼š layui-fiuid å æ»¡è¡Œå®½--&gt;&lt;!--&lt;div class=&quot;layui-container&quot;&gt;--&gt;&lt;div class=&quot;layui-fluid&quot;&gt; &lt;div class=&quot;layui-row&quot;&gt; &lt;div class=&quot;layui-col-md9 layui-col-lg6 layui-bg-orange&quot;&gt;ä½ çš„å†…å®¹ 9/12&lt;/div&gt; &lt;div class=&quot;layui-col-md3 layui-col-lg6 layui-bg-gray&quot;&gt;ä½ çš„å†…å®¹ 3/12&lt;/div&gt; &lt;/div&gt; &lt;%--ç§»åŠ¨è®¾å¤‡ã€å¹³æ¿ã€æ¡Œé¢ç«¯çš„ä¸åŒè¡¨ç°ï¼š--%&gt; &lt;div class=&quot;layui-row&quot;&gt; &lt;div class=&quot;layui-col-xs6 layui-col-sm6 layui-col-md4 layui-col-lg3&quot;&gt; ç§»åŠ¨ï¼š6/12 | å¹³æ¿ï¼š6/12 | æ¡Œé¢ï¼š4/12; &lt;/div&gt; &lt;div class=&quot;layui-col-xs6 layui-col-sm6 layui-col-md4 layui-col-lg3&quot;&gt; ç§»åŠ¨ï¼š6/12 | å¹³æ¿ï¼š6/12 | æ¡Œé¢ï¼š4/12; &lt;/div&gt; &lt;div class=&quot;layui-col-xs4 layui-col-sm12 layui-col-md4 layui-col-lg3&quot;&gt; ç§»åŠ¨ï¼š4/12 | å¹³æ¿ï¼š12/12 | æ¡Œé¢ï¼š4/12; &lt;/div&gt; &lt;div class=&quot;layui-col-xs4 layui-col-sm7 layui-col-md8 layui-col-lg3&quot;&gt; ç§»åŠ¨ï¼š4/12 | å¹³æ¿ï¼š7/12 | æ¡Œé¢ï¼š8/12; &lt;/div&gt; &lt;div class=&quot;layui-col-xs4 layui-col-sm5 layui-col-md4 layui-col-lg3&quot;&gt; ç§»åŠ¨ï¼š4/12 | å¹³æ¿ï¼š5/12 | æ¡Œé¢ï¼š4/12; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 3.2 å­—ä½“å›¾æ ‡ class=â€layui-icon å…·ä½“çš„å›¾æ ‡æ ·å¼â€ 12345&lt;i class=&quot;layui-icon layui-icon-heart-fill&quot;&gt;&lt;/i&gt;&lt;i class=&quot;layui-icon layui-icon-light&quot; style=&quot;font-size: 30px; color: #1E9FFF;&quot;&gt;&lt;/i&gt; 3.3 æŒ‰é’® class=â€layui-btn ä¸»é¢˜ æ ·å¼â€ 1234567891011121314151617181920212223&lt;button type=&quot;button&quot; class=&quot;layui-btn&quot;&gt;æ ‡å‡†çš„æŒ‰é’®&lt;/button&gt;&lt;a href=&quot;http://www.layui.com&quot; class=&quot;layui-btn&quot;&gt;å¯è·³è½¬çš„æŒ‰é’®&lt;/a&gt;&lt;a href=&quot;http://www.layui.com&quot; class=&quot;layui-btn layui-btn-primary&quot; &gt;ä¸»é¢˜çš„æŒ‰é’®&lt;/a&gt;&lt;a href=&quot;http://www.layui.com&quot; class=&quot;layui-btn layui-btn-primary layui-btn-sm&quot; &gt;ä¸»é¢˜çš„æŒ‰é’®&lt;/a&gt;&lt;a href=&quot;http://www.layui.com&quot; class=&quot;layui-btn layui-btn-primary layui-btn-radius &quot; &gt;åœ†è§’çš„æŒ‰é’®&lt;/a&gt;&lt;a href=&quot;http://www.layui.com&quot; class=&quot;layui-btn layui-btn-primary layui-btn-sm layui-btn-radius &quot;&gt; &lt;i class=&quot;layui-icon layui-icon-heart-fill&quot; style=&quot;font-size: 30px; color: #1E9FFF;&quot; &gt;&lt;/i&gt; å¸¦å›¾æ ‡çš„æŒ‰é’®&lt;/a&gt; 3.4 è¡¨å• class=â€layui-fromâ€ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697&lt;form class=&quot;layui-form&quot; action=&quot;&quot;&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;è¾“å…¥æ¡†&lt;/label&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;title&quot; required lay-verify=&quot;required&quot; placeholder=&quot;è¯·è¾“å…¥æ ‡é¢˜&quot; autocomplete=&quot;off&quot; class=&quot;layui-input&quot; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;å¯†ç æ¡†&lt;/label&gt; &lt;div class=&quot;layui-input-inline&quot;&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot; required lay-verify=&quot;required&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot; autocomplete=&quot;off&quot; class=&quot;layui-input&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-mid layui-word-aux&quot;&gt;è¾…åŠ©æ–‡å­—&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;é€‰æ‹©æ¡†&lt;/label&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;select name=&quot;city&quot; lay-verify=&quot;required&quot;&gt; &lt;option value=&quot;&quot;&gt;è¯·é€‰æ‹©åŸå¸‚&lt;/option&gt; &lt;option value=&quot;0&quot;&gt;åŒ—äº¬&lt;/option&gt; &lt;option value=&quot;1&quot;&gt;ä¸Šæµ·&lt;/option&gt; &lt;option value=&quot;2&quot;&gt;å¹¿å·&lt;/option&gt; &lt;option value=&quot;3&quot;&gt;æ·±åœ³&lt;/option&gt; &lt;option value=&quot;4&quot;&gt;æ­å·&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;å¤é€‰æ¡†&lt;/label&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;input type=&quot;checkbox&quot; name=&quot;like[write]&quot; title=&quot;å†™ä½œ&quot; /&gt; &lt;input type=&quot;checkbox&quot; name=&quot;like[read]&quot; title=&quot;é˜…è¯»&quot; checked /&gt; &lt;input type=&quot;checkbox&quot; name=&quot;like[dai]&quot; title=&quot;å‘å‘†&quot; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;å¼€å…³&lt;/label&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;input type=&quot;checkbox&quot; name=&quot;switch&quot; lay-skin=&quot;switch&quot; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;å•é€‰æ¡†&lt;/label&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;ç”·&quot; title=&quot;ç”·&quot; /&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;å¥³&quot; title=&quot;å¥³&quot; checked /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item layui-form-text&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;æ–‡æœ¬åŸŸ&lt;/label&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;textarea name=&quot;desc&quot; placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; class=&quot;layui-textarea&quot; &gt;&lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;button class=&quot;layui-btn layui-btn-lg&quot; lay-submit lay-filter=&quot;formDemo&quot;&gt; ç«‹å³æäº¤ &lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;layui-btn&quot; id=&quot;test1&quot;&gt; &lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe67c;&lt;/i&gt;ä¸Šä¼ å›¾ç‰‡ &lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt;&lt;script&gt; // å¿…é¡»è¦å¯¼å…¥formæ¨¡å—ï¼Œæ‰èƒ½ä¿è¯è¡¨å•æ­£å¸¸æ¸²æŸ“ layui.use(&quot;form&quot;, function () &#123; var form = layui.form; //ç›‘å¬æäº¤ form.on(&quot;submit(formDemo)&quot;, function (data) &#123; // dataå°±æ˜¯è¡¨å•ä¸­çš„æ‰€æœ‰æ•°æ® layer.msg(JSON.stringify(data.field)); return false; &#125;); &#125;);&lt;/script&gt; 3.5 æ•°æ®è¡¨æ ¼3.5.1 åŠ¨æ€è¡¨æ ¼ åŠ¨æ€è¡¨æ ¼ 12345678910111213141516171819202122232425&lt;table id=&quot;demo&quot; lay-filter=&quot;test&quot;&gt;&lt;/table&gt;&lt;script&gt; // å¿…é¡»è¦å¯¼å…¥ tableæ¨¡å— layui.use(&#x27;table&#x27;,...) layui.use(&quot;table&quot;, function () &#123; var table = layui.table; // ä¸ºè¡¨æ ¼å¡«å……æ•°æ® table.render(&#123; elem: &quot;#demo&quot;, height: 312, url: &quot;$&#123;pageContext.request.contextPath&#125;/data.jsp&quot;, //è·å–æ•°æ® page: true, // å¼€å¯åˆ†é¡µ cols: [ [ //è¡¨å¤´ &#123; field: &quot;id&quot;, title: &quot;ID&quot;, sort: true &#125;, &#123; field: &quot;username&quot;, width: 80, title: &quot;ç”¨æˆ·å&quot; &#125;, &#123; field: &quot;sex&quot;, width: 80, title: &quot;æ€§åˆ«&quot;, sort: true &#125;, &#123; field: &quot;city&quot;, title: &quot;åŸå¸‚&quot; &#125;, //æ²¡å®šä¹‰å®½åº¦åˆ™å æ»¡å‰©ä½™æ‰€æœ‰å®½åº¦ï¼Œéƒ½ä¸å®šä¹‰åˆ™æ‰€æœ‰åˆ—å‡åˆ† &#123; field: &quot;score&quot;, width: 80, title: &quot;è¯„åˆ†&quot;, sort: true &#125;, &#123; field: &quot;right&quot;, title: &quot;æ“ä½œ&quot;, toolbar: &quot;#barDemo&quot; &#125;, ], ], &#125;); &#125;);&lt;/script&gt; æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š code: 0 ä»£è¡¨æŸ¥è¯¢æˆåŠŸï¼Œ ä¸º 1 æ˜¯ï¼Œ ä¼šæ˜¾ç¤º msg ä¸­çš„å†…å®¹ count æ˜¯ä¸ºäº†åˆ†é¡µå‡†å¤‡çš„ï¼Œå…±æœ‰å¤šå°‘æ¡æ•°æ® 1234567891011121314151617181920212223// æ ¼å¼å¦‚ä¸‹ï¼š&#123; &quot;msg&quot;: &quot;no data&quot;, &quot;code&quot;: 0, &quot;data&quot;: [ &#123; &quot;id&quot;: 1, &quot;username&quot;: &quot;shine1&quot;, &quot;sex&quot;: &quot;ç”·&quot;, &quot;city&quot;: &quot;ä¿å®š&quot;, &quot;score&quot;: 100 &#125;, &#123; &quot;id&quot;: 2, &quot;username&quot;: &quot;shine2&quot;, &quot;sex&quot;: &quot;å¥³&quot;, &quot;city&quot;: &quot;çŸ³å®¶åº„&quot;, &quot;score&quot;: 100 &#125;, &#123; &quot;id&quot;: 3, &quot;username&quot;: &quot;shine3&quot;, &quot;sex&quot;: &quot;ç”·&quot;, &quot;city&quot;: &quot;é‚¢å°&quot;, &quot;score&quot;: 100 &#125; ], &quot;count&quot;: 100&#125; 3.5.2 åˆ†é¡µå‚æ•° åˆ†é¡µæ¡ç»†èŠ‚å®šåˆ¶ 12345678910111213141516171819202122&lt;table id=&quot;demo&quot; lay-filter=&quot;test&quot;&gt;&lt;/table&gt;&lt;script&gt; // å¿…é¡»è¦å¯¼å…¥ tableæ¨¡å— layui.use(&#x27;table&#x27;,...) layui.use(&#x27;table&#x27;, function()&#123; var table = layui.table; // ä¸ºè¡¨æ ¼å¡«å……æ•°æ® table.render(&#123; elem: &#x27;#demo&#x27; ,height: 312 ,url: &#x27;$&#123;pageContext.request.contextPath&#125;/data.jsp&#x27; //è·å–æ•°æ® ,page: &#123;limit:1//æ¯é¡µæ˜¾ç¤º1æ¡ ,limits:[1,2,3] //å¯é€‰æ¯é¡µæ¡æ•° ,first: &#x27;é¦–é¡µ&#x27; //é¦–é¡µæ˜¾ç¤ºæ–‡å­—ï¼Œé»˜è®¤æ˜¾ç¤ºé¡µå· ,last: &#x27;å°¾é¡µ&#x27; ,prev: &#x27;&lt;em&gt;â†&lt;/em&gt;&#x27; //ä¸Šä¸€é¡µæ˜¾ç¤ºå†…å®¹ï¼Œé»˜è®¤æ˜¾ç¤º &gt; &lt; ,next: &#x27;&lt;i class=&quot;layui-icon layui-icon-next&quot;&gt;&lt;/i&gt;&#x27; ,layout:[&#x27;prev&#x27;, &#x27;page&#x27;, &#x27;next&#x27;,&#x27;count&#x27;,&#x27;limit&#x27;,&#x27;skip&#x27;,&#x27;refresh&#x27;] //è‡ªå®šä¹‰åˆ†é¡µå¸ƒå±€ &#125; //å¼€å¯åˆ†é¡µ ,cols: [[.....]] &#125;); &#125;);&lt;/script&gt; 3.5.3 æ˜¾ç¤ºå·¥å…·æ  å³ä¸Šè§’å·¥å…·æŒ‰é’® toolbar:true 123456789101112131415&lt;script&gt; // å¿…é¡»è¦å¯¼å…¥ tableæ¨¡å— layui.use(&#x27;table&#x27;,...) layui.use(&#x27;table&#x27;, function()&#123; var table = layui.table; // ä¸ºè¡¨æ ¼å¡«å……æ•°æ® table.render(&#123; elem: &#x27;#demo&#x27; ,height: 312 ,toolbar:true ,url: &#x27;$&#123;pageContext.request.contextPath&#125;/data.jsp&#x27; //è·å–æ•°æ® ,page: &#123;...&#125; //å¼€å¯åˆ†é¡µ ,cols: [[...]] &#125;); &#125;);&lt;/script&gt; 3.5.4 æ“ä½œæŒ‰é’® ä¸ºæ¯è¡Œå¢åŠ æ“ä½œæŒ‰é’® 123456789101112131415161718192021222324252627282930&lt;table id=&quot;demo&quot; lay-filter=&quot;test&quot;&gt;&lt;/table&gt;&lt;script&gt; // å¿…é¡»è¦å¯¼å…¥ tableæ¨¡å— layui.use(&#x27;table&#x27;,...) layui.use(&quot;table&quot;, function () &#123; var table = layui.table; // ä¸ºè¡¨æ ¼å¡«å……æ•°æ® table.render(&#123; elem: &quot;#demo&quot;, height: 312, toolbar: true, url: &quot;$&#123;pageContext.request.contextPath&#125;/data.jsp&quot;, //è·å–æ•°æ® cols: [ [ //è¡¨å¤´ &#123; field: &quot;id&quot;, title: &quot;ID&quot;, sort: true &#125;, &#123; field: &quot;username&quot;, width: 80, title: &quot;ç”¨æˆ·å&quot; &#125;, &#123; field: &quot;sex&quot;, width: 80, title: &quot;æ€§åˆ«&quot;, sort: true &#125;, &#123; field: &quot;city&quot;, title: &quot;åŸå¸‚&quot; &#125;, //æ²¡å®šä¹‰å®½åº¦åˆ™å æ»¡å‰©ä½™æ‰€æœ‰å®½åº¦ï¼Œéƒ½ä¸å®šä¹‰åˆ™æ‰€æœ‰åˆ—å‡åˆ† &#123; field: &quot;score&quot;, width: 80, title: &quot;è¯„åˆ†&quot;, sort: true &#125;, &#123; field: &quot;right&quot;, title: &quot;æ“ä½œ&quot;, toolbar: &quot;#barDemo&quot; &#125;, ], ], &#125;); &#125;);&lt;/script&gt;&lt;!-- å¦‚ä¸‹scriptå¯ä»¥å®šä¹‰åœ¨é¡µé¢çš„ä»»ä½•ä½ç½® --&gt;&lt;script type=&quot;text/html&quot; id=&quot;barDemo&quot;&gt; &lt;a class=&quot;layui-btn layui-btn-xs&quot; lay-event=&quot;edit&quot;&gt;ç¼–è¾‘&lt;/a&gt; &lt;a class=&quot;layui-btn layui-btn-danger layui-btn-xs&quot; lay-event=&quot;del&quot;&gt;åˆ é™¤&lt;/a&gt;&lt;/script&gt; 3.5.5 æ“ä½œæŒ‰é’®å›è°ƒ æŒ‰é’®çš„å•å‡»äº‹ä»¶ 1234567891011121314151617181920212223242526// äº‹ä»¶æ³¨å†Œtable.on(&quot;tool(test)&quot;, function (obj) &#123; var data = obj.data; //è·å¾—å½“å‰è¡Œæ•°æ® //è·å¾— lay-event å¯¹åº”çš„å€¼ï¼ˆä¹Ÿå¯ä»¥æ˜¯è¡¨å¤´çš„ event å‚æ•°å¯¹åº”çš„å€¼ï¼‰ var layEvent = obj.event; var tr = obj.tr; //è·å¾—å½“å‰è¡Œ tr çš„ DOM å¯¹è±¡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ if (layEvent === &quot;del&quot;) &#123; //åˆ é™¤ layer.confirm(&quot;çœŸçš„åˆ é™¤è¡Œä¹ˆ&quot;, function (index) &#123; // å‘æœåŠ¡ç«¯å‘é€åˆ é™¤è¯·æ±‚ // æ­¤å¤„å¯ä»¥å‘é€ajax obj.del(); //åˆ é™¤å¯¹åº”è¡Œï¼ˆtrï¼‰çš„DOMç»“æ„ layer.close(index); &#125;); &#125; else if (layEvent === &quot;edit&quot;) &#123; //ç¼–è¾‘ // å‘æœåŠ¡ç«¯å‘é€æ›´æ–°è¯·æ±‚ // åŒæ­¥æ›´æ–°ç¼“å­˜å¯¹åº”çš„å€¼ obj.update(&#123; username: &quot;shine001&quot;, city: &quot;åŒ—äº¬&quot;, sex: &quot;å¥³&quot;, score: 99, &#125;); &#125;&#125;); 3.6 å¯¼èˆª å¯¼èˆªæ¡ class = â€œlayui-navâ€ æ°´å¹³å¯¼èˆªæ¡ class=â€layui-nav layui-treeâ€ å‚ç›´å¯¼èˆªæ¡ 12345678910111213141516171819&lt;ul class=&quot;layui-nav&quot; lay-filter=&quot;&quot;&gt; &lt;li class=&quot;layui-nav-item&quot;&gt;&lt;a href=&quot;&quot;&gt;æœ€æ–°æ´»åŠ¨&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;layui-nav-item layui-this&quot;&gt;&lt;a href=&quot;&quot;&gt;äº§å“&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;layui-nav-item&quot;&gt;&lt;a href=&quot;&quot;&gt;å¤§æ•°æ®&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;layui-nav-item&quot;&gt; &lt;a href=&quot;javascript:;&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/a&gt; &lt;dl class=&quot;layui-nav-child&quot;&gt; &lt;!-- äºŒçº§èœå• --&gt; &lt;dd&gt;&lt;a href=&quot;&quot;&gt;ç§»åŠ¨æ¨¡å—&lt;/a&gt;&lt;/dd&gt; &lt;dd&gt;&lt;a href=&quot;&quot;&gt;åå°æ¨¡ç‰ˆ&lt;/a&gt;&lt;/dd&gt; &lt;dd&gt;&lt;a href=&quot;&quot;&gt;ç”µå•†å¹³å°&lt;/a&gt;&lt;/dd&gt; &lt;/dl&gt; &lt;/li&gt; &lt;li class=&quot;layui-nav-item&quot;&gt;&lt;a href=&quot;&quot;&gt;ç¤¾åŒº&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;script&gt; //æ³¨æ„ï¼šå¯¼èˆª ä¾èµ– element æ¨¡å—ï¼Œå¦åˆ™æ— æ³•è¿›è¡ŒåŠŸèƒ½æ€§æ“ä½œ layui.use(&quot;element&quot;, function () &#123;&#125;);&lt;/script&gt; 3.7 åŠ¨ç”» LayUI æä¾›åŠ¨ç”»æ”¯æŒ æ ·å¼è¡¨ æè¿° layui-anim-up ä»æœ€åº•å±‚å¾€ä¸Šæ»‘å…¥ layui-anim-upbit å¾®å¾®å¾€ä¸Šæ»‘å…¥ layui-anim-scale å¹³æ»‘æ”¾å¤§ layui-anim-scaleSpring å¼¹ç°§å¼æ”¾å¤§ layui-anim-fadein æ¸ç° layui-anim-fadeout æ¸éš layui-anim-rotate 360 åº¦æ—‹è½¬ è¿½åŠ ï¼šlayui-anim-loop å¾ªç¯åŠ¨ç”» 123456789&lt;!-- æ•´ä¸ªdivä¼šåœ¨é¡µé¢æ˜¾ç¤ºæ—¶ï¼Œä»¥ç‰¹å®šåŠ¨ç”»æ˜¾ç¤ºå‡ºæ¥ --&gt;&lt;div class=&quot;layui-anim layui-anim-up&quot; style=&quot;height: 100px&quot;&gt;aa&lt;/div&gt;&lt;!-- é¢å¤–æ·»åŠ æ ·å¼ç±»ï¼šlayui-anim-loop ä½¿å¾—åŠ¨ç”»å¾ªç¯è¿è¡Œ --&gt;&lt;div class=&quot;layui-anim layui-anim-rotate layui-anim-loop&quot; style=&quot;text-align:center;line-height: 100px;margin-left:50px;height: 100px;width:100px&quot;&gt; bb&lt;/div&gt; å››ã€å†…ç½®æ¨¡å—4.1 layer4.1.1 å¼¹çª—æ–¹æ³• å¼¹çª— msg()ã€alert()ã€confirm() 12345678910&lt;script&gt; // å¯¼å…¥ layeræ¨¡å— layui.use([&quot;layer&quot;],function()&#123; var layer = layui.layer; layer.msg(&quot;hello world!!&quot;); layer.msg(&quot;ç¡®å®šå—ï¼Ÿ&quot;,&#123;btn:[&quot;ç¡®å®šï¼&quot;,&quot;æ”¾å¼ƒï¼&quot;], yes:function(i)&#123;layer.close(i);layer.msg(&quot;yes!!!&quot;)&#125;, btn2:function(i)&#123;layer.close(i);layer.msg(&quot;no!!!&quot;)&#125;&#125; );&lt;/script&gt; 123456789101112&lt;script&gt; // å¯¼å…¥ layeræ¨¡å— layui.use([&quot;layer&quot;],function()&#123; var layer = layui.layer; //0-6 7ç§å›¾æ ‡ 0:warning 1:success 2:error 3:question 4:lock 5:å“­è„¸ 6ï¼šç¬‘è„¸ layer.alert(&quot;alertå¼¹æ¡†è“&quot;, &#123;title:&#x27;alert&#x27;,icon:6 &#125;, function()&#123;//ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®æ—¶çš„å›è°ƒ layer.msg(&quot;å¥½æ»´&quot;); &#125; );&lt;/script&gt; 12345678910&lt;script&gt; // å¯¼å…¥ layeræ¨¡å— layui.use([&quot;layer&quot;],function()&#123; var layer = layui.layer; layer.confirm(&quot;ä½ ç¡®å®šè¦åˆ é™¤å—?&quot;, &#123;shade:false,icon:3,btn:[&quot;å¥½æ»´&quot;,&quot;ä¸è¡Œ&quot;]&#125;, function()&#123;layer.msg(&quot;å¥½æ»´ï¼&quot;);&#125;, function()&#123;layer.msg(&quot;ä¸è¡Œï¼&quot;)&#125; );&lt;/script&gt; 4.1.2 å¼¹çª—å±æ€§ type å¼¹çª—ç±»å‹ï¼Œå¯é€‰å€¼ 0-4 title å¼¹çª—æ ‡é¢˜ï¼Œ å¯é€‰å€¼ text/array content å¼¹çª—å†…å®¹ï¼Œ å¯é€‰å€¼ text/html/dom 123456789101112131415161718192021222324&lt;script&gt; // å¯¼å…¥ layeræ¨¡å— layui.use([&quot;layer&quot;], function () &#123; var layer = layui.layer; layer.open(&#123; type: 1, // æ¶ˆæ¯æ¡†ï¼Œæ²¡æœ‰ç¡®å®šæŒ‰é’® title: [&quot;hello&quot;, &quot;padding-left:5px&quot;], // æ ‡é¢˜ï¼ŒåŠæ ‡é¢˜æ ·å¼ content: layui.$(&quot;#testmain&quot;), // domæ ¼å¼ offset: &quot;rb&quot;, //å¯ä»¥åœ¨å³ä¸‹è§’æ˜¾ç¤º shade: false, //æ˜¯å¦é®ç½© &#125;); layer.open(&#123; type: 2, // iframeåŠ è½½ï¼Œéœ€è¦ä¸€ä¸ªurl content: &quot;$&#123;pageContext.request.contextPath&#125;/XX&quot;, &#125;); &#125;);&lt;/script&gt;&lt;div id=&quot;testmain&quot; style=&quot;display:none;padding:10px; height: 173px; width: 275px;&quot;&gt; hello world!&lt;/div&gt; 4.2 layDate æ—¥æœŸæ¡† 1234567891011121314151617181920212223242526272829303132&lt;form class=&quot;layui-form layui-form-pane&quot; action=&quot;&quot; method=&quot;post&quot;&gt; &lt;!-- layui-form-item ä¸€ä¸ªè¾“å…¥é¡¹--&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;label class=&quot;layui-form-label&quot;&gt;ç”Ÿæ—¥&lt;/label&gt; &lt;!-- layui-input-block è¾“å…¥æ¡†ä¼šå æ»¡é™¤æ–‡å­—å¤–çš„æ•´è¡Œ --&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;input readonly id=&quot;birth&quot; type=&quot;text&quot; name=&quot;birth&quot; placeholder=&quot;è¯·é€‰æ‹©ç”Ÿæ—¥æ—¥æœŸ&quot; autocomplete=&quot;off&quot; class=&quot;layui-input&quot; /&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt;&lt;script&gt; layui.use([&quot;laydate&quot;, &quot;form&quot;], function () &#123; var laydate = layui.laydate; var upload = layui.upload; var layer = layui.layer; //æ‰§è¡Œä¸€ä¸ªlaydateå®ä¾‹ laydate.render(&#123; elem: &quot;#birth&quot;, //æŒ‡å®šå…ƒç´  format: &quot;yyyy/MM/dd&quot;, value: &quot;2012/12/12&quot;, //é»˜è®¤å€¼ // value:new Date() //é»˜è®¤å€¼ &#125;); &#125;);&lt;/script&gt; 4.3 upload ä¸Šä¼ æŒ‰é’® 12345678910111213141516171819202122232425262728293031323334353637383940&lt;form class=&quot;layui-form layui-form-pane&quot; action=&quot;&quot; method=&quot;post&quot;&gt; &lt;div class=&quot;layui-form-item&quot;&gt; &lt;div class=&quot;layui-input-block&quot;&gt; &lt;button class=&quot;layui-btn layui-btn-lg&quot; lay-submit lay-filter=&quot;formDemo&quot;&gt; ç«‹å³æäº¤ &lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;layui-btn&quot; id=&quot;test1&quot;&gt; &lt;i class=&quot;layui-icon&quot;&gt;&amp;#xe67c;&lt;/i&gt;ä¸Šä¼ å›¾ç‰‡ &lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt;&lt;script&gt; layui.use([&quot;upload&quot;, &quot;layer&quot;], function () &#123; var upload = layui.upload; var layer = layui.layer; //æ‰§è¡Œä¸€ä¸ªlaydateå®ä¾‹ laydate.render(&#123; elem: &quot;#birth&quot;, //æŒ‡å®šå…ƒç´  format: &quot;yyyy/MM/dd&quot;, value: &quot;2012/12/12&quot;, //é»˜è®¤å€¼ // value:new Date() //é»˜è®¤å€¼ &#125;); //æ‰§è¡Œå®ä¾‹ var uploadInst = upload.render(&#123; elem: &quot;#test1&quot;, //ç»‘å®šå…ƒç´  url: &quot;/data.jsp&quot;, //ä¸Šä¼ æ¥å£ //,accept:&#x27;images&#x27; // fileä»£è¡¨æ‰€æœ‰æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯imagesä»£è¡¨å›¾ç‰‡ size: 100, // æ–‡ä»¶æœ€å¤§100kb done: function (res) &#123; //ä¸Šä¼ å®Œæ¯•å›è°ƒ layer.msg(&quot;ok&quot;); &#125;, error: function () &#123; //è¯·æ±‚å¼‚å¸¸å›è°ƒ layer.msg(&quot;error&quot;); &#125;, &#125;); &#125;);&lt;/script&gt; 4.4 carousel è½®æ’­å›¾ 1234567891011121314151617181920&lt;div class=&quot;layui-carousel&quot; id=&quot;test1&quot;&gt; &lt;div carousel-item style=&quot;text-align: center;line-height: 280px&quot;&gt; &lt;div&gt;æ¡ç›®1&lt;/div&gt; &lt;div&gt;æ¡ç›®2&lt;/div&gt; &lt;div&gt;æ¡ç›®3&lt;/div&gt; &lt;div&gt;æ¡ç›®4&lt;/div&gt; &lt;div&gt;æ¡ç›®5&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script&gt; layui.use([&quot;carousel&quot;], function () &#123; var carousel = layui.carousel; //å»ºé€ å®ä¾‹ carousel.render(&#123; elem: &quot;#test1&quot;, width: &quot;100%&quot;, //è®¾ç½®å®¹å™¨å®½åº¦ arrow: &quot;always&quot;, //å§‹ç»ˆæ˜¾ç¤ºç®­å¤´ &#125;); &#125;);&lt;/script&gt; å…¶ä»–çš„è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://blog.oy6090.top/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"layui","slug":"layui","permalink":"http://blog.oy6090.top/tags/layui/"}]},{"title":"SpringBoot å¯åŠ¨é…ç½®åŸç†","slug":"springBoot å¯åŠ¨é…ç½®åŸç†","date":"2020-09-14T16:00:00.000Z","updated":"2020-10-25T02:31:41.049Z","comments":true,"path":"posts/2781775372.html","link":"","permalink":"http://blog.oy6090.top/posts/2781775372.html","excerpt":"","text":"springBoot å¯åŠ¨é…ç½®åŸç† springBoot å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶ é…ç½®åœ¨ META_INF/spring.factories ApplicationContextInitializer SpringApplicationRunListener åªéœ€è¦æ”¾åœ¨ ioc å®¹å™¨ä¸­ ApplicationRunner CommanLineRunner å¯åŠ¨æµç¨‹ï¼š ä¸€ã€ åˆ›å»º SpringApplication å¯¹è±¡ï¼ˆ1.x ç‰ˆæœ¬ï¼‰123456789101112131415initialize(sources);private void initialize(Object[] sources) &#123; // ä¿å­˜ä¸»é…ç½®ç±» if (sources != null &amp;&amp; sources.length &gt; 0) &#123; this.sources.addAll(Arrays.asList(sources)); &#125; // åˆ¤æ–­å½“å‰æ˜¯å¦ä¸€ä¸ªwebåº”ç”¨ this.webEnvironment = deduceWebEnvironment(); // ä»ç±»çš„è·¯å¾„ä¸‹æ‰¾åˆ°META-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationContextInitializerï¼›ç„¶åä¿å­˜èµ·æ¥ setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class)); // ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°META-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationListener setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class)); // ä»å¤šä¸ªé…ç½®ç±»ä¸­æ‰¾åˆ°æœ‰mainæ–¹æ³•çš„ä¸»é…ç½®ç±» this.mainApplicationClass = deduceMainApplicationClass();&#125; äºŒã€ è¿è¡Œ run æ–¹æ³•(1.x å’Œ 2.x)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public ConfigurableApplicationContext run(String... args) &#123; StopWatch stopWatch = new StopWatch(); stopWatch.start(); ConfigurableApplicationContext context = null; Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = new ArrayList(); this.configureHeadlessProperty(); // è·å–SpringApplicationRunListeners; ä»ç±»è·¯å¾„ä¸‹META-INF/spring.factories SpringApplicationRunListeners listeners = this.getRunListeners(args); // å›è°ƒæ‰€æœ‰çš„è·å–SpringApplicationApplicationRunListener.starting()æ–¹æ³• listeners.starting(); Collection exceptionReporters; try &#123; //å°è£…å‘½ä»¤è¡Œå‚æ•° ApplicationArguments applicationArguments = new DefaultApplicationArguments(args); // å‡†å¤‡ç¯å¢ƒ ConfigurableEnvironment environment = this.prepareEnvironment(listeners, applicationArguments); this.configureIgnoreBeanInfo(environment); // åˆ›å»ºç¯å¢ƒå®Œæˆåå›è°ƒSpringApplicationRunListener.environmentPrepared();è¡¨ç¤ºç¯å¢ƒå‡†å¤‡å®Œæˆ Banner printedBanner = this.printBanner(environment); // åˆ›å»ºApplicationContext; å†³å®šåˆ›å»ºwebçš„iocè¿˜æ˜¯æ™®é€šçš„ioc context = this.createApplicationContext(); exceptionReporters = this.getSpringFactoriesInstances(SpringBootExceptionReporter.class, new Class[]&#123;ConfigurableApplicationContext.class&#125;, context); // å‡†å¤‡ä¸Šä¸‹æ–‡ç¯å¢ƒï¼›å°†environmentä¿å­˜åˆ°iocä¸­ï¼›è€Œä¸”applyInitalizers(); // applyInitalizers(): å›è°ƒä¹‹å‰ä¿å­˜çš„æ‰€æœ‰çš„ApplicationContextInitalizerçš„initzeçš„æ–¹æ³• // å›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextPrepared() this.prepareContext(context, environment, listeners, applicationArguments, printedBanner); // propareContextè¿è¡Œå®Œæˆä¹‹åå›è°ƒæ‰€æœ‰çš„SpringApplicationRunLitsenerçš„contextLocaded(); // åˆ·æ–°å®¹å™¨ï¼› iocå®¹å™¨åˆå§‹åŒ–ï¼ˆå¦‚æœæ˜¯webåº”ç”¨è¿˜ä¼šåˆ›å»ºåµŒå…¥å¼çš„Tomcatï¼‰; // æ‰«æ,åˆ›å»º,åŠ è½½æ‰€æœ‰ç»„ä»¶çš„åœ°æ–¹ this.refreshContext(context); // ä»iocå®¹å™¨ä¸­è·å–æ‰€æœ‰çš„ApplicationRunnerå’ŒCommandLineRunnerè¿›è¡Œå›è°ƒ // æ‰€æœ‰çš„Applicationå…ˆå›è°ƒï¼ŒCommandLineRunneråœ¨å›è°ƒ this.afterRefresh(context, applicationArguments); stopWatch.stop(); if (this.logStartupInfo) &#123; (new StartupInfoLogger(this.mainApplicationClass)).logStarted(this.getApplicationLog(), stopWatch); &#125; // æ‰€æœ‰çš„SpringApplicationRunListenerå›è°ƒstartedæ–¹æ³• listeners.started(context); this.callRunners(context, applicationArguments); &#125; catch (Throwable var10) &#123; this.handleRunFailure(context, var10, exceptionReporters, listeners); throw new IllegalStateException(var10); &#125; try &#123; listeners.running(context); // æ•´ä¸ªSpringBootåº”ç”¨å¯åŠ¨å®Œæˆä»¥åè¿”å›å¯åŠ¨çš„iocå®¹å™¨ return context; &#125; catch (Throwable var9) &#123; this.handleRunFailure(context, var9, exceptionReporters, (SpringApplicationRunListeners)null); throw new IllegalStateException(var9); &#125;&#125; ä¸‰ã€äº‹ä»¶ç›‘å¬æœºåˆ¶é…ç½®åœ¨ META-INF/spring.factories ApplicationContextInitalizer 1234567public class HelloApplicationContextInitializer implements ApplicationContextInitializer &#123; @Override public void initialize(ConfigurableApplicationContext configurableApplicationContext) &#123; System.out.println(&quot;ApplicationContextInitializer...initialize...&quot;+configurableApplicationContext); &#125;&#125; SpringApplicationRunListener 123456789101112131415161718192021222324252627282930313233public class HelloSpringApplicationRunListener implements SpringApplicationRunListener &#123; // å¿…é¡»è¦æœ‰æ„é€ å™¨ public HelloSpringApplicationRunListener(SpringApplication application, String[] args)&#123; &#125; @Override public void environmentPrepared(ConfigurableEnvironment environment) &#123; Object o = environment.getSystemProperties().get(&quot;os.name&quot;); System.out.println(&quot;SpringApplicationRunListener...environmentPrepared..&quot;+o); &#125; @Override public void contextPrepared(ConfigurableApplicationContext context) &#123; System.out.println(&quot;SpringApplicationRunListener...contextPrepared...&quot;); &#125; @Override public void contextLoaded(ConfigurableApplicationContext context) &#123; System.out.println(&quot;SpringApplicationRunListener...contextLoaded...&quot;); &#125; @Override public void started(ConfigurableApplicationContext context) &#123; System.out.println(&quot;SpringApplicationRunListener...starting...&quot;); &#125; @Override public void failed(ConfigurableApplicationContext context, Throwable exception) &#123; System.out.println(&quot;SpringApplicationRunListener...finished...&quot;); &#125;&#125; é…ç½®ï¼ˆMETA-INFO/spring.factoriesï¼‰ 12345org.springframework.context.ApplicationContextInitializer=\\com.oy.springboot.listener.HelloApplicationContextInitializerorg.springframework.boot.SpringApplicationRunListener=\\com.oy.springboot.listener.HelloSpringApplicationRunListener åªéœ€è¦æ”¾åœ¨ ioc å®¹å™¨ä¸­ ApplicationRunner 1234567@Componentpublic class HelloApplicationRunner implements ApplicationRunner &#123; @Override public void run(ApplicationArguments args) throws Exception &#123; System.out.println(&quot;ApplicationRunner...run....&quot;); &#125;&#125; CommandLineRunner 1234567@Componentpublic class HelloCommandLineRunner implements CommandLineRunner &#123; @Override public void run(String... args) throws Exception &#123; System.out.println(&quot;CommandLineRunner...run...&quot;+ Arrays.asList(args)); &#125;&#125; æµ‹è¯•ï¼š è‡ªå®šä¹‰ starterstarter: â€‹ 1.ç¼–å†™è‡ªåŠ¨é…ç½® 12345678910111213@Configuration //æŒ‡å®šè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»@ConditionalOnXXX //åœ¨æŒ‡å®šæ¡ä»¶æˆç«‹çš„æƒ…å†µä¸‹è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ@AutoConfigureAfter // æŒ‡å®šè‡ªåŠ¨é…ç½®ç±»çš„é¡ºåº@Bean // ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶@ConfigurationPropertie // ç»“åˆç›¸å…³xxxPropertiesç±»æ¥ç»‘å®šç›¸å…³çš„é…ç½®@EnableConfigurationProperties // è®©xxxPropertiesç”Ÿæ•ˆåŠ å…¥åˆ°å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»è¦èƒ½åŠ è½½å°†éœ€è¦å¯åŠ¨å°±èƒ½åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé…ç½®åœ¨META-INF/spring.factoriesorg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\ æ¨¡å¼ï¼š å¯åŠ¨å™¨åªç”¨æ¥åšä¾èµ–å¯¼å…¥ï¼š ä¸“é—¨æ¥å†™ä¸€ä¸ªè‡ªåŠ¨é…ç½®æ¨¡å—ï¼› å¯åŠ¨å™¨ä¾èµ–è‡ªåŠ¨é…ç½®ï¼›åˆ«äººåªéœ€è¦å¼•å…¥å¯åŠ¨å™¨ï¼ˆstarterï¼‰ eg: mybatis-spring-boot-starter; è‡ªå®šä¹‰å¯åŠ¨å™¨å-spring-boot-starter æ¼”ç¤ºæ­¥éª¤ï¼ˆå‚è€ƒï¼‰ï¼š é¡¹ç›®ç»“æ„ å…ˆåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼Œç„¶å oy-spring-boot-starterï¼ˆç”¨ maven åˆ›å»ºï¼‰å’Œ oy-spring-boot-starter-autoconfigurerï¼ˆspring Initializr åˆ›å»ºï¼‰ ã€oy-spring-boot-starterã€‘ pom.xml é…ç½® 123456&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.oy.starter&lt;/groupId&gt; &lt;artifactId&gt;oy-spring-boot-starter-autoconfigurer&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;/dependencies&gt; ã€oy-spring-boot-starter-autoconfigurerã€‘ pom.xml é…ç½® 12345678910111213141516171819202122232425262728&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.3.3.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.oy.starter&lt;/groupId&gt; &lt;artifactId&gt;oy-spring-boot-starter-autoconfigurer&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;oy-spring-boot-starter-autoconfigurer&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ã€HelloPropertiesã€‘ 123456789101112131415161718192021@ConfigurationProperties(prefix = &quot;oy.hello&quot;)public class HelloProperties &#123; private String prefix; private String suffix; public String getPrefix() &#123; return prefix; &#125; public void setPrefix(String prefix) &#123; this.prefix = prefix; &#125; public String getSuffix() &#123; return suffix; &#125; public void setSuffix(String suffix) &#123; this.suffix = suffix; &#125;&#125; ã€HelloServiceã€‘ 123456789101112131415public class HelloService &#123; HelloProperties helloProperties; public HelloProperties getHelloProperties() &#123; return helloProperties; &#125; public void setHelloProperties(HelloProperties helloProperties) &#123; this.helloProperties = helloProperties; &#125; public String sayHellAtguigu(String name)&#123; return helloProperties.getPrefix()+&quot;-&quot; +name + helloProperties.getSuffix(); &#125; ã€HelloServiceAutoConfigurationã€‘ 123456789101112131415@Configuration@ConditionalOnWebApplication // Webåº”ç”¨æ‰ç”Ÿæ•ˆ@EnableConfigurationProperties(HelloProperties.class)public class HelloServiceAutoConfiguration &#123; @Autowired HelloProperties helloProperties; @Bean public HelloService helloService()&#123; HelloService service = new HelloService(); service.setHelloProperties(helloProperties); return service; &#125;&#125; ã€spring.factoriesã€‘ 12org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\com.oy.starter.HelloServiceAutoConfiguration æµ‹è¯•ï¼š **spring-boot-08-starter-test **é¡¹ç›®ç»“æ„ ã€pom.xmlã€‘ 12345&lt;dependency&gt; &lt;groupId&gt;com.oy.stater&lt;/groupId&gt; &lt;artifactId&gt;oy-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;/dependency&gt; ã€HelloController.javaã€‘ 1234567891011@RestControllerpublic class HelloController &#123; @Autowired HelloService helloService; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return helloService.sayHellAtguigu(&quot;haha&quot;); &#125;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¸ç¼“å­˜","slug":"SpringBootä¸ç¼“å­˜","date":"2020-09-14T16:00:00.000Z","updated":"2020-10-25T02:31:32.507Z","comments":true,"path":"posts/3830795892.html","link":"","permalink":"http://blog.oy6090.top/posts/3830795892.html","excerpt":"","text":"Spring Boot ä¸ç¼“å­˜åˆ›å»ºé¡¹ç›®ç»“æ„ é›†æˆå¼€å‘å·¥å…· IDEA 2020.2 ï¼Œ ä½¿ç”¨ spring é¡¹ç›®æ­å»ºå‘å¯¼åˆ›å»º ä¸€ã€æ­å»ºåŸºæœ¬ç¯å¢ƒ å¯¼å…¥æ•°æ®åº“æ–‡ä»¶ï¼Œåˆ›å»ºå‡ºdepartment å’Œ employeeè¡¨ 1234567891011121314151617create database springboot_cache;CREATE TABLE `department` ( `id` int(11) NOT NULL AUTO_INCREMENT, `departmentName` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;CREATE TABLE `employee` ( `id` int(11) NOT NULL AUTO_INCREMENT, `lastName` varchar(255) DEFAULT NULL, `email` varchar(255) DEFAULT NULL, `gender` int(2) DEFAULT NULL, `d_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8; åˆ›å»º javaBean å°è£…æ•°æ® ã€Department.javaã€‘ 1234567891011121314151617181920212223242526272829303132public class Department &#123; private Integer id; private String departmentName; public Department() &#123; super(); // TODO Auto-generated constructor stub &#125; public Department(Integer id, String departmentName) &#123; super(); this.id = id; this.departmentName = departmentName; &#125; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public String getDepartmentName() &#123; return departmentName; &#125; public void setDepartmentName(String departmentName) &#123; this.departmentName = departmentName; &#125; @Override public String toString() &#123; return &quot;Department [id=&quot; + id + &quot;, departmentName=&quot; + departmentName + &quot;]&quot;; &#125;&#125; ã€Employee.javaã€‘ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class Employee &#123; private Integer id; private String lastName; private String email; private Integer gender; //æ€§åˆ« 1ç”· 0å¥³ private Integer dId; public Employee() &#123; super(); &#125; public Employee(Integer id, String lastName, String email, Integer gender, Integer dId) &#123; super(); this.id = id; this.lastName = lastName; this.email = email; this.gender = gender; this.dId = dId; &#125; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public String getLastName() &#123; return lastName; &#125; public void setLastName(String lastName) &#123; this.lastName = lastName; &#125; public String getEmail() &#123; return email; &#125; public void setEmail(String email) &#123; this.email = email; &#125; public Integer getGender() &#123; return gender; &#125; public void setGender(Integer gender) &#123; this.gender = gender; &#125; public Integer getdId() &#123; return dId; &#125; public void setdId(Integer dId) &#123; this.dId = dId; &#125; @Override public String toString() &#123; return &quot;Employee [id=&quot; + id + &quot;, lastName=&quot; + lastName + &quot;, email=&quot; + email + &quot;, gender=&quot; + gender + &quot;, dId=&quot; + dId + &quot;]&quot;; &#125;&#125; æ•´åˆ MyBatis æ“ä½œæ•°æ®åº“ 1ï¼‰ã€é…ç½®æ•°æ®æºä¿¡æ¯ 12345678910spring.datasource.url=jdbc:mysql://localhost:3306/springboot_cache?serverTimezone=GMT%2B8spring.datasource.username=rootspring.datasource.password=1234spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver#é…ç½®mybatisé©¼å³°å‘½åæ³•è§„åˆ™mybatis.configuration.map-underscore-to-camel-case=true#å¼€å¯ç¼“å­˜logging.level.com.oy.springboot.mapper=debug â€‹ 2)ã€ä½¿ç”¨æ³¨è§£ç‰ˆçš„ Mybatis: @MapperScan æŒ‡å®šéœ€è¦æ‰«æçš„ mapper æ¥å£æ‰€åœ¨çš„åŒ… 12345678@MapperScan(&quot;com.oy.springboot.mapper&quot;)@SpringBootApplicationpublic class SpringBoot01CacheApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot01CacheApplication.class, args); &#125;&#125; äºŒã€å¿«é€Ÿä½“éªŒç¼“å­˜==æ­¥éª¤ï¼š== â‘  å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜ @EnableCaching12345678910@MapperScan(&quot;com.oy.springboot.mapper&quot;)@SpringBootApplication@EnableCaching // å¼€å¯æ³¨è§£public class SpringBoot01CacheApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot01CacheApplication.class, args); &#125;&#125; â‘¡ æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯ @Cacheable @CacheEvict @CachePut ã€EmployeeMapperã€‘ 12345678910111213141516@Mapperpublic interface EmployeeMapper &#123; @Select(&quot;select * from employee where id =#&#123;id&#125;&quot;) public Employee getEmpById(Integer id); @Update(&quot;update employee set lastName=#&#123;lastName&#125;,email=#&#123;email&#125;, gender=#&#123;gender&#125;, d_id=#&#123;dId&#125; where id=#&#123;id&#125;&quot;) public void updateEmp(Employee employee); @Delete(&quot;delete from employee where id=#&#123;id&#125;&quot;) public void insertEmpById(Integer id); @Insert(&quot;insert into employee(lastName, email, gender, d_id) values(#&#123;lastName&#125;, #&#123;email&#125;, #&#123;gender&#125;,#&#123;dId&#125;)&quot;) public void insertEmployee(Employee employee);&#125; ã€EmployeeServiceã€‘ 12345678910111213@Servicepublic class EmployeeService &#123; @Autowired EmployeeMapper employeeMapper; @Cacheable(value = &#123;&quot;emp&quot;&#125;) public Employee getEmp(Integer id)&#123; System.out.println(&quot;æŸ¥è¯¢&quot;+id + &quot;å·å‘˜å·¥&quot;); Employee emp = employeeMapper.getEmpById(id); return emp; &#125;&#125; ã€EmployeeControllerã€‘ 123456789101112@RestControllerpublic class EmployeeController &#123; @Autowired EmployeeService employeeService; @GetMapping(&quot;emp/&#123;id&#125;&quot;) public Employee getEmployee(@PathVariable(&quot;id&quot;) Integer id)&#123; Employee emp = employeeService.getEmp(id); return emp; &#125;&#125; æµ‹è¯•ï¼š ç¬¬ä¸€æ¬¡å‘é€è¯·æ±‚ï¼š æ§åˆ¶å°è¾“å‡º å‘é€ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼ˆè¯´æ˜ç¼“å­˜ç”Ÿæ•ˆï¼‰ ä¸‰ã€ç¼“å­˜åŸç†â‘  é‡è¦çš„æ¦‚å¿µ&amp;ç¼“å­˜æ³¨è§£ æ³¨è§£ æè¿° Cache ç¼“å­˜æ¥å£ï¼Œå®šä¹‰ç¼“å­˜çš„æ“ä½œã€‚å®ç°æœ‰ï¼šRedisCacheã€EhCacheCacheã€ConcurrentMapCache ç­‰ CacheManager ç¼“å­˜ç®¡ç†å™¨ï¼Œç®¡ç†å„ç§ç¼“å­˜ï¼ˆCache ï¼‰ç»„ä»¶ @Cacheable ä¸»è¦é’ˆå¯¹æ–¹æ³•é…ç½®ï¼Œèƒ½æ ¹æ®æ–¹æ³•çš„è¯·æ±‚å‚æ•°å¯¹å…¶ç»“æœè¿›è¡Œç¼“å­˜ @CacheEvict æ¸…ç©ºç¼“å­˜ @CachePut ä¿è¯æ–¹æ³•è¢«è°ƒç”¨ï¼Œåˆå¸Œæœ›ç»“æ„åˆ«ç¼“å­˜ @EnableCaching å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜ keyGenerator ç¼“å­˜æ•°æ®æ—¶ key ç”Ÿæˆç­–ç•¥ serialize ç¼“å­˜æ•°æ®æ—¶ value åºåˆ—åŒ–ç­–ç•¥ â‘¡ CacheManager å°†æ–¹æ³•çš„è¿è¡Œç»“æœè¿›è¡Œç¼“å­˜ï¼šä»¥åå†è¦ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œä¸åœ¨è°ƒç”¨æ–¹æ³•ï¼š CacheManager ç®¡ç†å¤šä¸ª Cache ç»„ä»¶çš„ï¼Œå¯¹ç¼“å­˜çš„çœŸæ­£ CRUD(å¢åˆ æŸ¥æ”¹)æ“ä½œåœ¨ Cache ç»„ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªç¼“å­˜ç»„ä»¶æœ‰è‡ªå·±çš„å”¯ä¸€ä¸€ä¸ªåå­—ã€‚ åŸç†ï¼š è‡ªåŠ¨é…ç½®ç±»ï¼šCacheAutoConfiguration ç¼“å­˜çš„é…ç½®ç±»ï¼š 1234567891011org.springframework.boot.autoconfigure.cache.GenericCacheConfigurationorg.springframework.boot.autoconfigure.cache.JCacheCacheConfigurationorg.springframework.boot.autoconfigure.cache.EhCacheCacheConfigurationorg.springframework.boot.autoconfigure.cache.HazelcastCacheConfigurationorg.springframework.boot.autoconfigure.cache.InfinispanCacheConfigurationorg.springframework.boot.autoconfigure.cache.CouchbaseCacheConfigurationorg.springframework.boot.autoconfigure.cache.RedisCacheConfigurationorg.springframework.boot.autoconfigure.cache.CaffeineCacheConfigurationorg.springframework.boot.autoconfigure.cache.GuavaCacheConfigurationorg.springframework.boot.autoconfigure.cache.SimpleCacheConfigurationã€é»˜è®¤ã€‘org.springframework.boot.autoconfigure.cache.NoOpCacheConfiguration SimpleCacheConfiguration é…ç½®ç±»é»˜è®¤ç”Ÿæ•ˆ åœ¨ã€application.propertiesã€‘é…ç½® 1debug=true æ§åˆ¶å°è¾“å‡ºæ—¥å¿—ï¼š ç»™å®¹å™¨ä¸­æ³¨å†Œä¸€ä¸ª CacheManager: ConcurrentMaCacheManager: å¯ä»¥è·å–å’Œåˆ›å»º ConcurrentMapCache ç±»å‹çš„ç¼“å­˜ç»„ä»¶ï¼›å®ƒçš„ä½œç”¨å°†æ•°æ®ä¿å­˜ç ¸ ConcurrentMap ä¸­ã€‚ â‘¢ @Cachebleè¿è¡Œæµç¨‹ï¼š æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå…ˆå»æŸ¥çœ‹ Cacheï¼ˆç¼“å­˜ç»„ä»¶ï¼‰ï¼ŒæŒ‰ç…§ cacheName æŒ‡å®šçš„åå­—è·å–;(CacheManager å…ˆè·å–ç›¸å¯¹åº”çš„ç¼“å­˜)ï¼Œç¬¬ä¸€æ¬¡è·å–ç¼“å­˜å¦‚æœæ²¡æœ‰ Cache ç»„ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºã€‚ å» Cache ä¸­æŸ¥æ‰¾ç¼“å­˜çš„å†…å®¹ï¼Œä½¿ç”¨ä¸€ä¸ª keyï¼Œé»˜è®¤ä¸€ä¸ª keyï¼Œé»˜è®¤å°±æ˜¯æ–¹æ³•çš„å‚æ•°ï¼› key æ˜¯æŒ‰ç…§æŸç§ç­–ç•¥ç”Ÿæˆçš„ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ keyGenerator ç”Ÿæˆçš„ keyï¼š SimpleKeyGenerator ç”Ÿæˆ key çš„é»˜è®¤ç­–ç•¥ï¼š â€‹ å¦‚æœæ²¡æœ‰å‚æ•°ï¼› key=new SimpleKey() â€‹ å¦‚æœä¸€ä¸ªå‚æ•°ï¼š key=å‚æ•°çš„å€¼ â€‹ å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼š key=new SimpleKey(params); æ²¡æœ‰æŸ¥åˆ°ç¼“å­˜å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼š å°†ç›®æ ‡æ–¹æ³•è¿”å›çš„ç»“æœï¼Œæ”¾è¿›ç¼“å­˜ä¸­ @Cacheable æ ‡æ³¨çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰å…ˆæ¥æ£€æŸ¥ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œé»˜è®¤æŒ‰ç…§å‚æ•°çš„å€¼ä½œä¸º key å»æŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰å°±è¿è¡Œæ–¹æ³•å¹¶å°†ç»“æœæ”¾å…¥ç¼“å­˜ï¼›ä»¥åå†æ¥è°ƒç”¨å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ã€‚ æ ¸å¿ƒï¼š ä½¿ç”¨ CacheManagerã€ConcurrentMapCacheManagerã€‘æŒ‰ç…§åå­—å¾—åˆ° Cacheã€ConcurrentMapCacheã€‘ç»„ä»¶ key ä½¿ç”¨ keyGenerator ç”Ÿæˆçš„ï¼Œé»˜è®¤æ˜¯ SimpleKeyGenerator å±æ€§ï¼š CacheNames/value: æŒ‡å®šç¼“å­˜ç»„ä»¶çš„åå­—ï¼›å°†æ–¹æ³•çš„è¿”å›ç»“æœæ”¾åœ¨å“ªä¸ªç¼“å†²åŒºï¼Œæ˜¯æ•°ç»„çš„æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªç¼“å­˜ï¼š key: ç¼“å­˜æ•°æ®ä½¿ç”¨ keyï¼š å¯ä»¥ç”¨å®ƒæ¥æŒ‡å®šï¼Œé»˜è®¤æ˜¯ä½¿ç”¨æ–¹æ³•å‚æ•° 1-æ–¹æ³•çš„è¿”å›å€¼ ç¼–å†™ SqEL: #id; å‚æ•° id çš„å€¼ #a0 #p0 #root.args[0] getEmp[2] keyGenerator: key çš„ç”Ÿæˆå™¨ï¼šå¯ä»¥è‡ªå·±æŒ‡å®š key çš„ç”Ÿæˆå™¨çš„ç»„ä»¶ id key / keyGenerator: äºŒé€‰ä¸€ä½¿ç”¨ cacheManager: æŒ‡å®šçš„ç¼“å­˜ç®¡ç†å™¨ï¼š æˆ–è€… cacheResolver æŒ‡å®šè·å–è§£æå™¨ condition: æŒ‡å®šç¬¦å·æ¡ä»¶çš„æƒ…å†µä¸‹æ‰ç¼“å­˜ï¼š eg: condition = â€œ#a0 &gt;1â€ : ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ &gt; 1 çš„æ—¶å€™æ‰ä¼šè¢«ç¼“å­˜ï¼› å¯ä»¥è·å–åˆ°ç»“æœè¿›è¡Œåˆ¤æ–­ unless: å¦å®šç¼“å­˜ï¼š å½“ unless æŒ‡å®šçš„æ¡ä»¶ä¸º trueï¼Œ æ–¹æ³•çš„è¿”å›å€¼å°±ä¸ä¼šè¢«ç¼“å­˜ï¼›å¯ä»¥è·å–åˆ°ç»“æœè¿›è¡Œåˆ¤æ–­ unless = â€œ#result == nullâ€ unless = â€œ#a0 ==2â€: å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ä¸º 2ï¼Œç»“æœä¸ç¼“å­˜ï¼› sync: æ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ¨¡å¼ ç¤ºä¾‹ï¼š 123456@Cacheable(value = &#123;&quot;emp&quot;&#125;,keyGenerator = &quot;myKeyGenerator&quot;,condition = &quot;#a0&gt;1&quot;,unless = &quot;#a0==2&quot;)public Employee getEmp(Integer id)&#123; System.out.println(&quot;æŸ¥è¯¢&quot;+id+&quot;å·å‘˜å·¥&quot;); Employee emp = employeeMapper.getEmpById(id); return emp;&#125; æ³¨æ„ä½¿ç”¨keyGeneratoréœ€è¦è‡ªè¡Œé…ç½®ï¼ˆå‚è€ƒï¼‰ï¼š ã€keyGeneratorã€‘ä»¥ getEmp[2] ä¸ºä¾‹ 1234567891011121314@Configurationpublic class MyCacheConfig &#123; @Bean(&quot;myKeyGenerator&quot;) public KeyGenerator keyGenerator()&#123; return new KeyGenerator()&#123; @Override public Object generate(Object o, Method method, Object... objects) &#123; // æ‹¼æ¥getEmp[2] ä½œä¸ºkeyGenerator return method.getName() + &quot;[&quot;+ Arrays.asList(objects).toString()+&quot;]&quot;; &#125; &#125;; &#125;&#125; â‘£ @CachePut å³è°ƒç”¨ç›®æ ‡çš„æ–¹æ³•ï¼Œæœ‰æ›´æ–°ç¼“å­˜æ•°æ®ï¼›åŒæ­¥æ›´æ–°ç¼“å­˜ ä¿®æ”¹äº†æ•°æ®åº“çš„æŸä¸ªæ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¼“å­˜ï¼› è¿è¡Œæœºåˆ¶ï¼š å…ˆè°ƒç”¨ç›®æ ‡æ–¹æ³• å°†ç›®æ ‡æ–¹æ³•çš„ç»“æœç¼“å­˜èµ·æ¥ æµ‹è¯•æ­¥éª¤ï¼š æŸ¥è¯¢ 1 å·å‘˜å·¥ï¼š æŸ¥åˆ°çš„ç»“æœä¼šæ”¾åœ¨ç¼“å­˜ä¸­ï¼š æ›´æ–° 1 å·å‘˜å·¥ï¼šã€lastName: AAA; gender:0ã€‘ åœ¨æ¬¡æŸ¥è¯¢ 1 å·å‘˜å·¥ï¼ˆç¼“å­˜æ²¡æœ‰æ›´æ–°ï¼‰ è§£å†³æ–¹å¼ï¼š 123456@CachePut(value = &quot;emp&quot;, key = &quot;#result.id&quot;)public Employee updateEmp(Employee employee)&#123; System.out.println(&quot;updateEmp:&quot;+ employee); employeeMapper.updateEmp(employee); return employee;&#125; å¯è®¾ç½®å‚æ•°çº¦æŸæ¡ä»¶ï¼š key : ä¼ å…¥çš„ employee å¯¹è±¡ å€¼ï¼š è¿”å›çš„ employee å¯¹è±¡ key = â€œ#employee.idâ€: ä½¿ç”¨è¿”å›åçš„ id key =â€#result.idâ€: ä½¿ç”¨è¿”å›åçš„ id ==æ³¨æ„ï¼š@Cacheable çš„ key æ˜¯ä¸èƒ½ç”¨#result== â‘¤ @CacheEvict ç¼“å­˜æ¸…é™¤ key: æŒ‡å®šè¦æ¸…é™¤çš„æ•°æ® beforeInvocaion = false: ç¼“å­˜çš„æ¸…é™¤æ˜¯å¦åœ¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œ â€‹ é»˜è®¤ä»£è¡¨ç¼“å­˜æ¸…é™¤çš„æ“ä½œæ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åï¼›å¦‚æœå‡ºç°å¼‚å¸¸ç¼“å­˜å°±ä¸ä¼šæ¸…é™¤ beforeInvocation = true: ä»£è¡¨æ¸…é™¤ç¼“å­˜æ“ä½œåœ¨æ–¹æ³•è¿è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œç¼“å­˜éƒ½è¦æ¸…é™¤ã€‚ 12345678@CacheEvict(value = &quot;emp&quot;, key = &quot;#id&quot;)public void deleteEmp(Integer id) &#123; System.out.println(&quot;deleteEmp:&quot; + id); //employeeMapper.deleteEmp(id); //æ¨¡æ‹Ÿå¼‚å¸¸ //int i = 10/0;&#125; â‘¥ @Caching å®šä¹‰å¤æ‚çš„ç¼“å­˜è§„åˆ™ 123456789101112@Caching( cacheable = &#123; @Cacheable(/*value=&quot;emp&quot;,*/key = &quot;#lastName&quot;) &#125;, put = &#123; @CachePut(/*value=&quot;emp&quot;,*/key = &quot;#result.id&quot;), @CachePut(/*value=&quot;emp&quot;,*/key = &quot;#result.email&quot;) &#125;)public Employee getEmpByLastName(String lastName)&#123; return employeeMapper.getEmpByLastName(lastName);&#125; â‘¦ CacheConfig æŠ½å–ç¼“å­˜çš„å…¬å…±é…ç½® 123@CacheConfig(cacheNames=&quot;emp&quot;/*,cacheManager = &quot;employeeCacheManager&quot;*/)@Servicepublic class EmployeeService &#123; å››ã€æ•´åˆ Redis ä½œä¸ºç¼“å­˜ Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSD è®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ å®‰è£… redis: ä½¿ç”¨ Docker 1docker pull redis å¼•å…¥ redis çš„ starter 1docker run -d -p 6379:6379 --name myredis redis é…ç½® redis (ä¸‹è½½è½¯ä»¶ RedisDesktopManager) 4ã€Redis å¸¸è§ çš„äº”å¤§æ•°æ®ç±»å‹ Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€List(åˆ—è¡¨)ã€Set(é›†åˆ)ã€Hash(æ•£åˆ—)ã€Zsetï¼ˆæœ‰åºé›†åˆï¼‰ stringRedisTemplate.opsForList()[Listï¼ˆåˆ—è¡¨ï¼‰] stringRedisTemplate.opsForSet()[Setï¼ˆé›†åˆï¼‰] stringRedisTemplate.opsForHash()[Hashï¼ˆæ•£åˆ—ï¼‰] stringRedisTemplate.opsForZSet()[ZSetï¼ˆæœ‰åºé›†åˆï¼‰] 5ã€æµ‹è¯•ç¼“å­˜ åŸç†ï¼šCacheManager === Cache ç¼“å­˜ç»„ä»¶æ¥å®é™…ç¼“å­˜ä¸­å­˜å–æ•°æ® â‘  å¼•å…¥ redis çš„ starterï¼Œå®¹å™¨ä¸­ä¿å­˜çš„æ˜¯ RedisCacheManagerï¼› 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; â€‹ åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® 1spring.redis.host=192.168.64.129 â‘¡ RedisCacheManager å¸®æˆ‘ä»¬åˆ›å»º RedisCache æ¥ä½œä¸ºç¼“å­˜ç»„ä»¶ï¼›RedisCache é€šè¿‡æ“ä½œ redis ç¼“å­˜æ•°æ®çš„ 123456789101112131415@AutowiredStringRedisTemplate stringRedisTemplate; // æ“ä½œk-véƒ½æ˜¯å­—ç¬¦ä¸²çš„@AutowiredRedisTemplate redisTemplate;// k-véƒ½æ˜¯å¯¹è±¡çš„@Testpublic void test1()&#123; // ç»™redisä¸­ä¿å­˜æ•°æ® stringRedisTemplate.opsForValue().append(&quot;msg&quot;,&quot;hello&quot;); String msg = stringRedisTemplate.opsForValue().get(&quot;msg&quot;); System.out.println(msg); stringRedisTemplate.opsForList().leftPush(&quot;mylist&quot;,&quot;1&quot;); stringRedisTemplate.opsForList().leftPush(&quot;mylist&quot;,&quot;2&quot;);&#125; â‘¢ é»˜è®¤ä¿å­˜æ•°æ® k-v éƒ½æ˜¯ Object; åˆ©ç”¨åºåˆ—åŒ–ä¿å­˜ï¼› â€‹ 1ï¼‰å¼•å…¥äº† redis çš„ starterï¼Œ cacheManager å˜ä¸º RedisChacheManager; 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; â€‹ 2) é»˜è®¤åˆ›å»ºçš„ RedisCacheManager æ“ä½œ redis çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ RedisTemplate&lt;Object, Object&gt; 123456789101112131415@AutowiredEmployeeMapper employeeMapper;@AutowiredStringRedisTemplate stringRedisTemplate; // æ“ä½œk-véƒ½æ˜¯å­—ç¬¦ä¸²çš„@AutowiredRedisTemplate redisTemplate;// k-véƒ½æ˜¯å¯¹è±¡çš„// æµ‹è¯•ä¿å­˜å¯¹è±¡@Testpublic void test02()&#123; Employee empById = employeeMapper.getEmpById(1); redisTemplate.opsForValue().set(&quot;emp-01&quot;,empById);&#125; â€‹ 3) RedisTemplate&lt;Object, Object&gt; æ˜¯é»˜è®¤ä½¿ç”¨ jdk çš„åºåˆ—åŒ–æœºåˆ¶ ã€MyRedisTemplateConfigã€‘ 123456789101112@Configurationpublic class MyRedisTemplateConfig &#123; @Bean public RedisTemplate&lt;Object, Employee&gt; employeeRedisTemplate(RedisConnectionFactory redisConnectionFactory)&#123; RedisTemplate&lt;Object, Employee&gt; template = new RedisTemplate&lt;&gt;(); template.setConnectionFactory(redisConnectionFactory); Jackson2JsonRedisSerializer&lt;Employee&gt; ser = new Jackson2JsonRedisSerializer&lt;&gt;(Employee.class); template.setDefaultSerializer(ser); return template; &#125;&#125; æµ‹è¯•ï¼š 123456789@ResourceRedisTemplate&lt;Object, Employee&gt; employeeRedisTemplate;@Testpublic void test02()&#123; Employee empById = employeeMapper.getEmpById(1); // 1.å°†æ•°æ®ä»¥ JSONçš„æ–¹å¼ä¿å­˜ // 2. redisTemplateé»˜è®¤çš„åºåˆ—åŒ–è§„åˆ™ï¼Œæ”¹å˜é»˜è®¤çš„åºåˆ—åŒ–è§„åˆ™ employeeRedisTemplate.opsForValue().set(&quot;emp-01&quot;,empById);&#125; â‘  è‡ªå®šä¹‰ CacheManager1ã€ SpringBoot 1.x ç‰ˆæœ¬çš„ RedisCacheManager é…ç½®12345678910111213141516//è‡ªå®šä¹‰CacheManager @Bean public RedisCacheManager empCacheManager(RedisTemplate&lt;Object, Employee&gt; empRedisTemplate) &#123; //å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„RedisTemplateä½œä¸ºå‚æ•°ï¼ŒSpringä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ³¨å…¥ RedisCacheManager cacheManager = new RedisCacheManager(empRedisTemplate); //ä½¿ç”¨å‰ç¼€ï¼Œé»˜è®¤ä¼šå°†CacheNameä½œä¸ºkeyçš„å‰ç¼€ï¼Œæœ€å¥½è®¾ç½®ä¸ºtrueï¼Œå› ä¸ºç¼“å­˜å¯èƒ½æœ‰å¾ˆå¤šç±» cacheManager.setUsePrefix(true); return cacheManager; &#125;&#125; ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä»…ä»…è‡ªå®šä¹‰è¿™ä¸€ä¸ª CacheManager åˆ™åªèƒ½æ“ä½œ Employee è¿™ä¸€ç§ç±»å‹çš„æ•°æ®ï¼Œå› ä¸ºè¿™ä¸ª CacheMananger åªå®ç°äº† Employee çš„æ³›å‹ï¼Œæ“ä½œå…¶ä»–ç±»å‹å°±ä¼šæŠ¥é”™(å¯ä»¥æ­£å¸¸ç¼“å­˜å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯ä»ç¼“å­˜ä¸­æŸ¥è¯¢å‡ºçš„æ•°æ®åœ¨ååºåˆ—åŒ–æ—¶ä¼šæŠ¥é”™)ã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦è‡ªå®šä¹‰å¤šä¸ª CacheManagerï¼Œæ¯”å¦‚å¢åŠ ä¸€ä¸ªå¯ä»¥ç¼“å­˜ Department ç±»å‹çš„ CacheManangerï¼š 12345678910@Bean public RedisCacheManager deptCacheManager(RedisTemplate&lt;Object, Department&gt; deptRedisTemplate) &#123; RedisCacheManager cacheManager = new RedisCacheManager(deptRedisTemplate); //ä½¿ç”¨å‰ç¼€ï¼Œé»˜è®¤ä¼šå°†CacheNameä½œä¸ºkeyçš„å‰ç¼€ cacheManager.setUsePrefix(true); return cacheManager; &#125; å½“å®¹å™¨ä¸­æœ‰å¤šä¸ª RedisCacheManager çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨@Primary æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„ 2ã€SpringBoot 2.x ç‰ˆæœ¬çš„ RedisCacheManager é…ç½®123456789101112@Beanpublic CacheManager cacheManager(RedisConnectionFactory redisConnectionFactory) &#123; RedisCacheConfiguration cacheConfiguration = RedisCacheConfiguration.defaultCacheConfig() // è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´ä¸ºä¸€å¤© .entryTtl(Duration.ofDays(1)) .disableCachingNullValues() // ç¦ç”¨ç¼“å­˜ç©ºå€¼ï¼Œä¸ç¼“å­˜nullæ ¡éªŒ .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer()));// è®¾ç½®CacheManagerçš„å€¼åºåˆ—åŒ–æ–¹å¼ä¸ºjsonåºåˆ—åŒ–ï¼Œå¯åŠ å…¥@Classå±æ€§ // è®¾ç½®é»˜è®¤çš„cacheç»„ä»¶ return RedisCacheManager.builder(redisConnectionFactory).cacheDefaults(cacheConfiguration).build();&#125; 3ã€æµ‹è¯•123456@Cacheable(cacheNames = &quot;dept&quot;,cacheManager =&quot;cacheManager&quot;)public Department getDeptById(Integer id) &#123; System.out.println(&quot;æŸ¥è¯¢éƒ¨é—¨ï¼š&quot; + id); Department department = deptMapper.getDeptById(id); return department;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¸æ•°æ®è®¿é—®","slug":"SpringBootä¸æ•°æ®è®¿é—®","date":"2020-09-13T16:00:00.000Z","updated":"2020-10-25T02:31:53.272Z","comments":true,"path":"posts/2130149512.html","link":"","permalink":"http://blog.oy6090.top/posts/2130149512.html","excerpt":"","text":"SpringBoot ä¸æ•°æ®è®¿é—®ä¸€ã€JDBC ä½¿ç”¨ Idea é›†æˆå¼€å‘å·¥å…·æ­å»º pom.xml 123456789&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt; ä½¿ç”¨ yml é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½® 123456789spring: datasource: username: root password: 1234 url: jdbc:mysql://192.168.64.129:3307/jdbc?characterEncoding=UTF-8&amp;serverTimezone=UTC #å¦‚æœä½¿ç”¨mysql 8.0.20åŠä»¥ä¸Šéœ€è¦æŒ‡å®šæ—¶åŒº ä½¿ç”¨com.mysql.cj.jdbc.Driverï¼Œä½ç‰ˆæœ¬çš„åªéœ€è¦æŠŠcjå»æ‰å³å¯ driver-class-name: com.mysql.cj.jdbc.Driver #æŒ‡å®šä½¿ç”¨å“ªä¸ªæ•°æ®æº,ç»“åˆè‡ªå·±çš„æƒ…å†µè€Œå®š #type: com.alibaba.druid.pool.DruidDataSource æ•ˆæœï¼š â€‹ 1. é»˜è®¤ä½¿ç”¨ com.zaxxer.hikari.HikariDataSource ä½œä¸ºæ•°æ®æº(springBoot çš„ç‰ˆæœ¬ä¸ºï¼š2.3.3)ï¼› 123456789//æŸ¥çœ‹DataSourceAutoConfigurationä¸­çš„æ–¹æ³• @Configuration @Conditional(PooledDataSourceCondition.class) @ConditionalOnMissingBean(&#123; DataSource.class, XADataSource.class &#125;) @Import(&#123; DataSourceConfiguration.Hikari.class, DataSourceConfiguration.Tomcat.class, DataSourceConfiguration.Dbcp2.class, DataSourceConfiguration.Generic.class, DataSourceJmxConfiguration.class &#125;) protected static class PooledDataSourceConfiguration &#123; &#125; springboot 1.5.10ç‰ˆæœ¬ é»˜è®¤æ˜¯ä½¿ç”¨ org.apache.tomcat.jdbc.pool.DataSource ä½œä¸ºæ•°æ®æºï¼› é…ç½®æºçš„ç›¸å…³é…ç½®éƒ½åœ¨ DataSourceProperties é‡Œé¢ï¼› è‡ªåŠ¨é…ç½®åŸç†ï¼š org.springframework.boot.autoconfigure.jdbc ; å‚è€ƒ DataSurceConfigurationï¼Œæ ¹æ®é…ç½®åˆ›å»ºæ•°æ®æºï¼Œé»˜è®¤ä½¿ç”¨ Tomcat è¿æ¥æ± ï¼›å¯ä»¥ä½¿ç”¨ spring.datasource.type æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹â€˜ 2ï¼‰SpringBoot é»˜è®¤å¯ä»¥æ”¯æŒï¼š 1org.apache.tomcat.jdbc.pool.DataSourceã€HikariDataSourceã€BasicDataSource è‡ªå®šä¹‰æ•°æ®æºç±»å‹ 123456789101112/*** Generic DataSource configuration.*/@ConditionalOnMissingBean(DataSource.class)@ConditionalOnProperty(name = &quot;spring.datasource.type&quot;)static class Generic &#123; @Bean public DataSource dataSource(DataSourceProperties properties) &#123; //ä½¿ç”¨DataSourceBuilderåˆ›å»ºæ•°æ®æºï¼Œåˆ©ç”¨åå°„åˆ›å»ºå“åº”typeçš„æ•°æ®æºï¼Œå¹¶ä¸”ç»‘å®šç›¸å…³å±æ€§ return properties.initializeDataSourceBuilder().build(); &#125;&#125; 4ï¼‰ DataSourceInitialzerï¼š ApplicationListenerï¼š ä½œç”¨ ï¼š â€‹ â‘  runSchemaScripts(); è¿è¡Œå»ºè¡¨è¯­å¥ï¼› â€‹ â‘¡ runDataScripts()ï¼šè¿è¡Œæ’å…¥çš„ sql è¯­å¥ï¼› é»˜è®¤åªéœ€è¦å°†æ–‡ä»¶å‘½åä¸ºï¼š 123456schema-*.sqlã€data-*.sqlé»˜è®¤è§„åˆ™ï¼š schema.sql , schema-all.sqlå¯æ˜¯ä½¿ç”¨ schemaï¼š - classpath:department.sql æŒ‡å®šä½ç½® ==æ³¨æ„ï¼šSpringBoot 2.x åŠä»¥éœ€è¦é…ç½®== å…·ä½“çš„å‚è€ƒæˆ‘è¿™ç¯‡åšå®¢è¯¦ç»†ä»‹ç»äº† 12spring.datasource.initialization-mode=always å¦åˆ™ä¸ä¼šè‡ªåŠ¨åˆ›å»º sql è¯­å¥ 5ï¼‰æ“ä½œæ•°æ®åº“ï¼šè‡ªåŠ¨é…ç½® jdbcTemplate æ“ä½œæ•°æ®åº“ äºŒã€æ•´åˆ Driuid æ•°æ®æºâ€‹ pom.xml å¯¼å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.21&lt;/version&gt;&lt;/dependency&gt; â‘  æ·»åŠ åŸºæœ¬é…ç½®â€‹ ä¸ä½¿ç”¨é»˜è®¤çš„é…ç½®ï¼Œä½¿ç”¨è‡ªå·±çš„é…ç½® 12345678910111213141516initialSize: 5 minIdle: 5 maxActive: 20 maxWait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT 1 FROM DUAL testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true # é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™ filters: stat,wall,log4j maxPoolPreparedStatementPerConnectionSize: 20 useGlobalDataSourceStat: true connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500 ã€DruidConfig.javaã€‘ 123456789@Configurationpublic class DruidConfig &#123; @ConfigurationProperties(prefix = &quot;spring.datasource&quot;) @Bean public DataSource druid()&#123; return new DruidDataSource(); &#125;&#125; ä½¿ç”¨åœ¨æµ‹è¯•ç±»ä¸­å¯åŠ¨ DegBug å¯åŠ¨ 1234567891011121314151617@SpringBootTestclass SpringBoot06DateJdbcApplicationTests &#123; @Autowired DataSource dataSource; @Test void contextLoads() throws SQLException &#123; // com.zaxxer.hikari.HikariDataSource System.out.println(dataSource.getClass()); System.out.println(&quot;*********************&quot;); Connection conn = dataSource.getConnection(); System.out.println(conn); conn.close(); &#125;&#125; å¯åŠ¨ï¼š â€‹ Debug å¯åŠ¨å‡ºç°å¼‚å¸¸ï¼ŒåŸå› åˆ†æï¼šåº”è¯¥åœ¨è¿è¡Œä¸­ç¼ºå°‘ log4j çš„ä¾èµ–ï¼Œå¯¼è‡´æ— æ³•å¯åŠ¨ã€‚ è§£å†³æ–¹æ³•ï¼š 123456// åœ¨pom.xml æ–‡ä»¶ä¸­å¯¼å…¥log4jçš„ä¾èµ–&lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt;&lt;/dependency&gt; å¯åŠ¨é…ç½®ç”Ÿæ•ˆ â‘¡ æ•´åˆ Druid æ•°æ®æºã€DruidConfig.javaã€‘ 1234567891011121314151617181920212223242526272829303132333435// é…ç½®Druidçš„ç›‘æ§/** * 1ã€ é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet * */@Beanpublic ServletRegistrationBean staViewServlet()&#123; ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), &quot;/druid/*&quot;); Map&lt;String, String&gt; initParams = new HashMap&lt;&gt;(); initParams.put(&quot;loginUsername&quot;,&quot;admin&quot;); initParams.put(&quot;loginPassword&quot;,&quot;12345&quot;); // é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰çš„è®¿é—® initParams.put(&quot;allow&quot;,&quot;&quot;); initParams.put(&quot;deny&quot;,&quot;192.168.64.129&quot;); bean.setInitParameters(initParams); return bean;&#125;/** * é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter * */@Beanpublic FilterRegistrationBean webStratFilert()&#123; FilterRegistrationBean bean = new FilterRegistrationBean(); bean.setFilter(new WebStatFilter()); Map&lt;String, String&gt; initParams = new HashMap&lt;&gt;(); initParams.put(&quot;exclusions&quot;,&quot;*.js, *.css, /druid/*&quot;); bean.setInitParameters(initParams); bean.setUrlPatterns(Arrays.asList(&quot;/*&quot;)); return bean;&#125; ã€HelloController.javaã€‘ 12345678910111213@Controllerpublic class HelloController &#123; @Autowired JdbcTemplate jdbcTemplate; @ResponseBody @GetMapping(value = &quot;/query&quot;) public Map&lt;String, Object&gt; map()&#123; List&lt;Map&lt;String, Object&gt;&gt; list = jdbcTemplate.queryForList(&quot;select * FROM department&quot;); return list.get(0); &#125;&#125; æµ‹è¯•ï¼š ä¸‰ã€ æ•´åˆ Mybatis12345&lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.1.3&lt;/version&gt;&lt;/dependency&gt; å‡†å¤‡æ­¥éª¤ï¼š é…ç½®æ•°æ®æºç›¸å…³å±æ€§ 123456789101112131415161718192021222324252627spring: datasource: # æ•°æ®æºåŸºæœ¬é…ç½® username: root password: 6090 driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://192.168.64.129:3307/mybatis type: com.alibaba.druid.pool.DruidDataSource # æ•°æ®æºå…¶ä»–é…ç½® initialSize: 5 minIdle: 5 maxActive: 20 maxWait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT 1 FROM DUAL testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true # é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™ filters: stat,wall,log4j maxPoolPreparedStatementPerConnectionSize: 20 useGlobalDataSourceStat: true connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500 # é…ç½®è‡ªåŠ¨æ‰§è¡Œsqlè¯­å¥ initialization-mode: always ç»™æ•°æ®åº“å»ºè¡¨ åœ¨ yml é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  123schema: - classpath:sql/department.sql - classpath:sql/employee.sql åˆ›å»º javabean 123456789101112131415public class Employee &#123; private Integer id; private String lastName; private Integer gender; private String email; private Integer dId; //ç”Ÿæˆç›¸åº”çš„getã€setæ–¹æ³•&#125;public class Department &#123; private Integer id; private String departmenName; // ç”Ÿæˆç›¸åº”çš„getã€setæ–¹æ³•&#125; â‘  æ³¨è§£ç‰ˆã€DepartmentMapper.javaã€‘ 1234567891011121314@Mapperpublic interface DepartmentMapper &#123; @Select(&quot;select * from department where id = #&#123;id&#125;&quot;) @Delete(&quot;delete from department where id=#&#123;id&#125;&quot;) public int deleteDeptById(Integer id); @Insert(&quot;insert department(department_name) values(#&#123;departmentName&#125;)&quot;) public int insertDept(Department department); @Update(&quot;update departments set department_name=#&#123;departmentName&#125; where id=#&#123;id&#125;&quot;) public int updateDept(Department department);&#125; ã€DeptController.javaã€‘ 1234567891011121314151617@RestControllerpublic class DeptController &#123; @Autowired DepartmentMapper departmentMapper; @GetMapping(value = &quot;/dept/&#123;id&#125;&quot;) public Department getdepartment(@PathVariable(&quot;id&quot;) Integer id)&#123; return departmentMapper.getDeptById(id); &#125; @GetMapping(value = &quot;/dept&quot;) public Department insertDept(Department department)&#123; departmentMapper.insertDept(department); return department; &#125;&#125; æµ‹è¯•ï¼š â€‹ å‡ºç°å¼‚å¸¸ï¼Œè·å–å€¼ä¸å®Œæ•´ï¼ŒåŸå› åˆ†æ departmentName è¿™ä¸ªå±æ€§åè·Ÿæ•°æ®åº“çš„å­—æ®µä¸ä¸€è‡´ï¼Œå¯ä»¥è‡ªå®šä¹‰å¢åŠ é©¼å³°å‘½åæ¥è§£å†³è¿™ä¸ªé—®é¢˜ 1234567891011121314151617@Configurationpublic class MybatisConfig &#123; /** * è‡ªå®šä¹‰é…ç½®é©¼å³°å‘½åè§„åˆ™ * @return */ @Bean public ConfigurationCustomizer configurationCustomizer()&#123; return new ConfigurationCustomizer() &#123; @Override public void customize(org.apache.ibatis.session.Configuration configuration) &#123; configuration.setMapUnderscoreToCamelCase(true); &#125; &#125;; &#125;&#125; è¡¥å……ï¼šä½¿ç”¨ MapperScan æ‰¹é‡æ‰«ææ‰€æœ‰çš„ Mapper æ¥å£ 12345678@MapperScan(value = &quot;com.oy.springboot06.Mapper&quot;)@SpringBootApplicationpublic class SpringBoot06DataMybatisApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringBoot06DataMybatisApplication.class, args); &#125;&#125; â‘¡ é…ç½®æ–‡ä»¶ç‰ˆ åœ¨é…ç½® yml æ–‡ä»¶ä¸­é…ç½® 123mybatis: config-location: classpath:mybatis/mybatis-config.xml æŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½® mapper-locations: classpath:mybatis/mapper/*.xml æŒ‡å®šsqlæ˜ å°„æ–‡ä»¶ä½ç½® ã€EmployeeMapper.classã€‘ 1234567@Mapperpublic interface EmployeeMapper &#123; public Employee getEmpById(Integer id); public void insertEmp(Employee employee);&#125; ã€DeptController.javaã€‘ 123456789101112@RestControllerpublic class DeptController &#123; @Autowired EmployeeMapper employeeMapper; @GetMapping(&quot;/emp/&#123;id&#125;&quot;) public Employee getEmp(@PathVariable(&quot;id&quot;) Integer id)&#123; return employeeMapper.getEmpById(id); &#125;&#125; ç»“æ„å›¾ ã€mybatis-config.xmlã€‘é…ç½®é©¼å³°å‘½åè§„åˆ™ 12345&lt;configuration&gt; &lt;settings&gt; &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt; &lt;/settings&gt;&lt;/configuration&gt; æµ‹è¯•ï¼š æ›´å¤šä½¿ç”¨å‚ç…§ï¼šhttp://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/ å››ã€æ•´åˆ SpringData JPAâ‘  SpringData ç®€ä»‹ â‘¡ æ•´åˆ SpringData JPA JPA ï¼š ORMï¼ˆObject Relational Mappingï¼‰ ç¼–å†™ä¸€ä¸ªå®ä½“ç±»(bean)å’Œæ•°æ®è¡¨è¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”é…ç½®å¥½æ˜ å°„å…³ç³»ï¼› 12345678910111213141516171819202122/***@Description ä½¿ç”¨JPAæ³¨è§£é…ç½®æ˜ å°„å…³ç³»*@Author OY*@Date 2020/9/15*@Time 9:55*/@Entity // å‘Šè¯‰JPAè¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»(å’Œæ•°æ®è¡¨æ˜ å°„çš„ç±»)@Table(name = &quot;tbl_user&quot;) //@Tableæ¥æŒ‡å®šå’Œé‚£ä¸ªæ•°æ®è¡¨å¯¹åº”ï¼›å¦‚æœçœç•¥é»˜è®¤è¡¨æ°‘å°±æ˜¯userpublic class User &#123; @Id // è¿™æ˜¯ä¸€ä¸ªä¸»é”® @GeneratedValue(strategy = GenerationType.IDENTITY)// è‡ªå¢ä¸»é”® private Integer id; @Column(name = &quot;last_name&quot;, length = 50) // è¿™æ˜¯å’Œæ•°æ®è¡¨å¯¹åº”çš„ä¸€ä¸ªåˆ— private String lastName; @Column // çœç•¥é»˜è®¤çš„åˆ—åå°±æ˜¯å±æ€§å private String email; // çœç•¥get.setæ–¹æ³•ã€‚ã€‚ã€‚ã€‚&#125; ç¼–å†™ä¸€ä¸ª Dao æ¥å£æ¥æ“ä½œå®ä½“ç±»å¯¹åº”çš„æ•°æ®è¡¨ï¼ˆRepositoryï¼‰ 12345678/***@Description ç»§æ‰¿JpaRepositoryæ¥å®Œæˆå¯¹æ•°æ®åº“çš„æ“ä½œ*@Author OY*@Date 2020/9/15*@Time 10:12*/public interface UserRepository extends JpaRepository&lt;User, Integer&gt; &#123;&#125; åŸºæœ¬é…ç½® JpaProperties(yml ä¸­) 12345678910111213spring: datasource: username: root password: 123456 url: jdbc:mysql://192.168.64.129:3307/jpa driver-class-name: com.mysql.cj.jdbc.Driver initialization-mode: always jpa: hibernate: # æ›´æ–°æˆ–è€…åˆ›å»ºæ•°æ®è¡¨ç»“æ„ ddl-auto: update # æ§åˆ¶å°æ˜¾ç¤ºSQL show-sql: true 4.æµ‹è¯• ã€UserController.javaã€‘ 12345678910111213141516171819202122232425262728@RestControllerpublic class UserController &#123; @Autowired UserRepository userRepository; @GetMapping(&quot;/user/&#123;id&#125;&quot;) public User getUser(@PathVariable(&quot;id&quot;) Integer id)&#123; User user = new User(); user.setId(id); Example&lt;User&gt; example = Example.of(user); Optional&lt;User&gt; one = userRepository.findOne(example); return one.get(); &#125; @GetMapping(&quot;/user&quot;) public User insertUser(User user)&#123; User save = userRepository.save(user); return save; &#125; @GetMapping(&quot;/user/all&quot;) public List&lt;User&gt; getAll()&#123; List&lt;User&gt; all = userRepository.findAll(); return all; &#125;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¹‹Docker","slug":"SpringBootä¹‹Docker","date":"2020-09-09T16:00:00.000Z","updated":"2020-10-25T02:26:25.429Z","comments":true,"path":"posts/658751968.html","link":"","permalink":"http://blog.oy6090.top/posts/658751968.html","excerpt":"","text":"ä¸€ã€ç®€ä»‹Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼›æ˜¯ä¸€ä¸ªè½»é‡çº§å®¹å™¨æŠ€æœ¯ï¼› Docker æ”¯æŒå°†è½¯ä»¶ç¼–è¯‘æˆä¸€ä¸ªé•œåƒï¼›ç„¶åç ¸é•œåƒä¸­å„ç§è½¯ä»¶åšå¥½é…ç½®ï¼Œå°†é•œåƒå‘å¸ƒå‡ºå»ï¼Œå…¶å®ä½¿ç”¨è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒï¼› è¿è¡Œä¸­çš„è¿™ä¸ªé•œåƒç§°ä¸ºå®¹å™¨ï¼Œå®¹å™¨å¯åŠ¨æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚ äºŒã€æ ¸å¿ƒæ¦‚å¿µdocker ä¸»æœº(Host): å®‰è£…äº† Docker ç¨‹åºçš„æœºå™¨ï¼ˆDocker ç›´æ¥å®‰è£…åœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼‰ï¼› docker å®¢æˆ·ç«¯ï¼ˆClientï¼‰: è¿æ¥ docker ä¸»æœºè¿›è¡Œæ“ä½œï¼› docker ä»“åº“ï¼ˆRegistryï¼‰: ç”¨æ¥ä¿å­˜å„ç§æ‰“åŒ…å¥½çš„è½¯ä»¶é•œåƒï¼› docker é•œåƒ(Images): è½¯ä»¶æ‰“åŒ…å¥½çš„é•œåƒï¼›æ”¾åœ¨ docker ä»“åº“ä¸­ï¼› docker å®¹å™¨ï¼ˆContainerï¼‰: é•œåƒå¯åŠ¨åçš„å®ä¾‹å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼›å®¹å™¨æ˜¯ç‹¬ç«‹çš„è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ ä½¿ç”¨ Docker çš„æ­¥éª¤ï¼š å®‰è£… Docker å» Docker ä»“åº“æ‰¾åˆ°è¿™ä¸ªè½¯ä»¶æ‰¾åˆ°è¿™ä¸ªè½¯ä»¶å¯¹åº”çš„é•œåƒï¼› ä½¿ç”¨ Docker è¿è¡Œè¿™ä¸ªé•œåƒï¼Œè¿™ä¸ªé•œåƒå°±ä¼šç”Ÿæˆä¸€ä¸ª Docker å®¹å™¨ï¼› å¯¹å®¹å™¨çš„å¯åŠ¨åœæ­¢å°±æ˜¯å¯¹è½¯ä»¶çš„å¯åŠ¨åœæ­¢ï¼› ä¸‰ã€å®‰è£… Dockerâ‘  å®‰è£… Linux è™šæ‹Ÿæœºâ€‹ ç™¾åº¦æœç´¢å…³é”®å­—ï¼šå®‰è£…linux CentOS 7 ç»“åˆ xshell è½¯ä»¶ä½¿ç”¨ â‘¡ åœ¨ Linux è™šæ‹Ÿæœºä¸Šå®‰è£… docker==æ­¥éª¤ï¼š== æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯ 3.10 åŠä»¥ä¸Š 1uname -r å®‰è£… docker 1yum install docker è¾“å…¥ y ç¡®å®šå®‰è£… å¯åŠ¨ docker 12[root@localhost ~]# systemctl start docker[root@localhost ~]# docker -v å¼€æœºå¯åŠ¨ docker 1[root@localhost ~]# systemctl enable docker åœæ­¢ docker 1[root@localhost ~]# systemctl stop docke â‘¢ Docker å¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ1ã€é•œåƒæ“ä½œ æ“ä½œ å‘½ä»¤ è¯´æ˜ æ£€ç´¢ docker search å…³é”®å­— eg: docker search mysql æˆ‘ä»¬ç»å¸¸å» docker hub ä¸Šæ£€ç´¢é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚é•œåƒçš„ TAG æ‹‰å– docker pull é•œåƒå:tag :tag æ˜¯å¯é€‰çš„ï¼Œtag è¡¨ç¤ºæ ‡ç­¾ï¼Œå¤šä¸ºè½¯ä»¶çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯ lastest åˆ—è¡¨ docker images æŸ¥çœ‹æ‰€æœ‰çš„æœ¬åœ°é•œåƒ åˆ é™¤ docker rmi image-id åˆ é™¤æŒ‡å®šçš„æœ¬åœ°é•œåƒ 2ã€å®¹å™¨æ“ä½œè½¯ä»¶é•œåƒ(QQ å®‰è£…ç¨‹åº) â€“ è¿è¡Œé•œåƒ â€“ äº§ç”Ÿä¸€ä¸ªå®¹å™¨ï¼ˆæ­£åœ¨è¿è¡Œçš„è½¯ä»¶ï¼Œè¿è¡Œçš„ QQï¼‰ æ­¥éª¤ï¼ˆTomcat ç¤ºä¾‹ï¼‰ï¼š æœç´¢é•œåƒ 1docker search tomcat æ‹‰å–é•œåƒ 1docker pull tomcat æ ¹æ®é•œåƒå¯åŠ¨å®¹å™¨ 1docker run --name mytomcat -d tomcat:latest æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ 1docker ps åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨ 1docker stop å®¹å™¨çš„id æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ 1docker ps -a å¯åŠ¨å®¹å™¨ 1docker start å®¹å™¨id åˆ é™¤ä¸€ä¸ªå®¹å™¨ 1docker rm å®¹å™¨id å¯åŠ¨ä¸€ä¸ªåšäº†ç«¯å£æ˜ å°„çš„ tomcat 12[root@localhost ~]# docker run â€d â€p 8888:8080 tomcat[root@localhost ~]# docker run --name tomcat01 â€d â€p 8888:8080 tomcat:tags -d: åå°è¿è¡Œ -p : å°†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ä¸€ä¸ªç«¯å£ ä¸»æœºç«¯å£ï¼šå®¹å™¨å†…éƒ¨çš„ç«¯å£ docker run â€d â€p æ˜ å°„ç«¯å£:ä¸»æœºç«¯å£ tomcat å¦‚æœæˆåŠŸæ˜ å°„ä¹‹åæ— æ³•è®¿é—®ï¼Œè¯·å‚è€ƒè¿™ç¯‡åšå®¢ å¿…é¡»å…³é—­ Linux çš„é˜²ç«å¢™ 12service firewalld statusï¼› æŸ¥çœ‹é˜²æŠ¤å¢™çŠ¶æ€service firewalld stop: å…³é—­é˜²ç«å¢™ æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿— 12docker logs container-name/container-ideg: docker logs 30a1b4a13697 æ›´å¤šå‘½ä»¤å‚çœ‹ https://docs.docker.com/engine/reference/commandline/docker/ å¯ä»¥å‚è€ƒæ¯ä¸€ä¸ªé•œåƒçš„æ–‡æ¡£ 3ã€å®‰è£… MySQL ç¤ºä¾‹1docker pull mysql å¯åŠ¨ï¼š 1docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql 1docker ps -a åšç«¯å£æ˜ å°„ 1docker run -p 3309:3306 --name mysql03 -e MYSQL_ROOT_PASSWORD=1234 -d mysql å…¶ä»–çš„é«˜çº§æ“ä½œ 1docker run â€â€name mysql03 â€v /conf/mysql:/etc/mysql/conf.d â€e MYSQL_ROOT_PASSWORD=myâ€secretâ€pw â€d mysql:tag â€‹ æŠŠä¸»æœºçš„/conf/mysql æ–‡ä»¶å¤¹æŒ‚è½½åˆ° mysqldocker å®¹å™¨çš„ /etc/mysql/conf.d æ–‡ä»¶å¤¹é‡Œé¢ï¼Œæ”¹ mysql æ–‡ä»¶çš„é…ç½®æ–‡ä»¶å°±åªéœ€è¦æŠŠ mysql é…ç½®æ–‡ä»¶æ”¾åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸‹ï¼ˆ/conf/mysqlï¼‰ 12docker run â€â€name someâ€mysql â€e MYSQL_ROOT_PASSWORD=myâ€secretâ€pw â€d mysql:tag â€â€characterâ€setâ€server=utf8mb4 â€â€collationâ€server=utf8mb4_unicode_ci â€‹ æŒ‡å®š mysql çš„ä¸€äº›é…ç½®å‚æ•°","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¹‹Webå¼€å‘","slug":"SpringBootä¹‹Web å¼€å‘","date":"2020-08-29T16:00:00.000Z","updated":"2021-01-22T03:52:45.711Z","comments":true,"path":"posts/11889.html","link":"","permalink":"http://blog.oy6090.top/posts/11889.html","excerpt":"","text":"ä¸€ã€Web å¼€å‘è‡ªåŠ¨é…ç½®åŸç†ï¼š xxxAutoConfiguration: å¸®åŠ©æˆ‘ä»¬ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶ï¼› xxxProperyties: é…ç½®ç±»æ¥ 1ã€ SpringBoot å¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)public class ResourceProperties implements ResourceLoaderAware &#123;// å¯æ˜¯è®¾ç½®å’Œé™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼Œç¼“å­˜æ—¶é—´ç­‰WebMvcAuotConfigurationï¼š@Overridepublic void addResourceHandlers(ResourceHandlerRegistry registry) &#123; if (!this.resourceProperties.isAddMappings()) &#123; logger.debug(&quot;Default resource handling disabled&quot;); return; &#125; Integer cachePeriod = this.resourceProperties.getCachePeriod(); if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) &#123; customizeResourceHandlerRegistration( registry.addResourceHandler(&quot;/webjars/**&quot;) .addResourceLocations( &quot;classpath:/METAâ€INF/resources/webjars/&quot;) .setCachePeriod(cachePeriod)); &#125; String staticPathPattern = this.mvcProperties.getStaticPathPattern(); // é™æ€èµ„æºæ–‡ä»¶å¤¹çš„æ˜ å°„ if (!registry.hasMappingForPattern(staticPathPattern)) &#123; customizeResourceHandlerRegistration( registry.addResourceHandler(staticPathPattern) .addResourceLocations( this.resourceProperties.getStaticLocations()) .setCachePeriod(cachePeriod)); &#125;&#125; // é…ç½®æ¬¢è¿é¡µæ˜ å°„ @Bean public WelcomePageHandlerMapping welcomePageHandlerMapping( ResourceProperties resourceProperties) &#123; return new WelcomePageHandlerMapping(resourceProperties.getWelcomePage(), this.mvcProperties.getStaticPathPattern()); &#125; // é…ç½®å–œæ¬¢çš„å›¾æ ‡ @Configuration @ConditionalOnProperty(value = &quot;spring.mvc.favicon.enabled&quot;, matchIfMissing = true) public static class FaviconConfiguration &#123; private final ResourceProperties resourceProperties; public FaviconConfiguration(ResourceProperties resourceProperties) &#123; this.resourceProperties = resourceProperties; &#125; @Bean public SimpleUrlHandlerMapping faviconHandlerMapping() &#123; SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping(); mapping.setOrder(Ordered.HIGHEST_PRECEDENCE + 1); //æ‰€æœ‰ **/favicon.ico mapping.setUrlMap(Collections.singletonMap(&quot;**/favicon.ico&quot;, faviconRequestHandler())); return mapping; &#125; @Bean public ResourceHttpRequestHandler faviconRequestHandler() &#123; ResourceHttpRequestHandler requestHandler = new ResourceHttpRequestHandler(); requestHandler .setLocations(this.resourceProperties.getFaviconLocations()); return requestHandler; &#125;&#125; ==æ‰€æœ‰çš„/webjars/**,éƒ½å» classpath:/META-INF/resources/web/æ‰¾èµ„æº== webjars ï¼šä»¥ jar åŒ…çš„æ–¹å¼å¼•å…¥é™æ€èµ„æºï¼›http://www.webjars.org/ å¯¼å…¥ä¾èµ–ï¼š 123456&lt;!--å¼•å…¥jquery-webjar è®¿é—®çš„æ—¶å€™åªéœ€è¦å†™webjarsä¸‹é¢çš„èµ„æºåç§°å³å¯--&gt;&lt;dependency&gt; &lt;groupId&gt;org.webjars.bower&lt;/groupId&gt; &lt;artifactId&gt;jquery&lt;/artifactId&gt; &lt;version&gt;3.3.1&lt;/version&gt;&lt;/dependency&gt; æµ‹è¯•ï¼šlocalhost:8080/webjars/jquery/3.3.1/dist/jquery.js ==â€/**â€œ è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼Œéƒ½å»(é™æ€èµ„æºçš„æ–‡ä»¶å¤¹)æ‰¾æ˜ å°„ã€‚== â€œclasspath:/META-INF/resources/â€œ â€œclasspath:/resources/â€œ â€œclasspath:/static/â€œ â€œclasspath:/public/â€œ â€œ/â€œ:å½“å‰é¡¹ç›® ä¾‹å¦‚ï¼š localhost:8080/abc == å»é™æ€èµ„æºæ–‡ä»¶å¤¹é‡Œé¢æ‰¾ abc ==æ¬¢è¿é¡µï¼š é™æ€èµ„æºæ–‡ä»¶ä¸‹çš„æ‰€æœ‰ index.html é¡µé¢ï¼›è¢«â€/**â€œæ˜ å°„== ==æ‰€æœ‰çš„ **/favicaon.ico éƒ½æ˜¯åœ¨é™æ€èµ„æºæ–‡ä»¶ä¸‹æ‰¾== 2ã€å¼•æ“æ¨¡æ¿ jspã€velocityã€Freemarkerã€Thymeleaf SpringBoot æ¨èçš„ Tymeleafï¼Œè¯­æ³•æ›´ç®€å•ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼› â‘  å¼•å…¥ thymeleaf12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;version&gt;2.3.1.RELEASE&lt;/version&gt;&lt;/dependency&gt; æµ‹è¯•ï¼š 1234@RequestMapping(value = &quot;/success&quot;) public String success()&#123; return &quot;success&quot;;&#125; åˆ‡æ¢ thymeleaf ç‰ˆæœ¬ 123&lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt;&lt;!-- å¸ƒå±€åŠŸèƒ½çš„æ”¯æŒç¨‹åº thymeleaf3ä¸»ç¨‹åº layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt;&lt;thymeleaf-layout-dialect.version&gt;2.3.0&lt;/thymeleaf-layout-dialect.version&gt; ==å¯åŠ¨æŠ¥é”™==ï¼š 1234567891011***************************APPLICATION FAILED TO START***************************Description:An attempt was made to call a method that does not exist. The attempt was made from the following location: org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration$ThymeleafDefaultConfiguration.templateEngine(ThymeleafAutoConfiguration.java:142)The following method did not exist: ==è§£å†³æ–¹æ¡ˆ==ï¼š 1234&lt;properties&gt; &lt;springboot-thymeleaf.version&gt;3.0.9.RELEASE&lt;/springboot-thymeleaf.version&gt; &lt;thymeleaf-layout-dialect.version&gt;2.3.0&lt;/thymeleaf-layout-dialect.version&gt;&lt;/properties&gt; åŸå› åˆ†æï¼š â€‹ è¿™é‡Œç”¨çš„ org.springframework.boot ä¸‹çš„ spring-boot-starter-thymeleaf,ä½¿ç”¨&lt;thymeleaf.version&gt;åšæ ‡ç­¾æ—¶çš„å¯èƒ½ä¸ org.thymeleaf å¤´å†²çªï¼Œå¯¼è‡´åŒ…è·å–ä¸æ­£ç¡®ã€‚ â‘¡ Thymeleaf ä½¿ç”¨12345678910111213@ConfigurationProperties( prefix = &quot;spring.thymeleaf&quot;)public class ThymeleafProperties &#123; private static final Charset DEFAULT_ENCODING; public static final String DEFAULT_PREFIX = &quot;classpath:/templates/&quot;; public static final String DEFAULT_SUFFIX = &quot;.html&quot;; private boolean checkTemplate = true; private boolean checkTemplateLocation = true; private String prefix = &quot;classpath:/templates/&quot;; private String suffix = &quot;.html&quot;; private String mode = &quot;HTML&quot;; // â€‹ åªè¦æˆ‘ä»¬æŠŠ HTML é¡µé¢çš„æ”¾åœ¨ classpath:/templates/, thymeleaf å°±èƒ½è‡ªåŠ¨æ¸²æŸ“ã€‚ ä½¿ç”¨ï¼š å¯¼å…¥ thymeleaf çš„åç§°ç©ºé—´ 1&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;/html&gt; ä½¿ç”¨ thymeleaf è¯­æ³• 1234567891011&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;success æµ‹è¯•æˆåŠŸ&lt;/h1&gt; &lt;div th:text=&quot;$&#123;hello&#125;&quot;&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; â‘¢ è¯­æ³•è§„åˆ™ th:textï¼š æ”¹å˜å½“å‰å…ƒç´ é‡Œé¢çš„å†…å®¹ã€‚ th: ä»»æ„ html å±æ€§ï¼›æ¥æ›¿æ¢åŸç”Ÿçš„å€¼ã€‚ è¡¨è¾¾å¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970Simple expression: (è¡¨è¾¾å¼è¯­æ³•) Variable Expressions:$&#123;...&#125;: è·å–å˜é‡å€¼; OGNL; 1)ã€è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³• 2)ã€ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡ï¼š # ctx: the context object. #vars: the context variables. #locale : the context locale. #request : (only in Web Contexts) the HttpServletRequest object. #response : (only in Web Contexts) the HttpServletResponse object. #session : (only in Web Contexts) the HttpSession object. #servletContext : (only in Web Contexts) the ServletContext object. $&#123;session.foo&#125; 3)ã€å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡ #execInfo : information about the template being processed. #messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #&#123;â€¦&#125; syntax. #uris : methods for escaping parts of URLs/URIs #conversions : methods for executing the configured conversion service (if any). #dates : methods for java.util.Date objects: formatting, component extraction, etc. #calendars : analogous to #dates , but for java.util.Calendar objects. #numbers : methods for formatting numeric objects. #strings : methods for String objects: contains, startsWith, prepending/appending, etc. #objects : methods for objects in general. #bools : methods for boolean evaluation. #arrays : methods for arrays. #lists : methods for lists. #sets : methods for sets. #maps : methods for maps. #aggregates : methods for creating aggregates on arrays or collections. #ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration). Selection Variable Expressions: *&#123;.....&#125;ï¼š é€‰æ‹©è¡¨è¾¾å¼ï¼šå’Œ$&#123;&#125;åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·; è¡¥å……: é…åˆ th:object=&quot;$&#123;session.user&#125;&quot; &lt;div th:object=&quot;$&#123;session.user&#125;&quot;&gt; &lt;p&gt;Name: &lt;span th:text=&quot;*&#123;firstName&#125;&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt; &lt;p&gt;Surname: &lt;span th:text=&quot;*&#123;lastName&#125;&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt; &lt;p&gt;Nationality: &lt;span th:text=&quot;*&#123;nationality&#125;&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt; &lt;/div&gt; Message Expressions: #&#123;...&#125;: è·å–å›½é™…åŒ–å†…å®¹ Link URL Expressions: @&#123;....&#125;: å®šä¹‰URL; @&#123;/order/process(execId=$&#123;execId&#125;,execType=&#x27;FAST&#x27;)&#125; Fragment Expressions: ~&#123;...&#125;ï¼šç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼ &lt;div th:insert=&quot;~&#123;commons :: main&#125;&quot;&gt;...&lt;/div&gt;Literals(å­—é¢é‡) Text literals: &#x27;one text&#x27; , &#x27;Another one! Number literals: 0 , 34 , 3.0 , 12.3 ,â€¦ Boolean literals: true , false Null literal: null Literal tokens: one , sometext , main ,â€¦Text operations:ï¼ˆæ–‡æœ¬æ“ä½œï¼‰ String concatenation: + Literal substitutions: |The name is $&#123;name&#125;| Arithmetic operations:ï¼ˆæ•°å­¦è¿ç®—ï¼‰ Binary operators: + , â€ , * , / , % Minus sign (unary operator): â€Boolean operations:ï¼ˆå¸ƒå°”è¿ç®—ï¼‰ Binary operators: and , or Boolean negation (unary operator): ! , notComparisons and equality:ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰ Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le ) Equality operators: == , != ( eq , ne )Conditional operators:æ¡ä»¶è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰ Ifâ€then: (if) ? (then) Ifâ€thenâ€else: (if) ? (then) : (else) Default: (value) ?: (defaultvalue)Special tokens: Noâ€Operation: _ 3ã€SpringMVC è‡ªåŠ¨é…ç½®â€‹ å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼šhttps://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developingweb-applications â‘  Spring MVC auto-configurationSpring Boot è‡ªåŠ¨é…ç½®å¥½äº† SpringMVC ä»¥ä¸‹æ˜¯ SpringBoot å¯¹ SpringMVC çš„é»˜è®¤é…ç½®ï¼š==ï¼ˆWebMvcAutoConfigurationï¼‰== Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans. è‡ªåŠ¨é…ç½® ViewResource(è§†å›¾è§£æå™¨ï¼šæ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å¾—è§†å›¾å¯¹è±¡çš„ï¼ˆViewï¼‰, è§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Ÿé‡å®šå‘ï¼Ÿï¼‰) ContextNegotiatingViewResolver: ç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„ï¼› ==å¦‚ä½•å®šåˆ¶ï¼šæˆ‘ä»¬å¯ä»¥ç»™è‡ªå·±å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è‡ªåŠ¨çš„å°†å…¶ç»„åˆè¿›æ¥ï¼›== Support for serving static resources, including support for WebJars (see below). é™æ€èµ„æºæ–‡ä»¶å¤¹è·¯å¾„ï¼Œwebjars Static index.html supportã€‚é™æ€é¦–é¡µçš„è®¿é—® Custom Favicon support (see below). favicon.ico è‡ªåŠ¨æ³¨å†Œ of Converter , GenericConverter, Formatter bean Converter: è½¬æ¢å™¨ï¼›public String hello(User user): ç±»å‹è½¬æ¢ä½¿ç”¨ Converter Formatter æ ¼å¼åŒ–å™¨ï¼š 2020.8.29 == Dateï¼› 123456@Bean@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;dateâ€format&quot;)//åœ¨æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™public Formatter&lt;Date&gt; dateFormatter() &#123; return new DateFormatter(this.mvcProperties.getDateFormat());//æ—¥æœŸæ ¼å¼åŒ–ç»„ä»¶&#125; ==è‡ªå·±æ·»åŠ çš„æ ¼å¼åŒ–å™¨è½¬æ¢å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¾åœ¨å®¹å™¨ä¸­å³å¯== Support for HttpMessageConverters (see below) HttpMessageConverter: SpringMVC ç”¨æ¥è½¬æ¢ Http è¯·æ±‚å’Œå“åº”çš„ ï¼šUserâ€”jsonï¼› HttpMessageConverters æ˜¯ä»å®¹å™¨ä¸­ç¡®å®šï¼›è·å–æ‰€æœ‰çš„ HttpMessageConverter; ç»™è‡ªå·±çš„å®¹å™¨ä¸­æ·»åŠ  HttpMessageConverter,åªéœ€è¦å°†è‡ªå·±çš„ç»„ä»¶æ³¨å†Œå®¹å™¨ä¸­ï¼ˆ@Bean, @Componentï¼‰ Automatic registration of MessageCodesResolver (see below). å®šä¹‰é”™è¯¯çš„ä»£ç ç”Ÿæˆè§„åˆ™ Automatic use of a ConfigurableWebBindingInitializer bean (see below). ==æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ª ConfigurableWebBindingInitialzer æ¥æ›¿æ¢é»˜è®¤çš„ï¼šï¼ˆæ·»åŠ åˆ°å®¹å™¨ï¼‰== 12åˆå§‹åŒ–WebDataBinderï¼›è¯·æ±‚æ•°æ®=====JavaBeanï¼› org.springframework.boot.autoconfigure.web çš„æ‰€æœ‰çš„è‡ªåŠ¨åœºæ™¯ï¼› If you want to keep Spring Boot MVC features, and you just want to add additional ==MVC configuration==(interceptors, formatters, view controllers etc.) you can add your own @Configuration class of type WebMvcConfigurerAdapter , but without @EnableWebMvc . If you wish to provide custom instances of RequestMappingHandlerMapping , RequestMappingHandlerAdapter or ExceptionHandlerExceptionResolver you can declare a WebMvcRegistrationsAdapter instance providing such components. If you want to take complete control of Spring MVC, you can add your own @Configuration annotated with @EnableWebMvc . â‘¡ æ‰©å±• SpringMVC1234567&lt;mvc:view-controller path=&quot;/hello&quot; view-name=&quot;success&quot;/&gt;&lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;mvc:mapping path=&quot;/hello&quot;/&gt; &lt;bean&gt;&lt;/bean&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt; ==ç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼ˆ@Configurationï¼‰,æ˜¯ WebMvcConfigAdapter ç±»å‹ï¼›ä¸èƒ½æ ‡æ³¨@EnableWebMVC== æ—¢ä¿ç•™æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼› æ³¨ï¼šWebMvcConfigurerAdapterè¯¥æ–¹æ³•åœ¨ spring boot 2.0ï¼ŒSpring 5.0 ä¹‹åï¼Œå·²ç»è¢«åºŸå¼ƒ 12345678910// ä½¿ç”¨WebMvcConfigurerå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½@Configurationpublic class MyMvcConfig implements WebMvcConfigurer&#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; // super.addViewControllers(registry); // æµè§ˆå™¨å‘é€ /oy è¯·æ±‚åˆ° success registry.addViewController(&quot;/oy&quot;).setViewName(&quot;success&quot;); &#125;&#125; æµ‹è¯•ï¼š åŸç†ï¼š 1. WebMvcAutoConfigurationæ˜¯SpringMVCçš„è‡ªåŠ¨é…ç½®ç±» åœ¨åšå…¶ä»–çš„è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼š@Importï¼ˆEnableWebMvcConfiguration.classï¼‰ 123456789101112131415@Configurationpublic static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration &#123; private final WebMvcConfigurerComposite configurers = new WebMvcConfigurerComposite(); // ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„WebmvcConfigurer @Autowired(required = false) public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) &#123; if (!CollectionUtils.isEmpty(configurers)) &#123; this.configurers.addWebMvcConfigurers(configurers); //ä¸€ä¸ªå‚è€ƒå®ç°ï¼›å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®éƒ½æ¥ä¸€èµ·è°ƒç”¨ï¼› @Override // public void addViewControllers(ViewControllerRegistry registry) &#123; // for (WebMvcConfigurer delegate : this.delegates) &#123; // delegate.addViewControllers(registry); // &#125;&#125; å®¹å™¨ä¸­æ‰€æœ‰çš„ WebMvcConfigurer éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ æˆ‘ä»¬çš„é…ç½®ç±»ä¹Ÿä¼šè¢«è°ƒç”¨ï¼› æ•ˆæœï¼šSpringMVC çš„è‡ªåŠ¨é…ç½®å’Œæˆ‘ä»¬çš„æ‰©å±•é…ç½®éƒ½ä¼šèµ·ä½œç”¨ï¼› â‘¢ã€å…¨é¢æ¥ç®¡ SpringMVCï¼›SpringBoot å¯¹ SpringMVC çš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±é…ç½®ï¼›æ‰€æœ‰çš„ SpringMVC çš„è‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº† æˆ‘ä»¬éœ€è¦åœ¨é…ç½®ç±»ä¸­æ·»åŠ @EnableWebMvc å³å¯ï¼› 1234567891011// ä½¿ç”¨WebMvcConfigurerå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½@Configuration@EnableWebMvcpublic class MyMvcConfig implements WebMvcConfigurer &#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; /* super.addViewControllers(registry);*/ // æµè§ˆå™¨ /oy è¯·æ±‚æ¥åˆ° success registry.addViewController(&quot;/oy&quot;).setViewName(&quot;success&quot;); &#125;&#125; åŸç†ï¼šï¼ˆä¸ºä»€ä¹ˆ@EnableWebMvc è‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼‰ @EnableWebMvc çš„æ ¸å¿ƒ 12@Import(DelegatingWebMvcConfiguration.class)public @interface EnableWebMvc &#123; 2. 12@Configurationpublic class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport &#123; 3. 12345678@Configuration@ConditionalOnWebApplication@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class,WebMvcConfigurerAdapter.class &#125;)//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class,ValidationAutoConfiguration.class &#125;)public class WebMvcAutoConfiguration &#123; @EnableWebMvc å°† WebMvcConfiguationSupport ç»„ä»¶å¯¼å…¥è¿›æ¥ å¯¼å…¥çš„ WebMvcConfiguration åªæ˜¯ SpringMVC æœ€åŸºæœ¬åŠŸèƒ½ï¼› 5ã€å¦‚ä½•ä¿®æ”¹ SpringBoot çš„é»˜è®¤è®¾ç½®æ¨¡å¼ï¼š SpringBoot åœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰è‡ªå·±é…ç½®çš„ï¼ˆ@Beanã€@Componentï¼‰å¦‚æœæœ‰å°±ç”¨æˆ·è‡ªå·±é…ç½®ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰è‡ªåŠ¨é…ç½®å’Œè‡ªå·±é»˜è®¤ç»„åˆèµ·æ¥ï¼› åœ¨ SpringBoot ä¸­å›½ä¼šæœ‰éå¸¸å¤šçš„ xxxConfigurer å¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½® åœ¨ SpringBoot ä¸­ä¼šæœ‰å¾ˆå¤šçš„ xxxCustomize å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå®šåˆ¶é…ç½® 6ã€RestfulCRUDé…ç½® pom é…ç½®æ–‡ä»¶ï¼š 12345678910111213 &lt;properties&gt; &lt;!-- å¸ƒå±€åŠŸèƒ½çš„æ”¯æŒç¨‹åº thymeleaf3ä¸»ç¨‹åº layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt; &lt;springboot-thymeleaf.version&gt;3.0.9.RELEASE&lt;/springboot-thymeleaf.version&gt; &lt;thymeleaf-layout-dialect.version&gt;2.3.0&lt;/thymeleaf-layout-dialect.version&gt;&lt;/properties&gt;&lt;!--é…ç½®thymeleafæ¨¡æ¿--&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;version&gt;2.3.1.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; â‘  é»˜è®¤è®¿é—®é¦–é¡µâ€‹ æ–¹å¼ä¸€ï¼š(ä¸æ¨è) 12345// åœ¨Controllerä¸­é…ç½® @RequestMapping(&#123;&quot;/&quot;,&quot;/index.html&quot;&#125;) public String index()&#123; return &quot;index&quot;; &#125; â€‹ æ–¹å¼äºŒï¼š(æ¨è) 123456789101112131415161718192021222324// ä½¿ç”¨WebConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½// ä½¿ç”¨@EnableWebMvc ä¸è¦æ¥ç®¡SpringMVC@Configurationpublic class MyMvcConfig implements WebMvcConfigurer &#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123;// super.addViewControllers(registry); //æµè§ˆå™¨å‘é€å¾— /oy è¯·æ±‚æ¥åˆ° success registry.addViewController(&quot;/oy&quot;).setViewName(&quot;success&quot;); &#125; // æ‰€æœ‰çš„webMvcConfigAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ @Bean // å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨ public MyMvcConfig MyMvcConfig1()&#123; MyMvcConfig config = new MyMvcConfig()&#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;); registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;login&quot;); &#125; &#125;; return config; &#125;&#125; ã€application.propertiesã€‘ 1server.servlet.context-path=/curd æµ‹è¯•ï¼š æå‰åœ¨ POM.xml æ–‡ä»¶ä¸­å¼•å…¥ bootstrap ä¾èµ–ï¼ˆåé¢éœ€è¦ï¼‰ 123456&lt;!--å¼•å…¥bootstrap--&gt;&lt;dependency&gt; &lt;groupId&gt;org.webjars&lt;/groupId&gt; &lt;artifactId&gt;bootstrap&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt; â‘¡ å›½é™…åŒ– ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼š SpringBoot è‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ï¼ˆ2.x ç‰ˆæœ¬ï¼‰ï¼š 1234567891011121314151617181920212223242526272829@Bean @ConfigurationProperties( prefix = &quot;spring.messages&quot; ) public MessageSourceProperties messageSourceProperties() &#123; return new MessageSourceProperties(); &#125; @Bean public MessageSource messageSource(MessageSourceProperties properties) &#123; ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource(); if (StringUtils.hasText(properties.getBasename())) &#123; // è®¾ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰ messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename()))); &#125; if (properties.getEncoding() != null) &#123; messageSource.setDefaultEncoding(properties.getEncoding().name()); &#125; messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale()); Duration cacheDuration = properties.getCacheDuration(); if (cacheDuration != null) &#123; messageSource.setCacheMillis(cacheDuration.toMillis()); &#125; messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat()); messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage()); return messageSource; &#125; 1.x ç‰ˆæœ¬ï¼š 1234567891011121314151617181920212223242526@ConfigurationProperties(prefix = &quot;spring.messages&quot;)public class MessageSourceAutoConfiguration &#123; /** * Commaâ€separated list of basenames (essentially a fullyâ€qualified classpath * location), each following the ResourceBundle convention with relaxed support for * slash based locations. If it doesn&#x27;t contain a package qualifier (such as * &quot;org.mypackage&quot;), it will be resolved from the classpath root. */ private String basename = &quot;messages&quot;; //æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥æ”¾åœ¨ç±»è·¯å¾„ä¸‹å«messages.propertiesï¼› @Bean public MessageSource messageSource() &#123; ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource(); if (StringUtils.hasText(this.basename)) &#123; //è®¾ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰ messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray( StringUtils.trimAllWhitespace(this.basename))); &#125; if (this.encoding != null) &#123; messageSource.setDefaultEncoding(this.encoding.name()); &#125; messageSource.setFallbackToSystemLocale(this.fallbackToSystemLocale); messageSource.setCacheSeconds(this.cacheSeconds); messageSource.setAlwaysUseMessageFormat(this.alwaysUseMessageFormat); return messageSource;&#125; åœ¨application.properties æ–‡ä»¶ä¸­é…ç½®ï¼š 12#æŒ‡å®šç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶spring.messages.basename=i18n.login å»é¡µé¢è·å–çš„å›½é™…åŒ–çš„å€¼ã€ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot; /&gt; &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt; &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt; &lt;title&gt;Signin Template for Bootstrap&lt;/title&gt; &lt;!-- Bootstrap core CSS --&gt; &lt;link href=&quot;asserts/css/bootstrap.min.css&quot; th:href=&quot;@&#123;/webjars/bootstrap/4.0.0/css/bootstrap.css&#125;&quot; rel=&quot;stylesheet&quot; /&gt; &lt;!-- Custom styles for this template --&gt; &lt;link href=&quot;asserts/css/signin.css&quot; th:href=&quot;@&#123;/asserts/css/signin.css&#125;&quot; rel=&quot;stylesheet&quot; /&gt; &lt;/head&gt; &lt;body class=&quot;text-center&quot;&gt; &lt;form class=&quot;form-signin&quot; action=&quot;dashboard.html&quot;&gt; &lt;img class=&quot;mb-4&quot; src=&quot;asserts/img/bootstrap-solid.svg&quot; th:src=&quot;@&#123;/asserts/img/bootstrap-solid.svg&#125;&quot; alt=&quot;&quot; width=&quot;72&quot; height=&quot;72&quot; /&gt; &lt;h1 class=&quot;h3 mb-3 font-weight-normal&quot; th:text=&quot;#&#123;login.tip&#125;&quot;&gt; Please sign in &lt;/h1&gt; &lt;label class=&quot;sr-only&quot; th:text=&quot;#&#123;login.username&#125;&quot;&gt;Username&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; th:placeholder=&quot;#&#123;login.username&#125;&quot; required=&quot;&quot; autofocus=&quot;&quot; /&gt; &lt;label class=&quot;sr-only&quot; th:text=&quot;#&#123;login.password&#125;&quot;&gt;Password&lt;/label&gt; &lt;input type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; th:placeholder=&quot;#&#123;login.password&#125;&quot; required=&quot;&quot; /&gt; &lt;div class=&quot;checkbox mb-3&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; value=&quot;remember-me&quot; /&gt; [[#&#123;login.remember&#125;]] &lt;/label&gt; &lt;/div&gt; &lt;button class=&quot;btn btn-lg btn-primary btn-block&quot; type=&quot;submit&quot; th:text=&quot;#&#123;login.btn&#125;&quot; &gt; Sign in &lt;/button&gt; &lt;p class=&quot;mt-5 mb-3 text-muted&quot;&gt;Â© 2017-2018&lt;/p&gt; &lt;a class=&quot;btn btn-sm&quot;&gt;ä¸­æ–‡&lt;/a&gt; &lt;a class=&quot;btn btn-sm&quot;&gt;English&lt;/a&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; æµ‹è¯•ï¼šï¼ˆæ›´æ”¹æµè§ˆå™¨è¯­è¨€ï¼‰ åŸç†ï¼š å›½é™…åŒ– Localeï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼› LocaleResolverï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ 12345678910111213@Bean@ConditionalOnMissingBean@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)public LocaleResolver localeResolver() &#123; if (this.mvcProperties .getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123; return new FixedLocaleResolver(this.mvcProperties.getLocale()); &#125; AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver(); localeResolver.setDefaultLocale(this.mvcProperties.getLocale()); return localeResolver;&#125;é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯Localhostè¿›è¡Œå›½é™…åŒ– ç‚¹å‡»åˆ‡æ¢å›½é™…åŒ– ã€MyLocaleResolver.calssã€‘ 123456789101112131415161718// å¯ä»¥åœ¨è¿æ¥ä¸Šæºå¸¦åŒºåŸŸçš„ä¿¡æ¯public class MyLocaleResolver implements LocaleResolver&#123; @Override public Locale resolveLocale(HttpServletRequest httpServletRequest) &#123; String l = httpServletRequest.getParameter(&quot;l&quot;); Locale locale = Locale.getDefault(); if(!StringUtils.isEmpty(&quot;_&quot;))&#123; String[] split = l.split(&quot;_&quot;); locale = new Locale(split[0], split[1]); &#125; return locale; &#125; @Override public void setLocale(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale) &#123; &#125;&#125; ã€MyMvcConfig.classã€‘ 1234@Beanpublic LocaleResolver localeResolver()&#123; return new MyLocaleResolver();&#125; ã€login.htmlã€‘ 12&lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@&#123;/index.html(l=&#x27;zh_CN&#x27;)&#125;&quot;&gt;ä¸­æ–‡&lt;/a&gt;&lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@&#123;/index.html(l=&#x27;en_US&#x27;)&#125;&quot;&gt;English&lt;/a&gt; â‘¢ ç™»å½•å¼€å‘æœŸé—´æ¨¡æ¿çš„å¼•æ“é¡µé¢ä¿®æ”¹ä»¥åï¼Œè¦å®æ—¶ç”Ÿæ•ˆ ç¦ç”¨æ¨¡æ¿å¼•æ“çš„ç¼“å­˜ 12# ç¦ç”¨ç¼“å­˜spring.thymeleaf.cache=false é¡µé¢ä¿®æ”¹å®Œæˆå®Œæˆä»¥å ctrl +f9 : é‡æ–°ç¼–è¯‘ï¼› ã€MyLocaleResolver.classã€‘ 1234567891011121314151617public class MyLocaleResolver implements LocaleResolver&#123; @Override public Locale resolveLocale(HttpServletRequest httpServletRequest) &#123; String l = httpServletRequest.getParameter(&quot;l&quot;); Locale locale = Locale.getDefault(); if(!StringUtils.isEmpty(l))&#123; String[] split = l.split(&quot;_&quot;); locale = new Locale(split[0], split[1]); &#125; return locale; &#125; @Override public void setLocale(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale) &#123; &#125;&#125; ã€LonginController.classã€‘ 12345678910111213141516@Controllerpublic class LonginController &#123; @PostMapping(value = &quot;/user/login&quot;) public String login(@RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String passsword, Map&lt;String , Object&gt; map, HttpSession session)&#123; if(!StringUtils.isEmpty(username) &amp;&amp; &quot;123456&quot;.equals(passsword))&#123; // ç™»é™†æˆåŠŸï¼Œé˜²æ­¢è¡¨å•é‡å¤æäº¤ï¼Œå¯ä»¥é‡å®šå‘åˆ°ä¸»é¡µ session.setAttribute(&quot;loginUser&quot;,username); return &quot;redirect:/main.html&quot;; &#125;else&#123; // ç™»å½•å¤±è´¥ map.put(&quot;msg&quot;,&quot;ç”¨æˆ·åå¯†ç é”™è¯¯&quot;); return &quot;login&quot;; &#125; &#125;&#125; ã€MyMvcConfig.classã€‘ 123456789101112@Bean public MyMvcConfig MyMvcConfig1()&#123; MyMvcConfig config = new MyMvcConfig()&#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;); registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;login&quot;); registry.addViewController(&quot;/main.html&quot;).setViewName(&quot;dashboard&quot;); &#125; &#125;; return config; &#125; ç™»å½•é”™è¯¯æç¤ºæ¶ˆæ¯ ã€login.htmlã€‘ 1&lt;p style=&quot;color: red&quot; th:text=&quot;$&#123;msg&#125;&quot; th:if=&quot;$&#123;not #strings.isEmpty(msg)&#125;&quot;&gt;&lt;/p&gt; â‘£ æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥æ‹¦æˆªå™¨ï¼š 1234567891011121314151617181920212223242526272829303132/***@Description ç™»å½•æ£€æŸ¥*@Author OY*@Date 2020/9/3*@Time 16:07*/public class LoginHandlerInterceptor implements HandlerInterceptor &#123; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; Object user = request.getSession().getAttribute(&quot;loginUser&quot;); if(user == null)&#123; // æœªç™»å…¥ï¼Œè¿”å›ç™»å½•ç•Œé¢ request.setAttribute(&quot;msg&quot;,&quot;æ²¡æœ‰æƒé™è¯·å…ˆç™»é™†&quot;); request.getRequestDispatcher(&quot;/index.html&quot;).forward(request,response); return false; &#125;else&#123; // ä»¥ç™»å½•,æ”¾è¡Œè¯·æ±‚ return true; &#125; &#125; @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123; &#125; @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123; &#125;&#125; æ³¨å†Œæ‹¦æˆªå™¨ï¼šã€MyMvcConfig.classã€‘ æ³¨: æ‹¦æˆªå™¨å¿…é¡»é…ç½®ä¸æ‹¦æˆª css æ ·å¼ï¼Œä¸ç„¶é¡µé¢çš„ css æ ·å¼ä¼šå¤±æ•ˆ 12345678910111213141516171819202122232425262728// æ‰€æœ‰çš„webMvcConfigç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ @Bean // å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨ public MyMvcConfig MyMvcConfig1()&#123; MyMvcConfig config = new MyMvcConfig()&#123; @Override public void addViewControllers(ViewControllerRegistry registry) &#123; registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;); registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;login&quot;); registry.addViewController(&quot;/main.html&quot;).setViewName(&quot;dashboard&quot;); &#125; // æ³¨å†Œæ‹¦æˆªå™¨ @Override public void addInterceptors(InterceptorRegistry registry) &#123; // é™æ€èµ„æºï¼š *.css , *.js // SpringBootå·²ç»åšå¥½äº†é™æ€èµ„æºæ˜ å°„/* registry.addInterceptor(new LoginHandlerInterceptor()).addPathPatterns(&quot;/&quot;) .excludePathPatterns(&quot;/index.html&quot;,&quot;/&quot;,&quot;/user/login&quot;,&quot;/asset/**&quot;,&quot;/webjars/**&quot;);*/ registry.addInterceptor(new LoginHandlerInterceptor()).addPathPatterns(&quot;/**&quot;) .excludePathPatterns(&quot;/index.html&quot;, &quot;/&quot;, &quot;/user/login&quot;,&quot;/static/**&quot;, &quot;/webjars/**&quot;);// &#125; &#125;; return config; &#125; â‘¤ CRUD-å‘˜å·¥åˆ—è¡¨å®éªŒè¦æ±‚ï¼š RestfulCURD: CURD æ»¡è¶³ Rest é£æ ¼ï¼› URLï¼š/ èµ„æºåç§° / èµ„æºæ ‡è¯† HTTP è¯·æ±‚çš„æ–¹å¼åŒºåˆ†å¯¹èµ„æº CRUD æ“ä½œ æ™®é€š CURD(uri æ¥åŒºåˆ†æ“ä½œ) RestfulCRUD æŸ¥è¯¢ getEmp empâ€”GET æ·»åŠ  addEmp?xxx empâ€”POST ä¿®æ”¹ updateEmp?id=xxx&amp;xxx=xx emp/{id}â€”PUT åˆ é™¤ deleteEmp?id=1 emp/{id}â€”DELETE å®éªŒçš„è¯·æ±‚æ¶æ„ï¼š å®éªŒåŠŸèƒ½ è¯·æ±‚ URL è¯·æ±‚æ–¹å¼ æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ emps GET æŸ¥è¯¢æŸä¸ªå‘˜å·¥(æ¥åˆ°ä¿®æ”¹é¡µé¢) emp/1 GET æ¥åˆ°æ·»åŠ é¡µé¢ emp GET æ·»åŠ å‘˜å·¥ emps POST æ¥åˆ°ä¿®æ”¹é¡µé¢ï¼ˆæŸ¥å‡ºå‘˜å·¥è¿›è¡Œä¿¡æ¯å›æ˜¾ï¼‰ emp/1 GET ä¿®æ”¹å‘˜å·¥ emp PUT åˆ é™¤å‘˜å·¥ emp/1 DELETE å‘˜å·¥åˆ—è¡¨ thymeleaf å…¬å…±é¡µé¢å…ƒç´ çš„æŠ½å– 1ã€æŠ½å–å…¬å…±ç‰‡æ®µ &lt;div th:fragment=â€copyâ€&gt;&copy; 2011 The Good Thymes Virtual Grocery&lt;/div&gt; 2ã€å¼•å…¥å…¬å…±ç‰‡æ®µ &lt;div th:insert=â€~{footer:: copy}â€&gt; ~{templatename :: selector} : æ¨¡æ¿å :: é€‰æ‹©å™¨ ~{templatename :: fragmentname} : æ¨¡æ¿å :: ç‰‡æ®µå 3ã€é»˜è®¤æ•ˆæœ insert çš„å…¬å…±ç‰‡æ®µåœ¨ div æ ‡ç­¾ä¸­ å¦‚æœä½¿ç”¨ th:insert ç­‰å±æ€§è¿›è¡Œå¼•å…¥ï¼Œå¯ä»¥ä¸ç”¨å†™~{}ï¼› è¡Œå†…å†™æ³•å¯åŠ ä¸Š ï¼š[[{}]]; [[{}]] ä¸‰ç§å¼•å…¥ç‰‡æ®µçš„ th å±æ€§ï¼š th: insert: å°†å…¬å…±æ•´ä¸ªç‰‡æ®µæ’å…¥åˆ°å£°æ˜å¼•å…¥çš„å…ƒç´ ä¸­ th:replaceï¼š å°†å£°æ˜å¼•å…¥çš„å…ƒç´ æ¢ä¸ºå…¬å…±çš„ç‰‡æ®µ th:include: å°†è¢«å¼•å…¥çš„ç‰‡æ®µçš„å†…å®¹åŒ…å«è¿›è¿™ä¸ªæ ‡ç­¾ä¸­ 1234567891011&lt;footer th:fragment=&quot;copy&quot;&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/footer&gt;å¼•å…¥æ–¹å¼&lt;div th:insert=&quot;footer :: copy&quot;&gt;&lt;/div&gt;&lt;div th:replace=&quot;footer :: copy&quot;&gt;&lt;/div&gt;&lt;div th:include=&quot;footer :: copy&quot;&gt;&lt;/div&gt;æ•ˆæœ&lt;div&gt; &lt;footer&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/footer&gt;&lt;/div&gt;&lt;footer&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/footer&gt;&lt;div&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/div&gt; æŠ½å–å‡ºå…¬å…±çš„é¡µé¢ã€bar.htmlã€‘ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364 &lt;!--topbar--&gt; &lt;nav class=&quot;navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0&quot; th:fragment=&quot;topbar&quot;&gt; &lt;a class=&quot;navbar-brand col-sm-3 col-md-2 mr-0&quot; href=&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;&gt;[[$&#123;session.loginUser&#125;]]&lt;/a&gt; &lt;input class=&quot;form-control form-control-dark w-100&quot; type=&quot;text&quot; placeholder=&quot;Search&quot; aria-label=&quot;Search&quot;&gt; &lt;ul class=&quot;navbar-nav px-3&quot;&gt; &lt;li class=&quot;nav-item text-nowrap&quot;&gt; &lt;a class=&quot;nav-link&quot; href=&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;&gt;Sign out&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/nav&gt;&lt;nav class=&quot;col-md-2 d-none d-md-block bg-light sidebar&quot; id=&quot;sidebar&quot;&gt; &lt;div class=&quot;sidebar-sticky&quot;&gt; &lt;ul class=&quot;nav flex-column&quot;&gt; &lt;li class=&quot;nav-item&quot;&gt; &lt;a class=&quot;nav-link active&quot; href=&quot;#&quot; th:href=&quot;@&#123;/main.html&#125;&quot; th:class=&quot;$&#123;activeUri==&#x27;main.html&#x27;?&#x27;nav-link active&#x27;:&#x27;nav-link&#x27;&#125;&quot;&gt; &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;24&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; class=&quot;feather feather-home&quot;&gt; &lt;path d=&quot;M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z&quot;&gt;&lt;/path&gt; &lt;polyline points=&quot;9 22 9 12 15 12 15 22&quot;&gt;&lt;/polyline&gt; &lt;/svg&gt; Dashboard &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;nav-item&quot;&gt; &lt;a class=&quot;nav-link&quot; href=&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;&gt; &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;24&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; class=&quot;feather feather-file&quot;&gt; &lt;path d=&quot;M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z&quot;&gt;&lt;/path&gt; &lt;polyline points=&quot;13 2 13 9 20 9&quot;&gt;&lt;/polyline&gt; &lt;/svg&gt; Orders &lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;nav-item&quot;&gt; &lt;a class=&quot;nav-link&quot; href=&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;&gt; &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;24&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; class=&quot;feather feather-shopping-cart&quot;&gt; &lt;circle cx=&quot;9&quot; cy=&quot;21&quot; r=&quot;1&quot;&gt;&lt;/circle&gt; &lt;circle cx=&quot;20&quot; cy=&quot;21&quot; r=&quot;1&quot;&gt;&lt;/circle&gt; &lt;path d=&quot;M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6&quot;&gt;&lt;/path&gt; &lt;/svg&gt; Products &lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;nav-item&quot;&gt; &lt;a class=&quot;nav-link active&quot; href=&quot;#&quot; th:href=&quot;@&#123;/emps&#125;&quot; th:class=&quot;$&#123;activeUri==&#x27;emps&#x27;?&#x27;nav-link active&#x27;:&#x27;nav-link&#x27;&#125;&quot;&gt; &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;24&quot; height=&quot;24&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; class=&quot;feather feather-users&quot;&gt; &lt;path d=&quot;M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2&quot;&gt;&lt;/path&gt; &lt;circle cx=&quot;9&quot; cy=&quot;7&quot; r=&quot;4&quot;&gt;&lt;/circle&gt; &lt;path d=&quot;M23 21v-2a4 4 0 0 0-3-3.87&quot;&gt;&lt;/path&gt; &lt;path d=&quot;M16 3.13a4 4 0 0 1 0 7.75&quot;&gt;&lt;/path&gt; &lt;/svg&gt; å‘˜å·¥ç®¡ç† &lt;/a&gt; &lt;/li&gt; ......... &lt;/nva&gt; å¼•å…¥(é€‰æ‹©é«˜äº®)ï¼š 123456&lt;!--å¼•å…¥æŠ½å–çš„topbar--&gt;&lt;!--æ¨¡æ¿å: ä¼šä½¿ç”¨thymeleafçš„å‰åç¼€çš„é…ç½®è§„åˆ™è¿›è¡Œè§£æ--&gt;&lt;div th:replace=&quot;commons/bar :: topbar&quot;&gt;&lt;/div&gt;&lt;!--å¼•å…¥sidebar--&gt;&lt;div th:replace=&quot;commons/bar :: #sidebar(activeUri=&#x27;main.html&#x27;)&quot;&gt;&lt;/div&gt; ã€EmployeeController.javaã€‘ 12345678910111213141516@AutowiredEmployeeDao employeeDao;/** * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥åˆ—åˆ—è¡¨é¡µé¢ * @return */@GetMapping(value = &quot;/emps&quot;)public String list(Map&lt;String, Object&gt; map)&#123; Collection&lt;Employee&gt; employees = employeeDao.getAll(); //æ”¾åœ¨è¯·æ±‚åŸŸä¸­ map.put(&quot;emps&quot;, employees); // thymeleaf é»˜è®¤å°±ä¼šæ‹¼ä¸² // classpath:/templates/xxxx.html return &quot;emp/list&quot;;&#125; ä½¿ç”¨ thymeleaf æ¨¡æ¿åˆ—å‡ºæ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯ã€list.htmlã€‘ 1234567891011121314151617181920212223242526// ä¿®æ”¹è¿™ä¸ªä¸¤å¤„åœ°æ–¹&lt;thead&gt; &lt;tr&gt; &lt;th&gt;id&lt;/th&gt; &lt;th&gt;lastName&lt;/th&gt; &lt;th&gt;email&lt;/th&gt; &lt;th&gt;gender&lt;/th&gt; &lt;th&gt;department&lt;/th&gt; &lt;th&gt;birth&lt;/th&gt; &lt;th&gt;æ“ä½œ&lt;/th&gt; &lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt; &lt;tr th:each=&quot;emp:$&#123;emps&#125;&quot;&gt; &lt;td th:text=&quot;$&#123;emp.id&#125;&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;$&#123;emp.lastName&#125;&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;$&#123;emp.email&#125;&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;$&#123;emp.gender&#125;&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;$&#123;emp.department.departmentName&#125;&quot;&gt;&lt;/td&gt; &lt;td th:text=&quot;$&#123;#dates.format(emp.birth, &#x27;yyyy-MM-dd HH:mm&#x27;)&#125;&quot;&gt;&lt;/td&gt; &lt;td&gt; &lt;a class=&quot;btn btn-sm btn-primary&quot; href=&quot;#&quot;&gt;ç¼–è¾‘&lt;/a&gt; &lt;button class=&quot;btn btn-danger&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt; â‘¥ CRUD-å‘˜å·¥æ·»åŠ å°†ã€list.htmlã€‘æ›¿æ¢ä¸ºï¼š 123456æ›¿æ¢å‰ï¼š&lt;h2&gt;Section title&lt;/h2&gt;æ›¿æ¢åï¼š&lt;h2&gt; &lt;a class=&quot;btn btn-sm btn-success&quot; href=&quot;#&quot; th:href=&quot;@&#123;/emp&#125;&quot;&gt;å‘˜å·¥æ·»åŠ &lt;/a&gt;&lt;/h2&gt; ã€EmployeeController.javaã€‘ 12345678910 @Autowired DepartmentDao departmentDao;@GetMapping(&quot;/emp&quot;)public String toAddPage(Map&lt;String, Object&gt; map)&#123; // æ¥åˆ°æ·»åŠ é¡µé¢ï¼ŒæŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ Collection&lt;Department&gt; departments = departmentDao.getDepartments(); map.put(&quot;depts&quot;,departments); return &quot;emp/add&quot;;&#125; åœ¨ templates/emp æ–°å»ºé¡µé¢ã€add.htmlã€‘ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071// å¤åˆ¶list.html è¿›è¡Œç»†å¾®çš„ä¿®æ”¹,åˆ é™¤åŸ&lt;main&gt; æ ‡ç­¾ä¸­çš„å…ƒç´ æ›¿æ¢ä¸ºä»¥ä¸‹çš„å†…å®¹ &lt;main role=&quot;main&quot; class=&quot;col-md-9 ml-sm-auto col-lg-10 pt-3 px-4&quot;&gt; &lt;form th:action=&quot;@&#123;/emp&#125;&quot; method=&quot;post&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;LastName&lt;/label&gt; &lt;input name=&quot;lastName&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;Email&lt;/label&gt; &lt;input name=&quot;email&quot; type=&quot;email&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan@atguigu.com&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;Gender&lt;/label&gt;&lt;br /&gt; &lt;div class=&quot;form-check form-check-inline&quot;&gt; &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt; &lt;label class=&quot;form-check-label&quot;&gt;ç”·&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-check form-check-inline&quot;&gt; &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt; &lt;label class=&quot;form-check-label&quot;&gt;å¥³&lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;department&lt;/label&gt; &lt;!--æäº¤çš„æ˜¯éƒ¨é—¨çš„id--&gt; &lt;select class=&quot;form-control&quot; name=&quot;department.id&quot;&gt; &lt;option th:value=&quot;$&#123;dept.id&#125;&quot; th:each=&quot;dept:$&#123;depts&#125;&quot; th:text=&quot;$&#123;dept.departmentName&#125;&quot; &gt; 1 &lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;Birth&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birth&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot; /&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;æ·»åŠ &lt;/button&gt; &lt;/form&gt; &lt;/main&gt;&lt;/main&gt; ã€application.propertiesã€‘ 12# æ ¼å¼åŒ–æ—¶é—´spring.mvc.format.date=yyyy-MM-dd æ—¥æœŸçš„æ ¼å¼åŒ–ï¼š SpringMVC å°†é¡µé¢çš„æäº¤çš„å€¼éœ€è¦è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹ï¼› ä¾‹å¦‚ï¼š2017-12-12â€”-Dateï¼› ç±»å‹è½¬æ¢ï¼Œæ ¼å¼åŒ–ï¼› é»˜è®¤æ—¥æœŸçš„æŒ‰ç…§/çš„æ–¹å¼ ã€EmployeeController.javaã€‘ 123456789101112/** * è·å–æ·»åŠ é¡µé¢çš„ä¿¡æ¯ */@PostMapping(value = &quot;/emp&quot;)public String addEmp(Employee employee)&#123; System.out.println(&quot;ä¿å­˜åˆ°å‘˜å·¥ä¿¡æ¯:&quot; + employee); // ä¿å­˜å‘˜å·¥ä¿¡æ¯ employeeDao.save(employee); // redirect: é‡å®šå‘ä¸€ä¸ªåˆ°åœ°å€ / ä»£è¡¨å½“å‰é¡¹ç›®çš„è·¯å¾„ // forward: è¡¨ç¤ºè½¬å‘ä¸€ä¸ªåœ°å€ return &quot;redirect:/emps&quot;;&#125; ä¿®æ”¹ã€list.htmlã€‘ä¸­çš„ gender 1&lt;td th:text=&quot;$&#123;emp.gender&#125;==0?&#x27;å¥³&#x27;:&#x27;ç”·&#x27;&quot;&gt;&lt;/td&gt; æ•ˆæœï¼š â‘¦ å‘˜å·¥ä¿®æ”¹å…ˆé€šè¿‡ id æŸ¥è¯¢ä¿®æ”¹å‘˜å·¥çš„ä¿¡æ¯ã€EmployeeController.javaã€‘ 12345678910111213/** * æ¥åˆ°ä¿®æ”¹é¡µé¢ï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œå›æ˜¾ */@GetMapping(value = &quot;/emp/&#123;id&#125;&quot;)public String toEditPage(@PathVariable(&quot;id&quot;) Integer id, Map&lt;String, Object&gt; map)&#123; Employee employee = employeeDao.get(id); map.put(&quot;emp&quot;,employee); // é¡µé¢è¦æ˜¾ç¤ºæ‰€æœ‰éƒ¨é—¨çš„ä¿¡æ¯ Collection&lt;Department&gt; departments = departmentDao.getDepartments(); map.put(&quot;depts&quot;,departments); return &quot;emp/add&quot;;&#125; ä¿®æ”¹æ·»åŠ äºŒåˆä¸€è¡¨å•ã€list.htmlã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103&lt;!--å¼•å…¥æŠ½å–çš„topbar--&gt;&lt;!--æ¨¡æ¿å: ä¼šä½¿ç”¨thymeleafçš„å‰åç¼€çš„é…ç½®è§„åˆ™è¿›è¡Œè§£æ--&gt;&lt;div th:replace=&quot;commons/bar::topbar&quot;&gt;&lt;/div&gt;&lt;div class=&quot;container-fluid&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;!--å¼•å…¥sidebar--&gt; &lt;div th:replace=&quot;commons/bar::#sidebar(activeUri=&#x27;emps&#x27;)&quot;&gt;&lt;/div&gt; &lt;main role=&quot;main&quot; class=&quot;col-md-9 ml-sm-auto col-lg-10 pt-3 px-4&quot;&gt; &lt;!--éœ€è¦åŒºåˆ†æ˜¯å‘˜å·¥ä¿®æ”¹è¿˜æ˜¯æ·»åŠ ï¼›--&gt; &lt;form th:action=&quot;@&#123;/emp&#125;&quot; method=&quot;post&quot;&gt; &lt;!--å‘é€putè¯·æ±‚ä¿®æ”¹å‘˜å·¥æ•°æ®--&gt; &lt;!-- 1.SpringMVCä¸­é…ç½®HiddenHttpMethodFiler;(SpringBootè‡ªåŠ¨é…ç½®å¥½çš„) 2.é¡µé¢åˆ›å»ºä¸€ä¸ªpostè¡¨å• 3.åˆ›å»ºinputé¡¹,name=&quot;_method&quot;;å€¼å°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¯·æ±‚æ–¹å¼ --&gt; &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;put&quot; th:if=&quot;$&#123;emp!=null&#125;&quot; /&gt; &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;$&#123;emp.id&#125;&quot; th:if=&quot;$&#123;emp != null&#125;&quot; /&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;LastName&lt;/label&gt; &lt;input name=&quot;lastName&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot; th:value=&quot;$&#123;emp!= null&#125;?$&#123;emp.lastName&#125;&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;Email&lt;/label&gt; &lt;input name=&quot;email&quot; type=&quot;email&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan@atguigu.com&quot; th:value=&quot;$&#123;emp!=null&#125;?$&#123;emp.email&#125;&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;Gender&lt;/label&gt;&lt;br /&gt; &lt;div class=&quot;form-check form-check-inline&quot;&gt; &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; th:checked=&quot;$&#123;emp!=null&#125;?$&#123;emp.gender==1&#125;&quot; /&gt; &lt;label class=&quot;form-check-label&quot;&gt;ç”·&lt;/label&gt; &lt;/div&gt; &lt;div class=&quot;form-check form-check-inline&quot;&gt; &lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; th:checked=&quot;$&#123;emp!= null&#125;?$&#123;emp.gender==0&#125;&quot; /&gt; &lt;label class=&quot;form-check-label&quot;&gt;å¥³&lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;department&lt;/label&gt; &lt;!--æäº¤çš„æ˜¯éƒ¨é—¨çš„id--&gt; &lt;select class=&quot;form-control&quot; name=&quot;department.id&quot;&gt; &lt;option th:selected=&quot;$&#123;emp!=null&#125;?$&#123;dept.id==emp.department.id&#125;&quot; th:value=&quot;$&#123;dept.id&#125;&quot; th:each=&quot;dept:$&#123;depts&#125;&quot; th:text=&quot;$&#123;dept.departmentName&#125;&quot; &gt; 1 &lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;Birth&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birth&quot; class=&quot;form-control&quot; placeholder=&quot;zhangsan&quot; th:value=&quot;$&#123;emp!= null&#125;?$&#123;#dates.format(emp.birth, &#x27;yyyy-MM-dd HH:mm&#x27;)&#125;&quot; /&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; th:text=&quot;$&#123;emp!=null&#125;?&#x27;ä¿®æ”¹&#x27;:&#x27;æ·»åŠ &#x27;&quot; &gt; æ·»åŠ  &lt;/button&gt; &lt;/form&gt; &lt;/main&gt; &lt;/div&gt;&lt;/div&gt; è·å–ä¿®æ”¹çš„æ•°æ®ï¼Œåå°è¿›è¡Œå¤„ç†ã€EmployeeController.classã€‘ 1234567891011/** * ä¿®æ”¹å‘˜å·¥çš„ä¿¡æ¯ï¼Œéœ€è¦æäº¤å‘˜å·¥çš„id * @param employee * @return */@PutMapping(value = &quot;/emp&quot;)public String updateEmployees(Employee employee)&#123; System.out.println(&quot;å‘˜å·¥ä¿®æ”¹ä¿¡æ¯ä¸º:&quot;+employee); employeeDao.save(employee); return &quot;redirect:/emps&quot;;&#125; â‘§ å‘˜å·¥åˆ é™¤ã€EmployeeController.javaã€‘ 1234567891011/** * å‘˜å·¥åˆ é™¤ * @param id * @return */@DeleteMapping(&quot;/emp/&#123;id&#125;&quot;)public String deleteEmployee(@PathVariable(&quot;id&quot;) Integer id)&#123; System.out.println(&quot;éœ€è¦åˆ é™¤å‘˜å·¥çš„Idä¸º:&quot;+ id); employeeDao.delete(id); return &quot;redirect:/emps&quot;;&#125; ã€list.htmlã€‘ ä¿®æ”¹ button æ·»åŠ å±æ€§ 123456&lt;button th:attr=&quot;del_uri=@&#123;/emp/&#125;+$&#123;emp.id&#125;&quot; class=&quot;btn btn-sm btn-danger deleteBtn&quot;&gt; åˆ é™¤&lt;/button&gt; æ·»åŠ  form è¡¨å• 123&lt;form id=&quot;deleteEmpForm&quot; method=&quot;post&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;delete&quot; /&gt;&lt;/form&gt; ç”¨ jquery æ¥å¤„ç†ç”¨æˆ·åˆ é™¤ 1234567891011121314151617181920212223// æ·»åŠ th:src é˜²æ­¢jsã€bootstratç­‰æ— æ³•è·å–èµ„æº&lt;script type=&quot;text/javascript&quot; src=&quot;asserts/js/jquery-3.2.1.slim.min.js&quot; th:src=&quot;@&#123;/webjars/jquery/3.2.1/dist/jquery.js&#125;&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;asserts/js/popper.min.js&quot; th:src=&quot;@&#123;/webjars/popper.js/1.11.1/dist/popper.js&#125;&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;asserts/js/bootstrap.min.js&quot; th:src=&quot;@&#123;/webjars/bootstrap/4.0.0/js/bootstrap.js&#125;&quot;&gt;&lt;/script&gt;&lt;!-- Icons --&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;asserts/js/feather.min.js&quot; th:src=&quot;@&#123;/asserts/js/feather.min.js&#125;&quot;&gt;&lt;/script&gt; 12345678910111213&lt;script&gt; $(&quot;.deleteBtn&quot;).click(function () &#123; var $tr = $(this).parent().parent(); var name = $tr.children(&quot;:first&quot;).html(); // åˆ é™¤å‘˜å·¥,å¹¶è¿›è¡Œå‹å¥½æç¤º if (confirm(&quot;ç¡®å®šè¦ç”¨æˆ·IDä¸ºã€&quot; + name + &quot;ã€‘åˆ é™¤å—ï¼Ÿ&quot;)) &#123; $(&quot;#deleteEmpForm&quot;).attr(&quot;action&quot;, $(this).attr(&quot;del_uri&quot;)).submit(); // å–æ¶ˆå…ƒç´ çš„é»˜è®¤è¡Œä¸º return false; &#125; return false; &#125;);&lt;/script&gt; å¼‚å¸¸å¤„ç†ï¼ˆdelete è¯·æ±‚è¢«æ‹¦æˆªï¼‰ There was an unexpected error (type=Method Not Allowed, status=405) è§£å†³æ–¹æ³•ï¼šåœ¨ SpringBoot é…ç½®æ–‡ä»¶ä¸­ã€application.propertiesã€‘ä¸­é…ç½® 12# å–æ¶ˆdeleteè¯·æ±‚æ‹¦æˆªspring.mvc.hiddenmethod.filter.enabled=true 7ã€é”™è¯¯å¤„ç†æœºåˆ¶â‘  SpringBoot é»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶é»˜è®¤æ•ˆæœï¼š æµè§ˆå™¨ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„é”™è¯¯é¡µé¢ æµè§ˆå™¨å‘é€çš„è¯·æ±‚çš„è¯·æ±‚å¤´ï¼š å¦‚æœæ˜¯å…¶ä»–å®¢æˆ·ç«¯ï¼Œé»˜è®¤å“åº”ä¸€ä¸ª josn æ•°æ® åŸç†ï¼šå¯ä»¥å‚ç…§ ErrorMvcAutoConfigurationï¼› é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®ï¼› ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸‹ç»„ä»¶ . DefaultErrorAttributes; 1234567891011å¸®åŠ©æˆ‘ä»¬åœ¨é¡µé¢å…±äº«ä¿¡æ¯; @Override public Map&lt;String, Object&gt; getErrorAttributes(RequestAttributes requestAttributes,boolean includeStackTrace)&#123; Map&lt;String, Object&gt; errorAttributes = new LinkedHashMap&lt;String, Object&gt;(); errorAttributes.put(&quot;timestamp&quot;, new Date()); addStatus(errorAttributes, requestAttributes); addErrorDetails(errorAttributes, requestAttributes,includeStackTrace); addPath(errorAttributes, requestAttributes); return errorAttributes;&#125; .BasicErrorController: å¤„ç†é»˜è®¤çš„/error è¯·æ±‚ 12345678910111213141516171819202122@Controller@RequestMapping(&quot;$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;&quot;)public class BasicErrorController extends AbstractErrorController &#123; @RequestMapping(produces = &quot;text/html&quot;)// äº§ç”Ÿhtmlç±»å‹çš„æ•°æ®ï¼›æµè§ˆå™¨å‘é€çš„è¯·æ±‚æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç† public ModelAndView errorHtml(HttpServletRequest request,HttpServletResponse response) &#123; HttpStatus status = getStatus(request); Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes( request, isIncludeStackTrace(request, MediaType.TEXT_HTML))); response.setStatus(status.value()); //å»å“ªä¸ªé¡µé¢ä½œä¸ºé”™è¯¯é¡µé¢ï¼›åŒ…å«é¡µé¢åœ°å€å’Œé¡µé¢å†…å®¹ ModelAndView modelAndView = resolveErrorView(request, response, status, model); return (modelAndView == null ? new ModelAndView(&quot;error&quot;, model) : modelAndView); &#125; @RequestMapping @ResponseBody // äº§ç”Ÿjsonæ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ¥è¿™ä¸ªæ–¹æ³•å¤„ç† public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) &#123; Map&lt;String, Object&gt; body = getErrorAttributes(request, isIncludeStackTrace(request, MediaType.ALL)); HttpStatus status = getStatus(request); return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status); &#125; 3ï¼‰.ErrorPageCustomizerï¼š 12@Value(&quot;$&#123;error.path:/error&#125;&quot;)private String path = &quot;/error&quot;; ç³»ç»Ÿå‡ºç°é”™è¯¯ä»¥åæ¥åˆ°errorè¯·æ±‚è¿›è¡Œå¤„ç†ï¼›(web.xmlæ³¨å†Œçš„é”™è¯¯é¡µé¢è§„åˆ™) 4ï¼‰. DefaultErroViewResolverï¼š 1234567891011121314151617181920@Overridepublic ModelAndView resolveErrorView(HttpServletRequest request, HttpStatus status,Map&lt;String, Object&gt; model) &#123;ModelAndView modelAndView = resolve(String.valueOf(status), model); if (modelAndView == null &amp;&amp;SERIES_VIEWS.containsKey(status.series())) &#123; modelAndView = resolve(SERIES_VIEWS.get(status.series()), model); &#125; return modelAndView;&#125;private ModelAndView resolve(String viewName, Map&lt;String, Object&gt; model) &#123; //é»˜è®¤çš„SpringBootå¯ä»¥å»æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ error/404 String errorViewName = &quot;error/&quot; + viewName; //æ¨¡æ¿å¼•æ“å¯ä»¥è§£æè¿™ä¸ªé¡µé¢åœ°å€å°±ç”¨æ¨¡æ¿å¼•æ“è§£æ TemplateAvailabilityProvider provider =this.templateAvailabilityProviders.getProvider(errorViewName, this.applicationContext); if (provider != null) &#123; //æ¨¡æ¨¡æ¿å¼•æ“å¯ç”¨çš„æƒ…å†µä¸‹è¿”å›errorViewNameæŒ‡å®šçš„è¯•å›¾åœ°å€ return new ModelAndView(errorViewName, model); &#125; //æ¨¡æ¿å¼•æ“ä¸å¯ç”¨ï¼Œå°±åœ¨é™æ€èµ„æºæ–‡ä»¶åªå¤¹ä¸‹æ‰¾errorViewå¯¹åº”çš„é¡µé¢ error/404.html return resolveResource(errorViewName, model);&#125; æ­¥éª¤ï¼šä¸€æ—¦ç³»ç»Ÿå‡ºç° 4xx æˆ–è€… 5xx ä¹‹ç±»çš„é”™è¯¯ï¼›ErrorPageCustmizer å°±ä¼šç”Ÿæ•ˆï¼ˆå®šåˆ¶é”™è¯¯çš„å“åº”è§„åˆ™ï¼‰ï¼›å°±ä¼šæ¥åˆ°/error è¯·æ±‚ï¼›å°±ä¼šBasicErrorControllerå¤„ç†ï¼› å“åº”é¡µé¢ï¼›å»å“ªä¸ªé¡µé¢çš„ DefaultErrorViewResolver è§£æå¾—åˆ°çš„ï¼› 1234567891011protected ModelAndView resolveErrorView(HttpServletRequest request,HttpServletResponse response, HttpStatus status, Map&lt;String, Object&gt; model) &#123;//æ‰€æœ‰çš„ErrorViewResolverå¾—åˆ°ModelAndViewfor (ErrorViewResolver resolver : this.errorViewResolvers) &#123; ModelAndView modelAndView = resolver.resolveErrorView(request,status, model); if (modelAndView != null) &#123; return modelAndView; &#125; &#125; return null;&#125; â‘¡ å¦‚æœå®šåˆ¶é”™è¯¯å“åº”:1). å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ â€‹ 1. æœ‰æ¨¡æ¿å¼•æ“çš„æƒ…å†µä¸‹ï¼šerror/çŠ¶æ€ç ;ã€å°†é”™è¯¯é¡µé¢å‘½åä¸º é”™è¯¯çŠ¶æ€ç .html æ”¾åœ¨æ¨¡æ¿å¼•æ“æ–‡ä»¶å¤¹é‡Œé¢çš„ error æ–‡ä»¶ä¸‹ã€‘ï¼Œå‘ç”Ÿæ­¤çŠ¶æ€ç çš„é”™è¯¯å°±ä¼šæ¥åˆ°å¯¹åº”çš„é¡µé¢ï¼› â€‹ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ 4xx å’Œ 5xx ä½œä¸ºé”™è¯¯çš„æ–‡ä»¶åæ¥åŒ¹é…è¿™ç§ç±»å‹çš„æ‰€æœ‰çš„é”™è¯¯ï¼Œç²¾ç¡®ä¼˜å…ˆï¼ˆä¼˜å…ˆå¯»æ‰¾ç²¾ç¡®çš„çŠ¶æ€ç .htmlï¼‰; é¡µé¢èƒ½è·å–çš„ä¿¡æ¯ï¼š timestampï¼š æ—¶é—´æˆ³ staus: çŠ¶æ€ç  errorï¼š é”™è¯¯æç¤º exception: å¼‚å¸¸å¯¹è±¡ mesage: å¼‚å¸¸æ¶ˆæ¯ errors: JSR303 æ•°æ®æ ¡éªŒçš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ 123456&lt;main role=&quot;main&quot; class=&quot;col-md-9 ml-sm-auto col-lg-10 pt-3 px-4&quot;&gt; &lt;h1&gt;404&lt;/h1&gt; &lt;h2&gt;timestamp:[[$&#123;timestamp&#125;]]&lt;/h2&gt; &lt;h2&gt;status:[[$&#123;status&#125;]]&lt;/h2&gt; &lt;h2&gt;error:[[$&#123;error&#125;]]&lt;/h2&gt;&lt;/main&gt; æ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼ˆæ¨¡æ¿å¼•æ“æ‰¾ä¸åˆ°è¿™ä¸ªé”™è¯¯çš„é¡µé¢ï¼‰ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ï¼› ä»¥ä¸Šéƒ½éƒ½æ²¡æœ‰é”™è¯¯é¡µé¢ï¼Œå°±æ˜¯é»˜è®¤æ¥åˆ° SpringBoot é»˜è®¤çš„é”™è¯¯æç¤ºé¡µé¢ï¼› 2).å¦‚ä½•å®šåˆ¶é”™è¯¯çš„ json æ•°æ®ï¼› è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†&amp;è¿”å›å®šåˆ¶çš„ json æ•°æ®ï¼› 123456789@ResponseBody@ExceptionHandler(UserNotExistException.class)public Map&lt;String, Object&gt; handleException(Exception e)&#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;code&quot;,&quot;user.notexist&quot;); map.put(&quot;message&quot;,e.getMessage()); return map;&#125;// æ²¡æœ‰è‡ªé€‚åº”æ•ˆæœ è½¬åˆ°åˆ°/error è¿›è¡Œè‡ªé€‚åº”æƒ³å“åº”çš„æ•ˆæœå¤„ç† 123456789public String handException(Exception e, HttpServletRequest request)&#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); // ä¼ å…¥æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯çŠ¶æ€ç  4xx 5xxï¼Œå¦åˆ™å°±ä¸ä¼šè¿›å…¥å®šåˆ¶é”™è¯¯é¡µé¢çš„è§£ææµç¨‹ request.setAttribute(&quot;javax.servlet.error.status_code&quot;,500); map.put(&quot;code&quot;,&quot;user.notexist&quot;); map.put(&quot;message&quot;,e.getMessage()); // è½¬å‘åˆ°/error return &quot;forward:/error&quot;;&#125; 3ï¼‰.å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼› â€‹ å‡ºç°é”™è¯¯ä»¥åï¼Œä¼šæ¥åˆ°/error è¯·æ±‚ï¼Œä¼šè¢« BasicErrorController å¤„ç†ï¼Œå“åº”å‡ºå»å¯ä»¥è·å–çš„æ•°æ®æ˜¯ç”± getErrorAttributes å¾—åˆ°çš„ï¼ˆæ˜¯ AbstractErrorController(ErrorController)è§„å®šçš„æ–¹æ³•ï¼‰ï¼› å®Œå…¨æ¥ç¼–å†™ä¸€ä¸ª ErrorController çš„å®ç°ç±»ã€æˆ–è€…ç¼–å†™ AbstractErrorController çš„å­ç±»ã€‘ï¼Œæ”¾åœ¨å®¹å™¨ä¸­ï¼› é¡µé¢ä¸Šèƒ½ç”¨çš„æ•°æ®ï¼Œæˆ–è€…æ˜¯ Json è¿”å›çš„èƒ½ç”¨çš„æ•°æ®éƒ½æ˜¯é€šè¿‡ errAttributes.getErrorAttributes å¾—åˆ°ï¼Œå®¹å™¨ä¸­ DefaultErrorAttrutes.getErrorAttributes()ï¼›é»˜è®¤è¿›è¡Œæ•°æ®å¤„ç†çš„ï¼› è‡ªå®šä¹‰ ErrorAttributes 12345678910111213// ç»™å®¹å™¨ä¸­åŠ å…¥æˆ‘ä»¬è‡ªå·±çš„å®šä¹‰çš„ErrorAttributes@Componentpublic class MyErrorAttributes extends DefaultErrorAttributes &#123; //è¿”å›å€¼çš„mapå°±æ˜¯é¡µé¢å’Œjsonèƒ½è·å–çš„æ‰€æœ‰å­—æ®µ @Override public Map&lt;String, Object&gt; getErrorAttributes(WebRequest webRequest, boolean includeStackTrace) &#123; Map&lt;String, Object&gt; map = super.getErrorAttributes(webRequest, includeStackTrace); map.put(&quot;company&quot;,&quot;oy&quot;); return map; &#125;&#125; æœ€ç»ˆæ•ˆæœï¼šå“åº”æ˜¯è‡ªé€‚åº”çš„ï¼Œå¯ä»¥é€šè¿‡å®šåˆ¶ ErrorAttributes æ”¹å˜éœ€è¦è¿”å›çš„å†…å®¹ï¼Œ 8ã€é…ç½®åµŒå…¥å¼ Servle å®¹å™¨SpringBoot é»˜è®¤ä½¿ç”¨ Tomcat ä½œä¸ºåµŒå…¥å¼çš„ Servlet å®¹å™¨ï¼› â‘  å®šåˆ¶å’Œä¿®æ”¹ Servlet å®¹å™¨çš„ç›¸å…³é…ç½®ï¼› ä¿®æ”¹å’Œ Servlet æœ‰å…³çš„é…ç½®ï¼ˆServletPropertiesã€ä¹Ÿæ˜¯ EmbeddedServletContainerCustomizerã€‘ï¼‰; 123456789server.port=8081server.context-path=/curdserver.tomcat.uri-encoding=UTF-8// é€šç”¨çš„Servletå®¹å™¨è®¾ç½®server.xxx// Tomcatçš„è®¾ç½®server.tomcat ç¼–å†™ä¸€ä¸ª EmbeddedServerContainerCustomizer(2.x ä»¥ä¸Šå·²ç»ä¸æ”¯æŒ)ï¼Œä½¿ç”¨ConfigurableServletWebServerFactoryï¼šåµŒå…¥å¼çš„ Servlet å®¹å™¨çš„å®šåˆ¶å™¨ï¼›æ¥ä¿®æ”¹ Servlet å®¹å™¨çš„é…ç½® 123456789@Configurationpublic class MySeverConfig &#123; @Bean // ä¸€å®šè¦å°†è¿™ä¸ªå®šåˆ¶å™¨åŠ å…¥åˆ°å®¹å™¨ä¸­ public ConfigurableServletWebServerFactory webServerFactory()&#123; TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory(); factory.setPort(8083); return factory; &#125;&#125; â‘¡ æ³¨å†Œ Servlet ä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘â€‹ ç”±äº SpringBoot é»˜è®¤æ˜¯ä»¥ jar åŒ…çš„çš„æ–¹å¼å¯åŠ¨åµŒå…¥å¼çš„ Servlet å®¹å™¨æ¥å¯åŠ¨ SpringBoot çš„ web åº”ç”¨ï¼Œæ²¡æœ‰ web.xml æ–‡ä»¶ æ³¨å†Œä¸‰å¤§ç»„ä»¶ç”¨ä»¥ä¸‹çš„æ–¹å¼ ServletRegistrationBean 123456@Beanpublic ServletRegistrationBean myServlet()&#123; ServletRegistrationBean registrationBean = new ServletRegistrationBean(new MyServlet(),&quot;/myServlet&quot;); registrationBean.setLoadOnStartup(1); return registrationBean;&#125; FilterRegistrationBean 1234567@Beanpublic FilterRegistrationBean myListener()&#123; FilterRegistrationBean registrationBean = new FilterRegistrationBean(); registrationBean.setFilter(new MyFilter()); registrationBean.setUrlPatterns(Arrays.asList(&quot;/hello&quot;,&quot;/myServlet&quot;)); return registrationBean;&#125; ServletListenerRegistrationBean 12345@Beanpublic ServletListenerRegistrationBean mylistener()&#123; ServletListenerRegistrationBean registrationBean = new ServletListenerRegistrationBean(new MyListener()); return registrationBean;&#125; SpringBoot å¸®æˆ‘ä»¬è‡ªåŠ¨ SpringMVC çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ³¨å†Œ SpringMVC çš„å‰ç«¯æ§åˆ¶å™¨ï¼›DispartcherServlet; DispatcherServletAutoConfiguration ä¸­ï¼š 1234567891011121314@Bean(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)@ConditionalOnBean(value = DispatcherServlet.class, name =DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)public ServletRegistrationBean dispatcherServletRegistration(DispatcherServlet dispatcherServlet) &#123; ServletRegistrationBean registration = new ServletRegistrationBean(dispatcherServlet, this.serverProperties.getServletMapping()); //é»˜è®¤æ‹¦æˆªï¼š / æ‰€æœ‰è¯·æ±‚ï¼›åŒ…é™æ€èµ„æºï¼Œä½†æ˜¯ä¸æ‹¦æˆªjspè¯·æ±‚ï¼› /*ä¼šæ‹¦æˆªjsp //å¯ä»¥é€šè¿‡server.servletPathæ¥ä¿®æ”¹SpringMVCå‰ç«¯æ§åˆ¶å™¨é»˜è®¤æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ registration.setName(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME); registration.setLoadOnStartup(this.webMvcProperties.getServlet().getLoadOnStartup()); if (this.multipartConfig != null) &#123; registration.setMultipartConfig(this.multipartConfig); &#125; return registration;&#125; â‘¢ æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼ Servlet å®¹å™¨ é»˜è®¤æ”¯æŒï¼š ==Tomcat==ï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰ 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; å¼•å…¥webæ¨¡å—å°±æ˜¯ä½¿ç”¨åµŒå…¥å¼çš„Tomcatä½œä¸ºServerå®¹å™¨&lt;/dependency&gt; ==Jetty== 1234567891011121314151617&lt;!--å¼•å…¥webæ¨¡å—--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;!--å¼•å…¥å…¶ä»–çš„Servletå®¹å™¨--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;&lt;/dependency&gt; ==Undertow== 1234567891011121314151617&lt;!--å¼•å…¥webæ¨¡å—--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;!--å¼•å…¥å…¶ä»–çš„Servletå®¹å™¨--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;&lt;/dependency&gt; â‘£ åµŒå…¥å¼ Servlet å®¹å™¨è‡ªåŠ¨é…ç½®åŸç†(1.x ç‰ˆæœ¬)12345678910111213141516171819202122232425262728293031323334353637383940414243444546@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)@Configuration@ConditionalOnWebApplication@Import(BeanPostProcessorsRegistrar.class)// å¯¼å…¥BeanPostProcessorsRegister : ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ä¸»ä»¶// å¯¼å…¥äº†EmbeddedServletContainnerCustomizerBeanPostcessor:// åç½®å¤„ç†å™¨ï¼šBeanåˆå§‹åŒ–åï¼ˆåˆ›å»ºå®Œå¯¹è±¡ï¼Œè¿˜æ²¡èµ‹å€¼)æ‰§è¡Œåˆå§‹åŒ–å·¥ä½œ@Configuration@ConditionalOnClass(&#123; Servlet.class, Tomcat.class &#125;)//åˆ¤æ–­å½“å‰æ˜¯å¦å¼•å…¥äº†Tomcatä¾èµ–@ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search =SearchStrategy.CURRENT)// åˆ¤æ–­å½“å‰å®¹å™¨æ²¡æœ‰ç”¨æˆ·è‡ªå®šå®šä¹‰EmbedddServerContainerFactory: åµŒå…¥å¼çš„Serverå®¹å™¨å·¥å‚ï¼› ä½œç”¨ï¼š åˆ›å»ºåµŒå…¥å¼çš„Serverå®¹å™¨public class EmbeddedServletContainerAutoConfiguration &#123; public static class EmbeddedTomcat &#123; @Bean public TomcatEmbeddedServletContainerFactory tomcatEmbeddedServletContainerFactory() &#123; return new TomcatEmbeddedServletContainerFactory(); &#125; &#125; /** * Nested configuration if Jetty is being used. */ @Configuration @ConditionalOnClass(&#123; Servlet.class, Server.class, Loader.class,WebAppContext.class &#125;) @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class,searchSearchStrategy.CURRENT) public static class EmbeddedJetty &#123; @Bean public JettyEmbeddedServletContainerFactory jettyEmbeddedServletContainerFactory() &#123; return new JettyEmbeddedServletContainerFactory(); &#125; &#125;&#125; ã€/*** Nested configuration if Undertow is being used.*/@Configuration@ConditionalOnClass(&#123; Servlet.class, Undertow.class, SslClientAuthMode.class &#125;)@ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search =SearchStrategy.CURRENT)public static class EmbeddedUndertow &#123; @Bean public UndertowEmbeddedServletContainerFactory undertowEmbeddedServletContainerFactory() &#123; return new UndertowEmbeddedServletContainerFactory(); &#125;&#125; EmbeddedServletContainerFactoryï¼ˆåµŒå…¥å¼ Servlet å®¹å™¨å·¥å‚ï¼‰ 12345public interface EmbeddedServletContainerFactory &#123; //è·å–åµŒå…¥å¼çš„Servletå®¹å™¨ EmbeddedServletContainer getEmbeddedServletContainer( ServletContextInitializer... initializers);&#125; EmbeddedServerContainer:(åµŒå…¥å¼çš„ Servlet å®¹å™¨) ä»¥ TomcatEmbeddedServletContainerFactory ä¸ºä¾‹ 123456789101112131415161718192021@Overridepublic EmbeddedServletContainer getEmbeddedServletContainer(ServletContextInitializer... initializers) &#123; //åˆ›å»ºä¸€ä¸ªTomcat Tomcat tomcat = new Tomcat(); //é…ç½®Tomcatçš„åŸºæœ¬ç¯èŠ‚ File baseDir = (this.baseDirectory != null ? this.baseDirectory: createTempDir(&quot;tomcat&quot;)); tomcat.setBaseDir(baseDir.getAbsolutePath()); Connector connector = new Connector(this.protocol); tomcat.getService().addConnector(connector); customizeConnector(connector); tomcat.setConnector(connector); tomcat.getHost().setAutoDeploy(false); configureEngine(tomcat.getEngine()); for (Connector additionalConnector : this.additionalTomcatConnectors) &#123; tomcat.getService().addConnector(additionalConnector); &#125; prepareContext(tomcat.getHost(), initializers); // å°†é…ç½®å¥½çš„Tomcatä¼ å…¥è¿›å…¥ï¼Œè¿”å›ä¸€ä¸ªEmbeddedServerContainer;å¹¶å¯åŠ¨TomcatæœåŠ¡å™¨ return getTomcatEmbeddedServletContainer(tomcat);&#125; æˆ‘ä»¬å¯¹åµŒå…¥å¼å®¹å™¨çš„é…ç½®ä¿®æ”¹æ˜¯æ€ä¹ˆç”Ÿæ•ˆçš„ ServerPropertiesã€EmbeddedServleContainerCustomizer 5.å®¹å™¨ä¸­å¯¼å…¥äº† EmbeddedServletContainerCustomizerBeanPostProcessor 123456789101112131415161718192021222324252627282930313233343536373839//åˆå§‹åŒ–ä¹‹å‰@Overridepublic Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; //å¦‚æœå½“å‰åˆå§‹åŒ–çš„æ˜¯ä¸€ä¸ªConfigurableEmbeddedServletContainerç±»å‹çš„ç»„ä»¶ if (bean instanceof ConfigurableEmbeddedServletContainer) &#123; // postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer) bean); &#125; return bean;&#125;private void postProcessBeforeInitialization(ConfigurableEmbeddedServletContainer bean) &#123;//è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå®šåˆ¶å™¨çš„customizeæ–¹æ³•æ¥ç»™Servletå®¹å™¨è¿›è¡Œå±æ€§èµ‹å€¼ï¼› for (EmbeddedServletContainerCustomizer customizer : getCustomizers()) &#123; customizer.customize(bean); &#125;&#125;private void postProcessBeforeInitialization(ConfigurableEmbeddedServletContainer bean) &#123; //è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå®šåˆ¶å™¨çš„customizeæ–¹æ³•æ¥ç»™Servletå®¹å™¨è¿›è¡Œå±æ€§èµ‹å€¼ï¼› for (EmbeddedServletContainerCustomizer customizer : getCustomizers()) &#123; customizer.customize(bean); &#125;&#125; private Collection&lt;EmbeddedServletContainerCustomizer&gt; getCustomizers() &#123; if (this.customizers == null) &#123; // Look up does not include the parent context this.customizers = new ArrayList&lt;EmbeddedServletContainerCustomizer&gt;( this.beanFactory //ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰è¿™è‘›ç±»å‹çš„ç»„ä»¶ï¼šEmbeddedServletContainerCustomizer //å®šåˆ¶Servletå®¹å™¨ï¼Œç»™å®¹å™¨ä¸­å¯ä»¥æ·»åŠ ä¸€ä¸ªEmbeddedServletContainerCustomizerç±»å‹çš„ç»„ä»¶ .getBeansOfType(EmbeddedServletContainerCustomizer.class,false, false).values()); Collections.sort(this.customizers, AnnotationAwareOrderComparator.INSTANCE); this.customizers = Collections.unmodifiableList(this.customizers); &#125; return this.customizers;&#125;ServerProperties ä¹Ÿæ˜¯å®šåˆ¶å™¨ æ­¥éª¤ï¼š SpringBoot æ ¹æ®å¯¼å…¥çš„ä¾èµ–æƒ…å†µï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç›¸åº”çš„ EmbeddedServletContainerFactoryã€TomcatEmbeddedServletContainerFactroyã€‘ å®¹å™¨ä¸­æŸä¸ªç»„ä»¶è¦åˆ›å»ºå¯¹è±¡å°±ä¼šæƒŠåŠ¨åç½®å¤„ç†å™¨ï¼› EmbeddedServletContainCustomizerBeanPostProcessor; åªè¦æ˜¯åµŒå…¥å¼çš„ Servlet å®¹å™¨å·¥å‚ï¼Œåç½®å¤„ç†å™¨å°±å·¥ä½œï¼› åç½®å¤„ç†å™¨ï¼Œä»å®¹ä¸­è·å–æ‰€æœ‰çš„ EmbeddedServletContainerCustomizerï¼Œè°ƒç”¨å®šåˆ¶å™¨çš„å®šåˆ¶æ–¹æ³• 9ã€ åµŒå…¥å¼ Servlet å®¹å™¨å¯åŠ¨åŸç†è·å–åµŒå…¥å¼çš„ Servlet å®¹å™¨å·¥å‚ï¼š 1. SpringBootåº”ç”¨å¯åŠ¨è¿è¡Œrunæ–¹æ³• refreshContext(context);SpringBoot åˆ·æ–° IOC å®¹å™¨ã€åˆ›å»º IOC å®¹å™¨ï¼Œå¹¶åˆå§‹åŒ–å®¹å™¨ï¼Œåˆ›å»ºå®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶ã€‘ï¼›å¦‚æœæ˜¯ web åº”ç”¨åˆ›å»ºAnnotainConfigEmbedderWebApplicationContext;å¦åˆ™ï¼›AnnotaionConfigApplicationContext refresh(context); åˆ·æ–°åˆšæ‰åˆ›å»ºçš„ ioc å®¹å™¨ï¼› 123456789101112131415161718192021222324252627282930313233343536373839404142434445public void refresh() throws BeansException, IllegalStateException &#123;synchronized (this.startupShutdownMonitor) &#123; // Prepare this context for refreshing. prepareRefresh(); // Tell the subclass to refresh the internal bean factory. ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); // Prepare the bean factory for use in this context. prepareBeanFactory(beanFactory); try &#123; // Allows postâ€processing of the bean factory in context subclasses. postProcessBeanFactory(beanFactory); // Invoke factory processors registered as beans in the context. invokeBeanFactoryPostProcessors(beanFactory); // Register bean processors that intercept bean creation. registerBeanPostProcessors(beanFactory); // Initialize message source for this context. initMessageSource(); // Initialize event multicaster for this context. initApplicationEventMulticaster(); // Initialize other special beans in specific context subclasses. onRefresh(); // Check for listener beans and register them. registerListeners(); // Instantiate all remaining (nonâ€lazyâ€init) singletons. finishBeanFactoryInitialization(beanFactory); // Last step: publish corresponding event. finishRefresh(); &#125; catch (BeansException ex) &#123; if (logger.isWarnEnabled()) &#123; logger.warn(&quot;Exception encountered during context initialization â€ &quot; +&quot;cancelling refresh attempt: &quot; + ex); &#125; // Destroy already created singletons to avoid dangling resources. destroyBeans(); // Reset &#x27;active&#x27; flag. cancelRefresh(ex); // Propagate exception to caller. throw ex; &#125; finally &#123; // Reset common introspection caches in Spring&#x27;s core, since we // might not ever need metadata for singleton beans anymore... resetCommonCaches(); &#125; &#125;&#125; onRefrsh(); web çš„ ioc å®¹å™¨é‡å†™ onRefresh æ–¹æ³• webioc å®¹å™¨ä¼šåˆ›å»ºåµŒå…¥å¼çš„ Servlet å®¹å™¨ï¼› createEmbeddedServletContainer(); è·å–åµŒå…¥å¼çš„ Servlet å®¹å™¨å·¥å‚ EmbeddedServletContionerFactory containerFactory = getEmbeddedServletContianFactory(); ä»å®¹å™¨ä¸­è·å– EmbeddedServletContian ç»„ä»¶ï¼›TomcatEmbeddedServletContainerFactory åˆ›å»ºå¯¹è±¡ï¼Œåç½®å¤„ç†å™¨ä¸€çœ‹æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå°±èƒ½è·å–æ‰€æœ‰å®šåˆ¶å™¨æ¥å®šåˆ¶ Servlet å®¹å™¨çš„ç›¸å…³é…ç½®ï¼› ä½¿ç”¨å®¹å™¨å·¥å‚è·å–åµŒå…¥å¼çš„ Server å®¹å™¨: â€‹ this.embeddedServletContainer = containerFactory.getEmbeddedServletContainer(getSelfInitializer()); åµŒå…¥å¼çš„ Servlet å®¹å™¨åˆ›å»ºå¯¹è±¡å¹¶å¯åŠ¨ Server å®¹å™¨ï¼› å…ˆå¯åŠ¨åµŒå…¥å¼ Servlet å®¹å™¨ï¼Œå†å°† ioc å®¹å™¨ä¸‹æ²¡æœ‰åˆ›å»ºå‡ºçš„å¯¹è±¡è·å–å‡ºæ¥ï¼› IOC å®¹å™¨å¯åŠ¨åˆ›å»ºåµŒå…¥å¼çš„ Servlet å®¹å™¨ 10ã€ä½¿ç”¨å¤–ç½®çš„ Servlet å®¹å™¨åµŒå…¥å¼ Servle å®¹å™¨: åº”ç”¨æ‰“æˆå¯æ‰§è¡Œçš„ jar ä¼˜ç‚¹ï¼šç®€å•ã€ä¾¿æº ç¼ºç‚¹ï¼šé»˜è®¤ä¸æ”¯æŒ JSPã€ä¼˜å…ˆå®šåˆ¶æ¯”è¾ƒå¤æ‚ï¼ˆä½¿ç”¨å®šåˆ¶å™¨ã€ServerPropertiesã€è‡ªå®šä¹‰ EmbeddesdServletContianCustizerã€‘, è‡ªå·±ç¼–å†™åµŒå…¥å¼ Servlet å®¹å™¨çš„åˆ›å»ºå·¥å‚ã€EmbeddedServletContainerFactory ã€‘ï¼‰ å¤–ç½® Servlet å®¹å™¨ï¼šå¤–é¢å®‰è£… Tomcat â€“ åº”ç”¨ war åŒ…çš„æ–¹å¼æ‰“å¼€ï¼› æ­¥éª¤ï¼š å¿…é¡»åˆ›å»ºä¸€ä¸ª web é¡¹ç›®ï¼› å‚è€ƒåšå®¢ï¼šhttps://blog.csdn.net/qq_45738810/article/details/108509314 å»ºå…¥åµŒå…¥å¼çš„ Tomcat æŒ‡å®šçš„ provided; 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt; å¿…é¡»ç¼–å†™ä¸€ä¸ª SpringBootServletInitiallzer çš„å­ç±»ï¼Œå¹¶è°ƒç”¨ configure æ–¹æ³• 12345678public class ServletInitializer extends SpringBootServletInitializer &#123; @Override protected SpringApplicationBuilder configure(SpringApplicationBuilder application) &#123; return application.sources(SpringBoot06WebServletApplication.class); &#125;&#125; å¯åŠ¨æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨ï¼› ==åŸç†ï¼š== jar åŒ…ï¼š æ‰§è¡Œ SpringBoot ä¸»ç±»çš„ main æ–¹æ³•ï¼Œå¯åŠ¨ ioc å®¹å™¨ï¼Œåˆ›å»ºåµŒå…¥å¼çš„ Servlet å®¹å™¨ï¼› war åŒ…ï¼š å¯åŠ¨æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯åŠ¨ SpringBoot åº”ç”¨ã€SpringBootServletInitializerã€‘,å¯åŠ¨ ioc å®¹å™¨ï¼› è§„åˆ™ï¼š æœåŠ¡å™¨å¯åŠ¨(web åº”ç”¨å¯åŠ¨)ä¼šåˆ›å»ºå½“å‰ web åº”ç”¨é‡Œé¢æ¯ä¸€ä¸ª jar åŒ…é‡Œé¢ ServerContainnerInitializer å®ä¾‹ï¼š ServletContainerInitializer çš„å®ç°æ”¾åœ¨ jar åŒ…çš„ META-INF/servies æ–‡ä»¶ä¸‹ï¼Œæœ‰ä¸€ä¸ªåä¸º java è¿˜å¯ä»¥ä½¿ç”¨@HandlesTypes,åœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™åŠ è½½é…ç½®çš„ç±» æµç¨‹ï¼š å¯åŠ¨ Tomcat D:\\RepMaven\\org\\springframework\\spring-web\\5.2.8.RELEASE\\spring-web-5.2.8.RELEASE.jar!\\META-INF\\services\\javax.servlet.ServletContainerInitializer: Spring çš„ web æ¨¡å—é‡Œé¢çš„è¿™ä¸ªæ–‡ä»¶ï¼šorg.springframework.web.SpringServletContainerInitializer SpringServletContainerInitializer å°†@HandlesTypes(WebApplicationInitializer.class )æ ‡æ³¨çš„æ‰€æœ‰è¿™ä¸ªç±»å‹çš„ç±»éƒ½ä¼ å…¥ onStratup æ–¹æ³•çš„ Setup æ–¹æ³•çš„&lt;Set&gt;; ä¸ºè¿™äº› WebApplicationInitializer ç±»å‹çš„ç±»åˆ›å»ºå®ä¾‹ï¼š æ¯ä¸€ä¸ª WebApplicaionInitialzer éƒ½è°ƒç”¨è‡ªå·±çš„ onStarupï¼› ç›¸å½“äºæˆ‘ä»¬çš„ SpringBootServletInitalizer çš„åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ‰§è¡Œ onStarup æ–¹æ³• SpringBootServletInitializer å®ä¾‹æ‰§è¡Œ onStartup çš„æ—¶å€™ä¼š createRootApplicationContextï¼›åˆ›å»ºå®¹å™¨ 1234567891011121314151617181920212223242526272829303132protected WebApplicationContext createRootApplicationContext(ServletContext servletContext) &#123; //1ã€åˆ›å»ºSpringApplicationBuilder SpringApplicationBuilder builder = createSpringApplicationBuilder(); StandardServletEnvironment environment = new StandardServletEnvironment(); environment.initPropertySources(servletContext, null); builder.environment(environment); builder.main(getClass()); ApplicationContext parent = getExistingRootWebApplicationContext(servletContext); if (parent != null) &#123; this.logger.info(&quot;Root context already created (using as parent).&quot;); servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, null); builder.initializers(new ParentContextApplicationContextInitializer(parent)); &#125; builder.initializers(new ServletContextApplicationContextInitializer(servletContext)); builder.contextClass(AnnotationConfigEmbeddedWebApplicationContext.class); //è°ƒç”¨configureæ–¹æ³•ï¼Œå­ç±»é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°†SpringBootçš„ä¸»ç¨‹åºç±»ä¼ å…¥äº†è¿›æ¥ builder = configure(builder); //ä½¿ç”¨builderåˆ›å»ºä¸€ä¸ªSpringåº”ç”¨ SpringApplication application = builder.build(); if (application.getSources().isEmpty() &amp;&amp; AnnotationUtils.findAnnotation(getClass(), Configuration.class) != null) &#123; application.getSources().add(getClass()); &#125; Assert.state(!application.getSources().isEmpty(),&quot;No SpringApplication sources have been defined. Either override the &quot;+ &quot;configure method or add an @Configuration annotation&quot;);// Ensure error pages are registered if (this.registerErrorPageFilter) &#123; application.getSources().add(ErrorPageFilterConfiguration.class); &#125; //å¯åŠ¨Springåº”ç”¨ return run(application);&#125; Spring çš„åº”ç”¨å°±å¯åŠ¨å¹¶ä¸”åˆ›å»º IOC å®¹å™¨ 1234567891011121314151617181920212223242526272829public ConfigurableApplicationContext run(String... args) &#123; StopWatch stopWatch = new StopWatch(); stopWatch.start(); ConfigurableApplicationContext context = null; FailureAnalyzers analyzers = null; configureHeadlessProperty(); SpringApplicationRunListeners listeners = getRunListeners(args); listeners.starting(); try &#123; ApplicationArguments applicationArguments = new DefaultApplicationArguments(args); ConfigurableEnvironment environment = prepareEnvironment(listeners,applicationArguments); Banner printedBanner = printBanner(environment); context = createApplicationContext(); analyzers = new FailureAnalyzers(context); prepareContext(context, environment, listeners, applicationArguments,printedBanner); //åˆ·æ–°IOCå®¹å™¨ refreshContext(context); afterRefresh(context, applicationArguments); listeners.finished(context, null); stopWatch.stop(); if (this.logStartupInfo) &#123; new StartupInfoLogger(this.mainApplicationClass).logStarted(getApplicationLog(), stopWatch); &#125; return context; &#125; catch (Throwable ex) &#123; handleRunFailure(context, listeners, analyzers, ex); throw new IllegalStateException(ex); &#125;&#125; ==å¯åŠ¨ Servlet å®¹å™¨ï¼Œå†å¯åŠ¨ SpringBoot åº”ç”¨==","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"SpringBootä¹‹åŸºæœ¬é…ç½®","slug":"SpringBootä¹‹åŸºæœ¬é…ç½®","date":"2020-08-26T16:00:00.000Z","updated":"2020-10-25T02:26:48.564Z","comments":true,"path":"posts/3862476156.html","link":"","permalink":"http://blog.oy6090.top/posts/3862476156.html","excerpt":"","text":"SpringBoot ä¹‹åŸºæœ¬é…ç½®çŸ¥è¯†æ€»ç»“ï¼ˆç”±äºç½‘é¡µè§£æå­˜åœ¨é—®é¢˜ï¼Œæ— æ³•ä¸Šä¼ ç¬”è®°ï¼‰ ä¸€ã€æ—¥å¿—1ã€æ—¥å¿—æ¡†æ¶å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶ï¼šJULã€JCLã€Jbooss-logginã€logbackã€log4jã€log4j2ã€slf4jâ€¦. æ—¥å¿—é—¨é¢ï¼ˆæ—¥å¿—çš„æŠ½è±¡å±‚ï¼‰ æ—¥å¿—å®ç° JCL(jakarta Commons Loggin) SLF4j(Simple Loggin Facade For Java) jboss loggin Log4j JULï¼ˆjava.util.loggingï¼‰ Log4j2 Logback å·¦è¾¹é€‰ä¸€ä¸ªé—¨é¢ï¼ˆæŠ½è±¡å±‚ï¼‰ã€å³è¾¹æ¥é€‰ä¸€ä¸ªå®ç°ï¼› æ—¥å¿—é—¨é¢ï¼š SLF4Jï¼› æ—¥å¿—å®ç°ï¼šLogback SpringBoot: åº•å±‚æ˜¯ Spring æ¡†æ¶ï¼ŒSpring æ¡†æ¶é»˜è®¤æ˜¯ç”¨JCL; ==SpringBoot é€‰ç”¨ SLF4j å’Œ Logback;== 2ã€ä½¿ç”¨ SLF4j ä½¿ç”¨â‘  å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨ SLF4j https://www.slf4j.orgâ€‹ ä»¥åå¼€å‘æ—¶å€™ï¼Œæ—¥å¿—è®°å½•æ–¹æ³•è°ƒç”¨ï¼Œä¸åº”è¯¥æ¥ç›´æ¥è°ƒç”¨æ—¥å¿—å®ç°ç±»ï¼Œè€Œæ˜¯è°ƒç”¨æ—¥å¿—æŠ½è±¡å±‚é‡Œé¢çš„æ–¹æ³•ï¼› â€‹ ç»™ç³»ç»Ÿé‡Œé¢å¯¼å…¥ slf4j çš„ jar å’Œ logback çš„å®ç° jar 123456789import org.slf4j.Logger;import org.slf4j.LoggerFactory;public class HelloWorld &#123; public static void main(String[] args) &#123; Logger logger = LoggerFactory.getLogger(HelloWorld.class); logger.info(&quot;Hello World&quot;); &#125;&#125; å›¾ç¤º: æ¯ä¸€ä¸ªæ—¥å¿—çš„å®ç°æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨ slf4j ä»¥åï¼Œé…ç½®æ–‡ä»¶è¿˜æ˜¯åšæˆæ—¥å¿—å®ç°æ¡†æ¶è‡ªå·±æœ¬èº«çš„é…ç½®æ–‡ä»¶ï¼› â‘¡ é—ç•™é—®é¢˜a(slf4j + logback): Spring(commons-loggin)ã€Hibernate(Jboss-logging)ã€Mybatisâ€¦.. ç»Ÿä¸€æ—¥å¿—è®°å½•ï¼Œå³ä½¿æ˜¯åˆ«çš„æ¡†æ¶å’Œæˆ‘ä¸€èµ·ä½¿ç”¨ slf4j è¿›è¡Œè¾“å‡ºï¼š ==è®©ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¥å¿—éƒ½ç»Ÿä¸€åˆ° slf4jï¼š== å°†ç³»ç»Ÿä¸­çš„å…¶ä»–æ—¥å¿—æ¡†æ¶å…ˆæ’é™¤å‡ºå»ï¼› ç”¨ä¸­é—´åŒ…å•¦æ›¿æ¢åŸæœ‰çš„æ—¥å¿—æ¡†æ¶ å¯¼å…¥ slf4j å…¶ä»–çš„å®ç° 3ã€SpringBoot æ—¥å¿—å…³ç³»1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;springâ€bootâ€starter&lt;/artifactId&gt;&lt;/dependency&gt; SpringBoot ä½¿ç”¨å®ƒæ¥åšæ—¥å¿—åŠŸèƒ½ï¼š 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;&lt;/dependency&gt; åº•å±‚ä¾èµ–å…³ç³» æ€»ç»“ï¼š 1. SpringBootåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨slf4j+ logbackçš„æ–¹å¼è¿›è¡Œæ—¥å¿—è®°å½•ï¼› SpringBoot ä¹Ÿæ˜¯å…¶ä»–çš„æ—¥å¿—éƒ½æ›¿æ¢æˆ slf4jï¼› ä¸­é—´æ›¿æ¢åŒ… 123456@SuppressWarnings(&quot;rawtypes&quot;)public abstract class LogFactory &#123; static String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = &quot;http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j&quot;; static LogFactory logFactory = new SLF4JLogFactory(); å¦‚æœæˆ‘ä»¬å¼•å…¥å…¶ä»–æ¡†æ¶ï¼Œä¸€å®šè¦æŠŠè¿™ä¸ªæ¡†æ¶çš„é»˜è®¤æ—¥å¿—ä¾èµ–ç§»é™¤æ‰ Spring æ¡†æ¶ç”¨çš„æ˜¯ commons-logging; 12345678910&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springâ€core&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;commonsâ€logging&lt;/groupId&gt; &lt;artifactId&gt;commonsâ€logging&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt; ==SpringBoot èƒ½è‡ªåŠ¨ä¾èµ–æ‰€æœ‰çš„æ—¥å¿—ï¼Œè€Œä¸”åº•å±‚ä½¿ç”¨ slf4j + logback çš„æ–¹å¼è®°å½•æ—¥å¿—ï¼Œå¼•å…¥å…¶ä»–æ¡†æ¶çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªæ¡†æ¶ä¾èµ–çš„æ—¥å¿—æ¡†æ¶æ’é™¤æ‰å³å¯;== 4ã€æ—¥å¿—çš„ä½¿ç”¨â‘  SpringBoot é»˜è®¤å¸®æˆ‘ä»¬é…ç½®å¥½äº†æ—¥å¿—1234567891011121314151617// è®°å½•å™¨Logger logger = LoggerFactory.getLogger(getClass());@Testvoid contextLoads() &#123; // æ—¥å¿—çº§åˆ« // ç”±ä½åˆ°é«˜ trace&lt;debug&lt;info&lt;warn&lt;error // å¯ä»¥è°ƒæ•´è¾“å‡ºæ—¥å¿—çš„çº§åˆ«ï¼›æ—¥å¿—çš„åªä¼šåœ¨è¿™ä¸ªçº§åˆ« logger.trace(&quot;è¿™æ˜¯traceæ—¥å¿—.....&quot;); logger.debug(&quot;è¿™æ˜¯debugæ—¥å¿—.....&quot;); // springBooté»˜è®¤ç»™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯infoåŸºæœ¬çš„ï¼Œæ²¡æœ‰ç”¨æŒ‡å®šçº§åˆ«å°±ç”¨SpringBootè«äººè§„å®šçš„çº§åˆ«æ˜¯; rootçº§åˆ« logger.info(&quot;è¿™æ˜¯infoæ—¥å¿—.......&quot;); logger.warn(&quot;è¿™é‡Œwarnæ—¥å¿—.......&quot;); logger.error(&quot;è¿™é‡Œerroræ—¥å¿—.....&quot;);&#125; 123456789æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ %â€5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ %logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ %næ˜¯æ¢è¡Œç¬¦ â€â€&gt; %d&#123;yyyyâ€MMâ€dd HH:mm:ss.SSS&#125; [%thread] %â€5level %logger&#123;50&#125; â€ %msg%n SpringBoot ä¿®æ”¹æ—¥å¿—çš„é»˜è®¤é…ç½® 123456789101112131415logging.level.com.oy=trace#loggin.path=# ä¸æŒ‡å®šï¼›è·¯å¾„åœ¨å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆspring.logæ—¥å¿—# å¯ä»¥æŒ‡å®šå®Œæ•´çš„è·¯å¾„#loggin.file=E:/springboot.log#åœ¨å½“å‰ç£ç›˜çš„æ ¹è·¯å¾„ä¸Šåˆ›å»ºspringæ–‡ä»¶å¤¹é‡Œé¢logæ–‡ä»¶ï¼›ä½¿ç”¨ spring.logä½œä¸ºé»˜æ–‡ä»¶logging.path=/springboot.log# åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼logging.pattern.console=%d&#123;yyyyâ€MMâ€dd&#125; [%thread] %â€5level %logger&#123;50&#125; â€ %msg%n# æŒ‡å®šæ–‡ä»¶æ—¥å¿—è¾“å‡ºçš„æ ¼å¼logging.pattern.file=%d&#123;yyyyâ€MMâ€dd&#125; === [%thread] === %â€5level === %logger&#123;50&#125; ==== %msg%n logging.file logging.path Example Description (none) (none) åªåœ¨æ§åˆ¶å°è¾“å‡º æŒ‡å®šæ–‡ä»¶å (none) my.log è¾“å‡ºæ—¥å¿—åˆ° my.log æ–‡ä»¶ (none) æŒ‡å®šç›®å½• /var/log è¾“å‡ºåˆ°æŒ‡å®šç›®å½•çš„ spring.log æ–‡ä»¶ä¸­ â‘¡ æŒ‡å®šé…ç½®â€‹ ç»™ç±»è·¯å¾„ä¸‹æ”¾ä¸Šæ¯ä¸ªæ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶å³å¯ï¼›SpringBoot å°±ä¸ä½¿ç”¨å…¶ä»–é»˜è®¤çš„é…ç½®äº†ã€‚ Logging System Customization Logback logback-spring.xml , logback-spring.groovy , logback.xml or logback.groovy Log4j2 log4j2-spring.xml or log4j2.xml JDK (Java Util Logging) logging.properties â€‹ lohback.xmlï¼š ç›´æ¥å°±è¢«æ—¥å¿—æ¡†æ¶è¯†åˆ«äº†ï¼› â€‹ logback-spring.xml: æ—¥å¿—æ¡†æ¶å°±ä¸ç›´æ¥åŠ è½½æ—¥å¿—çš„é…ç½®é¡¹ï¼Œç”± SpringBoot è§£ææ—¥å¿—é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ SpringBoot çš„é«˜çº§ Profile åŠŸèƒ½ 1234&lt;springProfile name=&quot;staging&quot;&gt; &lt;!â€â€ configuration to be enabled when the &quot;staging&quot; profile is active â€â€&gt; å¯ä»¥æŒ‡å®šæŸæ®µé…ç½®åªåœ¨æŸä¸ªç¯å¢ƒä¸‹ç”Ÿæ•ˆ&lt;/springProfile&gt; å¦‚ï¼š 123456789101112131415161718192021&lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; &lt;!â€â€ æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ %â€5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ %logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ %næ˜¯æ¢è¡Œç¬¦ â€â€&gt; &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt; &lt;springProfile name=&quot;dev&quot;&gt; &lt;pattern&gt;%d&#123;yyyyâ€MMâ€dd HH:mm:ss.SSS&#125; â€â€â€â€&gt; [%thread] â€â€â€&gt; %â€5level%logger&#123;50&#125; â€ %msg%n&lt;/pattern&gt; &lt;/springProfile&gt; &lt;springProfile name=&quot;!dev&quot;&gt; &lt;pattern&gt;%d&#123;yyyyâ€MMâ€dd HH:mm:ss.SSS&#125; ==== [%thread] ==== %â€5level%logger&#123;50&#125; â€ %msg%n&lt;/pattern&gt; &lt;/springProfile&gt; &lt;/layout&gt;&lt;/appender&gt; ==å¦‚æœä½¿ç”¨ logback.xml ä½œä¸ºæ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œè¿˜è¦ä½¿ç”¨ profile åŠŸèƒ½ï¼Œä¼šæœ‰ä»¥ä¸‹é”™è¯¯== 5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶å¯ä»¥æŒ‰ç…§ slf4j çš„æ—¥å¿—é€‚é…å›¾ï¼Œè¿›è¡Œç›¸å…³çš„åˆ‡æ¢ï¼› slf4j+log4j çš„æ–¹å¼ï¼› 12345678910111213141516171819&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;springâ€bootâ€starterâ€web&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;logbackâ€classic&lt;/artifactId&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;/exclusion&gt; &lt;exclusion&gt; &lt;artifactId&gt;log4jâ€overâ€slf4j&lt;/artifactId&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4jâ€log4j12&lt;/artifactId&gt;&lt;/dependency&gt; åˆ‡æ¢ä¸º log4j2 1234567891011121314&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;springâ€bootâ€starterâ€web&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;springâ€bootâ€starterâ€logging&lt;/artifactId&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;springâ€bootâ€starterâ€log4j2&lt;/artifactId&gt;&lt;/dependency&gt;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"}]},{"title":"RedisåŸºç¡€æ€»ç»“","slug":"RedisåŸºç¡€æ€»ç»“","date":"2020-08-17T16:00:00.000Z","updated":"2020-10-25T02:26:59.641Z","comments":true,"path":"posts/865268903.html","link":"","permalink":"http://blog.oy6090.top/posts/865268903.html","excerpt":"","text":"ä¸€ã€Redis çš„ äº”å¤§æ•°æ®ç±»å‹1ã€key æŒ‡ä»¤ æè¿° keys * æŸ¥çœ‹å½“å‰åº“çš„æ‰€æœ‰é”® exists&lt;key&gt; åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ type&lt;key&gt; æŸ¥çœ‹é”®çš„ç±»å‹ del&lt;key&gt; åˆ é™¤æŸä¸ªé”® expire&lt;key&gt;&lt;seconds&gt; ä¸ºé”®è®¾ç½®è¿‡æœŸçš„æ—¶é—´ï¼Œå•ä½ç§’ ttl&lt;key&gt; æŸ¥çœ‹è¿˜æœ‰å¤šä¹…è¿‡æœŸï¼Œ-1 è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼Œ-2 è¡¨ç¤ºå·²è¿‡æœŸ dbsize æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„ key çš„æ•°é‡ flushdb æ¸…ç©ºå½“å‰åº“ Flushall é€šæ€å…¨éƒ¨åº“ 2ã€String String æ˜¯ Redis æœ€åŸºæœ¬çš„ç±»å‹ã€‚ String ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ã€‚æ„å‘³ç€ Redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚æ¯”å¦‚ jpg å›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚ String ç±»å‹æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸€ä¸ª Redis ä¸­å­—ç¬¦ä¸² value æœ€å¤šå¯ä»¥æ˜¯ 512M å¸¸ç”¨æ“ä½œ æŒ‡ä»¤ æè¿° get&lt;key&gt; æŸ¥è¯¢å¯¹åº”çš„é”®å€¼ set &lt;key&gt;&lt;value&gt; æ·»åŠ é”®å€¼å¯¹ append&lt;key&gt;&lt;value&gt; å°†ç»™å®šçš„&lt;value&gt; è¿½åŠ åˆ°åŸå€¼çš„æœ«å°¾ strlen&lt;key&gt; è·å–å€¼çš„é•¿åº¦ setnx&lt;key&gt;&lt;value&gt; åªæœ‰åœ¨ Key ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼ incr&lt;key&gt; å°† key ä¸­å­˜å‚¨çš„æ•°å­—å€¼å¢ 1ï¼Œ åªèƒ½å¯¹æ•°å­—å€¼çš„æ“ä½œï¼Œå¦‚æœä¸ºç©ºï¼Œæ–°å¢å€¼ä¸º 1ã€‚ decr&lt;key&gt; å°† key ä¸­å­˜å‚¨çš„æ•°å­—å€¼å‡ 1ï¼Œåªèƒ½å¯¹æ•°å­—å€¼æ“ä½œï¼Œå¦‚æœä¸ºç©ºï¼Œæ–°å¢å€¼ä¸º-1 incrby/ decrby &lt;key&gt;&lt;æ­¥é•¿&gt; å°† key ä¸­å­˜å‚¨çš„æ•°å­—å€¼å¢å‡ã€‚è‡ªå®šä¹‰æ­¥é•¿ã€‚ mset&lt;key1&gt;&lt;value1&gt;&lt;key2&gt;&lt;value2&gt; åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ mget&lt;key1&gt;&lt;key2&gt;&lt;key3&gt; åŒæ—¶è·å–ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ msetnx&lt;key1&gt;&lt;value1&gt;&lt;key2&gt;&lt;value2&gt; åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®šçš„ key éƒ½ä¸å­˜åœ¨ getrange&lt;key&gt;&lt;èµ·å§‹ä½ç½®&gt;&lt;ç»“æŸä½ç½®&gt; è·å–å€¼çš„èŒƒå›´,ç±»ä¼¼ java ä¸­çš„ substring setrange&lt;key&gt; &lt;èµ·å§‹ä½ç½®&gt; &lt;value&gt; ç”¨&lt;vakue&gt;è¦†ç›–&lt;key&gt;æ‰€å­˜å‚¨çš„å­—ç¬¦ä¸²å€¼ï¼Œä»&lt;èµ·å§‹ä½ç½®&gt;å¼€å§‹ setex&lt;key&gt;&lt;è¿‡æœŸæ—¶é—´&gt;&lt;value&gt; è®¾ç½®é”®å€¼çš„åŒæ—¶ï¼Œè®¾ç½®è¿‡å»çš„æ—¶é—´ï¼Œå•ä½ç§’ getset&lt;key&gt;&lt;value&gt; ä»¥æ–°æ¢æ—§ï¼Œè®¾ç½®äº†æ–°å€¼çš„åŒæ—¶è·å–æ—§å€¼ incr key æ“ä½œçš„åŸå­æ€§ æ‰€è°“çš„åŸå­æ˜¯æŒ‡ä¸ä¼šè¢«çº¿ç¨‹çš„è°ƒåº¦æœºåˆ¶æ‰“æ–­çš„æ“ä½œï¼šè¿™ç§æ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼Œä¸­é—´ä¸ä¼šæœ‰ä»»ä½•çš„ context switch (åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹)ã€‚ åœ¨å•çº¿ç¨‹ä¸­ï¼Œèƒ½å¤Ÿåœ¨å•æ¡æŒ‡ä»¤ä¸­å®Œæˆçš„æ“ä½œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯â€åŸå­æ“ä½œâ€,å› ä¸ºä¸­æ–­åªèƒ½å‘ç”Ÿåœ¨äºæŒ‡ä»¤ä¹‹é—´ã€‚ åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä¸èƒ½è¢«å…¶ä»–çš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰æ‰“æ–­çš„æ“ä½œå°±å«åŸå­æ“ä½œã€‚ Redis å•å‘½ä»¤çš„åŸå­æ€§ä¸»è¦å¾—ç›Šäº Redis çš„å•çº¿ç¨‹ 3ã€List å•é”®å¤šå€¼ Redis ï¼›åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ—è¡¨çš„å¤´éƒ¨(å·¦è¾¹) æˆ–è€…å°¾éƒ¨ (å³è¾¹)ã€‚ å®ƒçš„åº•å±‚å®é™…æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¯¹ä¸¤ç«¯çš„æ“ä½œè¡Œé€‰æ€§èƒ½å¾ˆé«˜ï¼Œé€šè¿‡ç´¢å¼•ä¸‹æ ‡çš„æ“ä½œä¸­é—´çš„èŠ‚ç‚¹æ€§èƒ½ä¼šå·® å¸¸ç”¨æ“ä½œ æŒ‡ä»¤ æè¿° lpush/rpush&lt;key&gt;&lt;value1&gt;&lt;value2&gt; ä»å·¦è¾¹/å³è¾¹æ’å…¥ä¸€ä¸ªå€¼æˆ–å¤šä¸ªå€¼ lpoy/rpop &lt;key&gt; ä»å·¦è¾¹/å³è¾¹åå‡ºä¸€ä¸ªå€¼ã€‚å€¼åœ¨é”®åœ¨ï¼Œå€¼å…‰é”®äº¡ã€‚ rpoplush&lt;key1&gt;&lt;key2&gt; ä»&lt;key1&gt;åˆ—è¡¨è¾¹åå‡ºä¸€ä¸ªå€¼ï¼Œæ’åˆ°&lt;key2&gt;åˆ—è¡¨çš„å·¦è¾¹ lrange&lt;key&gt;&lt;start&gt;&lt;stop&gt; æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å–å…ƒç´ (ä»å·¦åˆ°å³) lindex&lt;key&gt;&lt;index&gt; æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å–çš„å…ƒç´ (ä»å·¦åˆ°å³) llen&lt;key&gt; è·å¾—åˆ—è¡¨é•¿åº¦ linsert&lt;key&gt; before&lt;value&gt; &lt;newvalue&gt; åœ¨&lt;value&gt;çš„åé¢çš„æ’å…¥&lt;newvalue&gt; æ’å…¥å€¼ lrem&lt;key&gt;&lt;n&gt;&lt;vakue&gt; ä»å·¦è¾¹åˆ é™¤ n ä¸ª value(ä»å·¦åˆ°å³) 4ã€Set Redis set å¯¹å¤–æä¾›çš„åŠŸèƒ½ä¸ list ç±»ä¼¼æ˜¯ä¸€ä¸ªåˆ—è¡¨åŠŸèƒ½ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äº set æ˜¯å¯ä»¥è‡ªåŠ¨æ’é‡çš„ï¼Œå½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨æ•°æ®ï¼Œåˆä¸å¸Œæœ›å‡ºç°ä¸€ä¸ªé‡å¤çš„æ•°æ®æ—¶ï¼Œset æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå¹¶ä¸” set æä¾›äº†åˆ¤æ–­æŸä¸ªæˆå‘˜æ˜¯å¦å­˜åœ¨ä¸€ä¸ª set é›†åˆå†…çš„é‡è¦æ¥å£ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ list æ‰€ä¸èƒ½æä¾›çš„ã€‚ Rdis çš„ set æ˜¯ String ç±»å‹çš„æ— åºé›†åˆã€‚å®ƒåº•å±‚å…¶å®æ˜¯ä¸€ä¸ª value ä¸º null çš„ hash è¡¨ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ å¸¸ç”¨æ“ä½œ æ–¹æ³• æè¿° setadd&lt;key&gt;&lt;value1&gt;&lt;value2&gt;â€¦ å°†ä¸€ä¸ªæˆ–å¤šä¸ª menber å…ƒç´ åŠ å…¥åˆ°é›†åˆ key å½“ä¸­ï¼Œå·²ç»å­˜äºé›†åˆçš„ menber å…ƒç´ å°†å¿½ç•¥ smembers&lt;key&gt; å–å‡ºè¯¥é›†åˆçš„æ‰€æœ‰å€¼ã€‚ sismember&lt;key&gt;&lt;value&gt; åˆ¤æ–­ä¸€ä¸ªé›†åˆ&lt;key&gt;æ˜¯å¦å«æœ‰è¯¥&lt;value&gt;å€¼ï¼Œæœ‰è¿”å›å€¼ 1ï¼Œæ²¡æœ‰è¿”å› 0 scard &lt;key&gt; è¿”å›è¯¥é›†åˆçš„å…ƒç´ ä¸ªæ•° srem&lt;key&gt;&lt;value1&gt;&lt;value2&gt;â€¦ åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´  spop&lt;key&gt; éšæœºä»è¯¥é›†åˆä¸­åå‡ºä¸€ä¸ªå€¼ srandmenber&lt;key&gt;&lt;n&gt; éšæœºä»è¯¥é›†åˆä¸­å–å‡º n ä¸ªå€¼ã€‚ä¸ä¼šä»é›†åˆä¸­åˆ é™¤ sinter&lt;key1&gt;&lt;key2&gt; è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†å…ƒç´  sunion&lt;key1&gt;&lt;key2&gt; è¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†å…ƒç´  sdiff&lt;key1&gt;&lt;key2&gt; è¿”å›ä¸¤ä¸ªé›†åˆçš„å·®é›†å…ƒç´  5ã€Hash Redis hash æ˜¯ä¸€é”®å€¼å¯¹é›†åˆ Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹ç‚¹é€‚ç”¨ç”¨äºå­˜å‚¨å¯¹è±¡ã€‚ ç±»ä¼¼ java é‡Œé¢çš„ Map&lt;Stringï¼ŒObject&gt; åˆ†æä¸€ä¸ªé—®é¢˜ï¼šç°æœ‰ä¸€ä¸ª JavaBean å¯¹è±¡ï¼Œåœ¨ Redis ä¸­å¦‚ä½•å­˜ï¼Ÿ ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šç”¨æˆ· ID ä¸º key,VALUE ä¸º JavaBean åºåˆ—åŒ–åçš„å­—ç¬¦ä¸² â€‹ ç¼ºç‚¹ï¼šæ¯æ¬¡ä¿®æ”¹çš„ç”¨æˆ·çš„æŸä¸ªå±æ€§éœ€è¦ï¼Œå…ˆååºåˆ—åŒ–æ”¹å¥½ååœ¨åºåˆ—åŒ–å›å»ã€‚å¼€é”€è¾ƒå¤§ ç¬¬äºŒç§æ–¹æ¡ˆï¼šç”¨æˆ· ID+å±æ€§åä½œä¸º key å±æ€§å€¼ä½œä¸º Value. â€‹ ç¼ºç‚¹ï¼šç”¨æˆ· ID æ•°æ®å†—ä½™ ç¬¬ä¸‰ç§æ–¹æ¡ˆï¼šé€šè¿‡ key(ç”¨æˆ· ID) + filed(å±æ€§æ ‡ç­¾) å°±å¯ä»¥æ“ä½œå¯¹åº”çš„å±æ€§æ•°æ®äº†ï¼Œæ—¢ä¸éœ€è¦é‡å¤å­˜å‚¨æ•°æ®ï¼Œä¹Ÿä¸ä¼šå¸¦æ¥åºåˆ—åŒ–å’Œå¹¶å‘ä¿®æ”¹æ§åˆ¶çš„é—®é¢˜ã€‚ å¸¸ç”¨æ“ä½œ æ–¹æ³• æè¿° hset&lt;key&gt; &lt;field&gt;&lt;value&gt; ç»™&lt;key&gt;é›†åˆä¸­çš„&lt;field&gt;é”®èµ‹å€¼&lt;value&gt; hmset&lt;key1&gt;&lt;field&gt; ä»&lt;key1&gt;é›†åˆ&lt;field&gt; å–å‡º value hmset&lt;key1&gt;&lt;field1&gt;&lt;value1&gt; &lt;field2&gt; &lt;value2&gt;â€¦ æ‰¹é‡è®¾ç½® hash çš„å€¼ hexists key &lt;field&gt; æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼Œç»™å®šåŸŸ field æ˜¯å¦å­˜åœ¨ hkeys&lt;key&gt; åˆ—å‡ºè¯¥ hash é›†åˆçš„æ‰€æœ‰çš„ field hvals&lt;key&gt; åˆ—å‡ºè¯¥ hash é›†åˆçš„æ‰€æœ‰ value hincrby&lt;key&gt;&lt;field&gt;&lt;increment&gt; ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„åŸŸ field çš„å€¼åŠ ä¸Šå¢é‡ increment hsetnx &lt;key&gt; &lt;field&gt;&lt;value&gt; å°†å“ˆå¸Œè¡¨ key ä¸­çš„åŸŸ field çš„å€¼è®¾ç½®ä¸º value ï¼Œå½“ä¸”ä»…å½“åŸŸ field ä¸å­˜åœ¨ 6ã€zset(sorted ser) Redis æœ‰åºé›†åˆ zset ä¸ æ™®é€šçš„ set éå¸¸ç›¸ä¼¼ï¼Œæ˜¯ä¸€ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„å­—ç¬¦ä¸²é›†åˆã€‚ä¸åŒä¹‹å¤„æ˜¯æœ‰åºé›†åˆçš„æ¯ä¸ªæˆå‘˜éƒ½å…³è”ä¸€ä¸ªè¯„åˆ†(sroce), è¿™ä¸ªè¯„åˆ†(score) è¢«ç”¨æ¥æŒ‰ç…§ä»æœ€ä½çš„åˆ†åˆ°æœ€é«˜çš„æ–¹å¼æ’åºé›†åˆä¸­çš„æˆå‘˜ã€‚é›†åˆä¸­çš„æˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯è¯„åˆ†å¯ä»¥æ˜¯é‡å¤äº†ã€‚ å› ä¸ºå…ƒç´ æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥å¾ˆå¿«çš„æ ¹æ®è¯„åˆ†ï¼ˆscore) æˆ–è€…æ¬¡åºï¼ˆpositionï¼‰æ¥è·å–ä¸€ä¸ªèŒƒå›´çš„å…ƒç´ ã€‚è®¿é—®æœ‰åºé›†åˆçš„ä¸­é—´å…ƒç´ ä¹Ÿæ˜¯éå¸¸å¿«çš„ï¼Œå› æ­¤ä½ èƒ½å¤Ÿä½¿ç”¨æœ‰åºé›†åˆä½œä¸ºä¸€ä¸ªæ²¡æœ‰é‡å¤çš„æˆå‘˜çš„æ™ºèƒ½åˆ—è¡¨ã€‚ å¸¸ç”¨æ“ä½œ æ–¹æ³• æè¿° zadd &lt;key&gt; &lt;score1&gt; &lt;value1&gt; &lt;score2&gt; &lt;value2&gt;â€¦ å°†ä¸€ä¸ªæˆ–å¤šä¸ª member å…ƒç´ åŠå…¶ score å€¼åŠ å…¥åˆ°æœ‰åºé›†åˆ key å½“ä¸­ zrange&lt;key&gt; &lt;start&gt;&lt;stop&gt;[WINHSCORES] è¿”å›æœ‰åºé›† key ä¸­ï¼Œä¸‹æ ‡åœ¨&lt;start&gt;&lt;stop&gt;ä¹‹é—´çš„å…ƒç´ å¸¦ WITHSCORES,å¯ä»¥è®©åˆ†æ•°ä¸€èµ·å’Œå€¼è¿”å›åˆ°ç»“æœé›†ã€‚ zrangebyscore key min max [withscores] [limit offset count] è¿”å›æœ‰åºé›†åˆ key ä¸­ï¼Œ æ‰€æœ‰ score å€¼ä»‹äº min å’Œ max ä¹‹é—´(åŒ…æ‹¬ç­‰äº min æˆ– max) çš„æˆå‘˜ã€‚æœ‰åºé›†åˆæŒ‰ score å€¼é€’å¢ï¼ˆä»å°åˆ°å¤§ï¼‰æ¬¡åºæ’åˆ—ã€‚ zrevrangebyscore key max min [withscores] [limit offset count] åŒä¸Šï¼Œæ”¹ä¸ºä»å¤§åˆ°å°æ’åˆ—ã€‚ zincrby &lt;key&gt; &lt;increment&gt; &lt;value&gt; ä¸ºå…ƒç´ çš„ score åŠ ä¸Šå¢é‡ zrem&lt;key&gt;&lt;value&gt; åˆ é™¤é›†åˆä¸‹ï¼ŒæŒ‡å®šå€¼çš„å…ƒç´  zcount&lt;key&gt;&lt;min&gt;&lt;max&gt; ç»Ÿè®¡è¯¥é›†åˆï¼Œåˆ†æ•°åŒºé—´å†…çš„å…ƒç´ ä¸ªæ•° zran&lt;key&gt; &lt;value&gt; è¿”å›è¯¥å€¼åœ¨é›†åˆä¸­æ’åï¼Œä» 0 å¼€å§‹ã€‚ äºŒã€Redis çš„ç›¸å…³é…ç½® è®¡é‡å•ä½è¯´æ˜,å¤§å°å†™ä¸æ•æ„Ÿ include ç±»ä¼¼ jsp ä¸­çš„ includeï¼Œå¤šå®ä¾‹çš„æƒ…å†µå¯ä»¥æŠŠå…¬ç”¨çš„é…ç½®æ–‡ä»¶æå–å‡ºæ¥ ip åœ°å€çš„ç»‘å®š bind é»˜è®¤æƒ…å†µ bind=127.0.0.1 åªèƒ½æ¥å—æœ¬æœºçš„è®¿é—®è¯·æ±‚ ä¸å†™çš„æƒ…å†µä¸‹ï¼Œæ— é™åˆ¶æ¥å—ä»»ä½• ip åœ°å€çš„è®¿é—® ç”Ÿäº§ç¯å¢ƒè‚¯å®šè¦å†™ä½ åº”ç”¨æœåŠ¡å™¨çš„åœ°å€ å¦‚æœå¼€å¯äº† protected-modeï¼Œé‚£ä¹ˆåœ¨æ²¡æœ‰è®¾å®š bind ip ä¸”æ²¡æœ‰è®¾å¯†ç çš„æƒ…å†µä¸‹ï¼Œ Redis åªå…è®¸æ¥å—æœ¬æœºçš„ç›¸åº” tcp-backlog å¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾åè‡³åˆ°æ¥å—è¿›ç¨‹å¤„ç†å‰çš„é˜Ÿåˆ— backlog é˜Ÿåˆ—æ€»å’Œ=æœªå®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ— + å·²ç»å®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ— é«˜å¹¶å‘ç¯å¢ƒ tcp-backlog è®¾ç½®å€¼è·Ÿè¶…æ—¶æ—¶é™å†…çš„ Redis ååé‡å†³å®š timeout ä¸€ä¸ªç©ºé—²çš„å®¢æˆ·ç«¯ç»´æŒå¤šå°‘ç§’ä¼šå…³é—­ï¼Œ 0 ä¸ºæ°¸ä¸å…³é—­ã€‚ tcp keepalive å¯¹è®¿é—®å®¢æˆ·ç«¯çš„ä¸€ç§å¿ƒè·³æ£€æµ‹ï¼Œæ¯ä¸ª n ç§’æ£€æµ‹ä¸€æ¬¡ï¼Œå®˜æ–¹æ¨èè®¾ç½®ä¸º 60 ç§’ daemonize æ˜¯å¦ä¸ºåå°è¿›ç¨‹ pidfile å­˜æ”¾ pid æ–‡ä»¶çš„ä½ç½®ï¼Œæ¯ä¸ªå®ä¾‹ä¼šäº§ç”Ÿä¸€ä¸ªä¸åŒçš„ pid æ–‡ä»¶ log level å››ä¸ªçº§åˆ«æ ¹æ®ä½¿ç”¨é˜¶æ®µæ¥é€‰æ‹©ï¼Œç”Ÿäº§ç¯å¢ƒé€‰æ‹© notice æˆ–è€… warning log level æ—¥å¿—æ–‡ä»¶åç§° syslog æ˜¯å¦å°† Redis æ—¥å¿—è¾“é€åˆ° linux ç³»ç»Ÿæ—¥å¿—æœåŠ¡ä¸­ syslog-ident æ—¥å¿—çš„æ ‡å¿— syslog-facility è¾“å‡ºæ—¥å¿—çš„è®¾å¤‡ database è®¾å®šåº“çš„æ•°é‡ é»˜è®¤ 16 security åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®å¯†ç  maxclient æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•° maxmemory è®¾ç½® Redis å¯ä»¥ä½¿ç”¨çš„å†…å­˜é‡ã€‚ä¸€æ—¦åˆ°è¾¾å†…å­˜ä½¿ç”¨ä¸Šé™ï¼Œ Redis å°†ä¼šè¯•å›¾ç§»é™¤å†…éƒ¨æ•°æ®ï¼Œç§»é™¤è§„åˆ™å¯ä»¥é€šè¿‡ maxmemory-policy æ¥æŒ‡å®šã€‚å¦‚æœ Redis æ— æ³•æ ¹æ®ç§»é™¤è§„åˆ™æ¥ç§»é™¤å†…å­˜ä¸­çš„æ•°æ®ï¼Œæˆ–è€…è®¾ç½®äº†â€œä¸å…è®¸ç§»é™¤â€ï¼Œé‚£ä¹ˆ Redis åˆ™ä¼šé’ˆå¯¹é‚£äº›éœ€è¦ç”³è¯·å†…å­˜çš„æŒ‡ä»¤è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚ SETã€ LPUSH ç­‰ã€‚ Maxmemory-policy volatile-lru: ä½¿ç”¨ LRU ç®—æ³•ç§»é™¤ key, åªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”® allkeys-lruï¼šä½¿ç”¨ LRU ç®—æ³•ç§»é™¤ key volatile-randomï¼šåœ¨è¿‡æœŸé›†åˆä¸­ç§»é™¤éšæœºçš„ keyï¼Œåªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”® allkeys-randomï¼šç§»é™¤éšæœºçš„ key volatile-ttlï¼šç§»é™¤é‚£äº› TTL å€¼æœ€å°çš„ keyï¼Œå³é‚£äº›æœ€è¿‘è¦è¿‡æœŸçš„ key noevictionï¼šä¸è¿›è¡Œç§»é™¤ã€‚é’ˆå¯¹å†™æ“ä½œï¼Œåªæ˜¯è¿”å›é”™è¯¯ä¿¡æ¯ Maxmemory-samples è®¾ç½®æ ·æœ¬æ•°é‡ï¼Œ LRU ç®—æ³•å’Œæœ€å° TTL ç®—æ³•éƒ½å¹¶éæ˜¯ç²¾ç¡®çš„ç®—æ³•ï¼Œè€Œæ˜¯ä¼°ç®—å€¼ï¼Œæ‰€ä»¥ä½ å¯ä»¥è®¾ç½®æ ·æœ¬çš„å¤§å°ã€‚ä¸€èˆ¬è®¾ç½® 3 åˆ° 7 çš„æ•°å­—ï¼Œæ•°å€¼è¶Šå°æ ·æœ¬è¶Šä¸å‡†ç¡®ï¼Œä½†æ˜¯æ€§èƒ½æ¶ˆè€—ä¹Ÿè¶Šå°ã€‚ ä¸‰ã€Redis çš„ Java å®¢æˆ·ç«¯ Jedis1ã€Jedis æ‰€éœ€è¦çš„ jar åŒ…ï¼Œå¯ä»¥é€šè¿‡ Maven çš„ä¾èµ–å¼•å…¥ ä½¿ç”¨ Windows ç¯å¢ƒä¸‹ Idea è¿æ¥è™šæ‹Ÿæœºä¸­çš„ Redis æ³¨æ„äº‹é¡¹ ç¦ç”¨ Linux çš„é˜²ç«å¢™ï¼š Linux(CentOS7)é‡Œæ‰§è¡Œå‘½ä»¤ ï¼š systemctl stop firewalld.service redis.conf ä¸­æ³¨é‡Šæ‰ bind 127.0.0.1 ,ç„¶å protect-mode noã€‚ Jedis æµ‹è¯•è¿é€šæ€§ : 123456789 public class JedisTest &#123; public static void main(String[] args) &#123; // è¿æ¥æœ¬åœ° Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;192.168.64.129&quot;,6379); // æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œï¼Œæ‰“å‡ºpong è¡¨ç¤ºOK System.out.println(&quot;connection is OK =====&gt;:&quot; + jedis.ping()); &#125;&#125; å››ã€ Redis äº‹åŠ¡1ã€Redis ä¸­çš„äº‹åŠ¡çš„å®šä¹‰â€‹ Redis äº‹åŠ¡æ˜¯ä¸€ä¸ªå•ç‹¬çš„éš”ç¦»æ“ä½œï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œã€‚äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤è¯·æ±‚æ‰€æ‰“æ–­ã€‚Redis äº‹åŠ¡çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸²è”å¤šä¸ªå‘½ä»¤é˜²æ­¢åˆ«çš„å‘½ä»¤æ’é˜Ÿã€‚ 2ã€multiã€execã€discard ä»è¾“å…¥ Multi å‘½ä»¤å¼€å§‹ï¼Œè¾“å…¥çš„å‘½ä»¤éƒ½ä¼šä¾æ¬¡è¿›å…¥æ‰§è¡Œå‘½ä»¤åˆ—ä¸­ï¼Œå•ä¸ä¼šæ‰§è¡Œï¼Œè‡³åˆ°è¾“å…¥ Exec åï¼ŒRedis ä¼šå°†ä¹‹å‰çš„å‘½ä»¤ä¾æ¬¡æ‰§è¡Œã€‚ ç»„é˜Ÿçš„è¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡ discard æ¥æ”¾å¼ƒç»„é˜Ÿã€‚ 3ã€äº‹åŠ¡ä¸­çš„é”™è¯¯å¤„ç† ç»„é˜Ÿä¸­çš„æŸä¸ªå‘½ä»¤å‡ºç°äº†æŠ¥å‘Šé”™è¯¯ï¼Œæ‰§è¡Œæ—¶æ•´ä¸ªçš„æ‰€æœ‰é˜Ÿåˆ—éƒ½ä¼šåˆ«å–æ¶ˆã€‚ å¦‚æœæ‰§è¡Œé˜¶æ®µæŸä¸ªå‘½ä»¤å‡ºç°äº†é”™è¯¯ï¼Œåˆ™åªæœ‰æŠ¥é”™çš„å‘½ä»¤ä¸ä¼šè¢«æ‰§è¡Œï¼Œè€Œå…¶ä»–çš„å‘½ä»¤ä¼šæ‰§è¡Œï¼Œä¸ä¼šå›æ»šã€‚ 4ã€é€šè¿‡äº‹åŠ¡è§£å†³é—®é¢˜ æ‚²è§‚é”(Pessimistic Lock) ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆæ‚²è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è¢«è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨é‚£æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼š block ç›´æ¥å®ƒæ‹¿åˆ°é”ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™æ ·çš„æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚ ä¹è§‚é”(Optimistic Lock) ,é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹å†æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ã€‚Redis å°±æ˜¯åˆ©ç”¨è¿™ç§ check-and-set æœºåˆ¶å®ç°çš„äº‹åŠ¡ã€‚ 5ã€Redis äº‹åŠ¡çš„ä½¿ç”¨ WACH key[keyâ€¦.] åœ¨æ‰§è¡Œ multi ä¹‹å‰ï¼Œ å…ˆæ‰§è¡Œ watch key1[key2], å¯ä»¥ç›‘è§†ä¸€ä¸ª(æˆ–å¤šä¸ª)keyï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™ä¸ª(æˆ–è¿™äº›)Key è¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­ã€‚ unwatch å–æ¶ˆ WATCH å‘½ä»¤å¯¹æ‰€æœ‰ key ç›‘è§†ã€‚å¦‚æœæ‰§è¡Œ WATCH å‘½ä»¤ä¹‹åï¼ŒEXEC å‘½ä»¤æˆ– DISCAED å‘½ä»¤å…ˆè¢«æ‰§è¡Œäº†çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åœ¨æ‰§è¡Œ UNWINAH äº†ã€‚ ä¸‰ç‰¹æ€§ å•ç‹¬çš„éš”ç¦»æ“ä½œ äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œã€‚äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘æ¥çš„å‘½ä»¤è¯·æ±‚æ‰€æ‰“æ–­ã€‚ æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ é˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ²¡æœ‰è¢«æäº¤ä¹‹å‰éƒ½ä¸ä¼šå®é™…çš„è¢«æ‰§è¡Œï¼Œå› ä¸ºäº‹åŠ¡æäº¤å‰çš„ä»»ä½•æŒ‡ä»¤éƒ½ä¸ä¼šè¢«å®é™…æ‰§è¡Œï¼Œä¹Ÿå°±ä¸å­˜åœ¨â€äº‹åŠ¡å†…çš„æŸ¥è¯¢è¦çœ‹åˆ°äº‹åŠ¡é‡Œçš„æ›´æ–°ï¼Œåœ¨äº‹åŠ¡å¤–æŸ¥è¯¢ä¸èƒ½çœ‹åˆ°â€ ä¸ä¿è¯åŸå­æ€§ Redis åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¦‚æœæœ‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶åçš„å‘½ä»¤ä»ä¼šè¢«æ‰§è¡Œï¼Œæ²¡æœ‰å›æ»š äº”ã€Redis æŒä¹…åŒ–Redis æä¾› 2 ä¸ªä¸ç”¨å½¢å¼çš„æŒä¹…åŒ–æ–¹å¼ RDB å’Œ AOF 1ã€RDB åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯è¡Œè¯è®²çš„ Snapshot å¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»åˆ°å†…å­˜é‡Œã€‚ å¤‡ä»½çš„æ‰§è¡Œï¼šRedis ä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿›ç¨‹éƒ½ç»“æŸï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½•çš„ IO æ“ä½œçš„ï¼Œè¿™å°±æ˜¯ç¡®ä¿äº†æé«˜çš„æ€§èƒ½å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤ï¼Œä¸”å¯¹æ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿ,é‚£ RDB æ–¹å¼è¦æ¯” AOF æ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚RDB çš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚ forkï¼š åœ¨ Linux ç¨‹åºä¸­ï¼Œfork() ä¼šäº§ç”Ÿä¸€ä¸ªå’Œçˆ¶è¿›ç¨‹å®Œå…¨ç›¸åŒçš„å­è¿›ç¨‹ï¼Œä½†å­è¿›ç¨‹åœ¨æ­¤åå¤šä¼š exec ç³»ç»Ÿè°ƒç”¨ï¼Œå‡ºäºæ•ˆç‡è€ƒè™‘ï¼ŒLinux ä¸­å¼•å…¥â€å†™æ—¶å¤åˆ¶æŠ€æœ¯â€œï¼Œä¸€èˆ¬æƒ…å†µçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¼šå…±åŒä¸€æ®µç‰©ç†å†…å­˜ï¼Œåªæœ‰è¿›ç¨‹ç©ºé—´çš„å„æ®µçš„å†…å®¹è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šçˆ¶è¿›ç¨‹çš„å†…å®¹å¤åˆ¶ä¸€ä»½ä¸ªå­è¿›ç¨‹ã€‚ RDB ä¿å­˜çš„æ–‡ä»¶ åœ¨ redis.conf ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸º dump. rdb RDB æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ é»˜è®¤ä¸º Redis å¯åŠ¨æ—¶å‘½ä»¤æ‰€åœ¨çš„ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ RDB çš„ä¿å­˜ç­–ç•¥ æ‰‹åŠ¨ä¿å­˜å¿«ç…§ saveï¼šåªç®¡ä¿å­˜ï¼Œå…¶ä»–ä¸ç®¡ï¼Œå…¨éƒ¨é˜»å¡ bgsave: æŒ‰ç…§ä¿å­˜ç­–ç•¥çš„è‡ªåŠ¨ä¿å­˜ RDB çš„ç›¸å…³é…ç½® stop-writes-on-bgsave-error yes å½“ Redis æ— æ³•å†™å…¥ç£ç›˜çš„è¯ï¼Œç›´æ¥å…³é—­ Redis çš„å†™å…¥æ“ä½œã€‚ rdbcompression yes è¿›è¡Œ rdb ä¿å­˜æ—¶ï¼Œå°†æ–‡ä»¶å‹ç¼© rdbchecksum yes åœ¨å­˜å‚¨çš„å¿«ç…§åï¼Œè¿˜å¯ä»¥è®© Redis ä½¿ç”¨ CRC64 ç®—æ³•æ¥è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä½†æ˜¯è¿™æ ·åšä¼šå¢åŠ å¤§çº¦ 10% çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¦‚æœå¸Œæœ›è·å–åˆ°æœ€å¤§çš„æ€§èƒ½æå‡ï¼Œå¯ä»¥å…³é—­æ­¤åŠŸèƒ½ RDB çš„å¤‡ä»½ ä¸æ¢å¤ å¤‡ä»½:å…ˆé€šè¿‡ config get dir æŸ¥è¯¢ rdb æ–‡ä»¶çš„ç›®å½• , å°†*.rdb çš„æ–‡ä»¶æ‹·è´åˆ°åˆ«çš„åœ°æ–¹ æ¢å¤: å…³é—­ Redisï¼ŒæŠŠå¤‡ä»½çš„æ–‡ä»¶æ‹·è´åˆ°å·¥ä½œç›®å½•ä¸‹,å¯åŠ¨ redis,å¤‡ä»½æ•°æ®ä¼šç›´æ¥åŠ è½½ã€‚ RDB çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹: èŠ‚çœç£ç›˜ç©ºé—´,æ¢å¤é€Ÿåº¦å¿«. ç¼ºç‚¹ï¼šè™½ç„¶ Redis åœ¨ fork æ—¶ä½¿ç”¨äº†å†™æ—¶æ‹·è´æŠ€æœ¯ï¼Œä½†æ˜¯å¦‚æœæ•°æ®åºå¤§æ—¶è¿˜æ˜¯æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚åœ¨å¤‡ä»½å‘¨æœŸåœ¨ä¸€å®šçš„é—´éš”æ—¶é—´åšä¸€æ¬¡å¤‡ä»½ï¼Œæ‰€æœ‰å¦‚æœ Redis æ„å¤– down æ‰çš„è¯ï¼Œå°±ä¼šå¤±å»æœ€åä¸€ä¸ªå¿«ç…§åçš„æ‰€æœ‰ä¿®æ”¹ã€‚ 2ã€AOF ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™çš„æ“ä½œï¼Œå°† Redis æ‰§è¡Œçš„è¿‡ç¨‹çš„æ‰€æœ‰å†™çš„æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼ŒRedis å¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼ŒRedis é‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™çš„æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œã€‚ AOF é»˜è®¤ä¸å¼€å¯ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚ å¯ä»¥åœ¨ redis.conf ä¸­é…ç½®æ–‡ä»¶åç§°ï¼Œé»˜è®¤ä¸º appendonly.aof â€‹ AOF æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼ŒåŒ RDB çš„è·¯å¾„ä¸€è‡´ AOF æ–‡ä»¶æ•…éšœå¤‡ä»½ AOF çš„å¤‡ä»½æœºåˆ¶å’Œæ€§èƒ½è™½ç„¶å’Œ RDB ä¸åŒï¼Œä½†æ˜¯å¤‡ä»½å’Œæ¢å¤çš„æ“ä½œ RDB ä¸€æ ·ï¼Œéƒ½æ˜¯æ‹·è´æ–‡ä»¶ï¼Œéœ€è¦æ¢å¤æ—¶å†æ‹·è´åˆ° Redis å·¥ä½œç›®å½•ä¸‹ï¼Œå¯åŠ¨ç³»ç»Ÿå³åŠ è½½ AOF æ–‡ä»¶æ•…éšœæ¢å¤ å¦‚é‡åˆ° AOF æ–‡ä»¶æŸåï¼Œå¯é€šè¿‡ redis-check-aof â€“fix appendonly.aof è¿›è¡Œæ¢å¤ AOF åŒæ­¥é¢‘ç‡è®¾ç½® å§‹ç»ˆåŒæ­¥ï¼Œæ¯æ¬¡ Redis çš„å†™å…¥éƒ½ä¼šç«‹åˆ»è®°å…¥æ—¥å¿— ã€‚ æ¯ç§’åŒæ­¥ï¼Œæ¯ç§’è®°å…¥æ—¥å¿—ä¸€æ¬¡ï¼Œå¦‚æœå®•æœºï¼Œæœ¬ç§’çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚ æŠŠä¸ä¸»åŠ¨è¿›è¡ŒåŒæ­¥ï¼ŒæŠŠåŒæ­¥æ—¶æœºäº¤ç»™æ“ä½œç³»ç»Ÿã€‚ Rewrite AOF é‡‡ç”¨æ–‡ä»¶è¿½åŠ æ–¹å¼ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ä¸ºé¿å…å‡ºç°æ­¤ç§æƒ…å†µï¼Œæ–°å¢äº†é‡å†™æœºåˆ¶,å½“ AOF æ–‡ä»¶çš„å¤§å°è¶…è¿‡æ‰€è®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œ Redis å°±ä¼šå¯åŠ¨ AOF æ–‡ä»¶çš„å†…å®¹å‹ç¼©ï¼Œåªä¿ç•™å¯ä»¥æ¢å¤æ•°æ®çš„æœ€å°æŒ‡ä»¤é›†.å¯ä»¥ä½¿ç”¨å‘½ä»¤ bgrewriteaofã€‚ Redis å®ç°é‡å†™ï¼šAOF æ–‡ä»¶æŒç»­å¢é•¿è€Œè¿‡å¤§æ—¶ï¼Œä¼š fork å‡ºä¸€æ¡æ–°è¿›ç¨‹æ¥å°† 3 æ–‡ä»¶é‡å†™ï¼ˆä¹Ÿæ˜¯å…ˆå†™ä¸´æ—¶æ–‡ä»¶æœ€åå†™ renameï¼‰,éå†æ–°è¿›ç¨‹çš„å†…å­˜ä¸­çš„æ•°æ®ï¼Œæ¯æ¡è®°å½•æœ‰ä¸€æ¡çš„ Set è¯­å¥ã€‚é‡å†™çš„ aof æ–‡ä»¶çš„æ“ä½œï¼Œå¹¶æ²¡æœ‰è¯»å–æ—§çš„ aof æ–‡ä»¶ï¼Œè€Œæ˜¯å°†æ•´ä¸ªå†…å­˜ä¸­çš„æ•°æ®åº“åå†…å®¹ç”¨å‘½ä»¤çš„æ–¹å¼é‡å†™äº†ä¸€ä¸ªæ–°çš„ aof æ–‡ä»¶ï¼Œè¿™ç‚¹å’Œå¿«ç…§æœ‰ç‚¹ç±»ä¼¼ã€‚ ä½•æ—¶é‡å†™: é‡å†™è™½ç„¶å¯ä»¥èŠ‚çœå¤§é‡çš„ç£ç›˜ç©ºé—´ï¼Œå‡å°‘æ¢å¤æ—¶é—´ã€‚ä½†æ˜¯æ¯æ¬¡é‡å†™è¿˜æ˜¯æœ‰ä¸€å®šçš„è´Ÿæ‹…çš„ï¼Œå› æ­¤è®¾å®š Redis è¦æ»¡è¶³ä¸€å®šæ¡ä»¶æ‰ä¼šè¿›è¡Œé‡å†™ã€‚ ç³»ç»Ÿè½½å…¥æ—¶æˆ–è€…ä¸Šæ¬¡é‡å†™å®Œæ¯•æ—¶ï¼ŒRedis ä¼šè®°å½•æ­¤æ—¶çš„ AOF å¤§å†™ï¼Œè®¾ä¸º base_size,å¦‚æœ Redisde AOF å½“å‰å¤§å° &gt;= base_size + base_size*100%(é»˜è®¤)ä¸”å½“å‰å¤§å°&gt;=64mb(é»˜è®¤)çš„æƒ…å†µä¸‹ï¼ŒRedis ä¼šå¯¹ AOF è¿›è¡Œé‡å†™ã€‚ AOF çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š å¤‡ä»½æœºåˆ¶æ›´ç¨³ç‚¹ï¼Œä¸¢å¤±æ•°æ®æ¦‚ç‡æ›´ä½ã€‚ å¯è¯»çš„æ—¥å¿—æ–‡æœ¬ï¼Œé€šè¿‡æ“ä½œ AOF ç¨³å¥ï¼Œå¯ä»¥å¤„ç†è¯¯æ“ä½œã€‚ ç¼ºç‚¹ï¼š æ¯”èµ· RDB å ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ æ¢å¤å¤‡ä»½é€Ÿåº¦è¦æ…¢ æ¯æ¬¡è¯»å†™éƒ½åŒæ­¥çš„è¯ï¼Œæœ‰ä¸€å®šçš„æ€§èƒ½å‹åŠ›ã€‚ 3ã€RDB å’Œ AOF ç”¨å“ªä¸ªå¥½ å®˜æ–¹æ¨èä¸¤ä¸ªéƒ½å¯ç”¨ã€‚ å¦‚æœå¯¹æ•°æ®ä¸æ•æ„Ÿï¼Œå¯ä»¥é€‰å•ç‹¬ç”¨ RDB ä¸å»ºè®®å•ç‹¬ä½¿ç”¨ AOFï¼Œ å› ä¸ºå¯èƒ½ä¼šå‡ºç° Bugã€‚ å¦‚æœåªæ˜¯åšå†…å­˜ç¼“å­˜ï¼Œå¯ä»¥éƒ½ä¸ç”¨ å…­ã€Redis ä¸»ä»å¤åˆ¶â€‹ ä¸»ä»å¤åˆ¶ï¼Œå°±æ˜¯ä¸»æœºæ•°æ®æ›´æ–°åæ ¹æ®é…ç½®å’Œç­–ç•¥ï¼Œè‡ªåŠ¨åŒæ­¥åˆ°å¤‡ç”¨çš„ master/slaver æœºåˆ¶ã€‚ Master ä»¥å†™ä¸ºä¸»ï¼Œ Slave ä»¥è¯»ä¸ºä¸»ã€‚ 1ã€ä¸»ä»å¤åˆ¶çš„ç›®çš„ è¯»å†™åˆ†ç¦»ï¼Œæ€§èƒ½æ‰©å±• å®¹ç¾å¿«é€Ÿæ¢å¤ 2ã€ä¸»ä»é…ç½® åŸåˆ™ï¼šé…ä»ä¸é…ä¸» æ­¥éª¤: å‡†å¤‡ä¸‰ä¸ª Redis å®ä¾‹ï¼Œä¸€ä¸»ä¸¤ä» æ‹·è´å¤šä¸ª redis.conf æ–‡ä»¶ include å¼€å¯ daemonize yes pid æ–‡ä»¶åå­— pidfile æŒ‡å®šç«¯å£ port Log æ–‡ä»¶åå­— Dump.rdb åå­— dbfilename Appendonly å…³é—­æˆ–æ¢æ‰åå­— 1234include /opt/myRedis/redis.confpidfile /var/run/redis6381.pidport 6381dbfilename dump6381.rdb info replication æ‰“å°ä¸»ä»å¤åˆ¶çš„ç›¸å…³ä¿¡æ¯ salveof &lt;ip&gt; &lt;port&gt; æˆä¸ºä¸»ä»å¤åˆ¶çš„ç›¸å…³ä¿¡æ¯ 3ã€ä¸€ä¸»äºŒä»æ¨¡å¼ å¤åˆ¶åŸç†ï¼š æ¯æ¬¡ä»æœºè”é€šä¹‹åï¼Œéƒ½ä¼šç»™ä¸»æœºå‘é€ sync æŒ‡ä»¤ ä¸»æœºç«‹å³è¿›è¡Œå­˜ç›˜æ“ä½œï¼Œå‘é€ RDB æ–‡ä»¶ï¼Œç»™ä»æœº ä»æœºæ”¶åˆ° RDB æ–‡ä»¶åï¼Œè¿›è¡Œå…¨ç›˜åŠ è½½ ä¹‹åæ¯æ¬¡ä¸»æœºçš„å†™æ“ä½œï¼Œéƒ½ä¼šç«‹åˆ»å‘é€ç»™ä»æœºï¼Œä»æœºæ‰§è¡Œç›¸åŒçš„å‘½ä»¤ 4ã€è–ªç«ç›¸ä¼ æ¨¡å¼æ¼”ç¤º ä¸Šä¸€ä¸ª slave å¯ä»¥æ˜¯ä¸‹ä¸€ä¸ª slave çš„ Masterï¼Œslave åŒæ ·å¯ä»¥æ¥æ”¶å…¶ä»–çš„ slaves çš„æ¥æ”¶å’ŒåŒæ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥ slave ä½œä¸ºé“¾æ¡ä¸­ä¸‹ä¸€ä¸ªçš„ master, å¯ä»¥æœ‰æ•ˆå‡è½» master çš„å†™å‹åŠ›ï¼Œå»åŒæ­¥åŒ–é™ä½é£é™©ã€‚ ä¸­é€”å˜æ›´è½¬å‘ï¼šä¼šæ¸…é™¤ä¹‹å‰çš„æ•°æ®ï¼Œé‡æ–°å»ºç«‹æ‹·è´æœ€æ–°çš„ é£é™©æ˜¯ä¸€æ—¦æŸä¸ª slave å®•æœºï¼Œåé¢çš„ slave éƒ½æ²¡æ³•å¤‡ä»½ åå®¢ä¸ºä¸»ï¼ˆå°å¼Ÿä¸Šä½ï¼‰ å½“ä¸€ä¸ª master å®•æœºåï¼Œåé¢çš„ slave å¯ä»¥ç«‹å³å‡ä¸º masterï¼Œ å…¶åé¢çš„ slave ä¸ç”¨åšä»»ä½•ä¿®æ”¹ã€‚ç”¨ slave no one å°†ä»æœºè¾¹ä¸ºä¸»æœºã€‚ å“¨å…µæ¨¡å¼ sentineï¼ˆæ¨èå¤§å“¥ï¼‰ åå®¢ä¸ºä¸»çš„è‡ªåŠ¨ç‰ˆï¼Œèƒ½å¤Ÿåå°ç›‘æ§ä¸»æœºæ˜¯å¦æ•…éšœï¼Œå¦‚æœæ•…éšœäº†æ ¹æ®æŠ•ç¥¨æ•°è‡ªåŠ¨å°†ä»åº“è½¬æ¢ä¸ºä¸»åº“ã€‚ é…ç½®å“¨å…µ è°ƒæ•´ä¸ºä¸€ä¸»äºŒä»æ¨¡å¼ è‡ªå®šä¹‰çš„/myRedis ç›®å½•ä¸‹æ–°å»º sentine.conf æ–‡ä»¶ åœ¨é…ç½®æ–‡ä»¶ä¸­å¡«å†™å†…å®¹ ==sentinel monitor mymaster 127.0.0.1 6379 1== å…¶ä¸­ mymaster ä¸ºç›‘æ§å¯¹è±¡èµ·çš„æœåŠ¡å™¨åç§°(éšæ„èµ·)ï¼Œ 1 ä¸º è‡³å°‘æœ‰å¤šå°‘ä¸ªå“¨å…µåŒæ„è¿ç§»çš„æ•°é‡ã€‚ å¯åŠ¨å“¨å…µ æ‰§è¡Œ redis-sentinel /myRedis/sentinel.conf 5ã€æ•…éšœæ¢å¤ ä¸ƒã€Redis é›†ç¾¤1ã€é›†ç¾¤ Redis é›†ç¾¤ å®ç°äº†å¯¹ Redis çš„æ°´å¹³æ‰©å®¹ï¼Œå³å¯åŠ¨ N ä¸ª redis èŠ‚ç‚¹ï¼Œå°†æ•´ä¸ªæ•°æ®åº“åˆ†å¸ƒå¼å­˜å‚¨åœ¨è¿™ä¸ª N ä¸ªèŠ‚ç‚¹ä¸­ï¼Œ æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨æ€»æ•°æ®çš„ 1/Nã€‚ Redis é›†ç¾¤é€šè¿‡åˆ†åŒº(partitonï¼‰æ¥æä¾›ä¸€å®šç¨‹åº¦çš„å¯ç”¨æ€§ï¼ˆavailability ï¼‰ï¼š å³ä½¿é›†ç¾¤ä¸­æœ‰éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæˆ–è€…æ— æ³•è¿›è¡Œé€šä¿¡ï¼Œé›†ç¾¤ä¹Ÿå¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚ 2ã€å®‰è£… ruby ç¯å¢ƒâ‘  èƒ½ä¸Šç½‘ æ‰§è¡Œyum install ruby æ‰§è¡Œ yum install rubygems â‘¡ ä¸èƒ½ä¸Šç½‘ cd /run/media/root/CentOS 7 x86_64/Packages è·å–å¦‚ä¸‹ rpm åŒ… ==æ³¨æ„==ï¼š å› ä¸º redis é›†ç¾¤éœ€è¦ä½¿ç”¨ 2.3.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè€Œ Linux ç³»ç»Ÿè‡ªå¸¦çš„æ˜¯ 2.0.0,éœ€è¦æ›´æ–°ä¸€ä¸‹ï¼Œæ‰èƒ½å¯åŠ¨ æ–¹æ³•ï¼šæ¢ yum æºå®‰è£… 12345678yum install centos-release-scl-rh //ä¼šåœ¨/etc/yum.repos.d/ç›®å½•ä¸‹å¤šå‡ºä¸€ä¸ªCentOS-SCLo-scl-rh.repoæºyum install rh-ruby23 -y //ç›´æ¥yumå®‰è£…å³å¯ scl enable rh-ruby23 bash //å¿…è¦ä¸€æ­¥ruby -v //æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬ ä½¿ç”¨ï¼šgem install redis 3ã€å‡†å¤‡ 6 ä¸ª Redis å®ä¾‹ å‡†å¤‡ 6 ä¸ªå®ä¾‹ 6379,6380,6381,6389,6390,6391 æ‹·è´å¤šä¸ª redis.conf æ–‡ä»¶å¼€å¯ daemonize yesPid æ–‡ä»¶åå­—æŒ‡å®šç«¯å£Log æ–‡ä»¶åå­—Dump.rdb åå­—Appendonly å…³æ‰æˆ–è€…æ¢åå­— å†åŠ å…¥å¦‚ä¸‹é…ç½®cluster-enabled yes æ‰“å¼€é›†ç¾¤æ¨¡å¼cluster-config-file nodes-ç«¯å£å·.conf è®¾å®šèŠ‚ç‚¹é…ç½®æ–‡ä»¶åcluster-node-timeout 15000 è®¾å®šèŠ‚ç‚¹å¤±è”æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé›†ç¾¤è‡ªåŠ¨è¿›è¡Œä¸»ä»åˆ‡æ¢ 1234567include /opt/myRedis/redis.confpidfile /var/run/redis6379.pidport 6379dbfilename dump6379.rdbcluster-enabled yescluster-config-file nodes-6379.confcluster-node-timeout 15000 4ã€åˆä½“ å°† 6 ä¸ªå®ä¾‹å…¨éƒ¨å¯åŠ¨ï¼Œ nodes-ç«¯å£å·.conf æ–‡ä»¶éƒ½ç”Ÿæˆæ­£å¸¸ 2.åˆä½“ è¿›å…¥åˆ° cd /opt/redis-3.2.5/src æ‰§è¡Œ ./redis-trib.rb create â€“replicas 1 192.168.64.129:6379 192.168.64.129:6380 192.168.64.129:6381 192.168.64.129:6389 192.168.64.129:6390 192.168.64.129:6391 ==æ³¨æ„: IP åœ°å€ä¿®æ”¹ä¸ºå½“å‰æœåŠ¡å™¨çš„åœ°å€ï¼Œç«¯å£å·ä¸ºæ¯ä¸ª Redis å®ä¾‹å¯¹åº”çš„ç«¯å£å·== 5ã€é›†ç¾¤æ“ä½œ ä»¥é›†ç¾¤çš„æ–¹å¼è¿›å…¥å®¢æˆ·ç«¯ 1redis-cli -c -p ç«¯å£å· é€šè¿‡ cluster nodes å‘½ä»¤æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ redis cluster å¦‚ä½•åˆ†é…è¿™å…­ä¸ªèŠ‚ç‚¹ã€‚ä¸€ä¸ªé›†ç¾¤è‡³å°‘è¦æœ‰ä¸‰ä¸ªä¸»èŠ‚ç‚¹ã€‚é€‰é¡¹ â€“replicas 1 è¡¨ç¤ºæˆ‘ä»¬å¸Œæœ›ä¸ºé›†ç¾¤ä¸­çš„æ¯ä¸ªä¸»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªä»èŠ‚ç‚¹ã€‚åˆ†é…åŸåˆ™å°½é‡ä¿è¯æ¯ä¸ªä¸»æ•°æ®åº“è¿è¡Œåœ¨ä¸åŒçš„ IP åœ°å€ï¼Œæ¯ä¸ªä»åº“å’Œä¸»åº“ä¸åœ¨ä¸€ä¸ª IP åœ°å€ä¸Šã€‚ slots ï¼šä¸€ä¸ª Redis é›†ç¾¤åŒ…å« 16384 ä¸ªæ’æ§½ï¼ˆ hash slotï¼‰ï¼Œ æ•°æ®åº“ä¸­çš„æ¯ä¸ªé”®éƒ½å±äºè¿™ 16384 ä¸ªæ’æ§½çš„å…¶ä¸­ä¸€ä¸ªï¼Œ é›†ç¾¤ä½¿ç”¨å…¬å¼ CRC16(key) % 16384 æ¥è®¡ç®—é”® key å±äºå“ªä¸ªæ§½ï¼Œ å…¶ä¸­ CRC16(key) è¯­å¥ç”¨äºè®¡ç®—é”® key çš„ CRC16 æ ¡éªŒå’Œ ã€‚ é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†æ’æ§½ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œ å¦‚æœä¸€ä¸ªé›†ç¾¤å¯ä»¥æœ‰ä¸»èŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼š èŠ‚ç‚¹ A è´Ÿè´£å¤„ç† 0 å·è‡³ 5500 å·æ’æ§½ã€‚ èŠ‚ç‚¹ B è´Ÿè´£å¤„ç† 5501 å·è‡³ 11000 å·æ’æ§½ã€‚ èŠ‚ç‚¹ C è´Ÿè´£å¤„ç† 11001 å·è‡³ 16383 å·æ’æ§½ åœ¨é›†ç¾¤ä¸­å½•å…¥å€¼ åœ¨ redis-cli æ¯æ¬¡å½•å…¥ã€æŸ¥è¯¢é”®å€¼ï¼Œ redis éƒ½ä¼šè®¡ç®—å‡ºè¯¥ key åº”è¯¥é€å¾€çš„æ’æ§½ï¼Œå¦‚æœä¸æ˜¯è¯¥å®¢æˆ·ç«¯å¯¹åº”æœåŠ¡å™¨çš„æ’æ§½ï¼Œ redis ä¼šæŠ¥é”™ï¼Œå¹¶å‘ŠçŸ¥åº”å‰å¾€çš„ redis å®ä¾‹åœ°å€å’Œç«¯å£. redis-cli å®¢æˆ·ç«¯æä¾›äº† â€“ c å‚æ•°å®ç°è‡ªåŠ¨é‡å®šå‘ã€‚å¦‚ redis-cli -c â€“ p 6379 ç™»å…¥åï¼Œå†å½•å…¥ã€æŸ¥è¯¢é”®å€¼å¯¹å¯ä»¥è‡ªåŠ¨é‡å®šå‘ã€‚ ä¸åœ¨ä¸€ä¸ª slot ä¸‹çš„é”®å€¼ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨ mget,mset ç­‰å¤šé”®æ“ä½œã€‚ å¯ä»¥é€šè¿‡{}æ¥å®šä¹‰ç»„çš„æ¦‚å¿µï¼Œä»è€Œä½¿ key ä¸­{}å†…ç›¸åŒå†…å®¹çš„é”®å€¼å¯¹æ”¾åˆ°ä¸€ä¸ª slot ä¸­å» ã€‚ ä¸åœ¨ä¸€ä¸ª slot ä¸‹çš„é”®å€¼ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨ mget,mset ç­‰å¤šé”®æ“ä½œã€‚ å¯ä»¥é€šè¿‡{}æ¥å®šä¹‰ç»„çš„æ¦‚å¿µï¼Œä»è€Œä½¿ key ä¸­{}å†…ç›¸åŒå†…å®¹çš„é”®å€¼å¯¹æ”¾åˆ°ä¸€ä¸ª slot ä¸­å» ã€‚ æŸ¥è¯¢é›†ç¾¤ä¸­çš„å€¼ CLUSTER KEYSLOT &lt;key&gt; è®¡ç®—é”® key åº”è¯¥è¢«æ”¾ç½®åœ¨å“ªä¸ªæ§½ä¸Šã€‚ CLUSTER COUNTKEYSINSLOT &lt;slot&gt; è¿”å›æ§½ slot ç›®å‰åŒ…å«çš„é”®å€¼å¯¹æ•°é‡ CLUSTER GETKEYSINSLOT &lt;slot&gt; &lt;count&gt; è¿”å› count ä¸ª slot æ§½ä¸­çš„é”® 6ã€é›†ç¾¤çš„ Jedis å¼€å‘123456789public class JedisClusterTest &#123; public static void main(String[] args) &#123; Set&lt;HostAndPort&gt; set =new HashSet&lt;HostAndPort&gt;(); set.add(new HostAndPort(&quot;192.168.64.129&quot;,6379)); JedisCluster jedisCluster=new JedisCluster(set); jedisCluster.set(&quot;k1&quot;, &quot;v1&quot;); System.out.println(jedisCluster.get(&quot;k1&quot;)); &#125;&#125; 7ã€Redis é›†ç¾¤çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ å®ç°æ‰©å®¹ åˆ†æ‘Šå‹åŠ› æ— ä¸­å¿ƒé…ç½®ç›¸å¯¹ç®€å• ç¼ºç‚¹ å¤šé”®æ“ä½œæ˜¯ä¸è¢«æ”¯æŒçš„ å¤šé”®çš„ Redis äº‹åŠ¡æ˜¯ä¸è¢«æ”¯æŒçš„ã€‚ lua è„šæœ¬ä¸è¢«æ”¯æŒã€‚ ç”±äºé›†ç¾¤æ–¹æ¡ˆå‡ºç°è¾ƒæ™šï¼Œå¾ˆå¤šå…¬å¸å·²ç»é‡‡ç”¨äº†å…¶ä»–çš„é›†ç¾¤æ–¹æ¡ˆï¼Œè€Œä»£ç†æˆ–è€…å®¢æˆ·ç«¯åˆ†ç‰‡ çš„æ–¹æ¡ˆæƒ³è¦è¿ç§»è‡³ redis clusterï¼Œéœ€è¦æ•´ä½“è¿ç§»è€Œä¸æ˜¯é€æ­¥è¿‡æ¸¡ï¼Œå¤æ‚åº¦è¾ƒå¤§ã€‚","categories":[{"name":"Redis","slug":"Redis","permalink":"http://blog.oy6090.top/categories/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://blog.oy6090.top/tags/Redis/"}]},{"title":"GitåŸºæœ¬ä½¿ç”¨","slug":"git åŸºæœ¬ä½¿ç”¨","date":"2020-08-14T16:00:00.000Z","updated":"2020-08-14T16:00:00.000Z","comments":true,"path":"posts/2493.html","link":"","permalink":"http://blog.oy6090.top/posts/2493.html","excerpt":"","text":"ä¸€ã€git åŸºæœ¬æŒ‡ä»¤git å®‰è£…æ¡ˆä¾‹ 1ã€åˆ›å»ºç‰ˆæœ¬åº“ åœ¨é¡¹ç›®æ–‡ä»¶å¤¹å†…ï¼Œ æ‰§è¡Œï¼š git init 2ã€æäº¤æ–‡ä»¶ æŒ‡ä»¤ æè¿° git status è¿›è¡ŒæŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ git add æ–‡ä»¶å å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº git commit æäº¤æ–‡ä»¶åˆ°æœ¬åœ°åº“ git commit -m â€œæ³¨é‡Šå†…å®¹â€ ç¼–å†™æ³¨é‡Šï¼Œå®Œæˆæäº¤ 3ã€æŸ¥çœ‹æ–‡ä»¶æäº¤è®°å½• æ‰§è¡Œ git log æ–‡ä»¶å è¿›è¡ŒæŸ¥çœ‹å†å²è®°å½• git log â€“pretty=oneline æ–‡ä»¶å ï¼ˆç®€æ˜“ä¿¡æ¯æŸ¥çœ‹ï¼‰ 4ã€å›é€€å†å² git reset â€“hard HEAD^ å›åˆ°ä¸Šä¸€æ¬¡æäº¤ git rest â€“ hard HEAD~n å›é€€ n æ¬¡æ“ä½œï¼ˆå›é€€ 2 æ¬¡ç‰ˆæœ¬ä»¥ä¸Šï¼Œå°±å»ºè®®ä½¿ç”¨æ­¤æŒ‡ä»¤ï¼‰ 5ã€ç‰ˆæœ¬ç©¿è¶Š è¿›è¡ŒæŸ¥çœ‹å†å²è®°å½•çš„ç‰ˆæœ¬å·ï¼Œæ‰§è¡Œ git reflog æ–‡ä»¶å æ‰§è¡Œgit reset â€“hard ç‰ˆæœ¬å· 6ã€è¿˜åŸæ–‡ä»¶ git checkout â€“ æ–‡ä»¶å 7ã€åˆ é™¤æŸä¸ªæ–‡ä»¶ å…ˆåˆ é™¤æ–‡ä»¶ï¼Œåœ¨git add æäº¤ 8ã€git ç»“æ„ å·¥ä½œåŒºï¼šå°±æ˜¯ç”µè„‘çš„æœ¬åœ°çš„ç£ç›˜ç›®å½• æœ¬åœ°åº“ï¼šå·¥ä½œåŒºæœ‰ä¸ªæ©è—ç›®å½•.gitï¼Œå®ƒå°±æ˜¯ Git çš„æœ¬åœ°ç‰ˆæœ¬åº“ æš‚å­˜åŒºï¼šä¸€èˆ¬å­˜æ”¾åœ¨â€git ç›®å½•â€ä¸‹çš„ index æ–‡ä»¶(.git/index)ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæš‚å­˜åŒºæœ‰æ—¶ä¹Ÿå«ç´¢å¼•åŒº(index)ã€‚ 9ã€åˆ›å»ºåˆ†æ”¯ git branch &lt;åˆ†æ”¯å&gt; git branch -v æŸ¥çœ‹åˆ†æ”¯ 10ã€åˆ‡æ¢åˆ†æ”¯ git checkout &lt;åˆ†æ”¯å&gt; ä¸€æ­¥å®Œæˆï¼š git checkout -b &lt;åˆ†æ”¯å&gt; 11ã€åˆå¹¶åˆ†æ”¯ å…ˆåˆ‡æ¢åˆ°ä¸»å¹² git checkout master git merge &lt;åˆ†æ”¯å&gt; 12ã€å†²çªâ€‹ å†²çªä¸€èˆ¬æ˜¯æŒ‡åŒä¸€ä¸ªæ–‡ä»¶åŒä¸€ä½ç½®çš„ä»£ç ï¼Œåœ¨ä¸¤ä¸ªç‰ˆæœ¬åˆå¹¶çš„æ—¶ç‰ˆæœ¬ç®¡ç†è½¯ä»¶æ— æ³•åˆ¤æ–­åˆ°åº•åº”è¯¥ä¿ç•™é‚£ä¸ªç‰ˆæœ¬ï¼Œå› æ­¤ä¼šæç¤ºè¯¥æ–‡ä»¶å‘ç”Ÿå†²çªï¼Œéœ€è¦æ‰‹å·¥åˆ¤æ–­è§£å†³å†²çªã€‚ åˆå¹¶æ—¶å†²çª â€‹ ç¨‹åºåˆå¹¶æ—¶å‘ç”Ÿå†²çªç³»ç»Ÿä¼šæç¤ºCONFLICTå…³é”®å­—ï¼Œå‘½ä»¤è¡Œåç¼€ä¼šè¿›å…¥MERGINGçŠ¶æ€ï¼Œè¡¨ç¤ºæ­¤æ—¶æ˜¯è§£å†³å†²çªçš„çŠ¶æ€ã€‚ è§£å†³å†²çªï¼š æ­¤æ—¶é€šè¿‡ git diff å¯éšæ‰¾åˆ°å‘ç”Ÿå†²çªçš„æ–‡ä»¶åŠå†²çªçš„å†…å®¹ã€‚ ç„¶åä¿®æ”¹å†²çªæ–‡ä»¶çš„å†…å®¹ï¼Œå†æ¬¡git add&lt;file&gt; å’Œ git commit æäº¤åï¼Œåç¼€MERGINGæ¶ˆå¤±ï¼Œè¯´æ˜å†²çªè§£å†³å®Œæˆã€‚ äºŒã€git ä¸ githubå›¾ç¤ºï¼š 1ã€å¢åŠ è¿œç¨‹åœ°å€ git remote add &lt;è¿œç«¯ä»£å·&gt; &lt;è¿œç«¯åœ°å€&gt; &lt;è¿œç«¯ä»£å·&gt; æ˜¯æŒ‡è¿œç¨‹é“¾æ¥çš„ä»£å·ï¼Œä¸€èˆ¬ç›´æ¥ç”¨ origin åšä¸ºä»£å·ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚ &lt;è¿œç«¯åœ°å€&gt;é»˜è®¤è¿œç¨‹é“¾æ¥çš„ url ä¾‹å¦‚ï¼šgit remote add origin https://github.com/user111/Helloworld.git 2ã€æ¨é€åˆ°è¿œç¨‹åº“ git push &lt;è¿œç«¯ä»£å·&gt; &lt;æœ¬åœ°åˆ†æ”¯çš„åç§°&gt; &lt;è¿œç«¯ä»£å·&gt; æ˜¯æŒ‡è¿œç¨‹é“¾æ¥çš„ä»£å· &lt;åˆ†æ”¯åç§°&gt; æ˜¯æŒ‡è¦æäº¤çš„åˆ†æ”¯åå­—ï¼Œæ¯”å¦‚ masterã€‚ ä¾‹å¦‚ï¼šgit push origin master 3ã€ä» GitHub ä¸Šå…‹éš†ä¸€ä¸ªé¡¹ç›® git clone &lt;è¿œç«¯åœ°å€&gt;&lt;æ–°é¡¹ç›®ç›®å½•å&gt; &lt;è¿œç«¯åœ°å€&gt; æ˜¯æŒ‡è¿œç¨‹é“¾æ¥çš„åœ°å€ &lt;é¡¹ç›®ç›®å½•å&gt; æ˜¯æŒ‡ä¸ºå…‹éš†çš„é¡¹ç›®åœ¨æœ¬åœ°æ–°å»ºçš„ç›®å½•åç§°ï¼Œå¯ä»¥ä¸å¡«ï¼Œé»˜è®¤æ˜¯ Github çš„é¡¹ç›®åã€‚ å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œä¼šè‡ªåŠ¨ä¸ºè¿™ä¸ªè¿œç«¯åœ°å€å»ºä¸€ä¸ªåä¸º origin çš„ä»£å·ã€‚ ä¾‹å¦‚ï¼š git clone https://github.com/user111/Helloworld.git hello_world 4ã€ä» gitHub æ›´æ–°é¡¹ç›® git pull &lt;è¿œç«¯ä»£å·&gt;&lt;è¿œç«¯åˆ†æ”¯å&gt; &lt;è¿œç«¯ä»£å·&gt; æ˜¯æŒ‡è¿œç¨‹é“¾æ¥çš„ä»£å· &lt;è¿œç«¯åˆ†æ”¯å&gt; æ˜¯æŒ‡è¿œç«¯çš„åˆ†æ”¯åç§°ï¼Œå¦‚ master. ä¾‹å¦‚ï¼šgit pull origin master 5ã€åä½œå†²çª ä¸‰ã€https VS sshâ€‹ ssh æ¨¡å¼ä¸ https æ¨¡å¼çš„ä¸€ä¸ªé‡è¦çš„å¥½å¤„å°±æ˜¯ï¼Œæ¯æ¬¡ pushã€pullã€fetch ç­‰æ“ä½œæ—¶ï¼Œä¸ç”¨é‡å¤å¡«å†™ç”¨æˆ·åå¯†ç ã€‚ï¼ˆå‰ææ˜¯ä½ å¿…é¡»æ˜¯è¿™ä¸ªé¡¹ç›®çš„æ‹¥æœ‰è€…æˆ–åˆä½œè€…ï¼Œä¸”é…ç½®å¥½äº† ssh keyï¼‰ã€‚ 1ã€é…ç½® SSH key æ­¥éª¤ 1ï¼šæ£€æŸ¥ç”µè„‘ä¸Šæ˜¯å¦å·²ç»ç”Ÿæˆ SSH Key åœ¨ git bash ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ æ­¥éª¤ 2ï¼šåˆ›å»º SSH Key: ssh-keygen -t rsa -C &#x58;&#88;&#x58;&#88;&#88;&#88;&#64;&#x68;&#97;&#105;&#110;&#97;&#110;&#x2e;&#x6e;&#x65;&#116; æˆåŠŸçš„è¯åœ¨~/ä¸‹ç”Ÿæˆ.shh æ–‡ä»¶å¤¹ï¼Œè¿›å»ï¼Œæ‰“å¼€ id_rsa.pub, å¤åˆ¶é‡Œé¢çš„ Keyã€‚ æ­¥éª¤ 3ï¼šè¿›å…¥.sshwe æ–‡ä»¶åŒ…ï¼Œæ‰“å° id_rsa.pub çš„å†…å®¹ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ æ­¥éª¤ 4ï¼šç™»å…¥ GitHub åï¼Œå³ä¸Šè§’ç‚¹å‡» setting æ­¥éª¤ 5ï¼šåœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹© SSH and GPG keys æ­¥éª¤ 6ï¼šTitle éšä¾¿å†™ï¼ŒKey æŠŠä¹‹å‰ id_rsa.pub çš„å†…å®¹å¤åˆ¶è¿›å»ï¼Œç‚¹å‡» Add SSH Keyï¼Œè®¾ç½® shh key å®Œæˆã€‚ æµ‹è¯•è¿é€šæ€§ï¼šæ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œè¦æ”¹ç”¨ ssh è¿æ¥ è¦å»ºç«‹æ–°çš„è¿œç¨‹ä»£å· &#x67;&#x69;&#116;&#x40;&#103;&#x69;&#x74;&#x68;&#117;&#x62;&#x2e;&#x63;&#111;&#109;:yuebuqun3333/jianfa.git(å‚è€ƒä¸Šé¢) git remote add originssh &#x67;&#x69;&#116;&#x40;&#103;&#105;&#x74;&#104;&#117;&#98;&#46;&#99;&#111;&#x6d;:yuebuqun3333/jianfa.git â€‹ ä»¥åå†æäº¤ä»£ç çš„æ—¶å€™å°±ä¸ç”¨è¾“å…¥å¯†ç ï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨ä¼šè¦æ±‚è¾“å…¥ä¸ªäºº yesï¼‰ git push originssh master å››ã€Git å·¥ä½œæµ1ã€Git å·¥ä½œæµâ€‹ ç®€å•æ¥è¯´å°±æ˜¯ï¼Œä¸€ä¸ªé¡¹ç›®çš„æˆå‘˜ä»¬åœ¨å·¥ä½œä¸­ç»Ÿä¸€ä½¿ç”¨ Git çš„æ–¹å¼ã€‚ 2ã€é›†ä¸­å¼å·¥ä½œæµ åƒ SVN ä¸€æ ·ï¼Œé›†ä¸­å¼å·¥ä½œæµä»¥ä¸­å¤®ä»“åº“ä¸ºé¡¹ç›®æ‰€ä¿®æ”¹çš„å•åº—=ç‚¹å®ä½“ã€‚æ‰€æœ‰çš„ä¿®æ”¹éƒ½æ˜¯æäº¤åˆ° Master è¿™ä¸ªåˆ†æ”¯ä¸Šã€‚ è¿™ç§æ–¹å¼ä¸ SVN çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¼€å‘äººå‘˜æœ‰æœ¬åœ°åº“ï¼ŒGit å¾ˆå¤šç‰¹æ€§å¹¶æ²¡æœ‰ç”¨åˆ° 3ã€GitFlow å·¥ä½œæµ Gitflow å·¥ä½œæµé€šè¿‡ä¸ºåŠŸèƒ½å¼€å‘ã€å‘å¸ƒå‡†å¤‡å’Œç»´æŠ¤è®¾ç«‹ç‹¬ç«‹çš„åˆ†æ”¯ï¼Œè®©å‘å¸ƒè¿­ä»£çš„è¿‡ç¨‹æ›´æµç•…ã€‚ä¸¥æ ¼çš„åˆ†æ”¯æ¨¡å‹ä¹Ÿä¸ºå¤§å‹é¡¹ç›®æä¾›äº†ä¸€äº›éå¸¸å¿…è¦çš„ç»“æ„ã€‚ 4ã€åˆ†æ”¯ç§ç±» ä¸»å¹²åˆ†æ”¯ master ä¸»è¦è´Ÿè´£ç®¡ç†æ­£åœ¨è¿è¡Œçš„ç”Ÿäº§ç¯å¢ƒä»£ç ã€‚æ°¸è¿œä¿æŒä¸æ­£åœ¨è¿è¡Œçš„ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´ã€‚ å¼€å‘åˆ†æ”¯ develop ä¸»è¦è´Ÿè´£ç®¡ç†æ­£åœ¨å¼€å‘è¿‡ç¨‹çš„ä»£ç ã€‚ä¸€èˆ¬æƒ…å†µä¸‹åº”è¯¥æ˜¯æœ€æ–°çš„ä»£ç ã€‚ bug ä¿®ç†åˆ†æ”¯ hotfix ä¸»è¦è´Ÿè´£ç®¡ç†ç”Ÿäº§ç¯å¢ƒä¸‹å‡ºç°çš„ç´§æ€¥ä¿®å¤ä»£ç ã€‚ä»ä¸»å¹²åˆ†æ”¯åˆ†å‡ºï¼Œä¿®ç†å®Œæ¯•å¹¶æµ‹è¯•ä¸Šçº¿åï¼Œå¹¶å›ä¸»å¹²åˆ†æ”¯ã€‚å¹¶å›åï¼Œè§†æƒ…å†µå¯ä»¥åˆ é™¤è¯¥åˆ†æ”¯ã€‚ å‘å¸ƒç‰ˆæœ¬åˆ†æ”¯ release è¾ƒå¤§çš„ç‰ˆæœ¬ä¸Šçº¿å‰ï¼Œä¼šä»å¼€å‘åˆ†æ”¯ä¸­åˆ†å‡ºå‘å¸ƒç‰ˆæœ¬åˆ†æ”¯ï¼Œè¿›è¡Œæœ€åé˜¶æ®µçš„é›†æˆæµ‹è¯•ã€‚è¯¥ç‰ˆæœ¬ä¸Šçº¿åï¼Œä¼šåˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ã€‚ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸€æ®µé˜¶æ®µè¾ƒç¨³å®šåå¯ä»¥è§†æƒ…å†µåˆ é™¤ã€‚ åŠŸèƒ½åˆ†æ”¯ feature ä¸ºäº†ä¸å½±å“è¾ƒçŸ­å‘¨æœŸçš„å¼€å‘å·¥ä½œï¼Œä¸€èˆ¬æŠŠä¸­é•¿æœŸå¼€å‘æ¨¡å—ï¼Œä¼šä»å¼€å‘åˆ†æ”¯ä¸­ç‹¬ç«‹å‡ºæ¥ã€‚ å¼€å‘å®Œæˆåä¼šåˆå¹¶åˆ°å¼€å‘åˆ†æ”¯ã€‚","categories":[{"name":"Gitå·¥å…·","slug":"Gitå·¥å…·","permalink":"http://blog.oy6090.top/categories/Git%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"GitHub","slug":"GitHub","permalink":"http://blog.oy6090.top/tags/GitHub/"}]},{"title":"MavenåŸºæœ¬çŸ¥è¯†","slug":"MavenåŸºæœ¬çŸ¥è¯†","date":"2020-08-13T16:00:00.000Z","updated":"2020-10-25T02:27:31.587Z","comments":true,"path":"posts/3554798849.html","link":"","permalink":"http://blog.oy6090.top/posts/3554798849.html","excerpt":"","text":"ä¸€ã€Maven åŸºæœ¬1ã€è‡ªåŠ¨åŒ–æ„å»ºâ€‹ ç®€å•æ¥è¯´å°±æ˜¯å®ƒå¯ä»¥è‡ªåŠ¨çš„ä»å»ºæ„è¿‡ç¨‹çš„èµ·ç‚¹ä¸€ç›´æ‰§è¡Œåˆ°ç»ˆç‚¹ï¼š 2ã€Maven æ ¸å¿ƒæ¦‚å¿µ POM çº¦å®šçš„ç›®å½•ç»“æ„ åæ ‡ ä¾èµ–ç®¡ç† ä»“åº“ç®¡ç† ç”Ÿå‘½å‘¨æœŸ æ’ä»¶å’Œç›®æ ‡ ç»§æ‰¿ èšåˆ 3ã€å®‰è£…ä½¿ç”¨â‘  æ£€æŸ¥ JAVA_HOME ç¯å¢ƒå˜é‡ â‘¡ è§£å‹ Maven çš„æ ¸å¿ƒç¨‹åº â€‹ å°† apache-maven-3.5.0-bin.zip è§£å‹åˆ°ä¸€ä¸ªéä¸­æ–‡æ— ç©ºæ ¼çš„ç›®å½•ä¸‹ã€‚ ä¾‹å¦‚ï¼š 1D:\\Server\\apache-maven-3.5.0 â‘¢ é…ç½®ç¯å¢ƒå˜é‡ M2_HOMEï¼šD:\\Server\\ apache-maven-3.5.0ï¼ˆä»¥è‡ªå·±å®‰è£…è·¯å¾„çš„ä¸ºå‡†ï¼‰ pathï¼š%M2_HOME%\\bin æˆ– D:\\Server\\ apache-maven-3.5.0\\bin â‘£ æŸ¥çœ‹ Maven ç‰ˆæœ¬ä¿¡æ¯éªŒè¯å®‰è£…æ˜¯å¦æ­£ç¡® â‘¤ é…ç½®æœ¬åœ°ä»“åº“ Maven é»˜è®¤çš„æœ¬åœ°ä»“åº“ï¼š ~.m2\\repository ç›®å½• ã€‚Tipsï¼š ~è¡¨ç¤ºå½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ã€‚ Maven çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä½ç½® 1è§£å‹ç›®å½•\\ D:\\Server\\ apache-maven-3.5.0\\conf\\settings.xml è®¾ç½®æ–¹å¼ 12&lt;localRepository&gt;ä»¥åŠå‡†å¤‡å¥½çš„ä»“åº“ä½ç½®&lt;/localRepository&gt;&lt;localRepository&gt;D:/RepMaven&lt;/localRepository&gt; é…ç½®é•œåƒæº 123456&lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; &lt;/mirror&gt; é…ç½®ä½¿ç”¨çš„ JDK ç‰ˆæœ¬ 1234567891011121314&lt;profile&gt; &lt;id&gt;jdk-1.8&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;jdk&gt;1.8&lt;/jdk&gt; &lt;/activation&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt; &lt;/properties&gt;&lt;/profile&gt; äºŒã€Maven ç»“æ„ main: ç›®å½•ç”¨äºå­˜æ”¾ä¸»ç¨‹åº test: ç›®å½•ç”¨äºå­˜æ”¾æµ‹è¯•çš„ç¨‹åº java: ç›®å½•ç”¨äºå­˜æ”¾æºç çš„æ–‡ä»¶ã€‚ resources: ç›®å½•ç”¨äºå­˜æ”¾é…ç½®æ–‡ä»¶å’Œèµ„æºæ–‡ä»¶ 1ã€Maven çº¦å®šçš„ç›®å½•ç»“æ„ ï¼ˆcmd ä¸­ä½¿ç”¨ï¼‰æ³¨æ„ï¼šè¿è¡Œ Maven å‘½ä»¤æ—¶ä¸€å®šè¦è¿›å…¥ pom.xml æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼ æŒ‡ä»¤ æè¿° mvn compile ç¼–è¯‘æºä»£ç  mvn test-compile ç¼–è¯‘æµ‹è¯•ä»£ç  mvn test è¿è¡Œåº”ç”¨ç¨‹åºä¸­çš„å•å…ƒæµ‹è¯• mvn clean æ¸…é™¤ç›®æ ‡ç›®å½•ä¸­çš„ç”Ÿæˆç»“æœ mvn site ç”Ÿæˆé¡¹ç›®ç›¸å…³ä¿¡æ¯çš„ç½‘ç«™ mvn package ä¾æ®é¡¹ç›®ç”Ÿæˆ jar æ–‡ä»¶ mvn install åœ¨æœ¬åœ° Repository ä¸­å®‰è£… jar mvn idea:idea ç”Ÿæˆ idea é¡¹ç›® mvn archetype:create åˆ›å»º Maven é¡¹ç›® mvn eclipse:eclipse ç”Ÿæˆ eclipse é¡¹ç›® mvn source:jar å•ç‹¬æ‰“åŒ…æºç  è¡¥å……ï¼š æŒ‡ä»¤ æè¿° mvn clean package mvn clean compile æ¸…ç†ç¼–è¯‘ mvn clean test ä¸‰ã€POMProject Object Modelï¼šé¡¹ç›®å¯¹è±¡æ¨¡å‹ã€‚ å°† Java å·¥ç¨‹çš„ç›¸å…³ä¿¡æ¯å°è£…ä¸ºå¯¹è±¡ä½œä¸ºä¾¿äºæ“ä½œå’Œç®¡ç†çš„æ¨¡å‹ã€‚Maven å·¥ç¨‹çš„æ ¸å¿ƒé…ç½®ã€‚ å¯ä»¥è¯´å­¦ä¹  Maven å°±æ˜¯å­¦ä¹  pom.xml æ–‡ä»¶ä¸­çš„é…ç½®ã€‚ å››ã€åæ ‡1ã€Maven çš„åæ ‡ &lt;groupId&gt;com.oy.maven&lt;/groupId&gt; &lt;artifactId&gt;Hello&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; groupIdï¼šå…¬å¸æˆ–ç»„ç»‡çš„åŸŸåå€’åº+å½“å‰é¡¹ç›®åç§° artifactIdï¼š å½“å‰é¡¹ç›®çš„æ¨¡å—åç§° versionï¼šå½“å‰æ¨¡å—çš„ç‰ˆæœ¬ 2ã€é€šè¿‡åæ ‡åˆ°ä»“åº“ä¸­æŸ¥æ‰¾ jar åŒ… å°† gav ä¸‰ä¸ªå‘é‡è¿èµ·æ¥ 1com.oy.maven+Hello+0.0.1-SNAPSHOT ä»¥è¿èµ·æ¥çš„å­—ç¬¦ä¸²ä½œä¸ºç›®å½•ç»“æ„åˆ°ä»“åº“ä¸­æŸ¥æ‰¾ 1com&#x2F;oy&#x2F;maven&#x2F;Hello&#x2F;0.0.1-SNAPSHOT&#x2F;Hello-0.0.1-SNAPSHOT.jar æ³¨æ„ï¼šæˆ‘ä»¬è‡ªå·±çš„ Maven å·¥ç¨‹å¿…é¡»æ‰§è¡Œå®‰è£…æ“ä½œæ‰ä¼šè¿›å…¥ä»“åº“ã€‚ å®‰è£…çš„å‘½ä»¤æ˜¯ï¼š mvn install äº”ã€ä¾èµ–ç®¡ç†1ã€åŸºæœ¬æ¦‚å¿µå½“ A jar åŒ…éœ€è¦ç”¨åˆ° B jar åŒ…ä¸­çš„ç±»æ—¶ï¼Œæˆ‘ä»¬å°±è¯´ A å¯¹ B æœ‰ä¾èµ–ã€‚ä¾‹å¦‚ï¼š commons-fileupload-1.3.jar ä¾èµ–äº commons-io-2.0.1.jarã€‚é€šè¿‡ç¬¬äºŒä¸ª Maven å·¥ç¨‹æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œ å½“å‰å·¥ç¨‹ä¼šåˆ°æœ¬åœ°ä»“åº“ä¸­æ ¹æ®åæ ‡æŸ¥æ‰¾å®ƒæ‰€ä¾èµ–çš„ jar åŒ…ã€‚é…ç½®çš„åŸºæœ¬å½¢å¼æ˜¯ä½¿ç”¨ dependency æ ‡ç­¾æŒ‡å®šç›®æ ‡ jar åŒ…çš„åæ ‡ã€‚ ä¾‹å¦‚ï¼š 12345678910&lt;dependencies&gt; &lt;dependency&gt; &lt;!â€”åæ ‡ --&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.10&lt;/version&gt; &lt;!-- ä¾èµ–çš„èŒƒå›´ --&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ã€æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–å¦‚æœ A ä¾èµ– Bï¼Œ B ä¾èµ– Cï¼Œ é‚£ä¹ˆ Aâ†’B å’Œ Bâ†’C éƒ½æ˜¯ç›´æ¥ä¾èµ–ï¼Œè€Œ Aâ†’C æ˜¯é—´æ¥ä¾èµ–ã€‚ 3ã€ä¾èµ–çš„èŒƒå›´â‘  compile main ç›®å½•ä¸‹çš„ Java ä»£ç å¯ä»¥è®¿é—®è¿™ä¸ªèŒƒå›´çš„ä¾èµ– test ç›®å½•ä¸‹çš„ Java ä»£ç å¯ä»¥è®¿é—®è¿™ä¸ªèŒƒå›´çš„ä¾èµ– éƒ¨ç½²åˆ° Tomcat æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶è¦æ”¾åœ¨ WEB-INF çš„ lib ç›®å½•ä¸‹ â€‹ ä¾‹å¦‚ï¼š å¯¹ Hello çš„ä¾èµ–ã€‚ä¸»ç¨‹åºã€æµ‹è¯•ç¨‹åºå’ŒæœåŠ¡å™¨è¿è¡Œæ—¶éƒ½éœ€è¦ç”¨åˆ°ã€‚ â‘¡ test main ç›®å½•ä¸‹çš„ Java ä»£ç ä¸èƒ½è®¿é—®è¿™ä¸ªèŒƒå›´çš„ä¾èµ– test ç›®å½•ä¸‹çš„ Java ä»£ç å¯ä»¥è®¿é—®è¿™ä¸ªèŒƒå›´çš„ä¾èµ– ]éƒ¨ç½²åˆ° Tomcat æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ä¸ä¼šæ”¾åœ¨ WEB-INF çš„ lib ç›®å½•ä¸‹ â€‹ ä¾‹å¦‚ï¼šå¯¹ junit çš„ä¾èµ–ã€‚ä»…ä»…æ˜¯æµ‹è¯•ç¨‹åºéƒ¨åˆ†éœ€è¦ã€‚ â‘¢ provided main ç›®å½•ä¸‹çš„ Java ä»£ç å¯ä»¥è®¿é—®è¿™ä¸ªèŒƒå›´çš„ä¾èµ– test ç›®å½•ä¸‹çš„ Java ä»£ç å¯ä»¥è®¿é—®è¿™ä¸ªèŒƒå›´çš„ä¾èµ– éƒ¨ç½²åˆ° Tomcat æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ä¸ä¼šæ”¾åœ¨ WEB-INF çš„ lib ç›®å½•ä¸‹ ä¾‹å¦‚ï¼š servlet-api åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ï¼Œ Servlet å®¹å™¨ä¼šæä¾›ç›¸å…³ APIï¼Œæ‰€ä»¥éƒ¨ç½²çš„æ—¶å€™ä¸éœ€è¦ã€‚ 4ã€ä¾èµ–çš„ä¼ é€’æ€§ 5ã€ä¾èµ–çš„åŸåˆ™ï¼š è§£å†³ jar åŒ…å†²çªâ‘  è·¯å¾„æœ€çŸ­è€…ä¼˜å…ˆ â‘¡ è·¯å¾„ç›¸åŒæ—¶å…ˆå£°æ˜è€…ä¼˜å…ˆ â€‹ è¿™é‡Œâ€œå£°æ˜â€çš„å…ˆåé¡ºåºæŒ‡çš„æ˜¯ dependency æ ‡ç­¾é…ç½®çš„å…ˆåé¡ºåºã€‚ 6ã€ä¾èµ–çš„æ’é™¤123456789101112&lt;dependency&gt; &lt;groupId&gt;com.atguigu.maven&lt;/groupId&gt; &lt;artifactId&gt;Survey160225_4_Environment&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;!-- ä¾èµ–æ’é™¤ --&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;commons-logging&lt;/groupId&gt; &lt;artifactId&gt;commons-logging&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt; 7ã€ç»Ÿä¸€ç®¡ç†ç›®æ ‡ jar åŒ…çš„ç‰ˆæœ¬1234567891011121314&lt;properties&gt; &lt;spring.version&gt;4.1.1.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;.... &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; å…­ã€ç”Ÿå‘½å‘¨æœŸ1ã€Maven çš„ç”Ÿå‘½å‘¨æœŸMaven æœ‰ä¸‰å¥—ç›¸äº’ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œ åˆ†åˆ«æ˜¯ï¼š Clean Lifecycle åœ¨è¿›è¡ŒçœŸæ­£çš„æ„å»ºä¹‹å‰è¿›è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚ Default Lifecycle æ„å»ºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œå®‰è£…ï¼Œéƒ¨ç½²ç­‰ç­‰ã€‚ Site Lifecycle ç”Ÿæˆé¡¹ç›®æŠ¥å‘Šï¼Œç«™ç‚¹ï¼Œå‘å¸ƒç«™ç‚¹ã€‚ å†æ¬¡å¼ºè°ƒä¸€ä¸‹å®ƒä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä½ å¯ä»¥ä»…ä»…è°ƒç”¨ clean æ¥æ¸…ç†å·¥ä½œç›®å½•ï¼Œä»…ä»…è°ƒç”¨ site æ¥ç”Ÿæˆç«™ç‚¹ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ mvn clean install site è¿è¡Œæ‰€æœ‰è¿™ä¸‰å¥—ç”Ÿå‘½å‘¨æœŸã€‚ 2ã€clean ç”Ÿå‘½å‘¨æœŸClean ç”Ÿå‘½å‘¨æœŸä¸€å…±åŒ…å«äº†ä¸‰ä¸ªé˜¶æ®µï¼š pre-clean æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ clean ä¹‹å‰å®Œæˆçš„å·¥ä½œ clean ç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ„å»ºç”Ÿæˆçš„æ–‡ä»¶ post-clean æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ clean ä¹‹åç«‹åˆ»å®Œæˆçš„å·¥ä½œ 3ã€Site ç”Ÿå‘½å‘¨æœŸ pre-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œ site ç”Ÿæˆé¡¹ç›®çš„ç«™ç‚¹æ–‡æ¡£ post-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡ site-deploy å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šçš„æœåŠ¡å™¨ä¸Š è¿™é‡Œç»å¸¸ç”¨åˆ°çš„æ˜¯ site é˜¶æ®µå’Œ site-deploy é˜¶æ®µï¼Œç”¨ä»¥ç”Ÿæˆå’Œå‘å¸ƒ Maven ç«™ç‚¹ï¼Œè¿™å¯æ˜¯ Maven ç›¸å½“å¼ºå¤§çš„åŠŸèƒ½ï¼Œ Manager æ¯”è¾ƒå–œæ¬¢ï¼Œæ–‡æ¡£åŠç»Ÿè®¡æ•°æ®è‡ªåŠ¨ç”Ÿæˆï¼Œå¾ˆå¥½çœ‹ã€‚ ä¸ƒã€ç»§æ‰¿â€‹ æ­¤æ—¶å¦‚æœé¡¹ç›®éœ€è¦å°†å„ä¸ªæ¨¡å—çš„ junit ç‰ˆæœ¬ç»Ÿä¸€ä¸º 4.9ï¼Œ é‚£ä¹ˆåˆ°å„ä¸ªå·¥ç¨‹ä¸­æ‰‹åŠ¨ä¿®æ”¹æ— ç–‘æ˜¯éå¸¸ä¸å¯å–çš„ã€‚ ä½¿ç”¨ç»§æ‰¿æœºåˆ¶å°±å¯ä»¥å°†è¿™æ ·çš„ä¾èµ–ä¿¡æ¯ç»Ÿä¸€æå–åˆ°çˆ¶å·¥ç¨‹æ¨¡å—ä¸­è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚ 1ã€åˆ›å»ºçˆ¶å·¥ç¨‹â€‹ åˆ›å»ºçˆ¶å·¥ç¨‹å’Œåˆ›å»ºä¸€èˆ¬çš„ Java å·¥ç¨‹æ“ä½œä¸€è‡´ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼š æ‰“åŒ…æ–¹å¼å¤„è¦è®¾ç½®ä¸º pomã€‚ 2ã€åœ¨å­å·¥ç¨‹ä¸­å¼•ç”¨çˆ¶å·¥ç¨‹ ... ... ... ä»å½“å‰ç›®å½•åˆ°çˆ¶é¡¹ç›®çš„ pom.xml æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ ä»£ç ç¤ºä¾‹ï¼š 1234567&lt;parent&gt; &lt;groupId&gt;com.oy.maven&lt;/groupId&gt; &lt;artifactId&gt;Parent&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;!-- æŒ‡å®šä»å½“å‰å­å·¥ç¨‹çš„ pom.xml æ–‡ä»¶å‡ºå‘ï¼ŒæŸ¥æ‰¾çˆ¶å·¥ç¨‹çš„ pom.xml çš„è·¯å¾„ --&gt; &lt;relativePath&gt;../Parent/pom.xml&lt;/relativePath&gt;&lt;/parent&gt; æ­¤æ—¶å¦‚æœå­å·¥ç¨‹çš„ groupId å’Œ version å¦‚æœå’Œçˆ¶å·¥ç¨‹é‡å¤åˆ™å¯ä»¥åˆ é™¤ã€‚ 3ã€åœ¨çˆ¶å·¥ç¨‹ä¸­ç®¡ç†ä¾èµ–å°† Parent é¡¹ç›®ä¸­çš„ dependencies æ ‡ç­¾ï¼Œç”¨ dependencyManagement æ ‡ç­¾æ‹¬èµ·æ¥ junit junit 4.9 test åœ¨å­é¡¹ç›®ä¸­é‡æ–°æŒ‡å®šéœ€è¦çš„ä¾èµ–ï¼Œåˆ é™¤èŒƒå›´å’Œç‰ˆæœ¬å· â€‹ â€‹ junit â€‹ junit â€‹ å…«ã€èšåˆâ€‹ å°†å¤šä¸ªå·¥ç¨‹æ‹†åˆ†ä¸ºæ¨¡å—åï¼Œ éœ€è¦æ‰‹åŠ¨é€ä¸ªå®‰è£…åˆ°ä»“åº“åä¾èµ–æ‰èƒ½å¤Ÿç”Ÿæ•ˆã€‚ ä¿®æ”¹æºç åä¹Ÿéœ€è¦é€ä¸ªæ‰‹åŠ¨è¿›è¡Œ clean æ“ä½œã€‚ è€Œä½¿ç”¨äº†èšåˆä¹‹åå°±å¯ä»¥æ‰¹é‡è¿›è¡Œ Maven å·¥ç¨‹çš„å®‰è£…ã€æ¸…ç†å·¥ä½œã€‚ 1ã€é…ç½®èšåˆâ€‹ åœ¨æ€»çš„èšåˆå·¥ç¨‹ä¸­ä½¿ç”¨ modules/module æ ‡ç­¾ç»„åˆï¼Œ æŒ‡å®šæ¨¡å—å·¥ç¨‹çš„ç›¸å¯¹è·¯å¾„å³å¯ 12345&lt;modules&gt; &lt;module&gt;../Hello&lt;/module&gt; &lt;module&gt;../HelloFriend&lt;/module&gt; &lt;module&gt;../MakeFriends&lt;/module&gt;&lt;/modules&gt;","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://blog.oy6090.top/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"http://blog.oy6090.top/tags/Maven/"}]},{"title":"MybatisåŸºç¡€","slug":"MybatisåŸºç¡€","date":"2020-08-06T16:00:00.000Z","updated":"2020-10-25T02:27:51.758Z","comments":true,"path":"posts/3661501281.html","link":"","permalink":"http://blog.oy6090.top/posts/3661501281.html","excerpt":"","text":"mybatis-generator-core-1.3.2.jar ä¸€ã€Mybatis å…¥é—¨æ¡ˆä¾‹1ã€å¼€å‘ç¯å¢ƒå‡†å¤‡ï¼ˆIdeaï¼‰ å¯¼å…¥ MyBatis æ¡†æ¶çš„ jar åŒ…ã€ MySQL é©±åŠ¨åŒ…ã€log4j çš„ jar åŒ… å¯¼å…¥ log4j çš„é…ç½®æ–‡ä»¶ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰ 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;&lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt; // æ³¨æ„è¿™é‡Œï¼Œè‡ªå·±ä½¿ç”¨çš„å·¥å…· &lt;appender name=&quot;STDOUT&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt; &lt;param name=&quot;Encoding&quot; value=&quot;UTF-8&quot; /&gt; &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt; &lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m (%F:%L) \\n&quot; /&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;logger name=&quot;java.sql&quot;&gt; &lt;level value=&quot;debug&quot; /&gt; &lt;/logger&gt; &lt;logger name=&quot;org.apache.ibatis&quot;&gt; &lt;level value=&quot;info&quot; /&gt; &lt;/logger&gt; &lt;root&gt; &lt;level value=&quot;debug&quot; /&gt; &lt;appender-ref ref=&quot;STDOUT&quot; /&gt; &lt;/root&gt;&lt;/log4j:configuration&gt; æ³¨æ„ï¼š 1234&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;&lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt; è¿™é‡Œçš„ &lt;log4j:configuration xmlns:log4j=â€http://jakarta.apache.org/log4j/&quot;&gt; åœ¨ Idea ä¸­ä¼šæŠ¥é”™ è§£å†³åŠæ³•ï¼š æ”¹ä¸ºï¼š 123&lt;!DOCTYPE log4j:configuration SYSTEM &quot;http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd&quot;&gt;&lt;log4j:configuration debug=&quot;true&quot;&gt; æœ€ç»ˆç‰ˆï¼šï¼ˆIdeaï¼‰ 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE log4j:configuration SYSTEM &quot;http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/doc-files/log4j.dtd&quot;&gt;&lt;log4j:configuration debug=&quot;true&quot;&gt; &lt;appender name=&quot;STDOUT&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt; &lt;param name=&quot;Encoding&quot; value=&quot;UTF-8&quot; /&gt; &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt; &lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m (%F:%L) \\n&quot; /&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;logger name=&quot;java.sql&quot;&gt; &lt;level value=&quot;debug&quot; /&gt; &lt;/logger&gt; &lt;logger name=&quot;org.apache.ibatis&quot;&gt; &lt;level value=&quot;info&quot; /&gt; &lt;/logger&gt; &lt;root&gt; &lt;level value=&quot;debug&quot; /&gt; &lt;appender-ref ref=&quot;STDOUT&quot; /&gt; &lt;/root&gt;&lt;/log4j:configuration&gt; 2ã€åˆ›å»ºæµ‹è¯•è¡¨123456789101112-- åˆ›å»ºåº“CREATE DATABASE test_mybatis;-- ä½¿ç”¨åº“USE test_mybatis;-- åˆ›å»ºè¡¨CREATE TABLE tb_user( uid INT PRIMARY KEY AUTO_INCREMENT, username VARCHAR(50), password VARCHAR(50), age INT, sex VARCHAR(20)); 3ã€åˆ›å»º javaBean1234567891011public class User &#123; private Integer uid; private String userName; private String password; private Integer age; private String sex;....ç”Ÿæˆæ„é€ å™¨ï¼Œä»¥åŠgetã€setã€toStringæ–¹æ³•ã€‚ 4ã€Mapper æ¥å£1234public interface UserMapper &#123; User getUserByUid(String uid);&#125; 5ã€åˆ›å»º MyBatis çš„å…¨å±€é…ç½®æ–‡ä»¶12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;!-- æ•°æ®åº“è¿æ¥ç¯å¢ƒçš„é…ç½® --&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/test_mybatis&quot;/&gt; // æ ¹æ®è‡ªå·±çš„é…ç½® &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt; // æ ¹æ®è‡ªå·±çš„é…ç½® &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!-- å¼•å…¥SQLæ˜ å°„æ–‡ä»¶,Mapperæ˜ å°„æ–‡ä»¶ --&gt; &lt;mappers&gt; &lt;mapper resource=&quot;UserMapper.xml&quot; /&gt; &lt;/mappers&gt;&lt;/configuration&gt; 6ã€åˆ›å»º Mybatis çš„ sql æ˜ å°„æ–‡ä»¶12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.oy.online.mapper.UserMapper&quot;&gt; &lt;!-- &lt;select&gt;: å®šä¹‰æŸ¥è¯¢è¯­å¥ id : è®¾ç½®SQLè¯­å¥çš„å”¯ä¸€æ ‡è¯† resultType: ç»“æœç±»å‹ï¼Œå³å®ä½“ç±»çš„å…¨é™å®šå --&gt; &lt;select id=&quot;getUserByUid&quot; resultType=&quot;com.oy.online.bean.User&quot;&gt; select uid, username, password, age, sex from tb_user where uid = #&#123;uid&#125; &lt;/select&gt;&lt;/mapper&gt; 7ã€æµ‹è¯•123456789101112public class TestMybatis &#123; @Test public void test() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); SqlSession sqlSession = sqlSessionFactory.openSession(); // getMapper():ä¼šé€šè¿‡åŠ¨æ€ä»£ç†åŠ¨æ€ç”ŸæˆUserMapperçš„ä»£ç†å®ç°ç±» UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User userByUid = userMapper.getUserByUid(&quot;1&quot;); System.out.println(userByUid); &#125;&#125; äºŒã€MyBatis å…¨å±€é…ç½®æ–‡ä»¶1ã€MyBatis å…¨å±€é…ç½®æ–‡ä»¶ç®€ä»‹æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š â€‹ 2ã€properties å±æ€§ åˆ›å»ºä¸€ä¸ªèµ„æºæ–‡ä»¶ï¼Œåä¸ºjdbc.properties çš„æ–‡ä»¶,å°†å››ä¸ªè¿æ¥å­—ç¬¦ä¸²çš„æ•°æ®åœ¨èµ„æºæ–‡ä»¶ä¸­é€šè¿‡é”®å€¼ å¯¹(key=value)çš„æ–¹å¼æ”¾ç½® ã€‚ 1234jdbc.driver=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/test_mybatisjdbc.username=rootjdbc.password=root 123456&lt;!-- &lt;properties &gt;: è®¾ç½®æˆ–å¼•å…¥èµ„æºæ–‡ä»¶ resource: åœ¨ç±»è·¯å¾„ä¸‹è®¿é—®èµ„æºæ–‡ä»¶ url: åœ¨ç½‘ç»œè·¯å¾„æˆ–ç£ç›˜è·¯å¾„ä¸‹è®¿é—®èµ„æºæ–‡ä»¶ --&gt; &lt;properties resource=&quot;jdbc.properties&quot;&gt;&lt;/properties&gt; åœ¨ environment å…ƒç´ çš„ dataSource å…ƒç´ ä¸­ä¸ºå…¶åŠ¨æ€è®¾ç½® 1234567891011&lt;environments default=&quot;mysql&quot;&gt; &lt;environment id=&quot;mysql&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot; /&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot; /&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot; /&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt; &lt;/dataSource&gt; &lt;/environment&gt;&lt;/environments&gt; 3ã€settings å±æ€§12345678&lt;settings&gt; &lt;!-- å°†ä¸‹åˆ’çº¿æ˜ å°„æˆé©¼å³°ï¼Œuser_nameæ˜ å°„ä¸ºuserName --&gt; &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt; &lt;!-- å¼€å¯å»¶è¿ŸåŠ è½½ --&gt; &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt; &lt;!-- æ˜¯å¦æŸ¥è¯¢æ‰€æœ‰æ•°æ® --&gt; &lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt;&lt;/settings&gt; 4ã€typeAliases åˆ«åå¤„ç† ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å¼•ç”¨æŸä¸ªç±»ã€‚ ï¼ˆtypeAliasï¼‰ ç±»å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰¹é‡è®¾ç½®åˆ«åè¿™ä¸ªåŒ…ä¸‹çš„æ¯ä¸€ä¸ªç±»åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„åˆ«åï¼Œå°±æ˜¯ç®€å•ç±»åå°å†™ ã€‚(package) 12345678&lt;typeAliases&gt; &lt;!-- ä¸ºç±»å‹è®¾ç½®ç±»å‹åˆ«å type: Java ç±»å‹ï¼Œ è‹¥åªè®¾ç½®type, é»˜è®¤çš„åˆ«åå°±æ˜¯ç±»å‹ï¼Œä¸”ä¸åŒºåˆ†å¤§å°å†™ --&gt; &lt;!--&lt;typeAlias type=&quot;com.oy.online.bean.User&quot; alias=&quot;user&quot;&gt;&lt;/typeAlias&gt;--&gt; &lt;package name=&quot;com.oy.online.bean&quot;/&gt;&lt;/typeAliases&gt; MyBatis å·²ç»å–å¥½çš„åˆ«å 5ã€environments ç¯å¢ƒé…ç½® æ¯ç§ç¯å¢ƒä½¿ç”¨ä¸€ä¸ª evironments æ ‡ç­¾è¿›è¡ŒåŒ¹é…å¹¶æŒ‡å®šå”¯ä¸€æ ‡è¯†ç¬¦ å¯ä»¥é€šè¿‡ environments æ ‡ç­¾ä¸­çš„ defaul å±æ€§æŒ‡å®šä¸€ä¸ªç¯å¢ƒçš„æ ‡è¯†ç¬¦æ¥å¿«é€Ÿçš„åˆ‡æ¢ç¯å¢ƒã€‚ 1234567&lt;!-- &lt;environments&gt;:è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ default:è®¾ç½®é»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“ç¯å¢ƒ--&gt;&lt;environments default=&quot;mysql&quot;&gt; .....&lt;/environments&gt; environment æŒ‡å®šå…·ä½“ç¯å¢ƒ idï¼šæŒ‡å®šå½“å‰ç¯å¢ƒçš„å”¯ä¸€æ ‡è¯† transactionManager type: JDBC | MANAGED | è‡ªå®šä¹‰ JDBC : ä½¿ç”¨äº† JDBC çš„æäº¤å’Œå›æ»šè®¾ç½®ï¼Œä¾èµ–äºä»æ•°æ®æºçš„åˆ°çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡èŒƒå›´ã€‚(JdbcTransactionFactory) MANAGED: ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ã€è®©å®¹å™¨ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆæ¯”å¦‚ JEE åº”ç”¨æœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡ã€‚ManagedTransactionFactory ï¼‰ è‡ªå®šä¹‰ï¼š å®ç° TransationFactory æ¥å£ï¼Œtype = å…¨ç±»å/åˆ«å 5ã€dataSource type: UNPOOLED | POOLED | JNDI | è‡ªå®šä¹‰ UNPOOLED: ä¸ä½¿ç”¨è¿æ¥æ± ï¼ŒUnpooledDataSourceFactory POOLEDï¼š ä½¿ç”¨è¿æ¥æ± ï¼Œ PooledDataSourceFactory JNDIï¼š åœ¨ EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­æŸ¥æ‰¾æ‰§è¡Œçš„æ•°æ®æº è‡ªå®šä¹‰ï¼šå®ç° DataSourceFactory æ¥å£ ï¼Œå®šä¹‰æ•°æ®æºçš„è·å–æ–¹å¼ æé†’ï¼š å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨ Spring ç®¡ç†æ•°æ®æºï¼Œå¹¶è¿›è¡Œäº‹åŠ¡æ§åˆ¶çš„é…ç½®æ¥è¦†ç›–ä¸Šè¿°çš„é…ç½®ã€‚ 6ã€mappers æ˜ å°„å™¨ mapper é€ä¸ªæ³¨å†Œ SQL æ˜ å°„æ–‡ä»¶ resource : å¼•å…¥ç±»è·¯å¾„ä¸‹çš„æ–‡ä»¶ url : å¼•å…¥ç½‘ç»œè·¯å¾„æˆ–è€…æ˜¯ç£ç›˜è·¯å¾„ä¸‹çš„æ–‡ä»¶ class : å¼•å…¥ Mapper æ¥å£ã€‚æœ‰ SQL æ˜ å°„æ–‡ä»¶ï¼Œè¦æ±‚ Mapper æ¥å£ä¸ SQL æ˜ å°„æ–‡ä»¶åŒååŒä½ç½®ï¼Œæ²¡æœ‰ SQL æ˜ å°„æ–‡ä»¶ï¼Œä½¿ç”¨æ³¨è§£åœ¨æ¥å£çš„æ–¹æ³•ä¸Šå†™ SQL è¯­å¥ã€‚ 12345&lt;mappers&gt; &lt;mapper resource=&quot;EmployeeMapper.xml&quot; /&gt; &lt;mapper class=&quot;com.OY.mybatis.dao.EmployeeMapper&quot;/&gt; &lt;package name=&quot;com.OY.mybatis.dao&quot;/&gt;&lt;/mappers&gt; ä½¿ç”¨æ‰¹é‡æ³¨å†Œï¼Œè¿™ç§æ–¹å¼è¦æ±‚ SQL æ˜ å°„æ–‡ä»¶åå¿…é¡»å’Œæ¥å£åç›¸åŒå¹¶ä¸”åœ¨åŒä¸€ç›®å½•ä¸‹ &lt;package&gt; 123&lt;mappers&gt; &lt;package name=&quot;com.oy.online.Mapper&quot;/&gt;&lt;/mappers&gt; ä¸‰ã€Mybatis æ˜ å°„æ–‡ä»¶ï¼ˆCRUDï¼‰1234&#x2F;&#x2F; namespace: æ ¹æ®è‡ªå·±çš„æ¥å£æ¥ç¡®å®š&lt;mapper namespace&#x3D;&quot;com.oy.online.Mapper.UserMapper&quot;&gt;....&lt;&#x2F;mapper&gt; SQL æ˜ å°„æ–‡ä»¶æœ‰å¾ˆå°‘çš„å‡ ä¸ªé¡¶çº§å…ƒç´  cache â€“ ç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚ cache-ref â€“ å…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚ resultMap â€“ æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚ sql â€“ å¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚ insert â€“ æ˜ å°„æ’å…¥è¯­å¥ update â€“ æ˜ å°„æ›´æ–°è¯­å¥ delete â€“ æ˜ å°„åˆ é™¤è¯­å¥ select â€“ æ˜ å°„æŸ¥è¯¢è¯­ 1ã€selectMapper æ¥å£æ–¹æ³• 12// æ ¹æ®eid æŸ¥è¯¢ä¸€ä¸ªå‘˜å·¥çš„ä¿¡æ¯Emp getEmpByEid(String eid); Mapper æ˜ å°„æ–‡ä»¶ 123&lt;select id=&quot;getEmpByEid&quot; resultType=&quot;com.oy.online.bean.Emp&quot;&gt; select eid, ename, age, sex, did from emp where eid = #&#123;eid&#125;&lt;/select&gt; 2ã€insertMapper æ¥å£æ–¹æ³• 12// æ·»åŠ å‘˜å·¥void addEmp(Emp emp); Mapper æ˜ å°„æ–‡ä»¶ 123&lt;insert id=&quot;addEmp&quot; &gt; insert into emp values(null, #&#123;ename&#125;, #&#123;age&#125;, #&#123;sex&#125;)&lt;/insert&gt; 3ã€updateMapper æ¥å£æ–¹æ³• 12// ä¿®æ”¹å‘˜å·¥ä¿¡æ¯void updateEmp(Emp emp); Mapper æ˜ å°„æ–‡ä»¶ 1234&lt;!--void updateEmp(Emp emp);--&gt;&lt;update id=&quot;updateEmp&quot;&gt; update emp set ename = #&#123;ename&#125;, age = #&#123;age&#125;, sex =#&#123;sex&#125; where eid = #&#123;eid&#125;&lt;/update&gt; 4ã€deleteMapper æ¥å£æ–¹æ³• 123&lt;delete id=&quot;deleteEmp&quot;&gt; delete from emp where eid = #&#123;eid&#125;&lt;/delete&gt; Mapper æ˜ å°„æ–‡ä»¶ 12// åˆ é™¤å‘˜å·¥ä¿¡æ¯Boolean deleteEmp(String eid); å››ã€Mybatis æ˜ å°„æ–‡ä»¶ï¼ˆå‚æ•°ä¼ é€’ï¼‰1ã€ä¸»é”®ç”Ÿæˆæ–¹å¼ã€è·å–ä¸»é”®å€¼ ä¸»é”®ç”Ÿæˆæ–¹å¼ æ”¯æŒä¸»é”®è‡ªå¢ï¼Œä¾‹å¦‚ MySQL æ•°æ®åº“ ä¸æ”¯æŒä¸»é”®è‡ªå¢ï¼Œä¾‹å¦‚ Oracle æ•°æ®åº“ è·å–ä¸»é”®å€¼ è‹¥æ•°æ®åº“æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„å­—æ®µï¼ˆæ¯”å¦‚ MySQL å’Œ SQL Serverï¼‰ï¼Œåˆ™å¯ä»¥è®¾ç½®useGeneratedKeys=â€trueâ€ï¼Œç„¶åå†æŠŠ keyProperty è®¾ç½®åˆ°ç›®æ ‡å±æ€§ä¸Šã€‚ Mapper æ¥å£æ–¹æ³• 12//æ·»åŠ å‘˜å·¥ä¿¡æ¯void insertEmp(Emp emp); Mapper æ˜ å°„æ–‡ä»¶ 1234567&lt;!-- useGeneratedKeys: å¯ä»¥ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”® keyPropertyï¼š å°†è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®èµ‹å€¼ç»™ä¼ é€’è¿‡æ¥çš„å‚æ•°çš„å“ªä¸€ä¸ªå±æ€§--&gt;&lt;insert id=&quot;insertEmp&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;eid&quot;&gt; insert into emp values(null, &#x27;$&#123;ename&#125;&#x27;, $&#123;age&#125;, &#x27;$&#123;sex&#125;&#x27;)&lt;/insert&gt; æµ‹è¯•ï¼š 12345678910@Testpublic void tes1() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); SqlSession sqlSession = sqlSessionFactory.openSession(true); //è‡ªåŠ¨å¤„ç†äº‹åŠ¡ ParaMpper mapper = sqlSession.getMapper(ParaMpper.class); Emp emp = new Emp(null, &quot;å°æ²«æ²«&quot;, 12, &quot;å¥³&quot;); mapper.insertEmp(emp); System.out.println(emp.getEid());&#125; 2ã€ å‚æ•°çš„ä¼ é€’mybatis è·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼ï¼š ${}: insert into emp values(null, admit, 23, ç”·) Statement: å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ“ä½œ SQLï¼Œä¸€å®šè¦æ³¨æ„å•å¼•å·é—®é¢˜ #{}ï¼šinsert into emp values(null, ?,?,?) PrepardStratement: å¯ä»¥ä½¿é€šé…ç¬¦æ“ä½œ SQLï¼Œå› ä¸ºåœ¨ä¸º String èµ‹å€¼æ—¶ ä½¿ç”¨å»ºè®®ï¼šå»ºè®®ä½¿ç”¨#{}ï¼Œåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéœ€è¦ä½¿ç”¨${},ä¾‹å¦‚æ¨¡ç³ŠæŸ¥è¯¢å’Œåˆ†é¡µæŸ¥è¯¢ å‚æ•°ä¼ é€’çš„æ–¹å¼ï¼š å½“ä¼ é€’å‚æ•°ä¸ºå•ä¸ª String æˆ–åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶ä»–åŒ…è£…ç±» #{} ï¼šå¯ä»¥ä»¥ä»»æ„çš„åå­—è·å–å‚æ•°å€¼ ${} : åªèƒ½ä»¥${value} æˆ– ${_parameter} è·å– å½“ä¼ è¾“çš„å‚æ•°ä¸º JavaBean æ—¶ #{} å’Œ ${} éƒ½å¯ä»¥é€šè¿‡å±æ€§åç›´æ¥è·å–å±æ€§å€¼ï¼Œä½†æ˜¯è¦*æ³¨æ„${}çš„å•å¼•å·é—®é¢˜ã€‚\\* 1insert into emp values(null, &#x27;$&#123;ename&#125;&#x27;, $&#123;age&#125;, &#x27;$&#123;sex&#125;&#x27;) å½“ä¼ é€’å¤šä¸ªå‚æ•°æ—¶ï¼Œmybatis ä¼šé»˜è®¤å°†è¿™äº›å‚æ•°æ”¾åœ¨ map é›†åˆä¸­ ä¸¤ç§æ–¹å¼ï¼š é”®ä¸º 0,1,2,3â€¦N-1, ä»¥å‚æ•°ä¸ºå€¼ é”®ä¸º param1, param2,param3â€¦.paramN, ä»¥å‚æ•°ä¸ºå€¼ #{}ï¼š#{0}ï¼Œ#{1}ï¼›#{param1}ã€#{param2} ${}: ${param1}ã€${param2}, ä½†æ˜¯è¦æ³¨æ„${}çš„å•å¼•å·é—®é¢˜ 12345&lt;select id=&quot;getEmpByEidAndEname&quot; resultType=&quot;Emp&quot;&gt; &lt;!--select eid, ename, age, sex from emp where eid = #&#123;0&#125; and ename = #&#123;1&#125;--&gt; &lt;!-- select eid, ename, age, sex from emp where eid = #&#123;param1&#125; and ename = #&#123;param2&#125;--&gt; select eid, ename, age, sex from emp where eid = &#x27;$&#123;param1&#125;&#x27; and ename = &#x27;$&#123;param2&#125;&#x27; &lt;/select&gt; å‘½åå‚æ•° ä¸ºå‚æ•°ä½¿ç”¨@Param èµ·ä¸€ä¸ªåå­—ï¼ŒMybatis å°±ä¼šå°†è¿™äº›å‚æ•°å°è¿› map ä¸­ï¼Œ key å°±æ˜¯æˆ‘ä»¬è‡ªå·±æŒ‡çš„åå­— Mapper æ¥å£ 1Emp getEmpByEidAndEnameByParam(@Param(&quot;eid&quot;) String eid, @Param(&quot;ename&quot;) String ename); Mapper æ˜ å°„æ–‡ä»¶ 1234&lt;!--Emp getEmpByEidAndEnameByParam(@Param(&quot;eid&quot;) String eid, @Param(&quot;ename&quot;) String ename)--&gt;&lt;select id=&quot;getEmpByEidAndEnameByParam&quot; resultType=&quot;Emp&quot;&gt; select eid, ename, age, sex from emp where eid = #&#123;eid&#125; and ename = #&#123;ename&#125;&lt;/select&gt; Map æˆ‘ä»¬ä¹Ÿå¯ä»¥å°è£…å¤šä¸ªå‚æ•°ä¸º Mapï¼Œç›´æ¥ä¼ é€’ Mapper æ˜ å°„æ–‡ä»¶ 1234&lt;!--Emp getEmpByMap(Map&lt;String, Object&gt; map)--&gt;&lt;select id=&quot;getEmpByMap&quot; resultType=&quot;Emp&quot;&gt; select eid, ename, age, sex from emp where eid = $&#123;eid&#125; and ename = &#x27;$&#123;ename&#125;&#x27;&lt;/select&gt; _æµ‹è¯•_ï¼š 123456789101112@Testpublic void test4() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); SqlSession sqlSession = sqlSessionFactory.openSession(true); ParaMpper mapper = sqlSession.getMapper(ParaMpper.class); HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;eid&quot;, &quot;3&quot;); map.put(&quot;ename&quot;, &quot;å°æ˜&quot;); Emp empByMap = mapper.getEmpByMap(map); System.out.println(empByMap);&#125; Collection/Array ä¼šè¢« MyBatis å°è£…æˆä¸€ä¸ª map ä¼ å…¥, Collection å¯¹åº”çš„ key æ˜¯ collection,Array å¯¹åº”çš„ key æ˜¯ array. å¦‚æœç¡®å®šæ˜¯ List é›†åˆï¼Œ key è¿˜å¯ä»¥æ˜¯ list. 3ã€å‚æ•°å¤„ç† å‚æ•°ä½ç½®æ”¯æŒçš„å±æ€§ javaTypeã€ jdbcTypeã€ modeã€ numericScaleã€ resultMapã€ typeHandlerã€ jdbcTypeNameã€expression å®é™…ä¸Šé€šå¸¸è¢«è®¾ç½®çš„æ˜¯ï¼šå¯èƒ½ä¸ºç©ºçš„åˆ—åæŒ‡å®š jdbcType ,ä¾‹å¦‚: insert into orcl_employee(id,last_name,email,gender) values(employee_seq.nextval,#{lastName,jdbcType=NULL },#{email},#{gen der}) 4ã€å‚æ•°çš„è·å–æ–¹å¼ #{key}: è·å–å‚æ•°çš„å€¼ï¼Œé¢„ç¼–è¯‘åˆ° SQL ä¸­ã€‚å®‰å…¨ã€‚ ${key}: è·å–å‚æ•°çš„å€¼ï¼Œæ‹¼æ¥åˆ° SQL ä¸­ã€‚æœ‰ SQL æ³¨å…¥é—®é¢˜ã€‚ 5ã€select æŸ¥è¯¢çš„å‡ ç§æƒ…å†µ æŸ¥è¯¢å•è¡Œæ•°æ®è¿”å›å•ä¸ªå¯¹è±¡ 1Emp getEmpByEid(String eid); æŸ¥è¯¢æ•°æ®è¡¨ä¸­çš„æ•°é‡ 1Integer getCount(); æŸ¥è¯¢å¤šè¡Œæ•°æ®è¿”å›å¯¹è±¡çš„é›†åˆ 1public List&lt;Employee&gt; getAllEmps(); æŸ¥è¯¢å•è¡Œæ•°æ®è¿”å› Map é›†åˆ 1Map&lt;String, Object&gt; getEmpMapByEid(String eid); æŸ¥è¯¢å¤šè¡Œæ•°æ®è¿”å› Map é›†åˆ 12@MapKey(&quot;eid&quot;) // è®¾ç½®mapçš„é”®ï¼Œå› ä¸ºåœ¨æŸ¥è¯¢æ—¶ä¼ å‡ºæ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯ï¼Œå¯ä»¥æŠŠå‘˜å·¥ä¿¡æ¯ä½œä¸ºå€¼ï¼Œä½†æ˜¯å¿…é¡»è®¾ç½®é”®Map&lt;String, Object&gt; getAllEmpMap(); 6ã€resultMap è‡ªå®šä¹‰æ˜ å°„ è‡ªå®šä¹‰ resultMap, å®ç°é«˜çº§ç»“æœé›†æ˜ å°„ã€‚ idï¼šç”¨äºå®Œæˆä¸»é”®å€¼çš„æ˜ å°„ã€‚ resultï¼šç”¨äºå®Œæˆæ™®é€šåˆ—çš„æ˜ å°„ã€‚ association: ä¸€ä¸ªå¤æ‚çš„ç±»å‹å…³è”ï¼›è®¸å¤šçš„ç»“æœå°†åŒ…è£…æˆè¿™ç§ç±»å‹ collectionï¼š å¤æ‚çš„ç±»å‹é›† 12345&lt;resultMap&gt;ï¼šè‡ªå®šä¹‰æ˜ å°„ï¼Œå¤„ç†å¤æ‚çš„è¡¨å…³ç³»&lt;id column=&quot;eid&quot; property=&quot;eid&quot;/&gt;&lt;id&gt;ï¼šè®¾ç½®ä¸»é”®çš„æ˜ å°„å…³ç³»ï¼Œcolumnè®¾ç½®å­—æ®µåï¼Œpropertyè®¾ç½®å±æ€§å&lt;result column=&quot;ename&quot; property=&quot;ename&quot;/&gt;&lt;result&gt;ï¼šè®¾ç½®éä¸»é”®çš„æ˜ å°„å…³ç³»ï¼Œcolumnè®¾ç½®å­—æ®µåï¼Œpropertyè®¾ç½®å±æ€§å â‘  id&amp;result ä»£ç ç¤ºä¾‹ï¼š 123456789&lt;select id=&quot;getEmployeeById&quot; resultMap=&quot;myEmp&quot;&gt; select id, last_name,email, gender from tbl_employee where id =#&#123;id&#125;&lt;/select&gt;&lt;resultMap type=&quot;com.oy.mybatis.beans.Employee&quot; id=&quot;myEmp&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot; /&gt; &lt;result column=&quot;last_name&quot; property=&quot;lastName&quot;/&gt; &lt;result column=&quot;email&quot; property=&quot;email&quot;/&gt; &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt;&lt;/resultMap&gt; â‘¡ association (å¤šå¯¹ä¸€) POJO ä¸­çš„å±æ€§å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªå¯¹è±¡,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œå¹¶ä»¥çº§è”å±æ€§çš„æ–¹å¼å°è£…å¯¹è±¡.ä½¿ç”¨ association æ ‡ç­¾å®šä¹‰å¯¹è±¡çš„å°è£…è§„åˆ™ ã€‚ 12345public class Dept &#123; private Integer did; private String dname;...çœç•¥setã€getæ–¹æ³•&#125; 12345678public class Emp &#123; private Integer eid; private String ename; private Integer age; private String sex; private Dept dept;...çœç•¥setã€getæ–¹æ³•&#125; ä½¿ç”¨çº§è”çš„æ–¹å¼ 12345678910111213&lt;resultMap id=&quot;empMap&quot; type=&quot;Emp&quot;&gt; &lt;id column=&quot;eid&quot; property=&quot;eid&quot;/&gt; &lt;result column=&quot;ename&quot; property=&quot;ename&quot;/&gt; &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt; &lt;!--çº§è”çš„æ–¹å¼--&gt; &lt;result column=&quot;did&quot; property=&quot;dept.did&quot;/&gt; &lt;result column=&quot;dname&quot; property=&quot;dept.dname&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;getAllEmp&quot; resultMap=&quot;empMap&quot;&gt; select e.eid, e.ename, e.age, e.sex, e.did, d.dname from emp e left join dept d on e.did = d.did&lt;/select&gt; Association 12345678910111213&lt;resultMap id=&quot;empMap&quot; type=&quot;Emp&quot;&gt; &lt;id column=&quot;eid&quot; property=&quot;eid&quot;/&gt; &lt;result column=&quot;ename&quot; property=&quot;ename&quot;/&gt; &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt; &lt;association property=&quot;dept&quot; javaType=&quot;Dept&quot;&gt; //javaType:&quot;com.oy.online.bean.Dept&quot; &lt;id column=&quot;did&quot; property=&quot;did&quot;/&gt; &lt;result column=&quot;dname&quot; property=&quot;dname&quot;/&gt; &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=&quot;getAllEmp&quot; resultMap=&quot;empMap&quot;&gt; select e.eid, e.ename, e.age, e.sex, e.did, d.dname from emp e left join dept d on e.did = d.did&lt;/select&gt; â‘¢ association åˆ†å¸ƒæŸ¥è¯¢åœ¨ä¸–ç•Œå¼€å‘ä¸­ï¼Œå¯¹äºæ¯ä¸ªå®ä½“ç±»å¯¹éƒ½åº”è¯¥ç”±å…·ä½“çš„å¢åˆ æ”¹æŸ¥çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ DAO å±‚ï¼Œå› æ­¤å¯¹äºæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯å¹¶å°†å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯ä¹ŸæŸ¥è¯¢å‡ºæ¥çš„éœ€æ±‚ï¼Œå°±å¯ä»¥é€šè¿‡åˆ†å¸ƒçš„æ–¹å¼å®ŒæˆæŸ¥è¯¢ã€‚ å…ˆé€šè¿‡å‘˜å·¥çš„ id æŸ¥è¯¢å‘˜å·¥çš„ä¿¡æ¯ åœ¨é€šè¿‡æŸ¥è¯¢å‡ºæ¥çš„å‘˜å·¥ä¿¡æ¯çš„å¤–é”®ï¼ˆéƒ¨é—¨ idï¼‰ æŸ¥è¯¢å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯ã€‚ 123456&lt;mapper namespace=&quot;com.oy.online.Mapper.DeptMapper&quot;&gt; &lt;!-- Dept getDeptByDid(String did);--&gt; &lt;select id=&quot;getDeptByDid&quot; resultType=&quot;Dept&quot;&gt; select did, dname from dept where did = #&#123;did&#125; &lt;/select&gt;&lt;/mapper&gt; 12345678910111213141516&lt;resultMap id=&quot;empMapStep&quot; type=&quot;Emp&quot;&gt; &lt;id column=&quot;eid&quot; property=&quot;eid&quot;/&gt; &lt;result column=&quot;ename&quot; property=&quot;ename&quot;/&gt; &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot; /&gt; &lt;!-- select: åˆ†å¸ƒæŸ¥è¯¢çš„SQLçš„id,å³æ¥å£çš„å…¨é™å®šåã€æ–¹æ³•åæˆ–namespace.SQLçš„id column: åˆ†å¸ƒæŸ¥è¯¢çš„æ¡ä»¶ï¼Œæ³¨æ„:æ­¤æ¡ä»¶å¿…é¡»æ˜¯æ•°æ®åº“æŸ¥è¯¢è¿‡å¾— --&gt; &lt;association property=&quot;dept&quot; select=&quot;com.oy.online.Mapper.DeptMapper.getDeptByDid&quot; column=&quot;did&quot; /&gt;&lt;/resultMap&gt;&lt;!-- Emp getEmpStep(String eid);--&gt;&lt;select id=&quot;getEmpStep&quot; resultMap=&quot;empMapStep&quot;&gt; select eid, ename, age, sex, did from emp where eid = #&#123;eid&#125;&lt;/select&gt; æµ‹è¯•ï¼š 123456789@Testpublic void test2() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpDeptMapper mapper = sqlSession.getMapper(EmpDeptMapper.class); Emp empStep = mapper.getEmpStep(&quot;1&quot;); System.out.println(empStep);&#125; â‘£ association åˆ†æ­¥æŸ¥è¯¢ä½¿ç”¨å»¶è¿ŸåŠ è½½â€‹ åœ¨åˆ†å¸ƒæŸ¥è¯¢çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥ä½¿ç”¨å»¶è¿ŸåŠ è½½æ¥æå‡æŸ¥è¯¢çš„æ•ˆç‡ï¼Œåªéœ€è¦åœ¨å…¨å±€çš„ Settings ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š 1234&lt;!-- å¼€å¯å»¶è¿ŸåŠ è½½ --&gt;&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;&lt;!-- è®¾ç½®åŠ è½½çš„æ•°æ®æ˜¯æŒ‰éœ€è¿˜æ˜¯å…¨éƒ¨ --&gt;&lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt; â‘¤ collection (å¤šå¯¹ä¸€æˆ–å¤šå¯¹å¤š) POJO ä¸­çš„å±æ€§å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªé›†åˆå¯¹è±¡,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œå¹¶ä»¥çº§è”å±æ€§çš„æ–¹å¼å°è£…å¯¹è±¡.ä½¿ç”¨ collection æ ‡ç­¾å®šä¹‰å¯¹è±¡çš„å°è£…è§„åˆ™ ã€‚ 123456public class Dept &#123; private Integer did; private String dname; private List&lt;Emp&gt; emps;...çœç•¥setã€getæ–¹æ³•&#125; Collection 12345678910111213141516171819&lt;resultMap id=&quot;deptMap&quot; type=&quot;Dept&quot;&gt; &lt;id column=&quot;did&quot; property=&quot;did&quot;/&gt; &lt;result column=&quot;dname&quot; property=&quot;dname&quot;/&gt; &lt;!-- &lt;collection&gt;: å¤„ç†ä¸€å¯¹å¤šå’Œå¤šå¯¹å¤šçš„å…³ç³» ofType: æŒ‡é›†åˆä¸­çš„ç±»å‹ï¼Œä¸éœ€è¦æŒ‡å®šjavaType --&gt; &lt;collection property=&quot;emps&quot; ofType=&quot;Emp&quot;&gt; &lt;id column=&quot;eid&quot; property=&quot;eid&quot;/&gt; &lt;result column=&quot;ename&quot; property=&quot;ename&quot;/&gt; &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt; &lt;/collection&gt;&lt;/resultMap&gt; &lt;!-- Dept getDeptEmpsByDid(String did)--&gt;&lt;select id=&quot;getDeptEmpsByDid&quot; resultMap=&quot;deptMap&quot; &gt; select d.did, d.dname, e.eid, e.ename, e.age, e.sex from dept d left join emp e on d.did = e.did where d.did = #&#123;did&#125;&lt;/select&gt; â‘¥ collection åˆ†æ­¥æŸ¥è¯¢â€‹ å®é™…çš„å¼€å‘ä¸­ï¼Œå¯¹äºæ¯ä¸ªå®ä½“ç±»éƒ½åº”è¯¥æœ‰å…·ä½“çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ DAO å±‚ï¼Œ å› æ­¤å¯¹äºæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯å¹¶ä¸”å°†å¯¹åº”çš„æ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯ä¹ŸæŸ¥è¯¢å‡ºæ¥çš„éœ€æ±‚ï¼Œå°±å¯ä»¥é€šè¿‡åˆ†æ­¥çš„æ–¹å¼å®ŒæˆæŸ¥è¯¢ã€‚ å…ˆé€šè¿‡éƒ¨é—¨çš„ id æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯ å†é€šè¿‡éƒ¨é—¨ id ä½œä¸ºå‘˜å·¥çš„å¤–é”®æŸ¥è¯¢å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯ 1234567891011121314 &lt;!--List&lt;Emp&gt; getEmpListByDid(String did);--&gt;&lt;select id=&quot;getEmpListByDid&quot; resultType=&quot;Emp&quot;&gt; select eid, ename, age, sex from emp where did= #&#123;did&#125;&lt;/select&gt;&lt;resultMap id=&quot;deprStep&quot; type=&quot;Dept&quot;&gt; &lt;id column=&quot;did&quot; property=&quot;did&quot;/&gt; &lt;result column=&quot;dname&quot; property=&quot;dname&quot;/&gt; &lt;collection property=&quot;emps&quot; select=&quot;com.oy.online.Mapper.EmpDeptMapper.getEmpListByDid&quot; column=&quot;did&quot;&gt;&lt;/collection&gt; &lt;/resultMap&gt;&lt;!--Dept getOnlyDeptByDid(String did);--&gt;&lt;select id=&quot;getOnlyDeptByDid&quot; resultMap=&quot;deprStep&quot;&gt; select did, dname from dept where did = #&#123;did&#125;&lt;/select&gt; æµ‹è¯•ï¼š 1234567891011@Testpublic void test4() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpDeptMapper mapper = sqlSession.getMapper(EmpDeptMapper.class); Dept onlyDeptByDid = mapper.getOnlyDeptByDid(&quot;1&quot;); System.out.println(onlyDeptByDid); System.out.println(&quot;=============================&quot;); System.out.println(onlyDeptByDid.getDname());&#125; â‘¦ collection åˆ†æ­¥æŸ¥è¯¢ä½¿ç”¨å»¶è¿ŸåŠ è½½1234&lt;!-- å¼€å¯å»¶è¿ŸåŠ è½½ --&gt;&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;&lt;!-- è®¾ç½®åŠ è½½çš„æ•°æ®æ˜¯æŒ‰éœ€è¿˜æ˜¯å…¨éƒ¨ --&gt;&lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt; â‘§ æ‰©å±•: åˆ†æ­¥æŸ¥è¯¢å¤šåˆ—å€¼çš„ä¼ é€’ å¦‚æœåˆ†æ­¥æŸ¥è¯¢æ—¶ï¼Œéœ€è¦ä¼ é€’ç»™è°ƒç”¨çš„æŸ¥è¯¢ä¸­å¤šä¸ªå‚æ•°ï¼Œåˆ™éœ€è¦å°†å¤šä¸ªå‚æ•°å°è£…æˆ Map æ¥è¿›è¡Œä¼ é€’ï¼Œè¯­æ³•å¦‚ä¸‹: {k1=v1, k2=v2â€¦.} åœ¨æ‰€è°ƒç”¨çš„æŸ¥è¯¢æ–¹ï¼Œå–å€¼æ—¶å°±è¦å‚è€ƒ Map çš„å–å€¼æ–¹å¼ï¼Œéœ€è¦ä¸¥æ ¼çš„æŒ‰ç…§å°è£… map æ—¶æ‰€ç”¨çš„ key æ¥å–å€¼. &lt;collection property=â€empsâ€ select=â€com.oy.online.Mapper.EmpDeptMapper.getEmpListByDidâ€ column=â€**{did=did}**â€&lt;/collection&gt; â‘¨ æ‰©å±•: association æˆ– collection çš„ fetchType å±æ€§ åœ¨&lt;association&gt; å’Œ&lt;collection&gt;æ ‡ç­¾ä¸­éƒ½å¯ä»¥è®¾ç½® fetchTypeï¼ŒæŒ‡å®šæœ¬æ¬¡æŸ¥è¯¢æ˜¯å¦è¦ä½¿ç”¨å»¶è¿ŸåŠ è½½ã€‚é»˜è®¤ä¸º fetchType=â€lazyâ€ ,å¦‚æœæœ¬æ¬¡çš„æŸ¥è¯¢ä¸æƒ³ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œåˆ™å¯è®¾ç½®ä¸º fetchType=â€eagerâ€. fetchType å¯ä»¥çµæ´»çš„è®¾ç½®æŸ¥è¯¢æ˜¯å¦éœ€è¦ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œè€Œä¸éœ€è¦å› ä¸ºæŸä¸ªæŸ¥è¯¢ä¸æƒ³ä½¿ç”¨å»¶è¿ŸåŠ è½½å°†å…¨å±€çš„å»¶è¿ŸåŠ è½½è®¾ç½®å…³é—­. &lt;collection property=â€empsâ€ select=â€com.oy.online.Mapper.EmpDeptMapper.getEmpListByDidâ€ column=â€didâ€ **fetchType=â€eagerâ€** &lt;/collection&gt; äº”ã€Mybatis åŠ¨æ€ SQL1ã€Mybatis åŠ¨æ€ SQL ç®€ä»‹ åŠ¨æ€çš„ SQL æ˜¯ Mybatis å¼ºå¤§çš„ç‰¹å¾ä¹‹ä¸€ã€‚æå¤§çš„ç®€åŒ–æˆ‘ä»¬æ‹¼è£… SQL çš„æ“ä½œ åŠ¨æ€ SQL å…ƒç´ å’Œä½¿ç”¨ JSTL æˆ–å…¶ç±»ä¼¼åŸºäº XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ Mybatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥ç®€åŒ– if choose(when , otherwise) trim(where, set) foreach OGNLï¼ˆ Object Graph Navigation Language ï¼‰å¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼Œè¿™æ˜¯ä¸€ç§å¼ºå¤§çš„ è¡¨è¾¾å¼è¯­è¨€ï¼Œé€šè¿‡å®ƒå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ¥ä½œå¯¹è±¡å±æ€§ã€‚ ç±»ä¼¼äºæˆ‘ä»¬çš„ ELï¼Œ SpEL ç­‰ã€‚ æè¿° å±æ€§ è®¿é—®å¯¹è±¡å±æ€§ï¼š person.name è°ƒç”¨æ–¹æ³•ï¼š person.getName() è°ƒç”¨é™æ€å±æ€§/æ–¹æ³•ï¼š @java.lang.Math@PI@java.util.UUID@randomUUID() è°ƒç”¨æ„é€ æ–¹æ³•ï¼š new com.oy.bean.Person(â€˜adminâ€™).name è¿ç®—ç¬¦ï¼š +,-*,/,% é€»è¾‘è¿ç®—ç¬¦ï¼š in,not in,&gt;,&gt;=,&lt;,&lt;=,==,!= æ³¨æ„ï¼šxml ä¸­çš„ç‰¹æ®Šç¬¦å·å¦‚ï¼šâ€œ&gt;â€,â€œ&lt;â€ç­‰è¿™äº›éƒ½éœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ ã€‚ 2ã€if where if ç”¨äºç®€å•çš„åˆ¤æ–­ Where ç”¨äºè§£å†³ SQL è¯­å¥ä¸­çš„ where å…³é”®å­—ä»¥åŠæ¡ä»¶ä¸­ç¬¬ä¸€ä¸ª and æˆ–è€… or çš„é—®é¢˜ã€‚(å»æ‰å¤šä½™çš„ and) Mapper æ¥å£ 12// æ ¹æ®eid,ename, age, sex,å¤šæ¡ä»¶æŸ¥è¯¢å‘˜å·¥çš„ä¿¡æ¯List&lt;Emp&gt; getEmpListByMultiter(Emp emp); Mapper æ˜ å°„ 1234567891011121314151617&lt;select id=&quot;getEmpListByMultiter&quot; resultType=&quot;Emp&quot;&gt; select eid, ename, age, sex from emp &lt;where&gt; &lt;if test=&quot;eid != null&quot;&gt; and eid = #&#123;eid&#125; &lt;/if&gt; &lt;if test=&quot;ename != null and ename != &#x27;&#x27;&quot;&gt; and ename = #&#123;ename&#125; &lt;/if&gt; &lt;if test=&quot;age != null&quot;&gt; and age = #&#123;age&#125; &lt;/if&gt; &lt;if test=&quot;sex == 1 or sex == 2&quot;&gt; and sex = #&#123;sex&#125; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; 3ã€trim Trim å¯ä»¥åœ¨æ¡ä»¶åˆ¤æ–­å®Œçš„ SQL è¯­å¥å‰åæ·»åŠ  æˆ–è€…å»æ‰æŒ‡å®šçš„å­—ç¬¦ prefix: æ·»åŠ å‰ç¼€ï¼ˆåœ¨æ“ä½œçš„ SQL è¯­å¥å‰åŠ å…¥æŸäº›å†…å®¹ï¼‰ prefixOverrides: å»æ‰å‰ç¼€ï¼ˆæŠŠæ“ä½œçš„ SQL è¯­å¥å‰çš„æŸäº›å†…å®¹å»æ‰ï¼‰ suffix: æ·»åŠ åç¼€ï¼ˆåœ¨æ“ä½œçš„ SQL è¯­å¥ååŠ å…¥æŸäº›å†…å®¹ï¼‰ suffixOverrides: å»æ‰åç¼€ (æŠŠæ“ä½œçš„ SQL è¯­å¥åçš„æŸäº›å†…å®¹å»æ‰) Mapper æ˜ å°„ 1234567891011121314151617&lt;select id=&quot;getEmpListByMultiter&quot; resultType=&quot;Emp&quot;&gt; select eid, ename, age, sex from emp &lt;trim prefix=&quot;where&quot; suffixOverrides=&quot;and|or&quot;&gt; &lt;if test=&quot;eid != null&quot;&gt; eid = #&#123;eid&#125; and &lt;/if&gt; &lt;if test=&quot;ename != null and ename != &#x27;&#x27;&quot;&gt; ename = #&#123;ename&#125; and &lt;/if&gt; &lt;if test=&quot;age !=null&quot;&gt; age = #&#123;age&#125; and &lt;/if&gt; &lt;if test=&quot;sex == 1 or sex == 0&quot;&gt; sex = #&#123;sex&#125; &lt;/if&gt; &lt;/trim&gt;&lt;/select&gt; Mapper æ¥å£ 12// æ ¹æ®eid,ename, age, sex,å¤šæ¡ä»¶æŸ¥è¯¢å‘˜å·¥çš„ä¿¡æ¯List&lt;Emp&gt; getEmpListByMultiter(Emp emp); 4ã€set set ä¸»è¦ç”¨äºè§£å†³ä¿®æ”¹æ“ä½œä¸­ SQL è¯­å¥ä¸­å¯èƒ½å¤šå‡ºçš„é€—å·çš„é—®é¢˜ Mapper æ˜ å°„ 123456789101112131415&lt;update id=&quot;updateEmpByConditionSet&quot;&gt; update emp &lt;set&gt; &lt;if test=&quot;ename != null and ename != &#x27;&#x27;&quot;&gt; ename = #&#123;ename&#125;, &lt;/if&gt; &lt;if test=&quot;age != null&quot;&gt; age = #&#123;age&#125;, &lt;/if&gt; &lt;if test=&quot;sex == 1 or sex == 2&quot;&gt; sex = #&#123;sex&#125; &lt;/if&gt; &lt;/set&gt; where eid = #&#123;eid&#125;&lt;/update&gt; Mapper æ¥å£ 12// ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯void updateEmpByConditionSet(Emp emp); 5ã€Choose(whenã€otherwise)choose ä¸»è¦æ˜¯ç”¨äºåˆ†æ”¯åˆ¤æ–­ï¼Œç±»ä¼¼äº java ä¸­çš„ switch case, åªä¼šæ»¡è¶³æ‰€æœ‰åˆ†æ”¯ä¸­çš„ä¸€ä¸ªã€‚ Mapper æ˜ å°„ 123456789101112131415161718&lt;select id=&quot;getEmpListByChoose&quot; resultType=&quot;Emp&quot;&gt; select eid, ename, age, sex from emp where &lt;choose&gt; &lt;when test=&quot;eid != null&quot;&gt; eid = #&#123;eid&#125; &lt;/when&gt; &lt;when test=&quot;ename != null and ename = &#x27;&#x27;&quot;&gt; ename = #&#123;ename&#125; &lt;/when&gt; &lt;when test=&quot;age != null&quot;&gt; age = #&#123;age&#125; &lt;/when&gt; &lt;otherwise&gt; sex = #&#123;sex&#125; &lt;/otherwise&gt; &lt;/choose&gt;&lt;/select&gt; Mapper æ¥å£ 12// æ ¹æ®eid ,eanem, age, sexä¸­çš„å…¶ä¸­ä¸€ä¸ªæŸ¥è¯¢ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯List&lt;Emp&gt; getEmpListByChoose(Emp emp); 6ã€foreach foreach ä¸»è¦ç”¨äºå¾ªç¯è¿­ä»£ collection: æŒ‡å®šè¦éå†çš„é›†åˆæˆ–æ•°ç»„ item: è®¾ç½®åˆ«å close: è®¾ç½®å¾ªç¯ä½“å¼€å§‹å†…å®¹ open: è®¾ç½®å¾ªç¯ä½“å¼€å§‹å†…å®¹ separator: è®¾ç½®æ¯ä¸€æ¬¡å¾ªç¯ä¹‹é—´çš„åˆ†éš”ç¬¦ index: è‹¥éå†çš„æ˜¯ list, index ä»£è¡¨ä¸‹æ ‡ï¼š è‹¥éå†çš„æ˜¯ map, index ä»£è¡¨é”® â‘  æ‰¹é‡åˆ é™¤Mapper æ¥å£ 12//é€šè¿‡listé›†åˆå®ç°æ‰¹é‡åˆ é™¤void deleteMoreByList(@Param(&quot;eids&quot;)List&lt;Integer&gt; eids); Mapper æ˜ å°„ 12345678910111213141516 &lt;!--delete from emp where eid in ();delete from emp where eid = 1 or eid = 2 or eid = 3--&gt; &lt;delete id=&quot;deleteMoreByList&quot;&gt; delete from emp where &lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;or&quot; open=&quot;(&quot; close=&quot;)&quot;&gt; eid = #&#123;eid&#125; &lt;/foreach&gt; &lt;/delete&gt; &lt;delete id=&quot;deleteMoreByList&quot;&gt; delete from emp where eid in &lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt; #&#123;eid&#125; &lt;/foreach&gt; &lt;/delete&gt; â‘¡ æ‰¹é‡æŸ¥è¯¢Mapper æ¥å£ 1List&lt;Emp&gt; SelectMoreByList(@Param(&quot;eids&quot;)List&lt;Emp&gt; eids); Mapper æ˜ å°„ 123456789101112&lt;select id=&quot;SelectMoreByList&quot; resultType=&quot;Emp&quot;&gt; select eid , ename, age, sex from emp where &lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;or&quot; &gt; eid = #&#123;eid&#125; &lt;/foreach&gt;&lt;/select&gt;&lt;select id=&quot;SelectMoreByList1&quot; resultType=&quot;Emp&quot;&gt; select eid , ename, age, sex from emp where eid in &lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt; #&#123;eid&#125; &lt;/foreach&gt;&lt;/select&gt; â‘¢ æ‰¹é‡æ·»åŠ Mapper æ¥å£ 1void insertMoreByArray(@Param(&quot;emps&quot;)Emp[] emps); Mapper æ˜ å°„ 123456&lt;insert id=&quot;insertMoreByArray&quot;&gt; insert into emp values &lt;foreach collection=&quot;emps&quot; item=&quot;emp&quot; separator=&quot;,&quot;&gt; (null, #&#123;emp.ename&#125;, #&#123;emp.age&#125;, #&#123;emp.sex&#125;,1) &lt;/foreach&gt;&lt;/insert&gt; æµ‹è¯• 12345678910111213@Testpublic void test8() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); Emp emp = new Emp(null, &quot;å°å°&quot;,12,&quot;å¥³&quot;); Emp emp1 = new Emp(null, &quot;å°å&quot;,14,&quot;å¥³&quot;); Emp emp2 = new Emp(null, &quot;å°æ­£&quot;,17,&quot;ç”·&quot;); Emp emp3 = new Emp(null, &quot;å°è«&quot;,12,&quot;ç”·&quot;); Emp[] emps = &#123;emp, emp1, emp2, emp3, emp3&#125;; mapper.insertMoreByArray(emps);&#125; â‘¢ æ‰¹é‡ä¿®æ”¹æ³¨æ„ï¼šæ‰§è¡Œä¹‹å‰éœ€è¦åœ¨ jdbc.properties é…ç½®æ–‡ä»¶ä¸­çš„ url æœ€åé…ç½® â€œ**?allowMultiQueries=true**â€ jdbc.url=jdbc:mysql://localhost:3306/test_mybatis**?allowMultiQueries=true** Mapper æ¥å£ 1void updateMoreByArray(@Param(&quot;emps&quot;)List&lt;Emp&gt; emps); Mapper æ˜ å°„ 12345&lt;update id=&quot;updateMoreByArray&quot;&gt; &lt;foreach collection=&quot;emps&quot; item=&quot;emp&quot; &gt; update emp set ename = #&#123;emp.ename&#125;, age = #&#123;emp.age&#125;,sex = #&#123;emp.sex&#125; where eid = #&#123;emp.eid&#125;; &lt;/foreach&gt;&lt;/update&gt; æµ‹è¯•ï¼š 1234567891011121314151617@Testpublic void test9() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); Emp emp = new Emp(14, &quot;å°å°&quot;,12,&quot;å¥³&quot;); Emp emp1 = new Emp(15, &quot;å°æ˜&quot;,14,&quot;ç”·&quot;); Emp emp2 = new Emp(16, &quot;å°æ­£&quot;,17,&quot;ç”·&quot;); Emp emp3 = new Emp(17, &quot;å°è«&quot;,12,&quot;ç”·&quot;); List list = new ArrayList(); list.add(emp); list.add(emp1); list.add(emp2); list.add(emp3); mapper.updateMoreByArray(list);&#125; 7ã€sql sql æ ‡ç­¾æ˜¯ç”¨äºæŠ½å–å¯é‡å¤çš„ sql ç‰‡æ®µï¼Œå°†ç›¸åŒçš„ï¼Œä½¿ç”¨é¢‘ç¹çš„ SQL ç‰‡æ®µæŠ½å–å‡ºæ¥ï¼Œå•ç‹¬å®šä¹‰ï¼Œæ–¹ä¾¿å¤šæ¬¡å¼•ç”¨ æŠ½å– SQL 123&lt;sql id=&quot;selectSQL&quot;&gt; select eid, ename, age, sex from emp&lt;/sql&gt; å¼•ç”¨ SQLï¼š 1&lt;include refid=&quot;selectSQL&quot;&gt;&lt;/include&gt; å…­ã€Mybatis ç¼“å­˜æœºåˆ¶1ã€ç¼“å­˜æœºåˆ¶ Mybatis åŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢çš„ç¼“å­˜ç‰¹å¾ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ­é…é…ç½®å’Œå®šåˆ¶ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ Mybatis ç³»ç»Ÿä¸­çš„é»˜è®¤å®šä¹‰äº†ä¸¤æç¼“å­˜ã€‚ ä¸€çº§ç¼“å­˜ äºŒçº§ç¼“å­˜ é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜ï¼ˆSqlsession çº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰å¼€å¯ã€‚ äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯é…ç½®ï¼Œå®ƒæ˜¯åŸºäº namespace çº§åˆ«çš„ç¼“å­˜ï¼ˆæ˜ å°„ï¼‰ã€‚ ä¸ºäº†æé«˜æ‰©å±•æ€§ã€‚Mybatis å®šä¹‰äº†ç¼“å­˜æ¥å£ Cache.æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç° Cache æ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜ã€‚ 2ã€ä¸€çº§ç¼“å­˜çš„ä½¿ç”¨Mapper æ¥å£ 12// æ ¹æ®eid æ¥æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯Emp getEmpByEid(String eid); Mapper æ˜ å°„ 12345678&lt;sql id=&quot;selectSQL&quot;&gt; select eid, ename, age, sex from emp&lt;/sql&gt;&lt;!--Emp getEmpByEid(String eid);--&gt;&lt;select id=&quot;getEmpByEid&quot; resultType=&quot;Emp&quot;&gt; &lt;include refid=&quot;selectSQL&quot;&gt;&lt;/include&gt; where eid = #&#123;eid&#125;&lt;/select&gt; æµ‹è¯• 1234567891011121314151617public SqlSessionFactory getSqlSessionFactory() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); return sqlSessionFactory;&#125;@Testpublic void test1() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); Emp empByEid = mapper.getEmpByEid(&quot;14&quot;); System.out.println(empByEid); System.out.println(&quot;=================================&quot;); Emp empByEid1 = mapper.getEmpByEid(&quot;14&quot;); System.out.println(empByEid1);&#125; è¯´æ˜ï¼šclearCache() æ¥æ¸…ç©ºæœ¬åœ°ç¼“å­˜ 3ã€ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å‡ ç§æƒ…å†µ ä¸åŒçš„ SqlSession å¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜ åŒä¸€ä¸ª SqlSession ä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ åŒä¸€ä¸ª SqlSession ä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»æ„ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œ åŒä¸€ä¸ª SqlSession ä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜ 4ã€äºŒçº§ç¼“å­˜çš„ä½¿ç”¨ äºŒçº§ç¼“å­˜(second level cache)ï¼Œå…¨å±€ä½œç”¨åŸŸç¼“å­˜ äºŒçº§ç¼“å­˜é»˜è®¤ä¸å¼€å¯ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½® Mybatis æä¾›äºŒçº§ç¼“å­˜çš„æ¥å£ä»¥åŠå®ç°ï¼Œç¼“å­˜å®ç°è¦æ±‚ POJO å®ç° Serializable æ¥å£ äºŒçº§ç¼“å­˜åœ¨ SqlSession å…³é—­æˆ–æäº¤ä¹‹åæ‰ä¼šç”Ÿæ•ˆ äºŒçº§ç¼“å­˜ä½¿ç”¨æ­¥éª¤ï¼š å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;setting name=â€cacheEnabledâ€ value=â€trueâ€/&gt; éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ˜ å°„æ–‡ä»¶å¤„ä½¿ç”¨ cache é…ç½®ç¼“å­˜&lt;cache /&gt; æ³¨æ„ï¼šPOJO éœ€è¦å®ç° Serializable æ¥å£ ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617 public SqlSessionFactory getSqlSessionFactory() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); return sqlSessionFactory; &#125;@Test public void test2() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); Emp empByEid = mapper.getEmpByEid(&quot;14&quot;); System.out.println(empByEid); sqlSession.commit(); System.out.println(&quot;===============================&quot;); Emp empByEid1 = mapper.getEmpByEid(&quot;14&quot;); System.out.println(empByEid1); &#125; äºŒçº§ç¼“å­˜ç›¸å…³çš„å±æ€§ å±æ€§ æè¿° eviction=â€œFIFOâ€ ç¼“å­˜å›æ”¶ç­–ç•¥ï¼šLRU â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚FIFO â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚SOFT â€“ è½¯å¼•ç”¨ï¼šç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚é»˜è®¤çš„æ˜¯ LRU flushInterval åˆ·æ–°é—´éš”ï¼Œå•ä½æ¯«ç§’é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–° size å¼•ç”¨æ•°ç›®ï¼Œæ­£æ•´æ•°ä»£è¡¨ç¼“å­˜æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘ä¸ªå¯¹è±¡ï¼Œå¤ªå¤§å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º readOnly åªè¯»ï¼Œ true/falsetrueï¼šåªè¯»ç¼“å­˜ï¼›ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚falseï¼šè¯»å†™ç¼“å­˜ï¼›ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤æ˜¯ falseã€‚ 5ã€ç¼“å­˜çš„ç›¸å…³å±æ€§è®¾ç½® å…¨å±€ setting çš„ cacheEnable: é…ç½®äºŒçº§ç¼“å­˜çš„å¼€å…³ï¼Œä¸€çº§ç¼“å­˜ä¸€ç›´æ‰“å¼€çš„ã€‚ select æ ‡ç­¾çš„ userCache å±æ€§ï¼šé…ç½®è¿™ä¸ª select æ˜¯å¦ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚ä¸€çº§ç¼“å­˜ä¸€ç›´ä½¿ç”¨çš„ sql æ ‡ç­¾çš„ flushCache å±æ€§ï¼š å¢åˆ æ”¹é»˜è®¤ flushCache =true. sql æ‰§è¡Œä»¥åï¼Œä¼šåŒæ—¶æ¸…ç©ºä¸€çº§å’ŒäºŒçº§ç¼“å­˜ã€‚ æŸ¥è¯¢é»˜è®¤ flushCache = falseã€‚ sqlSession.clearCache(): åªæ˜¯ç”¨æ¥æ¸…é™¤ä¸€çº§ç¼“å­˜ã€‚ 6ã€æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜ ä¸ºäº†æé«˜æ‰©å±•æ€§ã€‚myBatis å®šä¹‰äº† ç¼“å­˜æ¥å£ Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç° Cache æ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜ æ•´åˆ E å’Œ Cache ç¼“å­˜æ­¥éª¤ï¼š â‘  å¯¼å…¥ echcache åŒ…ï¼Œä»¥åŠæ•´åˆåŒ…ï¼Œæ—¥å¿—åŒ… â€‹ â‘¡ ç¼–å†™ ehcache,xml é…ç½®æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;../config/ehcache.xsd&quot;&gt; &lt;!-- ç£ç›˜ä¿å­˜è·¯å¾„ --&gt; &lt;diskStore path=&quot;D:\\atguigu\\ehcache&quot; /&gt; &lt;defaultCache maxElementsInMemory=&quot;1000&quot; maxElementsOnDisk=&quot;10000000&quot; eternal=&quot;false&quot; overflowToDisk=&quot;true&quot; timeToIdleSeconds=&quot;120&quot; timeToLiveSeconds=&quot;120&quot; diskExpiryThreadIntervalSeconds=&quot;120&quot; memoryStoreEvictionPolicy=&quot;LRU&quot;&gt; &lt;/defaultCache&gt;&lt;/ehcache&gt;&lt;!--å±æ€§è¯´æ˜ï¼šl diskStoreï¼šæŒ‡å®šæ•°æ®åœ¨ç£ç›˜ä¸­çš„å­˜å‚¨ä½ç½®ã€‚l defaultCacheï¼šå½“å€ŸåŠ©CacheManager.add(&quot;demoCache&quot;)åˆ›å»ºCacheæ—¶ï¼ŒEhCacheä¾¿ä¼šé‡‡ç”¨&lt;defalutCache/&gt;æŒ‡å®šçš„çš„ç®¡ç†ç­–ç•¥ä»¥ä¸‹å±æ€§æ˜¯å¿…é¡»çš„ï¼šl maxElementsInMemory - åœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®l maxElementsOnDisk - åœ¨ç£ç›˜ä¸Šç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§l eternal - è®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œå¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsï¼ŒtimeToLiveSecondsåˆ¤æ–­l overflowToDisk - è®¾å®šå½“å†…å­˜ç¼“å­˜æº¢å‡ºçš„æ—¶å€™æ˜¯å¦å°†è¿‡æœŸçš„elementç¼“å­˜åˆ°ç£ç›˜ä¸Šä»¥ä¸‹å±æ€§æ˜¯å¯é€‰çš„ï¼šl timeToIdleSeconds - å½“ç¼“å­˜åœ¨EhCacheä¸­çš„æ•°æ®å‰åä¸¤æ¬¡è®¿é—®çš„æ—¶é—´è¶…è¿‡timeToIdleSecondsçš„å±æ€§å–å€¼æ—¶ï¼Œè¿™äº›æ•°æ®ä¾¿ä¼šåˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§l timeToLiveSeconds - ç¼“å­˜elementçš„æœ‰æ•ˆç”Ÿå‘½æœŸï¼Œé»˜è®¤æ˜¯0.,ä¹Ÿå°±æ˜¯elementå­˜æ´»æ—¶é—´æ— ç©·å¤§ diskSpoolBufferSizeMB è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°.é»˜è®¤æ˜¯30MB.æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº.l diskPersistent - åœ¨VMé‡å¯çš„æ—¶å€™æ˜¯å¦å¯ç”¨ç£ç›˜ä¿å­˜EhCacheä¸­çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯falseã€‚l diskExpiryThreadIntervalSeconds - ç£ç›˜ç¼“å­˜çš„æ¸…ç†çº¿ç¨‹è¿è¡Œé—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚æ¯ä¸ª120sï¼Œç›¸åº”çš„çº¿ç¨‹ä¼šè¿›è¡Œä¸€æ¬¡EhCacheä¸­æ•°æ®çš„æ¸…ç†å·¥ä½œl memoryStoreEvictionPolicy - å½“å†…å­˜ç¼“å­˜è¾¾åˆ°æœ€å¤§ï¼Œæœ‰æ–°çš„elementåŠ å…¥çš„æ—¶å€™ï¼Œ ç§»é™¤ç¼“å­˜ä¸­elementçš„ç­–ç•¥ã€‚é»˜è®¤æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼Œå¯é€‰çš„æœ‰LFUï¼ˆæœ€ä¸å¸¸ä½¿ç”¨ï¼‰å’ŒFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ --&gt; æ³¨æ„ï¼šIDEA ä¸­æ–°å»º ehcache.xml æ–‡ä»¶æŠ¥é”™ æŠ¥é”™è¯­å¥ 1&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;../config/ehcache.xsd&quot;&gt; è§£å†³åŠæ³• æ‰“å¼€ settings - languages&amp;frameworks - schemas and dtds ,æ·»åŠ åœ°å€ http://ehcache.org/ehcache.xsd å°† â€œ ../config/ehcache.xsd â€ æ”¹æˆ â€œ http://ehcache.org/ehcache.xsd â€ â‘¢ é…ç½® cache æ ‡ç­¾ 1&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;&gt;&lt;/cache&gt; â‘£ æµ‹è¯• 1234567891011121314151617181920@Test public void test3() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); Emp empByEid = mapper.getEmpByEid(&quot;14&quot;); System.out.println(empByEid); sqlSession.commit(); System.out.println(&quot;====================================&quot;); EmpMapper mapper1 = sqlSession.getMapper(EmpMapper.class); Emp empByEid1 = mapper.getEmpByEid(&quot;6&quot;); System.out.println(empByEid1); sqlSession.commit(); System.out.println(&quot;====================================&quot;); EmpMapper mapper2 = sqlSession.getMapper(EmpMapper.class); Emp empByEid2 = mapper.getEmpByEid(&quot;7&quot;); System.out.println(empByEid2); &#125; ä¸ƒã€MyBatis é€†å‘å·¥ç¨‹1ã€é€†å‘å·¥ç¨‹çš„é…ç½® å¯¼å…¥é€†å‘å·¥ç¨‹çš„ jar åŒ… mybatis-generator-core-1.3.2.jar ç¼–å†™ MBG çš„é…ç½®æ–‡ä»¶ï¼ˆé‡è¦å‡ å¤„é…ç½®ï¼‰ï¼Œå¯å‚è€ƒå®˜æ–¹æ‰‹å†Œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;&lt;generatorConfiguration&gt; &lt;!-- targetRuntime: æ‰§è¡Œç”Ÿæˆçš„é€†å‘å·¥ç¨‹çš„ç‰ˆæœ¬ MyBatis3Simple: ç”ŸæˆåŸºæœ¬çš„CRUD MyBatis3: ç”Ÿæˆå¸¦æ¡ä»¶çš„CRUD --&gt; &lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3&quot;&gt; &lt;!-- è®¾ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ --&gt; &lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot; connectionURL=&quot;jdbc:mysql://localhost:3306/test_mybatis&quot; userId=&quot;root&quot; password=&quot;root&quot;&gt; &lt;/jdbcConnection&gt; &lt;javaTypeResolver &gt; &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot; /&gt; &lt;/javaTypeResolver&gt; &lt;!-- javabeançš„ç”Ÿæˆç­–ç•¥ --&gt; &lt;javaModelGenerator targetPackage=&quot;com.oy.online.bean&quot; targetProject=&quot;.\\src&quot;&gt; &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt; &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt; &lt;/javaModelGenerator&gt; &lt;!-- æ˜ å°„æ–‡ä»¶çš„ç”Ÿæˆç­–ç•¥ --&gt; &lt;sqlMapGenerator targetPackage=&quot;com.oy.online.Mapper&quot; targetProject=&quot;.\\config&quot;&gt; &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt; &lt;/sqlMapGenerator&gt; &lt;!-- mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥ --&gt; &lt;javaClientGenerator type=&quot;XMLMAPPER&quot; targetPackage=&quot;com.oy.online.Mapper&quot; targetProject=&quot;.\\src&quot;&gt; &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt; &lt;/javaClientGenerator&gt; &lt;!-- è®¾ç½®è¦å°†æ•°æ®åº“ä¸­çš„å“ªå¼ è¡¨é€†å‘ç”Ÿæˆå“ªä¸€ä¸ªjavabean --&gt; &lt;table tableName=&quot;emp&quot; domainObjectName=&quot;Emp&quot;&gt;&lt;/table&gt; &lt;table tableName=&quot;dept&quot; domainObjectName=&quot;Dept&quot;&gt;&lt;/table&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt; è¿è¡Œä»£ç ç”Ÿæˆå™¨ç”Ÿæˆä»£ç  1234567891011@Testpublic void testMBG() throws Exception &#123; List&lt;String&gt; warnings = new ArrayList&lt;String&gt;(); boolean overwrite = true; File configFile = new File(&quot;mbg.xml&quot;); ConfigurationParser cp = new ConfigurationParser(warnings); Configuration config = cp.parseConfiguration(configFile); DefaultShellCallback callback = new DefaultShellCallback(overwrite); MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config, callback, warnings); myBatisGenerator.generate(null);&#125; 2ã€é€†å‘å·¥ç¨‹çš„ä½¿ç”¨ åŸºæœ¬æŸ¥è¯¢ï¼ˆæŸ¥è¯¢å…¨éƒ¨æ•°æ®ï¼‰ 123456789@Testpublic void test2() throws Exception &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); // ä¸æ·»åŠ æ¡ä»¶ï¼Œå³æ˜¯æŸ¥è¯¢æ‰€æœ‰æ•°æ® List&lt;Emp&gt; emps = mapper.selectByExample(null); emps.forEach(System.out::println);&#125; å¸¦æ¡ä»¶æŸ¥è¯¢ 123456789101112131415161718192021@Testpublic void test1() throws Exception &#123; SqlSessionFactory sqlSessionFactory = getSqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); EmpExample empExample = new EmpExample(); EmpExample.Criteria c1 = empExample.createCriteria(); c1.andEnameLike(&quot;%a%&quot;); c1.andSexEqualTo(&quot;1&quot;); EmpExample.Criteria c2 = empExample.createCriteria(); c2.andDidEqualTo(2); empExample.or(c2); List&lt;Emp&gt; emps = mapper.selectByExample(empExample); for (Emp emp : emps) &#123; System.out.println(emp); &#125;&#125; å…«ã€æ‰©å±•-PageHelper åˆ†é¡µæ’ä»¶1ã€PageHelper çš„ä½¿ç”¨æ­¥éª¤ å¯¼å…¥ç›¸å…³åŒ… pagehelper-x.x.x.jar å’Œ jsqlparser-0.9.5.jar åœ¨ Mybatis å…¨å±€é…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†é¡µæ’ä»¶ 123&lt;plugins&gt; &lt;plugin interceptor=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;&lt;/plugin&gt;&lt;/plugins&gt; 2ã€Page å¯¹è±¡çš„ä½¿ç”¨ è½½æŸ¥è¯¢ä¹‹å‰é€šè¿‡ PageHelps.startPage(é¡µç ï¼Œæ¡æ•°)è®¾ç½®åˆ†é¡µä¿¡æ¯ï¼Œè¯¥æ–¹æ³•è¿”å› Page å¯¹è±¡ 1234567891011121314151617181920public SqlSessionFactory getsqlSessionFactory() throws IOException &#123; InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); return sqlSessionFactory;&#125;@Testpublic void testPageHelps() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getsqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); Page&lt;Object&gt; page = PageHelper.startPage(2, 3); List&lt;Emp&gt; emps = mapper.getAllEmps(); emps.forEach(System.out::println); System.out.println(&quot;====================================================&quot;); System.out.println(&quot;å½“å‰é¡µï¼š&quot; + page.getPageNum()); System.out.println(&quot;æ€»é¡µç :&quot;+ page.getPages()); System.out.println(&quot;æ€»æ¡æ•°ï¼š&quot;+ page.getTotal()); System.out.println(&quot;æ¯æ¡æ˜¾ç¤ºçš„æ¡æ•°ï¼š&quot;+ page.getPageSize());&#125; 3ã€PageInfo å¯¹è±¡çš„ä½¿ç”¨ åœ¨æŸ¥è¯¢å®Œæ•°æ®ä»¥åï¼Œä½¿ç”¨ PageInfo å¯¹è±¡å°è£…æŸ¥è¯¢ç»“æœï¼Œå¯ä»¥è·å–æ›´è¯¦ç»†çš„åˆ†é¡µä¿¡æ¯ä»¥åŠå®Œæˆåˆ†é¡µé€»è¾‘ 1234567891011121314151617181920212223242526272829@Testpublic void testPageHelps1() throws IOException &#123; SqlSessionFactory sqlSessionFactory = getsqlSessionFactory(); SqlSession sqlSession = sqlSessionFactory.openSession(true); EmpMapper mapper = sqlSession.getMapper(EmpMapper.class); // è®¾ç½®åˆ†é¡µä¿¡æ¯ Page&lt;Object&gt; page = PageHelper.startPage(2, 3); List&lt;Emp&gt; emps = mapper.getAllEmps(); PageInfo&lt;Emp&gt; info = new PageInfo&lt;&gt;(emps, 5); for (Emp emp : emps) &#123; System.out.println(emp); &#125; System.out.println(&quot;===================================&quot;); System.out.println(&quot;å½“å‰é¡µï¼š&quot;+info.getPageNum()); System.out.println(&quot;æ€»é¡µæ•°ï¼š&quot;+ info.getPages()); System.out.println(&quot;æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°ï¼š&quot; + info.getPageSize()); System.out.println(&quot;æ˜¯å¦æ˜¯ç¬¬ä¸€é¡µï¼š&quot;+ info.isIsFirstPage()); System.out.println(&quot;æ˜¯å¦æ˜¾ç¤ºæœ€åä¸€é¡µï¼š&quot; + info.isIsLastPage()); System.out.println(&quot;æ˜¯å¦æœ‰ä¸Šä¸€é¡µï¼š&quot;+ info.isHasPreviousPage()); System.out.println(&quot;æ˜¯å¦æœ‰ä¸‹ä¸€é¡µï¼š&quot; + info.isHasNextPage()); System.out.println(&quot;======================================&quot;); int[] nums = info.getNavigatepageNums(); for (int num : nums) &#123; System.out.print(num + &quot; &quot;); &#125;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Mybatis","slug":"Mybatis","permalink":"http://blog.oy6090.top/tags/Mybatis/"}]},{"title":"MySQLåŸºç¡€","slug":"MySQLåŸºç¡€ç¯‡","date":"2020-08-03T16:00:00.000Z","updated":"2020-10-25T02:28:11.363Z","comments":true,"path":"posts/864013447.html","link":"","permalink":"http://blog.oy6090.top/posts/864013447.html","excerpt":"","text":"æ•°æ®åº“çš„ç›¸å…³æ¦‚å¿µä¸€ã€æ•°æ®åº“çš„å¥½å¤„ å¯ä»¥æŒä¹…åŒ–æ•°æ®åˆ°æœ¬åœ° ç»“æ„åŒ–æŸ¥è¯¢ äºŒã€æ•°æ®åº“çš„å¸¸è§æ¦‚å¿µ1ã€DBï¼šæ•°æ®åº“ï¼Œå­˜å‚¨æ•°æ®çš„å®¹å™¨ 2ã€DBMSï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåˆç§°ä¸ºæ•°æ®åº“è½¯ä»¶æˆ–æ•°æ®åº“äº§å“ï¼Œç”¨äºåˆ›å»ºæˆ–ç®¡ç† DB3ã€SQLï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºå’Œæ•°æ®åº“é€šä¿¡çš„è¯­è¨€ï¼Œä¸æ˜¯æŸä¸ªæ•°æ®åº“è½¯ä»¶ç‰¹æœ‰çš„ï¼Œè€Œæ˜¯å‡ ä¹æ‰€æœ‰çš„ä¸»æµæ•°æ®åº“è½¯ä»¶é€šç”¨çš„è¯­è¨€ ä¸‰ã€æ•°æ®åº“å­˜å‚¨æ•°æ®çš„ç‰¹ç‚¹1ã€æ•°æ®å­˜æ”¾åˆ°è¡¨ä¸­ï¼Œç„¶åè¡¨å†æ”¾åˆ°åº“ä¸­ 2ã€ä¸€ä¸ªåº“ä¸­å¯ä»¥æœ‰å¤šå¼ è¡¨ï¼Œæ¯å¼ è¡¨å…·æœ‰å”¯ä¸€çš„è¡¨åç”¨æ¥æ ‡è¯†è‡ªå·± 3ã€è¡¨ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œåˆ—åˆç§°ä¸ºâ€œå­—æ®µâ€ï¼Œç›¸å½“äºjavaä¸­â€œå±æ€§â€ 4ã€è¡¨ä¸­çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œç›¸å½“äºjavaä¸­â€œå¯¹è±¡â€ å››ã€å¸¸è§çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿmysqlã€oracleã€db2ã€sqlserver äº”ã€MySQL çš„ä¼˜ç‚¹1ã€å¼€æºã€å…è´¹ã€æˆæœ¬ä½ 2ã€æ€§èƒ½é«˜ã€ç§»æ¤æ€§ä¹Ÿå¥½ 3ã€ä½“ç§¯å°ï¼Œä¾¿äºå®‰è£… DQL è¯­è¨€åŸºç¡€æŸ¥è¯¢ä¸€ã€è¯­æ³•select æŸ¥è¯¢åˆ—è¡¨ from è¡¨å; äºŒã€ç‰¹ç‚¹1ã€æŸ¥è¯¢åˆ—è¡¨å¯ä»¥æ˜¯å­—æ®µã€å¸¸é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª 2ã€æŸ¥è¯¢ç»“æœæ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ ä¸‰ã€ç¤ºä¾‹1ã€æŸ¥è¯¢å•ä¸ªå­—æ®µ1select å­—æ®µå from è¡¨å; 1SELECT `last_name` FROM `employees`; 2ã€æŸ¥è¯¢å¤šä¸ªå­—æ®µ1select å­—æ®µåï¼Œå­—æ®µå from è¡¨å; 12SELECT `last_name`,`email`,`employee_id`FROM employees; 3ã€æŸ¥è¯¢æ‰€æœ‰å­—æ®µ1select * from è¡¨å 1SELECT * FROM `employees`; 4ã€æŸ¥è¯¢å¸¸é‡12select å¸¸é‡å€¼;æ³¨æ„ï¼šå­—ç¬¦å‹å’Œæ—¥æœŸå‹çš„å¸¸é‡å€¼å¿…é¡»ç”¨å•å¼•å·å¼•èµ·æ¥ï¼Œæ•°å€¼å‹ä¸éœ€è¦ 1SELECT 100 ; 5ã€æŸ¥è¯¢å‡½æ•°select å‡½æ•°å(å®å‚åˆ—è¡¨); 123SELECT DATABASE();SELECT VERSION();SELECT USER(); 6ã€æŸ¥è¯¢è¡¨è¾¾å¼1select 100/1234; 1select 100/1234; 7ã€èµ·åˆ«å12â‘ asâ‘¡ç©ºæ ¼ 1234567891011121314151617#æ–¹å¼ä¸€ï¼šä½¿ç”¨aså…³é”®å­—SELECT USER() AS ç”¨æˆ·å;SELECT USER() AS &quot;ç”¨æˆ·å&quot;;SELECT USER() AS &#x27;ç”¨æˆ·å&#x27;;SELECT last_name AS &quot;å§“ å&quot; FROM employees;#æ–¹å¼äºŒï¼šä½¿ç”¨ç©ºæ ¼SELECT USER() ç”¨æˆ·å;SELECT USER() &quot;ç”¨æˆ·å&quot;;SELECT USER() &#x27;ç”¨æˆ·å&#x27;;SELECT last_name &quot;å§“ å&quot; FROM employees; 8ã€å»é‡1select distinct å­—æ®µå from è¡¨å; 1234#éœ€æ±‚ï¼šæŸ¥è¯¢å‘˜å·¥æ¶‰åŠåˆ°çš„éƒ¨é—¨ç¼–å·æœ‰å“ªäº›SELECT DISTINCT department_id FROM employees; 9ã€+1234ä½œç”¨ï¼šåšåŠ æ³•è¿ç®—select æ•°å€¼+æ•°å€¼; ç›´æ¥è¿ç®—select å­—ç¬¦+æ•°å€¼;å…ˆè¯•å›¾å°†å­—ç¬¦è½¬æ¢æˆæ•°å€¼ï¼Œå¦‚æœè½¬æ¢æˆåŠŸï¼Œåˆ™ç»§ç»­è¿ç®—ï¼›å¦åˆ™è½¬æ¢æˆ0ï¼Œå†åšè¿ç®—select null+å€¼;ç»“æœéƒ½ä¸ºnull 123456789101112-- éœ€æ±‚ï¼šæŸ¥è¯¢ first_name å’Œlast_name æ‹¼æ¥æˆçš„å…¨åï¼Œæœ€ç»ˆèµ·åˆ«åä¸ºï¼šå§“ å#æ–¹æ¡ˆ1ï¼šä½¿ç”¨+ passÃ—SELECT first_name+last_name AS &quot;å§“ å&quot;FROM employees;#æ–¹æ¡ˆ2ï¼šä½¿ç”¨concatæ‹¼æ¥å‡½æ•°SELECT CONCAT(first_name,last_name) AS &quot;å§“ å&quot;FROM employees; 10ã€ã€è¡¥å……ã€‘concat å‡½æ•°12åŠŸèƒ½ï¼šæ‹¼æ¥å­—ç¬¦select concat(å­—ç¬¦1ï¼Œå­—ç¬¦2ï¼Œå­—ç¬¦3,...); 12SELECT CONCAT(first_name,last_name) AS &quot;å§“ å&quot;FROM employees; 11ã€ã€è¡¥å……ã€‘ifnull å‡½æ•°1åŠŸèƒ½ï¼šåˆ¤æ–­æŸå­—æ®µæˆ–è¡¨è¾¾å¼æ˜¯å¦ä¸ºnullï¼Œå¦‚æœä¸ºnull è¿”å›æŒ‡å®šçš„å€¼ï¼Œå¦åˆ™è¿”å›åŸæœ¬çš„å€¼ 1select ifnull(commission_pct,0) from employees; 12ã€ã€è¡¥å……ã€‘isnull å‡½æ•°1åŠŸèƒ½ï¼šåˆ¤æ–­æŸå­—æ®µæˆ–è¡¨è¾¾å¼æ˜¯å¦ä¸ºnullï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0 æ¡ä»¶æŸ¥è¯¢ä¸€ã€è¯­æ³•123select æŸ¥è¯¢åˆ—è¡¨from è¡¨åwhere ç­›é€‰æ¡ä»¶ 1234#æ¡ˆä¾‹ï¼šæŸ¥è¯¢å·¥èµ„&lt;15000çš„å§“åã€å·¥èµ„SELECT last_name,salaryFROM employeesWHERE salary&lt;15000; äºŒã€ç­›é€‰æ¡ä»¶çš„åˆ†ç±»1ã€ç®€å•æ¡ä»¶è¿ç®—ç¬¦1&gt; &lt; = &lt;&gt; != &gt;= &lt;= &lt;=&gt;å®‰å…¨ç­‰äº 1234#æ¡ˆä¾‹ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸æ˜¯100çš„å‘˜å·¥ä¿¡æ¯SELECT *FROM employeesWHERE department_id &lt;&gt; 100; 2ã€é€»è¾‘è¿ç®—ç¬¦123&amp;&amp; and|| or! not 1234567891011#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·ä¸æ˜¯ 50-100ä¹‹é—´å‘˜å·¥å§“åã€éƒ¨é—¨ç¼–å·ã€é‚®ç®±#æ–¹å¼1ï¼šSELECT last_name,department_id,emailFROM employeesWHERE department_id &lt;50 OR department_id&gt;100;#æ–¹å¼2ï¼šSELECT last_name,department_id,emailFROM employeesWHERE NOT(department_id&gt;=50 AND department_id&lt;=100); 3ã€æ¨¡ç³ŠæŸ¥è¯¢12like:ä¸€èˆ¬æ­é…é€šé…ç¬¦ä½¿ç”¨ï¼Œå¯ä»¥åˆ¤æ–­å­—ç¬¦å‹æˆ–æ•°å€¼å‹é€šé…ç¬¦ï¼š%ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œ_ä»»æ„å•ä¸ªå­—ç¬¦ 1234#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å§“åä¸­åŒ…å«å­—ç¬¦açš„å‘˜å·¥ä¿¡æ¯SELECT *FROM employeesWHERE last_name LIKE &#x27;%a%&#x27;; 4ã€å…¶ä»–between and åŠŸèƒ½ï¼šåˆ¤æ–­æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ä»‹äºxxä¹‹é—´ between and/not between and 123456#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·æ˜¯30-90ä¹‹é—´çš„éƒ¨é—¨ç¼–å·ã€å‘˜å·¥å§“å#æ–¹å¼1ï¼šSELECT department_id,last_nameFROM employeesWHERE department_id BETWEEN 30 AND 90; in12345åŠŸèƒ½ï¼šæŸ¥è¯¢æŸå­—æ®µçš„å€¼æ˜¯å¦å±äºæŒ‡å®šçš„åˆ—è¡¨ä¹‹å†…a in(å¸¸é‡å€¼1,å¸¸é‡å€¼2,å¸¸é‡å€¼3,...)a not in(å¸¸é‡å€¼1,å¸¸é‡å€¼2,å¸¸é‡å€¼3,...)in/not inis null /is not nullï¼šç”¨äºåˆ¤æ–­nullå€¼ 123456789#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·æ˜¯30/50/90çš„å‘˜å·¥åã€éƒ¨é—¨ç¼–å·#æ–¹å¼1ï¼šSELECT last_name,department_idFROM employeesWHERE department_id IN(30,50,90); is null/is not nullis null PK &lt;=&gt; æ™®é€šç±»å‹çš„æ•°å€¼ nullå€¼ å¯è¯»æ€§ is null Ã— âˆš âˆš &lt;=&gt; âˆš âˆš Ã— 123456789#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æ²¡æœ‰å¥–é‡‘çš„å‘˜å·¥ä¿¡æ¯SELECT *FROM employeesWHERE commission_pct IS NULL;#æ¡ˆä¾‹2ï¼šæŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥ä¿¡æ¯SELECT *FROM employeesWHERE commission_pct IS NOT NULL; 12345= åªèƒ½åˆ¤æ–­æ™®é€šçš„å†…å®¹IS åªèƒ½åˆ¤æ–­NULLå€¼&lt;=&gt; å®‰å…¨ç­‰äºï¼Œæ—¢èƒ½åˆ¤æ–­æ™®é€šå†…å®¹ï¼Œåˆèƒ½åˆ¤æ–­NULLå€¼ 1234567SELECT *FROM employeesWHERE salary &lt;=&gt; 10000;SELECT *FROM employeesWHERE commission_pct &lt;=&gt; NULL; æ’åºæŸ¥è¯¢ä¸€ã€è¯­æ³•1234select æŸ¥è¯¢åˆ—è¡¨from è¡¨where ç­›é€‰æ¡ä»¶order by æ’åºåˆ—è¡¨ ã€asc&#125;descã€‘ äºŒã€ç‰¹ç‚¹1234561ã€asc ï¼šå‡åºï¼Œå¦‚æœä¸å†™é»˜è®¤å‡åº descï¼šé™åº2ã€æ’åºåˆ—è¡¨ æ”¯æŒ å•ä¸ªå­—æ®µã€å¤šä¸ªå­—æ®µã€å‡½æ•°ã€è¡¨è¾¾å¼ã€åˆ«å3ã€order byçš„ä½ç½®ä¸€èˆ¬æ”¾åœ¨æŸ¥è¯¢è¯­å¥çš„æœ€åï¼ˆé™¤limitè¯­å¥ä¹‹å¤–ï¼‰ ä¸‰ã€ç¤ºä¾‹1ã€æŒ‰å•ä¸ªå­—æ®µæ’åº1234567891011#æ¡ˆä¾‹1ï¼šå°†å‘˜å·¥ç¼–å·&gt;120çš„å‘˜å·¥ä¿¡æ¯è¿›è¡Œå·¥èµ„çš„å‡åºSELECT *FROM employeesORDER BY salary ;#æ¡ˆä¾‹1ï¼šå°†å‘˜å·¥ç¼–å·&gt;120çš„å‘˜å·¥ä¿¡æ¯è¿›è¡Œå·¥èµ„çš„é™åºSELECT *FROM employeesWHERE employee_id&gt;120ORDER BY salary DESC; 2ã€æŒ‰è¡¨è¾¾å¼æ’åº123456#æ¡ˆä¾‹1ï¼šå¯¹æœ‰å¥–é‡‘çš„å‘˜å·¥ï¼ŒæŒ‰å¹´è–ªé™åºSELECT *,salary*12*(1+IFNULL(commission_pct,0)) å¹´è–ªFROM employeesWHERE commission_pct IS NOT NULLORDER BY salary*12*(1+IFNULL(commission_pct,0)) DESC; 3ã€æŒ‰åˆ«åæ’åº123456#æ¡ˆä¾‹1ï¼šå¯¹æœ‰å¥–é‡‘çš„å‘˜å·¥ï¼ŒæŒ‰å¹´è–ªé™åºSELECT *,salary*12*(1+IFNULL(commission_pct,0)) å¹´è–ªFROM employeesORDER BY å¹´è–ª DESC; 4ã€æŒ‰å‡½æ•°çš„ç»“æœæ’åº1234#æ¡ˆä¾‹1ï¼šæŒ‰å§“åçš„å­—æ•°é•¿åº¦è¿›è¡Œå‡åºSELECT last_nameFROM employeesORDER BY LENGTH(last_name); 5ã€æŒ‰å¤šä¸ªå­—æ®µæ’åº1234#æ¡ˆä¾‹1ï¼šæŸ¥è¯¢å‘˜å·¥çš„å§“åã€å·¥èµ„ã€éƒ¨é—¨ç¼–å·ï¼Œå…ˆæŒ‰å·¥èµ„å‡åºï¼Œå†æŒ‰éƒ¨é—¨ç¼–å·é™åºSELECT last_name,salary,department_idFROM employeesORDER BY salary ASC,department_id DESC; 6ã€è¡¥å……é€‰å­¦ï¼šæŒ‰åˆ—æ•°æ’åº12345SELECT * FROM employeesORDER BY 2 DESC;SELECT * FROM employeesORDER BY first_name; å¸¸è§å‡½æ•°ä¸€ã€å­—ç¬¦å‡½æ•° æ–¹æ³• æè¿° concat(str1,str2) æ‹¼æ¥ substr(str,pos) æˆªå–ä» pos å¼€å§‹çš„æ‰€æœ‰å­—ç¬¦ï¼Œèµ·ç´¢å¼•ä» 1 å¼€å§‹ substr(str,pos,len) æˆªå– len ä¸ªä» pos å¼€å§‹çš„å­—ç¬¦ï¼Œèµ·å§‹ç´¢å¼•ä» 1 å¼€å§‹ Length(str) è·å–å­—èŠ‚ä¸ªæ•° upper(str) å˜å¤§å†™ lower(str) å˜å°å†™ trim(ã€substr fromã€‘str) å»å‰åä¹‹åæŒ‡å®šçš„å­—ç¬¦ï¼Œé»˜è®¤æ˜¯å»ç©ºæ ¼ left(str,len) ä»å·¦è¾¹æˆªå–æŒ‡å®š len ä¸ªæ•°çš„å­—ç¬¦ right(str,len) ä»å³è¾¹æˆªæŒ‡å®š Len ä¸ªæ•°çš„å­—ç¬¦ lpad(str,substr,len) å·¦å¡«å…… rpad(str,substr,len) å³å¡«å…… strcmp(str1,str2) æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦çš„å¤§å° instr(str,substr) è·å– substr åœ¨ str ä¸­çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• ç¤ºä¾‹ï¼š CONCAT æ‹¼æ¥å­—ç¬¦ 12SELECT CONCAT(&#x27;hello&#x27;, first_name,last_name) å¤‡æ³¨FROM employees; LENGTH è·å–å­—èŠ‚é•¿åº¦ 1SELECT LENGTH(&#x27;hello&#x27;); CHAR_LENGTH è·å–å­—ç¬¦ä¸ªæ•° 1SELECT CHAR_LENGTH(&#x27;hell,xiaoming&#x27;); SUBSTRING æˆªå–å­ä¸² 12SELECT SUBSTR(&#x27;hellowoorld&#x27;,1,3);SELECT SUBSTR(&#x27;hellowoorld&#x27;,2); INSTR è·å–å­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• 12SELECT INSTR(&#x27;ä¸‰æ‰“ç™½éª¨ç²¾aaaç™½éª¨ç²¾bbç™½éª¨ç²¾&#x27;,&#x27;ç™½éª¨ç²¾&#x27;);SELECT INSTR(&#x27;ä¸‰æ‰“ç™½éª¨ç²¾aaaç™½éª¨ç²¾bbç™½éª¨ç²¾&#x27;,&#x27;ç™½éª¨ç²¾&#x27;); TRIM å»å‰åæŒ‡å®šçš„å­—ç¬¦ï¼Œé»˜è®¤æ˜¯å»ç©ºæ ¼ 1SELECT TRIM(&#x27; xiaoming &#x27;) AS a; LPAD/RPAD å·¦å¡«å……/å³å¡«å…… 1SELECT LPAD(&#x27;å°æ˜&#x27;,10,&#x27;a&#x27;); UPPER/LOWER å˜å¤§å†™/å˜å°å†™ æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥è¡¨çš„å§“åï¼Œè¦æ±‚æ ¼å¼ï¼šå§“é¦–å­—ç¬¦å¤§å†™ï¼Œå…¶ä»–å­—ç¬¦å°å†™ï¼Œåæ‰€æœ‰å­—ç¬¦å¤§å†™ï¼Œä¸”å§“å’Œåä¹‹é—´ç”¨_åˆ†å‰²ï¼Œæœ€åèµ·åˆ«åâ€œOUTPUTâ€ 12SELECT CONCAT(UPPER(SUBSTR(first_name,1,1)),LOWER(SUBSTR(first_name,2)),&#x27;_&#x27;,UPPER(last_name)) AS &#x27;OUTPUT&#x27;FROM employees; STRCMP æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦å¤§å° 12SELECT STRCMP(&#x27;aec&#x27;,&#x27;aec&#x27;);SELECT STRCMP(&#x27;adc&#x27;,&#x27;cfg&#x27;); LEFT/RIGHT æˆªå–å­ä¸² 12SELECT LEFT(&#x27;é¸ æ‘©æ™º&#x27;,1);SELECT RIGHT(&#x27;é¸ æ‘©æ™º&#x27;,1); äºŒã€æ•°å­—å‡½æ•° æ–¹æ³• æè¿° ceil(x) å‘ä¸Šå–æ•´ floor(X) å‘ä¸‹å–æ•´ round(x,d) å››èˆäº”å…¥ mod(x,y) å–æ¨¡/å–ä½™ truncate(x,d) æˆªå–ï¼Œä¿ç•™å°æ•°ç‚¹å d ä½ abs(x) æ±‚ç»å¯¹å€¼ ç¤ºä¾‹ï¼š ABS ç»å¯¹å€¼ 1SELECT ABS(-2.4); CEIL å‘ä¸Šå–æ•´ è¿”å›&gt;=è¯¥å‚æ•°çš„æœ€å°æ•´æ•° 123SELECT CEIL(-1.77999);SELECT CEIL(-1.09);SELECT CEIL(0.09); FLOOR å‘ä¸‹å–æ•´ï¼Œè¿”å›&lt;=è¯¥å‚æ•°çš„æœ€å¤§æ•´æ•° 12SELECT FLOOR(-1.09);SELECT FLOOR(0.09); ROUND å››èˆäº”å…¥ 12SELECT ROUND(4,555);SELECT ROUND(1.8712345,2); TRUNCATE æˆªæ–­ 1SELECT TRUNCATE(1.8776787,2); MOD å–ä½™ 123SELECT MOD(10,3); // 1SELECT MOD(-10,3); // -1SELECT MOD(10,-3); // 1 ä¸‰ã€æ—¥æœŸå‡½æ•° æ–¹æ³• æè¿° now() è·å–å½“å‰æ—¥è¶‹â€“æ—¶é—´ curtime() åªæœ‰æ—¶é—´ curdate() åªæœ‰æ—¥æœŸ date_format(date,æ ¼å¼) æ ¼å¼æ—¥æœŸä¸ºå­—ç¬¦ str_to_date(strï¼Œæ ¼å¼) å°†å­—ç¬¦è½¬æ¢ä¸ºæ—¥æœŸ datediff(date1,date2) è·å–ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©å·®æ•° year(date) è·å–å¹´ month(date) è·å–æœˆ NOW 1SELECT NOW(); CURDATE 1SELECT CURDATE(); DATEDIFF 1SELECT DATEDIFF(&#x27;1998-7-16&#x27;,&#x27;2019-7-13&#x27;); DATE_FORMAT 12SELECT DATE_FORMAT(&#x27;1998-7-19&#x27;,&#x27;%Yå¹´%mæœˆ%dæ—¥ %Hå°æ—¶%iåˆ†é’Ÿ%sç§’&#x27;) å‡ºç”Ÿæ—¥æœŸSELECT DATE_FORMAT(hiredate,&#x27;%Yå¹´%Mæœˆ%dæ—¥ %Hå°æ—¶%iåˆ†é’Ÿ%sç§’&#x27;)å…¥èŒæ—¥æœŸ STR_TO_DATE æŒ‰æŒ‡å®šæ ¼å¼è§£æå­—ç¬¦ä¸²ä¸ºæ—¥æœŸç±»å‹ 12SELECT * FROM employeesWHERE hiredate&lt;STR_TO_DATE(&#x27;3/15 1998&#x27;,&#x27;%m/%d %Y&#x27;); å››ã€æµç¨‹æ§åˆ¶è¯­å¥ â‘  if(æ¡ä»¶ï¼Œè¡¨è¾¾å¼ 1, è¡¨è¾¾å¼ 2)ï¼šå¦‚æœæ¡ä»¶æˆç«‹ï¼Œè¿”å›è¡¨è¾¾å¼ 1ï¼Œå¦åˆ™è¿”å›è¡¨è¾¾å¼ 2 â‘¡ case è¡¨è¾¾å¼ when å€¼ 1 then ç»“æœ 1 when å€¼ 2 then ç»“æœ 2 â€¦. else ç»“æœ n end â‘¢ case when æ¡ä»¶ 1 then ç»“æœ 1 when æ¡ä»¶ 2 then ç»“æœ 2 â€¦ else ç»“æœ n end ç¤ºä¾‹ï¼š IF å‡½æ•° 1SELECT IF(100&gt;9,&#x27;å¥½&#x27;,&#x27;å&#x27;); éœ€æ±‚ï¼šå¦‚æœæœ‰å¥–é‡‘ï¼Œåˆ™æ˜¾ç¤ºæœ€ç»ˆå¥–é‡‘ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ˜¾ç¤º 0 12SELECT IF(commission_pct IS NULL,0,salary*12*commission_pct) å¥–é‡‘FROM employees; CASE å‡½æ•° æ¡ˆä¾‹ï¼šéƒ¨é—¨ç¼–å·æ˜¯ 30ï¼Œå·¥èµ„æ˜¾ç¤ºä¸º 2 å€éƒ¨é—¨ç¼–å·æ˜¯ 50ï¼Œå·¥èµ„æ˜¾ç¤ºä¸º 3 å€éƒ¨é—¨ç¼–å·æ˜¯ 60ï¼Œå·¥èµ„æ˜¾ç¤ºä¸º 4 å€å¦åˆ™ä¸å˜æ˜¾ç¤º éƒ¨é—¨ç¼–å·ï¼Œæ–°å·¥èµ„ï¼Œæ—§å·¥èµ„ 12345678SELECT department_id,salary,CASE department_idWHEN 30 THEN salary*2WHEN 50 THEN salary*3WHEN 60 THEN salary*4ELSE salaryEND newsalaryFROM employees; æ¡ˆä¾‹ï¼šå¦‚æœå·¥èµ„&gt;20000,æ˜¾ç¤ºçº§åˆ« Aå·¥èµ„&gt;15000,æ˜¾ç¤ºçº§åˆ« Bå·¥èµ„&gt;10000,æ˜¾ç¤ºçº§åˆ« Cå¦åˆ™ï¼Œæ˜¾ç¤º D 12345678SELECT salary,CASEWHEN salary&gt;20000 THEN &#x27;A&#x27;WHEN salary&gt;15000 THEN &#x27;B&#x27;WHEN salary&gt;10000 THEN &#x27;C&#x27;ELSE &#x27;D&#x27;END AS &#x27;ç­‰çº§&#x27;FROM employees åˆ†ç»„å‡½æ•° æ–¹æ³• æè¿° sum æ±‚å’Œ avg æ±‚å¹³å‡æ•° max æ±‚æœ€å¤§å€¼ min æ±‚æœ€å°å€¼ count è®¡ç®—éç©ºå­—æ®µå€¼çš„ä¸ªæ•° ç¤ºä¾‹ï¼š #æ¡ˆä¾‹ 1 ï¼šæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯è¡¨ä¸­ï¼Œæ‰€æœ‰å‘˜å·¥çš„å·¥èµ„å’Œã€å·¥èµ„å¹³å‡å€¼ã€æœ€ä½å·¥èµ„ã€æœ€é«˜å·¥èµ„ã€æœ‰å·¥èµ„çš„ä¸ªæ•°ã€‚ 12SELECT SUM(salary),AVG(salary),MIN(salary),MAX(salary),COUNT(salary)FROM employees åˆ†ç»„æŸ¥è¯¢ä¸€ã€è¯­æ³• select åˆ†ç»„å‡½æ•°ï¼Œåˆ†ç»„çš„å­—æ®µ from è¡¨å where åˆ†ç»„å‰çš„ç­›é€‰æ¡ä»¶ grounp by åˆ†ç»„åˆ—è¡¨ having åˆ†ç»„åçš„ç­›é€‰ order by æ’åºåˆ—è¡¨ äºŒã€ç‰¹ç‚¹â€‹ â‘  åˆ†ç»„åˆ—è¡¨å¯ä»¥æ˜¯å•ä¸ªå­—æ®µã€å¤šä¸ªå­—æ®µ â€‹ â‘¡ ç­›é€‰æ¡ä»¶åˆ†ä¸ºä¸¤ç±» ç­›é€‰çš„åŸºè¡¨ ä½¿ç”¨çš„å…³é”®å­— ä½ç½® åˆ†ç»„å‰ç­›é€‰ åŸå§‹è¡¨ where group by å‰é¢ åˆ†ç»„åç­›é€‰ åˆ†ç»„åçš„ç»“æœé›† having group by åé¢ ä¸‰ã€æ‰§è¡Œé¡ºåºâ€‹ â‘  from å­å¥ â€‹ â‘¡ where å­å¥ â€‹ â‘¢ group by å­å¥ â€‹ â‘£ having å­å¥ â€‹ â‘¤ select å­å¥ â€‹ â‘¥order by å­å¥ ç¤ºä¾‹ï¼š â€‹ 1. æŸ¥è¯¢æ¯ä¸ªå·¥ç§çš„å‘˜å·¥å¹³å‡å·¥èµ„ 123SELECT AVG(salary),job_idFROM employeesGROUP BY job_id; æŸ¥è¯¢å“ªä¸ªéƒ¨é—¨çš„å‘˜å·¥ä¸ªæ•°&gt;5 1234SELECT COUNT(*) å‘˜å·¥ä¸ªæ•°,department_idFROM employeesGROUP BY department_idHAVING COUNT(*)&gt;5; æ¯ä¸ªå·¥ç§æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„&gt;12000 çš„å·¥ç§ç¼–å·å’Œæœ€é«˜å·¥èµ„ 12345SELECT job_id,MAX(salary)FROM employeesWHERE commission_pct IS NOT NULLGROUP BY job_idHAVING MAX(salary)&gt;12000; æŸ¥è¯¢æ²¡æœ‰å¥–é‡‘çš„å‘˜å·¥çš„æœ€é«˜å·¥èµ„&gt;6000 çš„å·¥ç§ç¼–å·å’Œæœ€é«˜å·¥èµ„,æŒ‰æœ€é«˜å·¥èµ„å‡åº 123456SELECT MAX(salary) æœ€é«˜å·¥èµ„, job_idFROM employeesWHERE commission_pct IS NULLGROUP BY job_idHAVING MAX(salary)&gt;6000ORDER BY MAX(salary) ASC; æŸ¥è¯¢æ¯ä¸ªå·¥ç§æ¯ä¸ªéƒ¨é—¨çš„æœ€ä½å·¥èµ„,å¹¶æŒ‰æœ€ä½å·¥èµ„é™åº (å·¥ç§å’Œéƒ¨é—¨éƒ½ä¸€æ ·ï¼Œæ‰æ˜¯ä¸€ç»„) 123SELECT MIN(salary) æœ€ä½å·¥èµ„,job_id,department_idFROM employeesGROUP BY job_id,department_id è¿æ¥æŸ¥è¯¢è¯´æ˜ï¼šå½“æŸ¥è¯¢ä¸­æ¶‰åŠåˆ°äº†å¤šä¸ªå­—æ®µï¼Œåˆ™éœ€è¦é€šè¿‡å¤šè¡¨è¿æ¥ ç¬›å¡å°”ä¹˜ç§¯ï¼š â€‹ å‡ºç°åŸå› ï¼šæ²¡æœ‰æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶ â€‹ è§£å†³åŠæ³•ï¼šæ·»åŠ æœ‰æ•ˆçš„è¿æ¥æ¡ä»¶ ä¸€ã€SQL92 è¯­æ³•è¯­æ³•ï¼š select æŸ¥è¯¢åˆ—è¡¨ â‘  from è¡¨ 1 åˆ«åï¼Œ è¡¨ 2 åˆ«å â‘¡ where è¿æ¥æ¡ä»¶ â‘¢ and ç­›é€‰æ¡ä»¶ â‘£ group by åˆ†ç»„åˆ—è¡¨ â‘¤ having åˆ†ç»„åçš„ç­›é€‰ â‘¥ order by æ’åºåˆ—è¡¨ â‘¦ æ‰§è¡Œé¡ºåºï¼šâ‘¡ â‘¢ â‘£ â‘¤ â‘¥ â‘  â‘¦ 1ã€ç­‰å€¼è¿æ¥è¯­æ³•ï¼š select æŸ¥è¯¢åˆ—è¡¨ from è¡¨ 1 åˆ«åï¼Œ è¡¨ 2 åˆ«å where è¡¨ 1.key= è¡¨ 2.key ã€and ç­›é€‰æ¡ä»¶ã€‘ ã€group by åˆ†ç»„å­—æ®µã€‘ ã€having åˆ†ç»„åçš„ç­›é€‰ã€‘ ã€order by æ’åºå­—æ®µã€‘ ä»£ç ç¤ºä¾‹ï¼š ç­‰å€¼è¿æ¥ï¼šæŸ¥è¯¢å¥³ç¥åå’Œå¯¹åº”çš„ç”·ç¥å 123SELECT NAME ,boyNameFROM boys,beautyWHERE beauty.boyfriend_id = boys.id; æŸ¥è¯¢æœ‰å¥–é‡‘çš„å‘˜å·¥åã€éƒ¨é—¨å 1234SELECT last_name , department_name,commission_pctFROM employees e , departments dWHERE e.`department_id` = d.`department_id`AND e.`commission_pct` IS NOT NULL; æŸ¥è¯¢æœ‰å¥–é‡‘çš„æ¯ä¸ªéƒ¨é—¨çš„éƒ¨é—¨åå’Œéƒ¨é—¨çš„é¢†å¯¼ç¼–å·å’Œè¯¥éƒ¨é—¨çš„æœ€ä½å·¥èµ„ 12345SELECT department_name, d.`manager_id`,MIN(salary)FROM departments d,employees eWHERE d.`department_id` = e.`department_id`AND commission_pct IS NOT NULLGROUP BY department_name,d.`department_id`; æŸ¥è¯¢æ¯ä¸ªå·¥ç§çš„å·¥ç§åå’Œå‘˜å·¥çš„ä¸ªæ•°ï¼Œå¹¶ä¸”æŒ‰å‘˜å·¥ä¸ªæ•°é™åº 12345SELECT job_title , COUNT(*)FROM employees e, jobs jWHERE e.`job_id`=j.`job_id`GROUP BY job_titleORDER BY COUNT(*) DESC ä¸‰è¡¨è¿æ¥: æŸ¥è¯¢å‘˜å·¥åã€éƒ¨é—¨åå’Œæ‰€åœ¨çš„åŸå¸‚ 1234567SELECT last_name,department_name,cityFROM employees e,departments d,locations lWHERE e.`department_id`=d.`department_id`AND d.`location_id`=l.`location_id`AND city LIKE &#x27;s%&#x27;ORDER BY department_name DESC; 2ã€éç­‰å€¼è¿æ¥è¯­æ³•ï¼š select æŸ¥è¯¢åˆ—è¡¨ from è¡¨ 1 åˆ«å,è¡¨ 2 åˆ«å where éç­‰å€¼çš„è¿æ¥æ¡ä»¶ ã€and ç­›é€‰æ¡ä»¶ã€‘ ã€group by åˆ†ç»„å­—æ®µã€‘ ã€having åˆ†ç»„åçš„ç­›é€‰ã€‘ ã€order by æ’åºå­—æ®µã€‘ 3ã€è‡ªè¿æ¥è¯­æ³•ï¼š select æŸ¥è¯¢åˆ—è¡¨ from è¡¨ åˆ«å 1,è¡¨ åˆ«å 2 where ç­‰å€¼çš„è¿æ¥æ¡ä»¶ ã€and ç­›é€‰æ¡ä»¶ã€‘ ã€group by åˆ†ç»„å­—æ®µã€‘ ã€having åˆ†ç»„åçš„ç­›é€‰ã€‘ ã€order by æ’åºå­—æ®µã€‘ ä»£ç ç¤ºä¾‹ï¼š è‡ªè¿æ¥: æŸ¥è¯¢ å‘˜å·¥åå’Œä¸Šçº§çš„åç§° 123SELECT e.employee_id,e.last_name,m.employee_id,m.last_nameFROM employees e,employees mWHERE e.`manager_id`=m.`employee_id`; äºŒã€SQL99 è¯­æ³•1ã€å†…è¿æ¥è¯­æ³•ï¼š select æŸ¥è¯¢åˆ—è¡¨ â‘  from è¡¨ 1 åˆ«å â‘¡ ã€innerã€‘ join è¡¨ 2 on è¿æ¥æ¡ä»¶ â‘¢ ã€innerã€‘ join è¡¨ 3 on è¿æ¥æ¡ä»¶ â‘¢ where ç­›é€‰æ¡ä»¶ â‘£ group by åˆ†ç»„åˆ—è¡¨ â‘¤ having åˆ†ç»„åçš„ç­›é€‰ â‘¥ order by æ’åºåˆ—è¡¨ â‘¦ æ‰§è¡Œé¡ºåºï¼š â‘¡ â‘¢ â‘£ â‘¤ â‘¥ â‘  â‘¦ ç‰¹ç‚¹ï¼š â€‹ â‘  è¡¨çš„é¡ºåºå¯ä»¥è°ƒæ¢ â€‹ â‘¡ å†…è¿æ¥çš„ç»“æœ=å¤šè¡¨çš„äº¤é›† â€‹ â‘¢ n è¡¨è¿æ¥è‡³å°‘éœ€è¦ n-1 ä¸ªè¿æ¥æ¡ä»¶ åˆ†ç±»ï¼š ç­‰å€¼è¿æ¥ éç­‰å€¼è¿æ¥ è‡ªè¿æ¥ ä»£ç ç¤ºä¾‹: æŸ¥è¯¢å‘˜å·¥åå’Œéƒ¨é—¨å 1234SELECT last_name,department_nameFROM departments dJOIN employees eON e.`department_id`=d.department_id; æ·»åŠ ç­›é€‰æ¡ä»¶: æŸ¥è¯¢éƒ¨é—¨ç¼–å·&gt;100 çš„éƒ¨é—¨åå’Œæ‰€åœ¨çš„åŸå¸‚å 12345SELECT department_name,cityFROM departments dJOIN locations lON d.`location_id` = l.`location_id`WHERE d.`department_id`&gt;100; æ·»åŠ åˆ†ç»„+ç­›é€‰+æ’åº: æŸ¥è¯¢éƒ¨é—¨ä¸­å‘˜å·¥ä¸ªæ•°&gt;10 çš„éƒ¨é—¨åï¼Œå¹¶æŒ‰å‘˜å·¥ä¸ªæ•°é™åº 1234567SELECT department_name,COUNT(*) å‘˜å·¥ä¸ªæ•°FROM employees eJOIN departments dON e.`department_id` = d.`department_id`GROUP BY d.`department_id`HAVING å‘˜å·¥ä¸ªæ•°&gt;10ORDER BY å‘˜å·¥ä¸ªæ•° DESC; éç­‰å€¼è¿æ¥: æŸ¥è¯¢éƒ¨é—¨ç¼–å·åœ¨ 10-90 ä¹‹é—´çš„å‘˜å·¥çš„å·¥èµ„çº§åˆ«ï¼Œå¹¶æŒ‰çº§åˆ«è¿›è¡Œåˆ†ç»„ 123456SELECT COUNT(*) ä¸ªæ•°,gradeFROM employees eJOIN sal_grade gON e.`salary` BETWEEN g.`min_salary`AND g.`max_salary`WHERE e.`department_id` BETWEEN 10 AND 90GROUP BY g.`grade` è‡ªè¿æ¥: æŸ¥è¯¢å‘˜å·¥åå’Œå¯¹åº”çš„é¢†å¯¼å 1234SELECT e.`last_name`, m.last_nameFROM employees eJOIN employees mON e.`manager_id`=m.employee_id; 2ã€å¤–è¿æ¥è¯­æ³•ï¼š select æŸ¥è¯¢åˆ—è¡¨ from è¡¨ 1 åˆ«å left | right| full ã€outerã€‘ join è¡¨ 2 åˆ«å on è¿æ¥æ¡ä»¶ where ç­›é€‰æ¡ä»¶ group by åˆ†ç»„åçš„ç­›é€‰ order by æ’åºåˆ—è¡¨ ç‰¹ç‚¹ï¼š â€‹ â‘  æŸ¥è¯¢çš„ç»“æœ = ä¸»è¡¨çš„æ‰€æœ‰çš„è¡Œï¼Œå¦‚æœä»è¡¨å’Œå®ƒæ¯”é…çš„å°†æ˜¾ç¤ºåŒ¹é…è¡Œï¼Œå¦‚æœä»è¡¨æ²¡æœ‰åŒ¹é…çš„åˆ™æ˜¾ç¤º null â€‹ â‘¡ left join å·¦è¾¹çš„å°±æ˜¯ä¸»è¡¨ï¼Œright join å³è¾¹çš„å°±æ˜¯ä¸»è¡¨ï¼Œ full jion ä¸¤è¾¹éƒ½æ˜¯ä¸»è¡¨ â€‹ â‘¢ ä¸€èˆ¬ç”¨äºæŸ¥è¯¢é™¤äº†äº¤é›†éƒ¨åˆ†çš„å‰©ä½™çš„ä¸åŒ¹é…çš„è¡Œ ä»£ç ç¤ºä¾‹ï¼š æŸ¥è¯¢æ‰€æœ‰å¥³ç¥è®°å½•ï¼Œä»¥åŠå¯¹åº”çš„ç”·ç¥å,å¦‚æœæ²¡æœ‰å¯¹åº”çš„ç”·ç¥ï¼Œåˆ™æ˜¾ç¤ºä¸º nullã€‚ å·¦è¿æ¥ 123SELECT b.*,bo.*FROM beauty bLEFT JOIN boys bo ON b.`boyfriend_id` = bo.`id`; å³è¿æ¥ï¼š 123SELECT b.*,bo.*FROM boys boRIGHT JOIN beauty b ON b.`boyfriend_id` = bo.`id`; å­æŸ¥è¯¢ä¸€ã€å«ä¹‰ åµŒå¥—åœ¨å…¶ä»–è¯­å¥å†…éƒ¨çš„ select è¯­å¥ç§°ä¸ºå­æŸ¥è¯¢æˆ–å†…æŸ¥è¯¢ å¤–é¢çš„è¯­å¥å¯ä»¥æ˜¯ insertã€updateã€select ç­‰ï¼Œä¸€èˆ¬ select ä½œä¸ºå¤–é¢çš„è¯­å¥è¾ƒå¤š å¤–é¢å¦‚æœä¸º select è¯­å¥ï¼Œåˆ™æ­¤è¯­å¥ç§°ä¸ºå¤–æŸ¥è¯¢æˆ–ä¸»æŸ¥è¯¢ äºŒã€åˆ†ç±»æŒ‰å‡ºç°ä½ç½® select åé¢ â€‹ ä»…ä»…æ”¯æŒæ ‡é‡å­æŸ¥è¯¢ from åé¢ â€‹ è¡¨å­æŸ¥è¯¢ where æˆ– having åé¢ â€‹ æ ‡é‡å­æŸ¥è¯¢ â€‹ åˆ—å­æŸ¥è¯¢ â€‹ è¡Œå­æŸ¥è¯¢ â€‹ è¡¨å­æŸ¥è¯¢ æŒ‰ç»“æœé›†çš„è¡Œåˆ— æ ‡é‡å­æŸ¥è¯¢(å•è¡Œå­æŸ¥è¯¢)ï¼šç»“æœé›†ä¸ºä¸€è¡Œä¸€åˆ— åˆ—å­æŸ¥è¯¢(å¤šè¡Œå­æŸ¥è¯¢):ç»“æœé›†ä¸ºå¤šè¡Œä¸€åˆ— è¡Œå­æŸ¥è¯¢ï¼šç»“æœé›†ä¸ºå¤šè¡Œå¤šåˆ— è¡¨å­æŸ¥è¯¢ï¼šç»“æœé›†ä¸ºå¤šè¡Œå¤šåˆ— ä»£ç ç¤ºä¾‹ï¼š æŸ¥è¯¢æœ€ä½å·¥èµ„å¤§äº 50 å·éƒ¨é—¨æœ€ä½å·¥èµ„çš„éƒ¨é—¨ id å’Œå…¶æœ€ä½å·¥èµ„ 12345678SELECT department_id, MIN(salary)FROM employeesGROUP BY department_idHAVING MIN(salary) &gt; ( SELECT MIN(salary) FROM employees WHERE department_id = 50 ); è¿”å› job_id ä¸ 141 å·å‘˜å·¥ç›¸åŒï¼Œsalary æ¯” 143 å·å‘˜å·¥å¤šçš„å‘˜å·¥å§“åï¼Œjob_id å’Œå·¥èµ„ 1234567891011SELECT last_name,job_id,salaryFROM employeesWHERE job_id =( SELECT job_id FROM employees WHERE employee_id = 141) AND salary&gt;( SELECT salary FROM employees WHERE employee_id = 143); å¤šè¡Œå­æŸ¥è¯¢:è¿”å› location_id æ˜¯ 1400 æˆ– 1700 çš„éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥å§“å 12345678SELECT last_nameFROM employeesWHERE department_id IN( # distinct å»é‡ SELECT distinct department_id FROM departments WHERE location_id IN(1400,1700) ); æ”¾åœ¨ select åé¢: æŸ¥è¯¢éƒ¨é—¨ç¼–å·æ˜¯ 50 çš„å‘˜å·¥ä¸ªæ•° 12345SELECT ( SELECT COUNT(*) FROM employees WHERE department_id = 50) ä¸ªæ•°; æ”¾åœ¨ from åé¢: æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„çš„å·¥èµ„çº§åˆ« 123456789SELECT dep_ag.department_id,dep_ag.ag,g.gradeFROM sal_grade gJOIN ( SELECT AVG(salary) ag,department_id FROM employees GROUP BY department_id) dep_ag ON dep_ag.ag BETWEEN g.min_salary AND g.max_salary; æ”¾åœ¨ exists åé¢ 12345SELECT EXISTS( SELECT * FROM employees WHERE last_name=&#x27;Abel&#x27;) æœ‰æ— Able; åˆ†é¡µæŸ¥è¯¢ä¸€ã€åº”ç”¨åœºæ™¯ å½“è¦æŸ¥è¯¢çš„æ¡ç›®æ•°å¤ªå¤šï¼Œä¸€é¡µæ˜¾ç¤ºä¸å…¨ äºŒã€è¯­æ³• select æŸ¥è¯¢åˆ—è¡¨ from è¡¨ limitã€offsetã€‘size æ³¨æ„ï¼š offset ä»£è¡¨çš„æ˜¯èµ·å§‹æ¡ç›®çš„ç´¢å¼•ï¼Œé»˜è®¤å¼€å§‹ä» 0 å¼€å§‹ size ä»£è¡¨çš„æ˜¯æ¡ç›®æ•° å…¬å¼ï¼š å‡å¦‚è¦æ˜¾ç¤ºçš„é¡µæ•°ä¸º page,æ¯ä¸€é¡µçš„æ¡ç›®æ•°ä¸º size select æŸ¥è¯¢åˆ—è¡¨ from è¡¨ limit(page - 1)* size, size ä»£ç ç¤ºä¾‹ï¼š æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯è¡¨çš„å‰ 5 æ¡ 1SELECT * FROM employees LIMIT 0,5; æŸ¥è¯¢å¹´è–ªæœ€é«˜çš„å‰ 10 å 1234SELECT last_name, salary,salary*12*(1+IFNULL(commission_pct,0)) å¹´è–ªFROM employeesORDER BY å¹´è–ª DESCLIMIT 0,10 æŸ¥è¯¢æœ‰å¥–é‡‘çš„ï¼Œä¸”å·¥èµ„è¾ƒé«˜çš„ç¬¬ 11 ååˆ°ç¬¬ 20 å 12345SELECT *FROM employeesWHERE commission_pct IS NOT NULLORDER BY salary DESCLIMIT 10,10; è”åˆæŸ¥è¯¢ä¸€ã€å«ä¹‰â€‹ union: åˆå¹¶ã€è”åˆï¼Œå°†å¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶æˆä¸ºä¸€ä¸ªç‚¹ç»“æœ äºŒã€è¯­æ³• æŸ¥è¯¢è¯­å¥ 1 â€‹ unionã€allã€‘ æŸ¥è¯¢è¯­å¥ 2 â€‹ unionã€allã€‘ â€¦.. ä¸‰ã€æ„ä¹‰ å°†ä¸€æ¡æ¯”è¾ƒå¤æ‚çš„æŸ¥è¯¢è¯­å¥æ‹†åˆ†æˆä¸ºå¤šæ¡è¯­å¥ é€‚ç”¨äºæŸ¥è¯¢å¤šä¸ªè¡¨çš„æ—¶å€™ï¼ŒæŸ¥è¯¢çš„åˆ—è¡¨æ˜¯ä¸€è‡´ å››ã€ç‰¹ç‚¹ è¦æ±‚å¤šæŸ¥è¯¢åˆ—æ•°å¿…é¡»ä¸€è‡´ è¦æ±‚å¤šæ¡æŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢çš„å„åˆ—ç±»å‹ã€é¡ºåºæœ€å¥½ä¸€è‡´ union å»é‡ï¼Œunion all åŒ…å«é‡å¤é¡¹ ä»£ç ç¤ºä¾‹ï¼š æŸ¥è¯¢æ‰€æœ‰å›½å®¶çš„å¹´é¾„&gt;20 å²çš„ç”¨æˆ·ä¿¡æ¯ 12SELECT * FROM usa WHERE uage &gt; 20 UNIONSELECT * FROM chinese WHERE age &gt;20 æŸ¥è¯¢æ‰€æœ‰å›½å®¶çš„ç”¨æˆ·å§“åå’Œå¹´é¾„ 123SELECT uname,uage FROM usaUNIONSELECT age,&#x27;name&#x27; FROM chinese union è‡ªåŠ¨å»é‡/union all å¯ä»¥æ”¯æŒé‡å¤é¡¹ 1234567SELECT 1,&#x27;å°æ˜&#x27;UNION ALLSELECT 1,&#x27;å°æ˜&#x27;UNION ALLSELECT 1,&#x27;å°æ˜&#x27;UNION ALLSELECT 1,&#x27;å°æ˜&#x27; ; DDL è¯­è¨€åº“çš„ç®¡ç† â‘  åˆ›å»ºåº“ create database ã€if not existsã€‘åº“å ã€characster set å­—ç¬¦é›†åã€‘ â‘¡ ä¿®æ”¹è¡¨ alter database åº“å character set å­—ç¬¦é›†åï¼› â‘¢ åˆ é™¤è¡¨ drop database ã€if existsã€‘ åº“åï¼› ä»£ç ç¤ºä¾‹ï¼š åˆ›å»ºæ•°æ®åº“ 12CREATE DATABASE stuDB;CREATE DATABASE IF NOT EXISTS stuDB; åˆ é™¤æ•°æ®åº“ 12DROP DATABASE stuDB;DROP DATABASE IF EXISTS stuDB; è¡¨çš„ç®¡ç† â‘  åˆ›å»ºè¡¨ create tableã€if not existsã€‘è¡¨åï¼ˆ â€‹ å­—æ®µå å­—æ®µç±»å‹ã€çº¦æŸã€‘ï¼Œ â€‹ å­—æ®µå å­—æ®µç±»å‹ã€çº¦æŸã€‘ï¼Œ â€‹ å­—æ®µå å­—æ®µç±»å‹ã€çº¦æŸã€‘ï¼Œ â€‹ â€¦â€¦ ï¼‰ â‘¡ ä¿®æ”¹è¡¨ 1.æ·»åŠ åˆ— alter table è¡¨å add conlumu åˆ—å ç±»å‹ã€firat|afterã€‘ 2.ä¿®æ”¹åˆ—çš„ç±»å‹æˆ–çº¦æŸ alter table è¡¨å modify column åˆ—å æ–°ç±»å‹ã€æ–°çº¦æŸã€‘ 3.ä¿®æ”¹åˆ—å alter table è¡¨å change column æ—§åˆ—å æ–°åˆ—å ç±»å‹ 4.åˆ é™¤åˆ— alter table è¡¨å drop column åˆ—å 5.ä¿®æ”¹è¡¨å alter table è¡¨å ranameã€toã€‘ æ–°è¡¨å â‘¢ åˆ é™¤è¡¨ drop tableã€if existsã€‘ è¡¨å â‘£ å¤åˆ¶è¡¨ â‘  å¤åˆ¶è¡¨çš„ç»“æ„ creato table è¡¨å like æ—§è¡¨ â‘¡ å¤åˆ¶è¡¨çš„ç»“æ„+æ•°æ® create table è¡¨å select æŸ¥è¯¢åˆ—è¡¨ from æ—§è¡¨ã€where ç­›é€‰ã€‘ ä»£ç ç¤ºä¾‹ï¼š æ²¡æœ‰æ·»åŠ çº¦æŸ 12345678CREATE TABLE IF NOT EXISTS stuinfo( stuid INT , stuname VARCHAR(20), stugender CHAR(1), email VARCHAR(20), borndate DATETIME); æ·»åŠ çº¦æŸ 12345678910CREATE TABLE IF NOT EXISTS stuinfo( stuid INT PRIMARY KEY,#æ·»åŠ äº†ä¸»é”®çº¦æŸ stuname VARCHAR(20) UNIQUE NOT NULL,#æ·»åŠ äº†å”¯ä¸€çº¦æŸ+éç©º stugender CHAR(1) DEFAULT &#x27;ç”·&#x27;,#æ·»åŠ äº†é»˜è®¤çº¦æŸ email VARCHAR(20) NOT NULL, age INT CHECK( age BETWEEN 0 AND 100),#æ·»åŠ äº†æ£€æŸ¥çº¦æŸï¼Œmysqlä¸æ”¯æŒ majorid INT, CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major(id)#æ·»åŠ äº†å¤–é”®çº¦æŸ); ä¿®æ”¹è¡¨ 12345678910111213141516171819202122#1.ä¿®æ”¹è¡¨åALTER TABLE stuinfo RENAME TO students;#2.æ·»åŠ å­—æ®µALTER TABLE students ADD COLUMN borndate TIMESTAMP NOT NULL;DESC students;#3.ä¿®æ”¹å­—æ®µåALTER TABLE students CHANGE COLUMN borndate birthday DATETIME NULL;#4.ä¿®æ”¹å­—æ®µç±»å‹ALTER TABLE students MODIFY COLUMN birthday TIMESTAMP ;#5.åˆ é™¤å­—æ®µALTER TABLE students DROP COLUMN birthday;DESC students; åˆ é™¤è¡¨ 1DROP TABLE IF EXISTS students; å¤åˆ¶è¡¨ 1234567891011121314#ä»…ä»…å¤åˆ¶è¡¨çš„ç»“æ„CREATE TABLE newTable2 LIKE major;#å¤åˆ¶è¡¨çš„ç»“æ„+æ•°æ®CREATE TABLE newTable3 SELECT * FROM girls.`beauty`;#æ¡ˆä¾‹ï¼šå¤åˆ¶employeesè¡¨ä¸­çš„last_name,department_id,salaryå­—æ®µåˆ°æ–°è¡¨ empè¡¨ï¼Œä½†ä¸å¤åˆ¶æ•°æ®CREATE TABLE empSELECT lat_name,department_id,salaryFROM myemployees.`employees`WHERE 1=2; æ•°æ®ç±»å‹ä¸€ã€æ•°å€¼å‹1ã€æ•´å‹ tinyint ã€ sallintã€mediumintã€int/integerã€bigint 1 2 3 4 8 ç‰¹ç‚¹ï¼š â‘  éƒ½å¯ä»¥è®¾ç½®æ— ç¬¦å·å’Œæœ‰ç¬¦å·ï¼Œé»˜è®¤é€šè¿‡ unsigned è®¾ç½®æ— ç¬¦å· â‘¡ å¦‚æœè¶…å‡ºèŒƒå›´ï¼Œä¼šæŠ¥ out or range å¼‚å¸¸ï¼Œæ’å…¥ä¸´ç•Œå€¼ â‘¢ é•¿åº¦å¯ä»¥ä¸æŒ‡å®šï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªé•¿åº¦ï¼Œé•¿åº¦ä»£è¡¨æ˜¾ç¤ºçš„æœ€å¤§å®½åº¦ï¼Œå¦‚æœä¸å¤Ÿåˆ™å·¦è¾¹ç”¨ 0 å¡«å……ï¼Œä½†éœ€è¦æ­é… zerofillï¼Œå¹¶ä¸”é»˜è®¤å˜ä¸ºæ— ç¬¦å·æ•´å‹ã€‚ 2ã€æµ®ç‚¹å‹ å®šç‚¹æ•°ï¼šdecimal(M,D) æµ®ç‚¹æ•°ï¼š â€‹ float(M,D) 4 â€‹ double(M,D) 8 ç‰¹ç‚¹ï¼š â‘  M ä»£è¡¨æ•´æ•°+ å°æ•°éƒ¨ä½çš„ä¸ªæ•°ï¼ŒD ä»£è¡¨å°æ•°æ•´ä½ â‘¡ å¦‚æœè¶…å‡ºèŒƒå›´ï¼Œåˆ™æŠ¥ out or range å¼‚å¸¸ï¼Œå¹¶ä¸”æ’å…¥ä¸´ç•Œå€¼ â‘¢ M å’Œ D éƒ½å¯ä»¥çœç•¥ï¼Œä½†å¯¹äºå®šç‚¹æ•°ï¼ŒM é»˜è®¤ä¸º 10ï¼Œ D é»˜è®¤ä¸º 0 â‘£ å¦‚æœç²¾åº¦è¦è¾ƒé«˜ï¼Œåˆ™ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å®šç‚¹æ•° äºŒã€å­—ç¬¦å‹ char ã€varcharã€binaryã€enumã€setã€textã€blob char: å›ºå®šé•¿åº¦çš„å­—ç¬¦ï¼Œå†™æ³•ä¸º char(M),æœ€å¤§é•¿åº¦ä¸èƒ½è¶…è¿‡ Mï¼Œå…¶ä¸­ M å¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸º 1 varchar: å¯å˜é•¿åº¦çš„å­—ç¬¦ï¼Œå†™æ³•ä¸º varchar(M),æœ€å¤§é•¿åº¦ä¸èƒ½ Mï¼Œä¸å¯çœç•¥ M ä¸‰ã€æ—¥æœŸå‹ year å¹´ date æ—¥æœŸ time æ—¶é—´ datetime æ—¥æœŸæ—¶é—´ 8 timestamp æ—¥æœŸ+æ—¶é—´ 4 æ¯”è¾ƒå®¹æ˜“å—æ—¶åŒºã€è¯­æ³•æ¨¡å¼ã€ç‰ˆæœ¬çš„å½±å“ï¼Œæ›´èƒ½åæ˜ å½“å‰æ—¶åŒºçš„çœŸå®æ—¶é—´ å¸¸è§çš„çº¦æŸä¸€ã€å¸¸è§çš„çº¦æŸ çº¦æŸ æè¿° NOT NUll éç©ºï¼Œè¯¥å­—æ®µçš„å€¼å¿…å¡« UnIQUE å”¯ä¸€ï¼Œè¯¥å­—æ®µçš„å€¼ä¸å¯é‡å¤ DEFAULT é»˜è®¤ï¼Œè¯¥å­—æ®µçš„å€¼ä¸ç”¨æ‰‹åŠ¨æ’å…¥æœ‰é»˜è®¤å€¼ CHECK æ£€æŸ¥ï¼Œmysql ä¸æ”¯æŒ PRIMARY KEY ä¸»é”®ï¼Œè¯¥å­—æ®µçš„å€¼ä¸å¯é‡å¤å¹¶ä¸”éç©º unique+not null FPREIGN KEY å¤–é”®ï¼Œè¯¥å­—æ®µçš„å€¼å¼•ç”¨äº†å¦å¤–çš„æ ‡çš„å­—æ®µ ä¸»é”®å’Œå”¯ä¸€ 1.åŒºåˆ«ï¼š â€‹ â‘  ä¸€ä¸ªè¡¨è‡³å¤šæœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ â€‹ â‘¡ ä¸»é”®ä¸å…è®¸ä¸ºç©ºï¼Œå”¯ä¸€å¯ä»¥ä¸ºç©º 2.ç›¸åŒç‚¹ï¼š â€‹ éƒ½å…·æœ‰å”¯ä¸€æ€§ â€‹ éƒ½æ”¯æŒç»„åˆé”®ï¼Œä½†ä¸æ¨è å¤–é”®ï¼š â‘  ç”¨äºé™åˆ¶ä¸¤ä¸ªè¡¨çš„å…³ç³»ï¼Œä»è¡¨çš„å­—æ®µå€¼å¼•ç”¨äº†ä¸»è¡¨çš„æŸä¸ªå­—æ®µå€¼ â‘¡ å¤–é”®åˆ—å’Œä¸»è¡¨çš„è¢«å¼•ç”¨åˆ—è¦æ±‚ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰ä¸€æ ·ï¼Œåç§°æ— è¦æ±‚ â‘¢ ä¸»è¡¨çš„è¢«å¼•ç”¨åˆ—è¦æ±‚æ˜¯ä¸€ä¸ª key(ä¸€èˆ¬å°±æ˜¯ä¸»é”®) â‘£ æ’å…¥æ•°æ®ï¼Œå…ˆæ’å…¥ä¸»è¡¨ â€‹ åˆ é™¤æ•°æ®ï¼Œå…ˆåˆ é™¤ä»è¡¨ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥åˆ é™¤ä¸»è¡¨çš„è®°å½• ä»£ç ç¤ºä¾‹ï¼š â€‹ æ–¹å¼ä¸€ï¼šçº§è”åˆ é™¤ 1ALTER TABLE stuinfo ADD CONSTRAINT fk_stu_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE CASCADE; â€‹ æ–¹å¼äºŒï¼šçº§è”ç½®ç©º 1ALTER TABLE stuinfo ADD CONSTRAINT fk_stu_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE SET NULL; äºŒã€åˆ›å»ºè¡¨çš„æ·»åŠ çº¦æŸ create table è¡¨åï¼ˆ â€‹ å­—æ®µå å­—æ®µç±»å‹ not null ,#éç©º â€‹ å­—æ®µå å­—æ®µç±»å‹ primary key,#ä¸»é”® â€‹ å­—æ®µå å­—æ®µç±»å‹ unique,#å”¯ä¸€ â€‹ å­—æ®µå å­—æ®µç±»å‹ default å€¼ï¼Œ #é»˜è®¤ â€‹ constraint çº¦æŸå foreign key(å­—æ®µå) references ä¸»è¡¨(è¢«å¼•ç”¨åˆ— 1) ï¼‰ æ³¨æ„ï¼š æ”¯æŒç±»å‹ å¯ä»¥èµ·çº¦æŸå åˆ—çº§çº¦æŸ é™¤äº†å¤–é”® ä¸å¯ä»¥ è¡¨çº§çº¦æŸ é™¤äº†éç©ºå’Œé»˜è®¤ å¯ä»¥ï¼Œä½†å¯¹ä¸»é”®æ— æ•ˆ åˆ—çº§çº¦æŸå¯ä»¥åœ¨ä¸€ä¸ªå­—æ®µä¸Šè¿½åŠ å¤šä¸ªï¼Œä¸­é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œæ²¡æœ‰é¡ºåºè¦æ±‚ ä¸‰ã€ä¿®æ”¹è¡¨æ—¶æ·»åŠ æˆ–åˆ é™¤çº¦æŸ 1.éç©º â€‹ æ·»åŠ éç©º â€‹ alter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹ not null; â€‹ åˆ é™¤éç©º â€‹ alter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹; 2.é»˜è®¤ â€‹ æ·»åŠ é»˜è®¤ â€‹ alter table è¡¨å modify columu å­—æ®µå å­—æ®µç±»å‹ default å€¼; â€‹ åˆ é™¤é»˜è®¤ â€‹ alter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹; 3.ä¸»é”® â€‹ æ·»åŠ ä¸»é”® â€‹ alter table è¡¨å addã€ constraint çº¦æŸåã€‘ primary key(å­—æ®µå)ï¼› â€‹ åˆ é™¤ä¸»é”® â€‹ alter table è¡¨å add drop primary key; 4.å”¯ä¸€ â€‹ æ·»åŠ å”¯ä¸€ â€‹ alter table è¡¨å addã€constraint çº¦æŸåã€‘ unique(å­—æ®µå); â€‹ åˆ é™¤å”¯ä¸€ â€‹ alter table è¡¨å drop index ç´¢å¼•å; 5.å¤–é”® â€‹ æ·»åŠ å¤–é”® â€‹ alter table è¡¨å addã€constraint çº¦æŸåã€‘ foreign key(å­—æ®µå) references ä¸»è¡¨(è¢«å¼•ç”¨åˆ—) â€‹ åˆ é™¤å¤–é”® â€‹ alter table è¡¨å drop foreign key çº¦æŸå; å››ã€è‡ªå¢é•¿åˆ— ç‰¹å®šï¼š â€‹ 1.ä¸ç”¨æ‰‹åŠ¨æ’å…¥å€¼ï¼Œå¯ä»¥è‡ªåŠ¨æä¾›åºåˆ—å€¼ï¼Œé»˜è®¤ä» 1 å¼€å§‹ï¼Œæ­¥é•¿ä¸º 1 â€‹ auto_increment_increment â€‹ å¦‚æœè¦æ›´æ”¹èµ·å§‹å€¼ï¼šæ‰‹åŠ¨æ’å…¥å€¼ â€‹ å¦‚æœè¦æ›´æ”¹æ­¥é•¿ï¼šæ›´æ”¹ç³»ç»Ÿå˜é‡ â€‹ set auto_increment_increment=å€¼ â€‹ 2.ä¸€ä¸ªè¡¨è‡³å¤šæœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ— â€‹ 3.è‡ªå¢é•¿åˆ—åªèƒ½æ”¯æŒæ•°å€¼å‹ â€‹ 4.è‡ªå¢é•¿åˆ—å¿…é¡»ä¸ºä¸€ä¸ª key åˆ›å»ºè¡¨æ—¶è®¾ç½®è‡ªå¢é•¿åˆ— â€‹ create table è¡¨( â€‹ å­—æ®µå å­—æ®µç±»å‹ çº¦æŸ auto_increment â€‹ ) ä¿®æ”¹è¡¨æ—¶è®¾ç½®è‡ªå¢é•¿åˆ— â€‹ alter table è¡¨ modify column colum å­—æ®µå å­—æ®µç±»å‹ çº¦æŸ auto_increment åˆ é™¤è‡ªå¢é•¿åˆ— â€‹ alter table è¡¨ modify column å­—æ®µå å­—æ®µç±»å‹ çº¦æŸ DML è¯­è¨€æ’å…¥1ã€æ–¹å¼ä¸€ è¯­æ³•ï¼š insert into è¡¨å(å­—æ®µå,â€¦) values(å€¼,â€¦); ç‰¹ç‚¹ï¼š â€‹ 1ã€è¦æ±‚å€¼çš„ç±»å‹å’Œå­—æ®µçš„ç±»å‹è¦ä¸€è‡´æˆ–å…¼å®¹ â€‹ 2ã€å­—æ®µçš„ä¸ªæ•°å’Œé¡ºåºä¸ä¸€å®šä¸åŸå§‹è¡¨ä¸­çš„å­—æ®µä¸ªæ•°å’Œé¡ºåºä¸€è‡´ ä½†å¿…é¡»ä¿è¯å€¼å’Œå­—æ®µä¸€ä¸€å¯¹åº” â€‹ 3ã€å‡å¦‚è¡¨ä¸­æœ‰å¯ä»¥ä¸º null çš„å­—æ®µï¼Œæ³¨æ„å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ’å…¥ null å€¼ â€‹ â‘  å­—æ®µå’Œå€¼éƒ½çœç•¥ â‘¡ å­—æ®µå†™ä¸Šï¼Œå€¼ä½¿ç”¨ null â€‹ 4ã€å­—æ®µå’Œå€¼çš„ä¸ªæ•°å¿…é¡»ä¸€è‡´ â€‹ 5ã€å­—æ®µåå¯ä»¥çœç•¥ï¼Œé»˜è®¤æ‰€æœ‰åˆ— 2ã€æ–¹å¼äºŒ è¯­æ³•ï¼š insert into è¡¨å set å­—æ®µ=å€¼,å­—æ®µ=å€¼,â€¦; ä¸¤ç§æ–¹å¼ çš„åŒºåˆ«ï¼š â€‹ 1.æ–¹å¼ä¸€æ”¯æŒä¸€æ¬¡æ’å…¥å¤šè¡Œï¼Œè¯­æ³•å¦‚ä¸‹ï¼š insert into è¡¨åã€(å­—æ®µå,..)ã€‘ values(å€¼ï¼Œ..),(å€¼ï¼Œâ€¦),â€¦; â€‹ 2.æ–¹å¼ä¸€æ”¯æŒå­æŸ¥è¯¢ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š insert into è¡¨å æŸ¥è¯¢è¯­å¥; ä¿®æ”¹1ã€ä¿®æ”¹å•è¡¨çš„è®°å½• è¯­æ³•ï¼šupdate è¡¨å set å­—æ®µ=å€¼ï¼Œå­—æ®µ=å€¼ã€where ç­›é€‰æ¡ä»¶ã€‘ 2ã€ä¿®æ”¹å¤šè¡¨çš„è®°å½•ã€è¡¥å……ã€‘ è¯­æ³•ï¼š update è¡¨ 1 åˆ«å left|right|inner join è¡¨ 2 åˆ«å on è¿æ¥æ¡ä»¶ set å­—æ®µ=å€¼ï¼Œå­—æ®µ=å€¼ ã€where ç­›é€‰æ¡ä»¶ã€‘ åˆ é™¤1ã€ä½¿ç”¨ delete åˆ é™¤å•è¡¨çš„è®°å½• â€‹ è¯­æ³•ï¼šdelete åˆ«å 1ï¼Œåˆ«å 2 from è¡¨ 1 åˆ«å â€‹ inner| left | right join è¡¨ 2 åˆ«å on è¿æ¥æ¡ä»¶ â€‹ ã€where ç­›é€‰æ¡ä»¶ã€‘ 2ã€ ä½¿ç”¨ truncate è¯­æ³•ï¼štruncate table è¡¨å 3ã€ä¸¤ç§æ–¹å¼çš„åŒºåˆ« #ã€é¢è¯•é¢˜ã€‘delete å’Œ truncate çš„åŒºåˆ« 1.delete å¯ä»¥æ·»åŠ  WHERE æ¡ä»¶ â€‹ TRUNCATE ä¸èƒ½æ·»åŠ  WHERE æ¡ä»¶ï¼Œä¸€æ¬¡æ€§æ¸…é™¤æ‰€æœ‰æ•°æ® 2.truncate çš„æ•ˆç‡è¾ƒé«˜ 3.å¦‚æœåˆ é™¤å¸¦è‡ªå¢é•¿åˆ—çš„è¡¨ï¼Œ â€‹ ä½¿ç”¨ DELETE åˆ é™¤åï¼Œé‡æ–°æ’å…¥æ•°æ®ï¼Œè®°å½•ä»æ–­ç‚¹å¤„å¼€å§‹ â€‹ ä½¿ç”¨ TRUNCATE åˆ é™¤åï¼Œé‡æ–°æ’å…¥æ•°æ®ï¼Œè®°å½•ä» 1 å¼€å§‹ â€‹ SELECT * FROM gradeinfo; â€‹ TRUNCATE TABLE gradeinfo; â€‹ INSERT INTO gradeinfo(gradename)VALUES(â€˜ä¸€å¹´çº§â€™),(â€˜2 å¹´çº§â€™),(â€˜3 å¹´çº§â€™); 4.delete åˆ é™¤æ•°æ®ï¼Œä¼šè¿”å›å—å½±å“çš„è¡Œæ•° â€‹ TRUNCATE åˆ é™¤æ•°æ®ï¼Œä¸è¿”å›å—å½±å“çš„è¡Œæ•° 5.delete åˆ é™¤æ•°æ®ï¼Œå¯ä»¥æ”¯æŒäº‹åŠ¡å›æ»š â€‹ TRUNCATE åˆ é™¤æ•°æ®ï¼Œä¸æ”¯æŒäº‹åŠ¡å›æ»š ä»£ç ç¤ºä¾‹ï¼š æ·»åŠ  1INSERT INTO stuinfo values(1,&#x27;å´å€©&#x27;,&#x27;å¥³&#x27;,&#x27;wuqian@qq.com&#x27;,&#x27;2001.1.2&#x27;); ä¿®æ”¹(ä¿®æ”¹å¹´é¾„&lt;20 çš„ä¸“ä¸šç¼–å·ä¸º 3 å·ï¼Œä¸”é‚®ç®±æ›´æ”¹ä¸º &#x78;&#120;&#x40;&#113;&#x71;&#x2e;&#99;&#111;&#109;) 12UPDATE stuinfo SET majorid = 3,email = &#x27;xx@qq.com&#x27;WHERE age&lt;20; åˆ é™¤ 12345#æ¡ˆä¾‹1ï¼šåˆ é™¤å§“ææ‰€æœ‰ä¿¡æ¯DELETE FROM stuinfoWHERE stuname LIKE &#x27;æ%&#x27;ï¼›#æ¡ˆä¾‹2ï¼šåˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®TRUNCATE TABLE stuinfo; äº‹åŠ¡1ã€å«ä¹‰ äº‹åŠ¡:ä¸€æ¡æˆ–å¤šæ¡ sql è¯­å¥ç»„æˆä¸€ä¸ªæ‰§è¡Œå•ä½ï¼Œä¸€ç»„ sql è¯­å¥è¦ä¹ˆéƒ½æ‰§è¡Œè¦ä¹ˆä¸æ‰§è¡Œ 2ã€ç‰¹ç‚¹ A åŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡æ˜¯ä¸å¯å†åˆ†å‰²çš„æ•´ä½“ï¼Œè¦ä¹ˆéƒ½æ‰§è¡Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œ C ä¸€è‡´æ€§ï¼šä¸€ä¸ªäº‹åŠ¡å¯ä»¥ä½¿æ•°æ®ä»ä¸€ä¸ªçŠ¶æ€åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ I éš”ç¦»æ€§ï¼š ä¸€ä¸ªäº‹åŠ¡ä¸å—å…¶ä»–äº‹åŠ¡çš„å¹²æ‰°ï¼Œå¤šä¸ªäº‹åŠ¡ç›¸äº’éš”ç¦»çš„ D æŒä¹…æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤äº†ï¼Œåˆ™æ°¸ä¹…çš„æŒä¹…åŒ–åˆ°æœ¬åœ° 3ã€äº‹åŠ¡çš„ä½¿ç”¨æ­¥éª¤ éšå¼ï¼ˆè‡ªåŠ¨ï¼‰äº‹åŠ¡ï¼šæ²¡æœ‰æ˜æ˜¾çš„å¼€å§‹çš„ç»“æŸï¼Œæœ¬èº«å°±æ˜¯ä¸€æ¡äº‹åŠ¡å¯ä»¥è‡ªåŠ¨æäº¤ï¼Œæ¯”å¦‚ insertã€updateã€delete æ˜¾å¼äº‹åŠ¡ï¼šå…·æœ‰æ˜æ˜¾çš„å¼€å¯å’Œç»“æŸã€‚ ä½¿ç”¨æ˜¾å¼äº‹åŠ¡ï¼š â‘  å¼€å¯äº‹åŠ¡ 12set autocommit = 0;start transactionï¼š#å¯ä»¥çœç•¥ è®¾ç½®å›æ»šç‚¹ï¼š æäº¤ï¼šcommit: å›æ»šï¼šrollback; å›æ»šåˆ°æŒ‡å®šçš„åœ°æ–¹ï¼›rollback to å›æ»šç‚¹åï¼š 4ã€å¹¶å‘äº‹åŠ¡ è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–å…¶ä»–äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œè¯»åˆ°çš„æ˜¯å…¶ä»–äº‹åŠ¡â€œæ›´æ–°â€çš„æ•°æ® ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯»å–ï¼Œç»“æœä¸ä¸€æ · å¹»è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å…¶ä»–äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œåªæ˜¯è¯»åˆ°çš„æ˜¯ å…¶ä»–äº‹åŠ¡â€æ’å…¥â€çš„æ•°æ® éš”ç¦»çº§åˆ«: è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» read uncommitted:è¯»æœªæäº¤ Ã— Ã— Ã— read committed:è¯»å·²æäº¤ âˆš Ã— Ã— repeatable readï¼šå¯é‡å¤è¯» âˆš âˆš Ã— serializableï¼šä¸²è¡ŒåŒ– âˆš âˆš âˆš","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://blog.oy6090.top/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"MySQL","slug":"MySQL","permalink":"http://blog.oy6090.top/tags/MySQL/"}]},{"title":"javaé¡¹ç›®ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ","slug":"Javaé¡¹ç›®ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ","date":"2020-08-02T16:00:00.000Z","updated":"2021-01-22T03:53:06.715Z","comments":true,"path":"posts/33872.html","link":"","permalink":"http://blog.oy6090.top/posts/33872.html","excerpt":"","text":"é¡¹ç›®çš„å…·ä½“æºç ï¼Œå·²ç»æ‰“åŒ…æ”¾åœ¨åšå®¢æœ«å°¾ Java é¡¹ç›®ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿæ­å»ºç¯å¢ƒ:â€‹ Idea é›†æˆå¼€å‘å·¥å…· æŠ€æœ¯ç‚¹ï¼š æ•°ç»„ é¢å‘å¯¹è±¡ ç»§æ‰¿ å¤šæ€ æ¥å£ å¼‚å¸¸çš„å¤„ç† é¡¹ç›®ç»“æ„ï¼š ä»£ç ç¤ºä¾‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119public class TeaView &#123; private NameLIstService lIstService = new NameLIstService(); private TeamService teamService = new TeamService(); public void enterMainMenu()&#123; boolean loopFlag = true; char key = 0; while(loopFlag)&#123; if(! (key == &#x27;1&#x27;))&#123; listAllEmployees(); &#125; System.out.print(&quot;1-å›¢é˜Ÿåˆ—è¡¨ 2-æ·»åŠ å›¢é˜Ÿæˆå‘˜ 3-åˆ é™¤å›¢é˜Ÿæˆå‘˜ 4-é€€å‡º è¯·é€‰æ‹©(1-4)ï¼š&quot;); key = TSUtility.readMenuSelection(); System.out.println(); switch (key)&#123; case &#x27;1&#x27;: getTeam(); break; case &#x27;2&#x27;: addMenber(); break; case &#x27;3&#x27;: deleMember(); break; case &#x27;4&#x27;: System.out.print(&quot;ç¡®è®¤æ˜¯å¦é€€å‡º(Y/N)ï¼š&quot;); char yn = TSUtility.readConfirmSelection(); if(yn == &#x27;Y&#x27;)&#123; loopFlag = false; break; &#125; &#125; &#125; &#125; /** * ä»¥è¡¨æ ¼å½¢å¼åˆ—å‡ºå…¬å¸æ‰€æœ‰çš„å‘˜å·¥ */ public void listAllEmployees()&#123; System.out.println(&quot;\\n--------------------å¼€å‘å›¢é˜Ÿè°ƒåº¦è½¯ä»¶---------------------\\n&quot;); Employee[] employees = lIstService.getAllEmployees(); if(employees.length == 0)&#123; System.out.println(&quot;æ²¡æœ‰å®¢æˆ·èµ„æ–™&quot;); &#125;else&#123; System.out.println(&quot;ID\\tå§“å\\t\\tå¹´é¾„\\t\\tå·¥èµ„\\t\\tèŒä½\\t\\tçŠ¶æ€\\t\\tå¥–é‡‘\\t\\tè‚¡ç¥¨\\t\\té¢†ç”¨è®¾å¤‡&quot;); &#125; for(Employee e : employees)&#123; System.out.println(&quot; &quot;+ e); &#125; System.out.println(&quot;-------------------------------------------------------------------------------&quot;); &#125; /** * æ˜¾ç¤ºå›¢é˜Ÿæˆå‘˜åˆ—è¡¨æ“ä½œ */ public void getTeam()&#123; System.out.println(&quot;\\n--------------------å›¢é˜Ÿæˆå‘˜åˆ—è¡¨---------------------\\n&quot;); Programmer[] team = teamService.getTeam(); if(team.length == 0)&#123; System.out.println(&quot;å¼€å‘å›¢é˜Ÿç›®å‰æ²¡æœ‰æˆå‘˜ï¼&quot;); &#125;else&#123; System.out.println(&quot;TID/ID\\tå§“å\\t\\tå¹´é¾„\\t\\tå·¥èµ„\\t\\tèŒä½\\t\\tå¥–é‡‘\\t\\tè‚¡ç¥¨&quot;); &#125; for(Programmer p : team)&#123; System.out.println(&quot; &quot; + p.getDetailsForTeam()); &#125; System.out.println(&quot;-----------------------------------------------------&quot;); &#125; /** * å®ç°æ·»åŠ æˆå‘˜çš„æ“ä½œ */ public void addMenber() &#123; System.out.println(&quot;---------------------æ·»åŠ æˆå‘˜---------------------&quot;); System.out.print(&quot;è¯·è¾“å…¥è¦æ·»åŠ çš„å‘˜å·¥ID: &quot;); int id = TSUtility.readInt(); try &#123; Employee e = lIstService.getEmployee(id); teamService.addMenber(e); System.out.println(&quot;æ·»åŠ æˆåŠŸ&quot;); &#125; catch (TeamException e) &#123; System.out.println(&quot;æ·»åŠ å¤±è´¥ï¼ŒåŸå› ï¼š&quot; + e.getMessage()); &#125; // æŒ‰å›è½¦é”®ç»§ç»­ TSUtility.readReturn(); &#125; /** * å®ç°åˆ é™¤æˆå‘˜æ“ä½œ */ public void deleMember()&#123; System.out.println(&quot;---------------------åˆ é™¤æˆå‘˜---------------------&quot;); System.out.print(&quot;è¯·è¾“å…¥è¦åˆ é™¤å‘˜å·¥çš„TIDï¼š&quot;); int id = TSUtility.readInt(); System.out.println(&quot;ç¡®è®¤æ˜¯å¦åˆ é™¤(Y/N)ï¼š&quot;); char yn = TSUtility.readConfirmSelection(); if(yn ==&#x27;N&#x27;)&#123; return; &#125; try &#123; teamService.removeMember(id); System.out.println(&quot;åˆ é™¤æˆåŠŸ&quot;); &#125; catch (TeamException e) &#123; System.out.println(&quot;åˆ é™¤å¤±è´¥ï¼ŒåŸå› ï¼š&quot; + e.getMessage()); &#125; //æŒ‰å›è½¦é”®ç»§ç»­ TSUtility.readReturn(); &#125; public static void main(String[] args)&#123; TeaView teaView = new TeaView(); teaView.enterMainMenu(); &#125;&#125; æå–ç ï¼škp6t ä¸‹è½½æºç ","categories":[{"name":"é¡¹ç›®å®æˆ˜","slug":"é¡¹ç›®å®æˆ˜","permalink":"http://blog.oy6090.top/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"javaé¡¹ç›®","slug":"javaé¡¹ç›®","permalink":"http://blog.oy6090.top/tags/java%E9%A1%B9%E7%9B%AE/"}]},{"title":"SpringMVCåŸºç¡€ï¼ˆä¸‹ç¯‡ï¼‰","slug":"SpringMVCåŸºç¡€çŸ¥è¯†ï¼ˆä¸‹ç¯‡ï¼‰","date":"2020-08-02T16:00:00.000Z","updated":"2020-10-25T02:28:45.901Z","comments":true,"path":"posts/4019007238.html","link":"","permalink":"http://blog.oy6090.top/posts/4019007238.html","excerpt":"","text":"ä¸€ã€å¤„ç† JSONâ€‹ JSON çŸ¥è¯†ï¼š JSON æœ‰ä¸¤ç§æ ¼å¼ï¼šâ‘  Json å¯¹è±¡ï¼š{key:value,key:valueâ€¦.}ï¼Œâ‘¡Json æ•°ç»„:[value1, value2â€¦] Json å¯¹è±¡è§£ææ–¹å¼ï¼š å¯¹è±¡.key; Json æ•°ç»„çš„è§£ææ–¹å¼ï¼šfor å¾ªç¯éå† java å¯¹è±¡è½¬ Jsonï¼š â‘  Bean å’Œ map â€”ã€‹Json å¯¹è±¡ï¼›â‘¡ List â€”ã€‹ json æ•°ç»„ 1ã€ è¿”å› JSON åŠ å…¥ jar åŒ…ï¼š ä¸‹è½½åœ°å€ï¼šhttps://repo1.maven.org/maven2/com/fasterxml/jackson/core/ æ³¨æ„ï¼š è¯·æ ¹æ®è‡ªå·±çš„ Spring ç‰ˆæœ¬ä¸‹è½½æœ€æ–°çš„ jarï¼Œå¦åˆ™æœ‰è‚¯èƒ½ä¼šæŠ¥é”™ã€‚ æŠ¥é”™å¼‚å¸¸å¯ä»¥å‚è€ƒæˆ‘è¿™ç¯‡åšå®¢ï¼šè§£å†³æ–¹æ¡ˆ SpringMVC å¤„ç† json å››ä¸ªæ¡ä»¶ â€‹ â‘  å¯¼å…¥ jackson çš„ jar â€‹ â‘¡ åœ¨ springMVC çš„é…ç½®æ–‡ä»¶ä¸­å¼€å¯ MVC é©±åŠ¨ï¼Œ&lt;mvc:annotation-driven /&gt; â€‹ â‘¢ åœ¨å¤„ç† ajax è¯·æ±‚çš„æ–¹æ³•ä¸ŠåŠ ä¸Šæ³¨è§£**@ResponseBody** â€‹ â‘£ å°†è¦è½¬æ¢ä¸º json ä¸”å“åº”åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œç›´æ¥ä½œä¸ºè¯¥æ–¹æ³•çš„è¿”å›å€¼è¿”å› ä»£ç ç¤ºä¾‹ ã€index.jspã€‘ 123456789101112131415161718192021222324252627&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;$Title$&lt;/title&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;pageContext.servletContext.contextPath&#125;/js/jquery-1.8.2.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; &gt; $(function () &#123; $(&#x27;#btn&#x27;).click(function () &#123; $.ajax(&#123; url:&quot;testJson&quot;, type:&quot;POST&quot;, dataType:&quot;json&quot;, success:function (msg) &#123; for(var i in msg)&#123; var emp = msg[i]; alert(&quot;id=&quot;+emp.id+&quot;,lastName=&quot;+emp.lastName+&quot;,departmentName=&quot;+emp.department.departmentName); &#125; &#125; &#125;); &#125;); &#125;); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;a href=&quot;testJson&quot;&gt;æµ‹è¯•JSON&lt;/a&gt; &lt;/body&gt;&lt;/html&gt; ã€JsonControllerTest.jsonã€‘**@ResponseBody : ** SpringMVC å¯¹ JSON çš„æ”¯æŒ 1234567891011121314@Controllerpublic class JsonControllerTest &#123; @Autowired private EmployeeDao employeeDao; @RequestMapping(value = &quot;/testJson&quot;) @ResponseBody public Collection&lt;Employee&gt; testJson()&#123; Collection&lt;Employee&gt; emps = employeeDao.getAll(); return emps; &#125;&#125; æµ‹è¯• 2ã€ ä½¿ç”¨ AJAXã€index.jspã€‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;html&gt; &lt;head&gt; &lt;title&gt;$Title$&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;$&#123;pageContext.servletContext.contextPath&#125;/css/index_like.css&quot; /&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;pageContext.servletContext.contextPath&#125;/js/jquery-1.8.2.min.js&quot; &gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; $(function () &#123; $(&quot;#btn&quot;).click(function () &#123; $.ajax(&#123; url: &quot;testJson&quot;, type: &quot;POST&quot;, dataType: &quot;json&quot;, success: function (msg) &#123; /* [ &#123;&quot;id&quot;:1001,&quot;lastName&quot;:&quot;E-AA&quot;,&quot;email&quot;:&quot;aa@163.com&quot;,&quot;gender&quot;:1,&quot;department&quot;:&#123;&quot;id&quot;:101,&quot;departmentName&quot;:&quot;D-AA&quot;&#125;&#125;, &#123;&quot;id&quot;:1002,&quot;lastName&quot;:&quot;E-BB&quot;,&quot;email&quot;:&quot;bb@163.com&quot;,&quot;gender&quot;:1,&quot;department&quot;:&#123;&quot;id&quot;:102,&quot;departmentName&quot;:&quot;D-BB&quot;&#125;&#125;, &#123;&quot;id&quot;:1003,&quot;lastName&quot;:&quot;E-CC&quot;,&quot;email&quot;:&quot;cc@163.com&quot;,&quot;gender&quot;:0,&quot;department&quot;:&#123;&quot;id&quot;:103,&quot;departmentName&quot;:&quot;D-CC&quot;&#125;&#125;, &#123;&quot;id&quot;:1004,&quot;lastName&quot;:&quot;E-DD&quot;,&quot;email&quot;:&quot;dd@163.com&quot;,&quot;gender&quot;:0,&quot;department&quot;:&#123;&quot;id&quot;:104,&quot;departmentName&quot;:&quot;D-DD&quot;&#125;&#125;, &#123;&quot;id&quot;:1005,&quot;lastName&quot;:&quot;E-EE&quot;,&quot;email&quot;:&quot;ee@163.com&quot;,&quot;gender&quot;:1,&quot;department&quot;:&#123;&quot;id&quot;:105,&quot;departmentName&quot;:&quot;D-EE&quot;&#125;&#125; ] */ // ç¬¬ä¸€ç§å®ç°æ–¹å¼ /*var tb = &quot;&lt;table&gt;&quot;; tb += &quot;&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;lastName&lt;/th&gt;&lt;th&gt;email&lt;/th&gt;&lt;th&gt;gender&lt;/th&gt;&lt;th&gt;departmentName&lt;/th&gt;&lt;/tr&gt;&quot; for(var i in msg)&#123; var emp = msg[i]; tb += &quot;&lt;tr&gt;&lt;td&gt;&quot;+emp.id+&quot;&lt;/td&gt;&lt;td&gt;&quot;+emp.lastName+&quot;&lt;/td&gt;&lt;td&gt;&quot;+emp.email+&quot;&lt;/td&gt;&lt;td&gt;&quot;+emp.gender+&quot;&lt;/td&gt;&lt;td&gt;&quot;+emp.department.departmentName+&quot;&lt;/td&gt;&lt;/tr&gt;&quot; &#125; tb += &quot;&lt;/table&gt;&quot; $(&#x27;body&#x27;).append(tb);*/ //ç¬¬äºŒç§å®ç°æ–¹å¼ $(&quot;body&quot;).append(&quot;&lt;table&gt;&lt;/table&gt;&quot;); $(&quot;table&quot;).append( &quot;&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;lastName&lt;/th&gt;&lt;th&gt;email&lt;/th&gt;&lt;th&gt;gender&lt;/th&gt;&lt;th&gt;departmentName&lt;/th&gt;&lt;/tr&gt;&quot; ); for (var i in msg) &#123; var emp = msg[i]; $(&quot;table&quot;).append( &quot;&lt;tr&gt;&lt;td&gt;&quot; + emp.id + &quot;&lt;/td&gt;&lt;td&gt;&quot; + emp.lastName + &quot;&lt;/td&gt;&lt;td&gt;&quot; + emp.email + &quot;&lt;/td&gt;&lt;td&gt;&quot; + emp.gender + &quot;&lt;/td&gt;&lt;td&gt;&quot; + emp.department.departmentName + &quot;&lt;/td&gt;&lt;/tr&gt;&quot; ); &#125; &#125;, &#125;); &#125;); &#125;); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;a href=&quot;hello&quot;&gt;æµ‹è¯•&lt;/a&gt; &lt;br /&gt; &lt;a href=&quot;testJson&quot;&gt;æµ‹è¯•JSON&lt;/a&gt; &lt;br /&gt; &lt;input id=&quot;btn&quot; type=&quot;button&quot; value=&quot;æµ‹è¯•ajax&quot; /&gt; &lt;/body&gt;&lt;/html&gt; æµ‹è¯•ï¼š äºŒã€HttpMessageConverter åŸç†1ã€HttpMessageConverter&lt;T&gt;HttpMessageConverter&lt;T&gt; æ˜¯ Spring3.0 æ–°æ·»åŠ çš„ä¸€ä¸ªæ¥å£ï¼Œ è´Ÿè´£å°†è¯·æ±‚ä¿¡æ¯è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ˆç±»å‹ä¸º Tï¼‰ï¼Œ å°†å¯¹è±¡ï¼ˆç±»å‹ä¸º Tï¼‰è¾“å‡ºä¸ºå“åº”ä¿¡æ¯ 2ã€HttpMessageConverter&lt;T&gt;æ¥å£å®šä¹‰çš„æ–¹æ³• Boolean canRead(Class&lt;?&gt; clazz,MediaType mediaType): æŒ‡å®šè½¬æ¢å™¨å¯ä»¥è¯»å–çš„å¯¹è±¡ç±»å‹ï¼Œå³è½¬ æ¢ å™¨ æ˜¯ å¦ å¯ å°† è¯· æ±‚ ä¿¡ æ¯ è½¬ æ¢ ä¸º clazz ç±» å‹ çš„ å¯¹ è±¡ ï¼Œ åŒ æ—¶ æŒ‡ å®š æ”¯ æŒ MIME ç±» å‹(text/html,applaiction/json ç­‰) Boolean canWrite(Class&lt;?&gt; clazz,MediaType mediaType):æŒ‡å®šè½¬æ¢å™¨æ˜¯å¦å¯å°† clazz ç±»å‹çš„å¯¹è±¡å†™åˆ°å“åº”æµä¸­ï¼Œå“åº”æµæ”¯æŒçš„åª’ä½“ç±»å‹åœ¨ MediaType ä¸­å®šä¹‰ã€‚ List&lt;MediaType&gt; getSupportMediaTypes()ï¼šè¯¥è½¬æ¢å™¨æ”¯æŒçš„åª’ä½“ç±»å‹ã€‚ T read(Class&lt;? extends T&gt; clazz,HttpInputMessage inputMessage)ï¼šå°†è¯·æ±‚ä¿¡æ¯æµè½¬æ¢ä¸º T ç±»å‹çš„å¯¹è±¡ã€‚ void write(T t,MediaType contnetType,HttpOutputMessgae outputMessage):å°† T ç±»å‹çš„å¯¹è±¡å†™åˆ°å“åº”æµä¸­ï¼ŒåŒæ—¶æŒ‡å®šç›¸åº”çš„åª’ä½“ç±»å‹ä¸º contentTypeã€‚ 123456package org.springframework.http;import java.io.IOException;import java.io.InputStream;public interface HttpInputMessage extends HttpMessage &#123; InputStream getBody() throws IOException;&#125; 123456package org.springframework.http;import java.io.IOException;import java.io.OutputStream;public interface HttpOutputMessage extends HttpMessage &#123; OutputStream getBody() throws IOException;&#125; 3ã€HttpMessageConverterä½¿ç”¨ HttpMessageConverter å°†è¯·æ±‚ä¿¡æ¯è½¬åŒ–å¹¶ç»‘å®šåˆ°å¤„ç†æ–¹æ³•çš„å…¥å‚ä¸­æˆ–å°†å“åº”ç»“æœè½¬ä¸ºå¯¹åº”ç±»å‹çš„å“åº”ä¿¡æ¯ï¼Œ Spring æä¾›äº†ä¸¤ç§é€”å¾„ï¼š ä½¿ç”¨ @RequestBody / @ResponseBody å¯¹å¤„ç†æ–¹æ³•è¿›è¡Œæ ‡æ³¨ ä½¿ç”¨ HttpEntity&lt;T&gt; / ResponseEntity&lt;T&gt; ä½œä¸ºå¤„ç†æ–¹æ³•çš„å…¥å‚æˆ–è¿”å›å€¼ ä¸‰ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½1ã€æ–‡ä»¶ä¸‹è½½ ä»£ç ç¤ºä¾‹ æ–¹å¼ä¸€ï¼šå›¾ç‰‡åå­—ç”±æœåŠ¡è¿›è¡Œç»‘å®š â€‹ ã€index.jspã€‘ 123&lt;body&gt; &lt;a href=&quot;down&quot;&gt;ä¸‹è½½å›¾ç‰‡&lt;/a&gt;&lt;/body&gt; â€‹ ã€TestUploadAndDownController.javaã€‘ 12345678910111213141516171819@RequestMapping(value = &quot;/down&quot;)public ResponseEntity&lt;byte[]&gt; down(HttpSession session) throws Exception &#123; // è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„ String realPath = session.getServletContext().getRealPath(&quot;img&quot;); String finalPath = realPath + File.separator + &quot;2.jpg&quot;; InputStream is = new FileInputStream(finalPath); // available():è·å–è¾“å…¥æµæ‰€è¯»å–çš„æ–‡ä»¶çš„æœ€å¤§å­—èŠ‚æ•° byte[] bt = new byte[is.available()]; is.read(bt); // è®¾ç½®è¯·æ±‚å¤´ HttpHeaders headers = new HttpHeaders(); headers.add(&quot;Content-Disposition&quot;,&quot;attachment;filename=zzz.jpg&quot;); // è®¾ç½®å“åº”çŠ¶æ€ HttpStatus status = HttpStatus.OK; ResponseEntity&lt;byte[]&gt; entity = new ResponseEntity&lt;&gt;(bt, headers, status); return entity;&#125; æµ‹è¯•ï¼š æ–¹å¼äºŒï¼š å›¾ç‰‡æœ‰è¯·æ±‚æ–¹å¼æ¥è·å– â€‹ ã€index.jspã€‘ 123&lt;body&gt; &lt;a href=&quot;down/1&quot;&gt;ä¸‹è½½å›¾ç‰‡&lt;/a&gt;&lt;/body&gt; â€‹ ã€TestUploadAndDownController.javaã€‘ 12345678910111213141516171819@RequestMapping(value = &quot;/down/&#123;username&#125;&quot;) public ResponseEntity&lt;byte[]&gt; down(@PathVariable(&quot;username&quot;) String username, HttpSession session) throws Exception &#123; // è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„ String realPath = session.getServletContext().getRealPath(&quot;img&quot;); String finalPath = realPath + File.separator + username+&quot;.jpg&quot;; InputStream is = new FileInputStream(finalPath); byte[] bt = new byte[is.available()]; is.read(bt); // è·å–è¯·æ±‚å¤´ HttpHeaders headers = new HttpHeaders(); headers.add(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+username+&quot;.jpg&quot;); // è®¾ç½®å“åº”çŠ¶æ€ HttpStatus status = HttpStatus.OK; ResponseEntity&lt;byte[]&gt; entity = new ResponseEntity&lt;&gt;(bt, headers, status); return entity;&#125; æµ‹è¯•ï¼š 2ã€æ–‡ä»¶ä¸Šä¼  å¯¼å…¥éœ€è¦çš„ Jar åŒ… ä»£ç ç¤ºä¾‹ ã€index.jspã€‘ 12345&lt;form action=&quot;up&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; å¤´åƒï¼š&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;/&gt; æè¿°ï¼š&lt;input type=&quot;text&quot; name=&quot;desc&quot;/&gt; &lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;&lt;/form&gt; â€‹ ã€é…ç½® spingmvc.xmlã€‘ä¸é…ç½®ä¸Šä¼ åˆ™ä¼šæŠ¥é”™ 12345678910&lt;!-- å¤„ç†æ–‡ä»¶ï¼Œå°†å®¢æˆ·ç«¯ä¸Šä¼ çš„Fileæ–‡ä»¶ï¼Œå¤„ç†ä¸ºMultipartFile æ³¨æ„ï¼šæ–‡ä»¶è§£æå™¨çš„beanä¸­idå¿…é¡»è®¾ç½®ä¸ºmultipartResolver --&gt;&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt; &lt;!-- è®¾ç½®æ–‡ä»¶è§£æçš„ç¼–ç ï¼Œæ³¨æ„ï¼šä¸€å®šè¦å’Œé¡µé¢çš„pageEncodingä¿æŒä¸€è‡´ --&gt; &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;&gt;&lt;/property&gt; &lt;!-- è®¾ç½®æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å° --&gt; &lt;property name=&quot;maxUploadSize&quot; value=&quot;88888888&quot;&gt;&lt;/property&gt;&lt;/bean&gt; ã€TestUploadAndDownController.javaã€‘ æ–¹å¼ä¸€ï¼š 12345678910111213141516171819@RequestMapping(value = &quot;/up&quot; ,method = RequestMethod.POST) public String up (String desc, MultipartFile uploadFile, HttpSession session) throws IOException &#123; // è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§° String filename = uploadFile.getOriginalFilename(); String path = session.getServletContext().getRealPath(&quot;phone&quot;) + File.separator + filename; // è·å–è¾“å…¥æµ InputStream is = uploadFile.getInputStream(); // è·å–è¾“å‡ºæµ File file = new File(path); OutputStream fos = new FileOutputStream(file); byte[] bt = new byte[1024]; int len; while((len = is.read(bt)) != -1)&#123; fos.write(bt, 0, len); &#125; is.close(); fos.close(); return &quot;success&quot;; &#125; æ³¨æ„ï¼šä¸Šä¼ å‡ºç°å¼‚å¸¸ ç±»å‹ å¼‚å¸¸æŠ¥å‘Š æ¶ˆæ¯ E:\\IDEA\\SpringMVC\\SpringMVC_demo3\\out\\artifacts\\SpringMVC_demo3_war_exploded\\phone\\1.jpg (ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚) java.io.FileNotFoundException: E:\\IDEA\\SpringMVC\\SpringMVC_demo3\\out\\artifacts\\SpringMVC_demo3_war_exploded\\phone\\1.jpg (ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚) è§£å†³æ–¹æ³•ï¼šï¼ˆä»¥ä¸ºè‡ªå·±çš„ä¸ºä¾‹å­ï¼‰E:\\IDEA\\SpringMVC\\SpringMVC_demo3\\out\\artifacts\\SpringMVC_demo3_war_exploded è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªphone æ–‡ä»¶å°±å¯è§£å†³é—®é¢˜ å¯ä»¥åœ¨ä»£ç ä¸­å†™å…¥ System.out.prinln(path); æ–¹ä¾¿æŸ¥çœ‹å›¾ç‰‡ä¸Šä¼ çš„ä½ç½® æ–¹å¼äºŒï¼š 12345678910@RequestMapping(value = &quot;/up&quot;,method = RequestMethod.POST)public String up (MultipartFile uploadFile, HttpSession session) throws IOException &#123; // è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§° String filename = uploadFile.getOriginalFilename(); String finalFileName = UUID.randomUUID() + filename.substring(filename.lastIndexOf(&quot;.&quot;)); String path = session.getServletContext().getRealPath(&quot;phone&quot;) + File.separator + finalFileName; File file = new File(path); uploadFile.transferTo(file); return &quot;success&quot;;&#125; 3ã€å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ã€index.jspã€‘ 123456&lt;form action=&quot;up&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; å¤´åƒï¼š&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;/&gt; å¤´åƒ1ï¼š&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;/&gt; å¤´åƒ2ï¼š&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;/&gt; &lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;&lt;/form&gt; ã€TestUploadAndDownController.javaã€‘ 1234567891011121314@RequestMapping(value = &quot;/up&quot;,method = RequestMethod.POST)public String ups(MultipartFile[] uploadFile, HttpSession session) throws IOException &#123; for(MultipartFile uploadFiles : uploadFile)&#123; // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º if(! uploadFiles.isEmpty())&#123; String filename = uploadFiles.getOriginalFilename(); String finalFileName = UUID.randomUUID() + filename.substring(filename.lastIndexOf(&quot;.&quot;)); String path = session.getServletContext().getRealPath(&quot;phone&quot;) + File.separator + finalFileName; File file = new File(path); uploadFiles.transferTo(file); &#125; &#125; return &quot;success&quot;;&#125; å››ã€æ‹¦æˆªå™¨1ã€ è‡ªå®šä¹‰æ‹¦æˆªå™¨â€‹ Spring MVC ä¹Ÿå¯ä»¥ä½¿ç”¨æ‹¦æˆªå™¨å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå¤„ç†ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„ åŠŸ èƒ½ ï¼Œ è‡ª å®š ä¹‰ çš„ æ‹¦ æˆª å™¨ å¯ ä»¥ å® ç° HandlerInterceptor æ¥ å£ ï¼Œ ä¹Ÿ å¯ ä»¥ ç»§ æ‰¿ HandlerInterceptorAdapter é€‚é…å™¨ç±» ã€‚ **preHandle()**ï¼šè¿™ä¸ªæ–¹æ³•åœ¨ä¸šåŠ¡å¤„ç†å™¨å¤„ç†è¯·æ±‚ä¹‹å‰è¢«è°ƒç”¨ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å¯¹ç”¨æˆ·è¯·æ±‚ request è¿›è¡Œå¤„ç†ã€‚å¦‚æœç¨‹åºå‘˜å†³å®šè¯¥æ‹¦æˆªå™¨å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå¤„ç†åè¿˜è¦è°ƒç”¨å…¶ä»–çš„æ‹¦æˆªå™¨ï¼Œæˆ–è€…æ˜¯ä¸šåŠ¡å¤„ç†å™¨å»è¿›è¡Œå¤„ç†ï¼Œåˆ™è¿”å› trueï¼›å¦‚æœç¨‹åºå‘˜å†³å®šä¸éœ€è¦å†è°ƒç”¨å…¶ä»–çš„ç»„ä»¶å»å¤„ç†è¯·æ±‚ï¼Œåˆ™è¿”å› falseã€‚ postHandle()ï¼š è¿™ä¸ªæ–¹æ³•åœ¨ä¸šåŠ¡å¤„ç†å™¨å¤„ç†å®Œè¯·æ±‚åï¼Œä½†æ˜¯ DispatcherServlet å‘å®¢æˆ·ç«¯è¿”å›å“åº”å‰è¢«è°ƒç”¨ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å¯¹ç”¨æˆ·è¯·æ±‚ request è¿›è¡Œå¤„ç†ã€‚ afterCompletion()ï¼šè¿™ä¸ªæ–¹æ³•åœ¨ DispatcherServlet å®Œå…¨å¤„ç†å®Œè¯·æ±‚åè¢«è°ƒç”¨ï¼Œå¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­è¿›è¡Œä¸€äº›èµ„æºæ¸…ç†çš„æ“ä½œã€‚ ä»£ç ç¤ºä¾‹ï¼š ã€spingmvc.xmlã€‘ä¸­é…ç½®æ‹¦æˆªå™¨ï¼ˆ3 ä¸­æ–¹å¼ï¼‰ â‘ ï¼ˆæ¨èä½¿ç”¨ï¼‰ï¼š 1234&lt;mvc:interceptors&gt; &lt;!--é»˜è®¤æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚--&gt; &lt;bean class=&quot;com.oy.online.springmvc.interceptor.FirstInterceptor&quot;&gt;&lt;/bean&gt;&lt;/mvc:interceptors&gt; â‘¡ï¼š 1234&lt;mvc:interceptors&gt; &lt;!--æ­¤æ–¹å¼è¦æ±‚æ‹¦æˆªå™¨ç±»ä¸Šå¿…é¡»åŠ æ³¨è§£@Component --&gt; &lt;ref bean=&quot;firstInterceptor&quot;&gt;&lt;/ref&gt;&lt;/mvc:interceptors&gt; â‘¢ï¼š 12345678910&lt;mvc:interceptors&gt; &lt;!-- è®¾ç½®è‡ªå®šä¹‰æ‹¦æˆªæ–¹å¼ --&gt; &lt;mvc:interceptor&gt; &lt;bean class=&quot;com.oy.online.springmvc.interceptor.FirstInterceptor&quot;/&gt; &lt;!-- æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œè¿™ä¸ªå¿…é¡»å†™åœ¨å‰é¢ï¼Œä¹Ÿå°±æ˜¯å†™åœ¨ã€ä¸æ‹¦æˆªã€‘çš„ä¸Šé¢ --&gt; &lt;mvc:mapping path=&quot;/**&quot; /&gt; &lt;!-- ä½†æ˜¯æ’é™¤ä¸‹é¢è¿™äº›ï¼Œä¹Ÿå°±æ˜¯ä¸æ‹¦æˆªè¯·æ±‚ --&gt; &lt;mvc:exclude-mapping path=&quot;/login.html&quot; /&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt; ã€index.jspã€‘ 123&lt;body&gt; &lt;a href=&quot;testInterceptor&quot;&gt;æµ‹è¯•æ‹¦æˆªå™¨&lt;/a&gt;&lt;/body&gt; ã€FirstInterceptor.javaã€‘ â€‹ preHandle(): ä¸­çš„ return å€¼ true è¡¨ç¤ºä¸æ‹¦æˆªæ”¾è¡Œï¼Œåä¹‹ false æ‹¦æˆª 1234567891011121314151617public class FirstInterceptor implements HandlerInterceptor &#123; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; System.out.println(&quot;First:preHandle&quot;); return true; &#125; @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123; System.out.println(&quot;First:postHandle&quot;); &#125; @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123; System.out.println(&quot;First:afterCompletion&quot;); &#125;&#125; ã€TestInterceptorController.javaã€‘ 12345678@Controllerpublic class TestInterceptorController &#123; @RequestMapping(value = &quot;/testInterceptor&quot;) public String testInterceptor()&#123; return &quot;success&quot;; &#125;&#125; æµ‹è¯•ï¼š 2ã€æ‹¦æˆªå™¨æ–¹æ³•æ‰§è¡Œé¡ºåº 3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå›¾è§£ï¼š æ€»ç»“ï¼š å½“æœ‰å¤šä¸ªæ‹¦æˆªå™¨æ—¶ï¼š preHandle: æŒ‰ç…§æ‹¦æˆªå™¨æ•°ç»„çš„æ­£å‘é¡ºåºæ‰§è¡Œ postHandle: æŒ‰ç…§æ‹¦æˆªå™¨æ•°ç»„å¾—åå‘é¡ºåºæ‰§è¡Œ afterCompletion: æŒ‰ç…§æ‹¦æˆªå™¨çš„æ•°ç»„åå‘é¡ºåºæ‰§è¡Œ å½“å¤šä¸ªæ‹¦æˆªå™¨çš„ PreHandle æœ‰ä¸åŒçš„å€¼æ—¶ ç¬¬ä¸€ä¸ªè¿”å› false,ç¬¬äºŒä¸ªè¿”å› false: åªæœ‰ç¬¬ä¸€ä¸ª preHandle ä¼šæ‰§è¡Œ ç¬¬ä¸€ä¸ªè¿”å› trueï¼Œ ç¬¬äºŒä¸ªè¿”å› false;ä¸¤ä¸ª(å…¨éƒ¨)æ‹¦æˆªå™¨çš„ preHandle éƒ½ä¼šæ‰§è¡Œï¼Œä½†æ˜¯ï¼ˆå…¨éƒ¨ï¼‰postHandle éƒ½ä¸ä¼šæ‰§è¡Œï¼Œè€Œ afterCompletion åªæœ‰ç¬¬ä¸€ä¸ªï¼ˆè¿”å› false çš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‰€æœ‰ afterCompletionï¼‰ä¼šæ‰§è¡Œ ç¬¬ä¸€ä¸ªè¿”å› fasle,ç¬¬äºŒä¸ªè¿”å› trueï¼› åªæœ‰ç¬¬ä¸€ä¸ªçš„ preHandle ä¼šæ‰§è¡Œ äº”ã€å¼‚å¸¸å¤„ç†1ã€å¼‚å¸¸å¤„ç†çš„æ¦‚è¿° SpringMVC é€šè¿‡ ExceptionResolver å¤„ç†ç¨‹åºçš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ Handler æ˜ å°„ã€æ•°æ®ç»‘å®šä»¥åŠç›®æ ‡æ–¹æ³•æ‰§è¡Œå‘ç”Ÿçš„å¼‚å¸¸ã€‚ SpringMVC æä¾› HandlerExceptionResolver çš„å®ç°ç±» 2ã€HandlerExceptionResolver DispatcherServlet é»˜è®¤è£…é…çš„ HandlerExceptionResolver æ²¡æœ‰ä½¿ç”¨ &lt;mvc:annotation-driven/&gt; é…ç½® ä½¿ç”¨äº† &lt;mvc:annotation-driven/&gt; é…ç½®ï¼š 3ã€å¼‚å¸¸å¤„ç†_DefaultHandlerExceptionResolverå¯¹ä¸€äº›ç‰¹æ®Šçš„å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ï¼š NoSuchRequestHandlingMethodException HttpRequestMethodNotSupportedException HttpMediaTypeNotSupportedException HttpMediaTypeNotAcceptableException ä»£ç ç¤ºä¾‹ï¼š ã€index.jspã€‘ 123&lt;body&gt; &lt;a href=&quot;testException&quot;&gt;å¼‚å¸¸æµ‹è¯•&lt;/a&gt;&lt;/body&gt; ã€ExceptionControllerTest.javaã€‘ 123456@RequestMapping(value = &quot;/testException&quot;,method = RequestMethod.POST) // ä¸èƒ½æ˜¯POSTè¯·æ±‚ public String testException()&#123; System.out.println(&quot;testDefaultHandlerExceptionResolver...&quot;); return &quot;success&quot;; &#125; æµ‹è¯•ï¼š 4ã€å¼‚å¸¸å¤„ç†_SimpleMappingExceptionResolver åœ¨ springmmvc.xml ä¸­é…ç½® 12345678&lt;!--å¼‚å¸¸å¤„ç†--&gt;&lt;bean id=&quot;simpleMappingExceptionResolver&quot; class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&gt; &lt;property name=&quot;exceptionMappings&quot;&gt; &lt;props&gt; &lt;prop key=&quot;java.lang.ArrayIndexOutOfBoundsException&quot;&gt;error&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt;&lt;/bean&gt; ã€ExceptionControllerTest.javaã€‘ 12345678@RequestMapping(value = &quot;/testSimpleMappingException&quot;)public String testSimpleMappingException()&#123; System.out.println(&quot;testSimpleMappingException....&quot;); String[] s = new String[10]; // s[i] ä¸‹æ ‡å¤§äºæ•°ç»„çš„é•¿åº¦ System.out.println(s[12]); return &quot;success&quot;;&#125; æµ‹è¯•ï¼š ã€eeor.jspã€‘ 12345&lt;body&gt; &lt;a href=&quot;#&quot;&gt;æ“ä½œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•&lt;/a&gt; &lt;br&gt; $&#123;requestScope.exception &#125;&lt;/body&gt; å…­ã€è¿è¡Œæµç¨‹1ã€ æµç¨‹å›¾ å·¥ä½œæµç¨‹æè¿°ï¼š ç”¨æˆ·å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚è¢« SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet æ•è·ï¼š DispatcherServlet å¯¹è¯·æ±‚è§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºçš„æ ‡è¯†ç¬¦ï¼ˆURLï¼‰ï¼š åˆ¤æ–­è¯·æ±‚ URL å¯¹åº”çš„æ˜ å°„ â‘  ä¸å­˜åœ¨ï¼š å†åˆ¤æ–­æ˜¯å¦é…ç½®äº† mvc:default-servlet-handlerï¼š å¦‚æœæ²¡é…ç½®ï¼Œåˆ™æ§åˆ¶å°æŠ¥æ˜ å°„æŸ¥æ‰¾ä¸åˆ°ï¼Œå®¢æˆ·ç«¯å±•ç¤º 404 é”™è¯¯ â‘¡ å­˜åœ¨ï¼š æ‰§è¡Œä¸‹é¢çš„æµç¨‹ æ ¹æ® URLï¼Œè°ƒç”¨ HandlerMapping è·å–è¯¥ Handler é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ Handler å¯¹è±¡ä»¥åŠ Handler å¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€å HandlerExecutionChain å¯¹è±¡çš„å½¢å¼è¿”å›ï¼š DispatcherServlet æ ¹æ®è·å¾—çš„ Handlerï¼Œ é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ HandlerAdapterã€‚ å¦‚æœæˆåŠŸè·å¾— HandlerAdapter åï¼Œæ­¤æ—¶å°†å¼€å§‹æ‹¦æˆªå™¨çš„ preHandler(â€¦) æ–¹æ³•ã€æ­£å‘ã€‘ æå– Request ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å…… Handler å…¥å‚ï¼Œå¼€å§‹æ‰§è¡Œ Handler ï¼ˆControllerï¼‰æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ã€‚åœ¨å¡«å…… Handler çš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®é…ç½®ï¼ŒSpringMVC å°†å¸®åŠ©åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š â‘  HttpMessageConverter: å°†è¯·æ±‚çš„ä¿¡æ¯ï¼ˆå¦‚ jsonã€xml çš„æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢æˆæŒ‡å®šçš„å“åº”ä¿¡æ¯ â‘¡ æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚çš„æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚ String è½¬æ¢ Integerã€Double ç­‰ã€‚ â‘¢ æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚çš„æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰ã€‚ â‘£ æ•°æ®éªŒè¯ï¼šéªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ° BindingResult æˆ– EEOR ä¸­ã€‚ Handler æ‰§è¡Œå®Œæˆåï¼Œå‘ DispatcherServlet è¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ æ­¤æ—¶å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ postHasndle(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ æ ¹æ®è¿”å›çš„ ModelAndView ï¼ˆæ­¤æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼šå¦‚æœå­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œ HandelExceptionResolver è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼‰é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ DispacherServletï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ çš„ ViewResolver ï¼‰è¿”å›ç»™ DispatcherServletï¼Œæ ¹æ® Model å’Œ Viewï¼Œ æ¥æ¸²æŸ“è¯•å›¾ åœ¨è¿”å›ç»™å®¢æˆ·ç«¯éœ€è¦æ‰§è¡Œæ‹¦æˆªå™¨çš„ AfterCompletion æ–¹æ³•ã€é€†å‘ã€‘ å°†æ¸²æŸ“çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ ä¸ƒã€Spring æ•´åˆ SpringMVC1ã€Spring ä¸ SpringMVC çš„æ•´åˆé—®é¢˜ éœ€è¦è¿›è¡Œ Spring æ•´åˆ SpringMVC å—ï¼Ÿ è¿˜æ˜¯éœ€è¦åŠ å…¥ Spring çš„ IOC å®¹å™¨ï¼Ÿ æ˜¯å¦éœ€è¦åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½®å¯åŠ¨ SpringMVC å®¹å™¨çš„ ContextLoaderListenerï¼Ÿ éœ€è¦ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œç±»ä¼¼äºæ•°æ®æºï¼Œäº‹åŠ¡ï¼Œæ•´åˆå…¶ä»–æ¡†æ¶éƒ½æ˜¯æ”¾åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­ï¼ˆè€Œä¸æ˜¯æ”¾åœ¨ SpringMVC çš„é…ç½®æ–‡ä»¶ä¸­ï¼‰ï¼Œå®é™…ä¸Šæ–¹å…¥ Spring é…ç½®æ–‡ä»¶å¯¹åº”çš„ IOC å®¹å™¨ä¸­è¿˜æœ‰ Servlet å’Œ Daoã€‚ ä¸éœ€è¦ï¼šéƒ½æ”¾åœ¨ SpringMVC çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥åˆ†å¤šä¸ª Spring çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ import èŠ‚ç‚¹å¯¼å…¥å…¶ä»–çš„é…ç½®æ–‡ä»¶ 2ã€Spring æ•´åˆ SpringMVC è§£å†³æ–¹æ¡ˆé…ç½®ç›‘å¬å™¨ ç›‘å¬å™¨é…ç½®ã€web.xmlã€‘ 12345678&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;&lt;/listener&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:bean.xml&lt;/param-value&gt;&lt;/context-param&gt; åˆ›å»º Spring çš„ ã€bean.xmlã€‘é…ç½®æ–‡ä»¶ï¼š 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--è®¾ç½®æ‰«æç»„ä»¶çš„åŒ…--&gt; &lt;context:component-scan base-package=&quot;com.oy.online.springmvc&quot;&gt; &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt; &lt;/context:component-scan&gt; &lt;!--&lt;bean id=&quot;teacher&quot; class=&quot;com.oy.online.springmvc.bean.Teacher&quot;&gt;&lt;/bean&gt;--&gt;&lt;/beans&gt; SpringMVC é…ç½®æ–‡ä»¶ï¼šã€Springmvc.xmlã€‘ 12345678910&lt;!-- è®¾ç½®æ‰«æç»„ä»¶çš„åŒ… --&gt;&lt;context:component-scan base-package=&quot;com.oy.online.springmvc.Controller&quot;/&gt;&lt;!-- é…ç½®è§†å›¾è§£æå™¨ --&gt;&lt;bean id=&quot;internalResourceViewResolver&quot;class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;/&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;&lt;/bean&gt;&lt;mvc:default-servlet-handler/&gt;&lt;mvc:annotation-driven/&gt; æ³¨æ„ï¼šåœ¨ Teanch ç±»ä¸­å¢åŠ æ„é€ æ–¹æ³•ï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æ„é€ å™¨æ‰§è¡Œæƒ…å†µã€‚è‹¥ Spring çš„ IOC å®¹å™¨ å’Œ SpringMVC çš„ IOC å®¹å™¨æ‰«æçš„åŒ…æœ‰é‡åˆçš„éƒ¨åˆ†ï¼Œå°±ä¼šå¯¼è‡´æœ‰çš„ bean ä¼šè¢«åˆ›å»º 2 æ¬¡ã€‚ è§£å†³ï¼šä½¿ Spring çš„ IOC å®¹å™¨æ‰«æçš„åŒ…å’Œ SpringMVC çš„ IOC å®¹å™¨æ‰«æçš„åŒ…æ²¡æœ‰é‡åˆçš„éƒ¨åˆ†.ä½¿ç”¨ exclude-filter å’Œ include-filter å­èŠ‚ç‚¹æ¥è§„å®šåªèƒ½æ‰«æçš„æ³¨è§£ ã€‚ ã€bean.xmlã€‘: &lt;!â€“ ä¸æ‰«æ@Controller æ³¨è§£ â€“&gt; ã€Springmvc.xmlã€‘ï¼š&lt;!â€“ æ‰«æ@Controller æ³¨è§£ â€“&gt; ã€index.jspã€‘ 123&lt;body&gt; &lt;a href=&quot;testListener&quot;&gt;ç›‘å¬å™¨æµ‹è¯•&lt;/a&gt;&lt;/body&gt; ã€SpringListener.javaã€‘ 12345678910111213public class SpringListener implements ServletContextListener &#123; @Override public void contextInitialized(ServletContextEvent servletContextEvent) &#123; ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;); ServletContext servletContext = servletContextEvent.getServletContext(); servletContext.setAttribute(&quot;context&quot;, context); &#125; @Override public void contextDestroyed(ServletContextEvent servletContextEvent) &#123; &#125;&#125; ã€ExceptionControllerTest.javaã€‘ 123456789101112@Controllerpublic class ExceptionControllerTest &#123; @RequestMapping() public void testListener(HttpSession session)&#123; // è·å–springæ‰€ç®¡ç†çš„teacherå¯¹è±¡ ServletContext servletContext = session.getServletContext(); ApplicationContext context = (ApplicationContext) servletContext.getAttribute(&quot;context&quot;); Teacher teacher = context.getBean(&quot;Teacher&quot;, Teacher.class); System.out.println(teacher); &#125;&#125; æµ‹è¯•ï¼š 3ã€SpringIOC å®¹å™¨å’Œ SpringMVC IOC å®¹å™¨çš„å…³ç³» SpringMVC çš„ IOC å®¹å™¨ä¸­çš„ bean å¯ä»¥æ¥å¼•ç”¨ Spring IOC å®¹å™¨ä¸­çš„ beanï¼Œä¹‹åˆ™ä¸è¡Œ. Spring IOC å®¹å™¨ä¸­çš„ bean å´ä¸èƒ½æ¥å¼•ç”¨ SpringMVC IOC å®¹å™¨ä¸­çš„ bean ã€‚ åœ¨ Spring MVC é…ç½®æ–‡ä»¶ä¸­å¼•ç”¨ä¸šåŠ¡å±‚çš„ Bean å¤šä¸ª Spring IOC å®¹å™¨ä¹‹é—´å¯ä»¥è®¾ç½®ä¸ºçˆ¶å­å…³ç³»ï¼Œä»¥å®ç°è‰¯å¥½çš„è§£è€¦ã€‚ Spring MVC WEB å±‚å®¹å™¨å¯ä½œä¸º â€œä¸šåŠ¡å±‚â€ Spring å®¹å™¨çš„å­å®¹å™¨ï¼šå³ WEB å±‚å®¹å™¨å¯ä»¥å¼•ç”¨ä¸šåŠ¡å±‚å®¹å™¨çš„ Beanï¼Œè€Œä¸šåŠ¡å±‚å®¹å™¨å´è®¿é—®ä¸åˆ° WEB å±‚å®¹å™¨çš„ Bean ã€‚ 4ã€SpringMVC å¯¹æ¯” Struts2 Spring MVC çš„å…¥å£æ˜¯ Servlet, è€Œ Struts2 æ˜¯ FilterSpring MVC ä¼šç¨å¾®æ¯” Struts2 å¿«äº›. Spring MVC æ˜¯åŸºäºæ–¹æ³•è®¾è®¡, è€Œ Sturts2 æ˜¯åŸºäºç±»,æ¯æ¬¡å‘ä¸€æ¬¡è¯·æ±‚éƒ½ä¼šå®ä¾‹ä¸€ä¸ª Action. Spring MVC ä½¿ç”¨æ›´åŠ ç®€æ´, å¼€å‘æ•ˆç‡ Spring MVC ç¡®å®æ¯” struts2 é«˜: æ”¯æŒ JSR303, å¤„ç† ajax çš„è¯·æ±‚æ›´æ–¹ä¾¿ Struts2 çš„ OGNL è¡¨è¾¾å¼ä½¿é¡µé¢çš„å¼€å‘æ•ˆç‡ç›¸æ¯” Spring MVC æ›´é«˜äº›","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://blog.oy6090.top/tags/SpringMVC/"}]},{"title":"javaé¡¹ç›®ï¼šå®¢æˆ·ç®¡ç†ç³»ç»Ÿ","slug":"javaé¡¹ç›®ï¼šå®¢æˆ·ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ","date":"2020-07-31T16:00:00.000Z","updated":"2021-01-22T03:51:27.900Z","comments":true,"path":"posts/10150.html","link":"","permalink":"http://blog.oy6090.top/posts/10150.html","excerpt":"","text":"æºç å·²ç»æ‰“åŒ…åœ¨åšå®¢æœ«å°¾ï¼Œæœ‰éœ€è¦çš„è¯è‡ªè¡Œä¸‹è½½ã€‚ java é¡¹ç›®ï¼š å®¢æˆ·ä¿¡æ¯ç®¡ç†ç³»ç»Ÿç¯å¢ƒï¼šâ€‹ Idea é›†æˆå¼€å‘å·¥å…· æŠ€æœ¯ç‚¹ï¼š é¢å‘å¯¹è±¡ æ•°ç»„ é¡¹ç›®ç»“æ„ï¼š ä»£ç å±•ç¤ºï¼šã€beanã€‘ Customer.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class Customer &#123; private String name; // å§“å private char gender; // æ€§åˆ« private int age; // å¹´é¾„ private String phone; // ç”µè¯ private String email; // é‚®ç®± public Customer() &#123; &#125; public Customer(String name, char gender, int age, String phone, String email) &#123; this.name = name; this.gender = gender; this.age = age; this.phone = phone; this.email = email; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public char getGender() &#123; return gender; &#125; public void setGender(char gender) &#123; this.gender = gender; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public String getPhone() &#123; return phone; &#125; public void setPhone(String phone) &#123; this.phone = phone; &#125; public String getEmail() &#123; return email; &#125; public void setEmail(String email) &#123; this.email = email; &#125;&#125; ã€serviceã€‘ CusomerList.java\\ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394/***@Description å†…éƒ¨å°è£…ä¸€ä¸ªCustomer[],æä¾›å¯¹Customeræ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œ*/public class CustomerList &#123; private Customer[] customers; private int total; // è®°å½•å­˜å‚¨ä¸ªæ•° /** * æ„é€ å™¨ï¼Œç”¨æ¥åˆå§‹åŒ–customeræ•°ç»„ * totalCustomer: æŒ‡å®šcustomer æ•°ç»„çš„æœ€å¤§ç©ºé—´ * @param totalCustomer */ public CustomerList(int totalCustomer)&#123; customers = new Customer[totalCustomer]; &#125; /** * æ·»åŠ æŒ‡å®šçš„å®¢æˆ·åˆ°æ•°ç»„ä¸­ * @param customer * @return æ·»åŠ æ˜¯å¦æˆåŠŸ */ public boolean addCustomer(Customer customer)&#123; if(customer != null &amp;&amp; total &lt; customers.length)&#123; customers[total++] = customer; return true; &#125; return false; &#125; /** * æ›¿æ¢æŒ‡å®šç´¢å¼•ä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´  * @param index * @param cust * @return */ public boolean replanceCustomer(int index, Customer cust)&#123; if(index &gt;= 0 &amp;&amp; index &lt; total)&#123; customers[index] = cust; return true; &#125; return false; &#125; /** * åˆ é™¤æŒ‡å®šç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´  * @param index * @return */ public boolean deleteCustomer(int index)&#123; if(index &gt;= 0 &amp;&amp; index &lt; total)&#123; for(int i = index; i &lt; total -1; i++)&#123; customers[i] = customers[i+1]; &#125; customers[total -1] = null; total--; // å­˜å‚¨äººæ•°åœ¨å‡å°‘1 // customers[--total] = null; return true; &#125; return false; &#125; /** * è·å–æ‰€æœ‰çš„customers å¯¹è±¡æ„æˆçš„æ•°ç»„ * @return */ public Customer[] getAllCustomers()&#123; Customer[] custs = new Customer[total]; // ç»™å…ƒç´ å¤åˆ¶ for(int i = 0; i &lt; custs.length; i++)&#123; custs[i] = customers[i]; &#125; return custs; &#125; /** * è¿”å›æŒ‡å®šçš„ç´¢å¼•ä½ç½®ä¸Šçš„Customer * @param index * @return å¦‚æœè¾“å…¥çš„indexä½ç½®ä¸Šçš„å…ƒç´ ä¸å­˜åœ¨ï¼Œè¿”å›Null */ public Customer getCustomer(int index)&#123; if(index &gt;= 0 &amp;&amp; index &lt; total)&#123; return customers[index]; &#125; return null; &#125; /** * è¿”å›Customerå¯¹è±¡çš„ä¸ªæ•° * @return */ public int getToTal()&#123; return total; &#125;&#125; ã€ulã€‘ CustomerView.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179public class CustomerView &#123; private CustomerList customerList = new CustomerList(10); public CustomerView()&#123; Customer customer = new Customer(&quot;æŸ¯å—&quot;,&#x27;ç”·&#x27;,23,&quot;13344453434&quot;,&quot;kennan@123.com&quot;); customerList.addCustomer(customer); &#125; public void enterMainMenu()&#123; boolean isFlag = true; do&#123; System.out.println(&quot;\\n-----------------å®¢æˆ·ä¿¡æ¯ç®¡ç†è½¯ä»¶-----------------\\n&quot;); System.out.println(&quot; 1 æ·» åŠ  å®¢ æˆ·&quot;); System.out.println(&quot; 2 ä¿® æ”¹ å®¢ æˆ·&quot;); System.out.println(&quot; 3 åˆ  é™¤ å®¢ æˆ·&quot;); System.out.println(&quot; 4 å®¢ æˆ· åˆ— è¡¨&quot;); System.out.println(&quot; 5 é€€ å‡º\\n&quot;); System.out.print(&quot; è¯·é€‰æ‹©(1-5)ï¼š&quot;); // ä»é”®ç›˜è·å–ç”¨æˆ·1-5çš„é€‰æ‹© char menu = CMUtility.readMenuSelection(); // ä½¿ç”¨switch-caseå¯¹ç”¨æˆ·é€‰æ‹©ï¼Œè¿›è¡ŒåŒºåˆ«å¤„ç† switch(menu)&#123; case &#x27;1&#x27;: addNewCustomer(); break; case &#x27;2&#x27;: modifyCustomer(); break; case &#x27;3&#x27;: deleteCustomer(); break; case &#x27;4&#x27;: listAllCustomer(); break; case &#x27;5&#x27;: System.out.print(&quot;ç¡®è®¤æ˜¯å¦é€€å‡º(Y/N)ï¼š&quot;); char exit = CMUtility.readConfirmSelection(); if(exit == &#x27;Y&#x27;)&#123; isFlag = false; &#125; &#125; &#125;while(isFlag); &#125; /** * æ·»åŠ ç”¨æˆ· */ public void addNewCustomer()&#123; System.out.println(&quot;---------------------æ·»åŠ å®¢æˆ·---------------------&quot;); System.out.print(&quot;å§“åï¼š&quot;); String name = CMUtility.readString(5); System.out.print(&quot;æ€§åˆ«ï¼š&quot;); char gender = CMUtility.readChar(); System.out.print(&quot;å¹´é¾„ï¼š&quot;); int age = CMUtility.readInt(); System.out.print(&quot;ç”µè¯ï¼š&quot;); String phone = CMUtility.readString(13); System.out.print(&quot;é‚®ç®±ï¼š&quot;); String email = CMUtility.readString(20); // å°è£…ä¸€ä¸ªå¯¹è±¡ Customer customer = new Customer(name, gender, age, phone, email); // å°†æ­¤å¯¹è±¡æ·»åŠ åˆ°CustomerListé‡Œçš„æ•°ç»„ä¸­ boolean flag = customerList.addCustomer(customer); if(flag)&#123; System.out.println(&quot;---------------------æ·»åŠ å®Œæˆ---------------------&quot;); &#125;else&#123; System.out.println(&quot;äººæ•°å·²è¾¾ä¸Šé™ï¼Œæ·»åŠ å¤±è´¥ï¼&quot;); &#125; &#125; /** * 2. ä¿®æ”¹å®¢æˆ· */ public void modifyCustomer()&#123; System.out.println(&quot;---------------------ä¿®æ”¹å®¢æˆ·---------------------&quot;); Customer customer; int index; for(;;)&#123; System.out.print(&quot;è¯·é€‰æ‹©å¾…ä¿®æ”¹å®¢æˆ·ç¼–å·(-1é€€å‡º)ï¼š&quot;); index = CMUtility.readInt(); if(index == -1)&#123; return; &#125; // å¯¹äºç”¨æˆ·æ¥å°†ï¼Œæˆ‘ä»¬è®©index é»˜è®¤ä»1å¼€å§‹ã€‚ customer = customerList.getCustomer(index -1); if(customer == null)&#123; System.out.println(&quot;æ— æ³•æ‰¾åˆ°æŒ‡å®šå®¢æˆ·ï¼&quot;); &#125;else&#123; break; &#125; &#125; // ä¿®æ”¹ç”¨æˆ·çš„ä¿¡æ¯ System.out.println(&quot;å§“å(&quot; + customer.getName() + &quot;):&quot;); // å¦‚æœç”¨æˆ·è¾“å…¥äº†å§“åï¼Œåˆ™è¿”å›ä½¿ç”¨è¾“å…¥çš„ä¿¡æ¯ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰è¾“å…¥ï¼Œç›´æ¥å›è½¦ï¼Œåˆ™è¿”å›customer.getName(); String name = CMUtility.readString(5, customer.getName()); System.out.println(&quot;æ€§åˆ«(&quot; + customer.getGender() + &quot;):&quot;); char gender = CMUtility.readChar(customer.getGender()); System.out.println(&quot;å¹´é¾„(&quot; + customer.getAge() + &quot;):&quot;); int age = CMUtility.readInt(customer.getAge()); System.out.println(&quot;ç”µè¯(&quot; + customer.getPhone() + &quot;):&quot;); String phone = CMUtility.readString(13, customer.getPhone()); System.out.println(&quot;é‚®ç®±(&quot; + customer.getEmail() + &quot;):&quot;); String email = CMUtility.readString(20, customer.getEmail()); // è·å–ç”¨æˆ·è¾“å…¥çš„å±æ€§ä»¥åï¼Œå¾—åˆ°æœ€æ–°çš„Customerå¯¹è±¡ customer = new Customer(name, gender, age, phone, email); // å¯¹äºç”¨æˆ·æ¥è®²ï¼Œæˆ‘ä»¬è®©indexé»˜è®¤ä»1å¼€å§‹ boolean flag = customerList.replanceCustomer(index -1, customer); if(flag)&#123; System.out.println(&quot;---------------------ä¿®æ”¹å®Œæˆ---------------------&quot;); &#125;else&#123; System.out.println(&quot;---------------------ä¿®æ”¹å¤±è´¥---------------------&quot;); &#125; &#125; /** * 3 åˆ é™¤å®¢æˆ· */ public void deleteCustomer()&#123; System.out.println(&quot;---------------------åˆ é™¤å®¢æˆ·---------------------&quot;); Customer customer; int index; for(;;)&#123; System.out.println(&quot;è¯·é€‰æ‹©å¾…åˆ é™¤å®¢æˆ·ç¼–å·(-1é€€å‡º)ï¼š&quot;); // é’ˆå¯¹æ™®é€šç”¨æˆ·æ¥è®²ï¼šæ­¤indexä»1å¼€å§‹ index = CMUtility.readInt(); if(index == -1)&#123; return; &#125; customer = customerList.getCustomer(index -1); if(customer == null)&#123; System.out.println(&quot;æ— æ³•æ‰¾åˆ°æŒ‡å®šçš„å®¢æˆ·ï¼&quot;); &#125;else&#123; break; &#125; &#125; // ä¸€æ—¦æ‰¾åˆ°ç›¸åº”çš„ç´¢å¼•ä½ç½®çš„customerä»¥åï¼Œè®©ç”¨æˆ·å†³å®šæ˜¯å¦ç¡®å®šåˆ é™¤ System.out.println(&quot;ç¡®è®¤æ˜¯å¦åˆ é™¤(Y/N)ï¼š&quot;); char deleOrNot = CMUtility.readChar(); if(deleOrNot == &#x27;Y&#x27;)&#123; boolean flag = customerList.deleteCustomer(index -1); if(flag)&#123; System.out.println(&quot;---------------------åˆ é™¤å®Œæˆ---------------------&quot;); &#125;else&#123; System.out.println(&quot;---------------------åˆ é™¤å¤±è´¥---------------------&quot;); &#125; &#125;else&#123; return; &#125; &#125; public void listAllCustomer()&#123; System.out.println(&quot;---------------------------å®¢æˆ·åˆ—è¡¨---------------------------&quot;); // è·å–æ‰€æœ‰çš„å®¢æˆ· Customer[] customers = customerList.getAllCustomers(); if(customers.length == 0)&#123; System.out.println(&quot;æ²¡æœ‰ä»»ä½•å®¢æˆ·è®°å½•ï¼&quot;); &#125;else&#123; System.out.println(&quot;ç¼–å·\\t\\tå§“å\\t\\tæ€§åˆ«\\t\\tå¹´é¾„\\t\\tç”µè¯\\t\\t\\t\\té‚®ç®±&quot;); for(int i = 0; i &lt; customers.length; i++)&#123; Customer cust = customers[i]; System.out.println((i + 1) + &quot;\\t\\t&quot; + cust.getName() + &quot;\\t\\t&quot; + cust.getGender() + &quot;\\t\\t&quot; + cust.getAge() + &quot;\\t\\t&quot; + cust.getPhone() + &quot;\\t\\t&quot; + cust.getEmail()); //æ–¹å¼äºŒï¼š //System.out.println((i + 1) + &quot;\\t&quot; + cust.info()); &#125; &#125; System.out.println(&quot;-------------------------å®¢æˆ·åˆ—è¡¨å®Œæˆ-------------------------&quot;); &#125; public static void main(String[] args)&#123; CustomerView view = new CustomerView(); view.enterMainMenu(); &#125;&#125; ã€utilã€‘ CMUtility.java å·¥å…·ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126import java.util.*;/**CMUtilityå·¥å…·ç±»ï¼šå°†ä¸åŒçš„åŠŸèƒ½å°è£…ä¸ºæ–¹æ³•ï¼Œå°±æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡è°ƒç”¨æ–¹æ³•ä½¿ç”¨å®ƒçš„åŠŸèƒ½ï¼Œè€Œæ— éœ€è€ƒè™‘å…·ä½“çš„åŠŸèƒ½å®ç°ç»†èŠ‚ã€‚*/public class CMUtility &#123; private static Scanner scanner = new Scanner(System.in); /** ç”¨äºç•Œé¢èœå•çš„é€‰æ‹©ã€‚è¯¥æ–¹æ³•è¯»å–é”®ç›˜ï¼Œå¦‚æœç”¨æˆ·é”®å…¥â€™1â€™-â€™5â€™ä¸­çš„ä»»æ„å­—ç¬¦ï¼Œåˆ™æ–¹æ³•è¿”å›ã€‚è¿”å›å€¼ä¸ºç”¨æˆ·é”®å…¥å­—ç¬¦ã€‚ */ public static char readMenuSelection() &#123; char c; for (; ; ) &#123; String str = readKeyBoard(1, false); c = str.charAt(0); if (c != &#x27;1&#x27; &amp;&amp; c != &#x27;2&#x27; &amp;&amp; c != &#x27;3&#x27; &amp;&amp; c != &#x27;4&#x27; &amp;&amp; c != &#x27;5&#x27;) &#123; System.out.print(&quot;é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;); &#125; else break; &#125; return c; &#125; /** ä»é”®ç›˜è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ */ public static char readChar() &#123; String str = readKeyBoard(1, false); return str.charAt(0); &#125; /** ä»é”®ç›˜è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ å¦‚æœç”¨æˆ·ä¸è¾“å…¥å­—ç¬¦è€Œç›´æ¥å›è½¦ï¼Œæ–¹æ³•å°†ä»¥defaultValue ä½œä¸ºè¿”å›å€¼ã€‚ */ public static char readChar(char defaultValue) &#123; String str = readKeyBoard(1, true); return (str.length() == 0) ? defaultValue : str.charAt(0); &#125; /** ä»é”®ç›˜è¯»å–ä¸€ä¸ªé•¿åº¦ä¸è¶…è¿‡2ä½çš„æ•´æ•°ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ */ public static int readInt() &#123; int n; for (; ; ) &#123; String str = readKeyBoard(2, false); try &#123; n = Integer.parseInt(str); break; &#125; catch (NumberFormatException e) &#123; System.out.print(&quot;æ•°å­—è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;); &#125; &#125; return n; &#125; /** ä»é”®ç›˜è¯»å–ä¸€ä¸ªé•¿åº¦ä¸è¶…è¿‡2ä½çš„æ•´æ•°ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ å¦‚æœç”¨æˆ·ä¸è¾“å…¥å­—ç¬¦è€Œç›´æ¥å›è½¦ï¼Œæ–¹æ³•å°†ä»¥defaultValue ä½œä¸ºè¿”å›å€¼ã€‚ */ public static int readInt(int defaultValue) &#123; int n; for (; ; ) &#123; String str = readKeyBoard(2, true); if (str.equals(&quot;&quot;)) &#123; return defaultValue; &#125; try &#123; n = Integer.parseInt(str); break; &#125; catch (NumberFormatException e) &#123; System.out.print(&quot;æ•°å­—è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;); &#125; &#125; return n; &#125; /** ä»é”®ç›˜è¯»å–ä¸€ä¸ªé•¿åº¦ä¸è¶…è¿‡limitçš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ */ public static String readString(int limit) &#123; return readKeyBoard(limit, false); &#125; /** ä»é”®ç›˜è¯»å–ä¸€ä¸ªé•¿åº¦ä¸è¶…è¿‡limitçš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ å¦‚æœç”¨æˆ·ä¸è¾“å…¥å­—ç¬¦è€Œç›´æ¥å›è½¦ï¼Œæ–¹æ³•å°†ä»¥defaultValue ä½œä¸ºè¿”å›å€¼ã€‚ */ public static String readString(int limit, String defaultValue) &#123; String str = readKeyBoard(limit, true); return str.equals(&quot;&quot;)? defaultValue : str; &#125; /** ç”¨äºç¡®è®¤é€‰æ‹©çš„è¾“å…¥ã€‚è¯¥æ–¹æ³•ä»é”®ç›˜è¯»å–â€˜Yâ€™æˆ–â€™Nâ€™ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚ */ public static char readConfirmSelection() &#123; char c; for (; ; ) &#123; String str = readKeyBoard(1, false).toUpperCase(); c = str.charAt(0); if (c == &#x27;Y&#x27; || c == &#x27;N&#x27;) &#123; break; &#125; else &#123; System.out.print(&quot;é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;); &#125; &#125; return c; &#125; private static String readKeyBoard(int limit, boolean blankReturn) &#123; String line = &quot;&quot;; while (scanner.hasNextLine()) &#123; line = scanner.nextLine(); if (line.length() == 0) &#123; if (blankReturn) return line; else continue; &#125; if (line.length() &lt; 1 || line.length() &gt; limit) &#123; System.out.print(&quot;è¾“å…¥é•¿åº¦ï¼ˆä¸å¤§äº&quot; + limit + &quot;ï¼‰é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š&quot;); continue; &#125; break; &#125; return line; &#125;&#125; æå–ç ï¼šqrj3 ä¸‹è½½æºç ","categories":[{"name":"é¡¹ç›®å®æˆ˜","slug":"é¡¹ç›®å®æˆ˜","permalink":"http://blog.oy6090.top/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"javaé¡¹ç›®","slug":"javaé¡¹ç›®","permalink":"http://blog.oy6090.top/tags/java%E9%A1%B9%E7%9B%AE/"}]},{"title":"SpringMVCåŸºç¡€ï¼ˆä¸Šç¯‡ï¼‰","slug":"SpringMVCåŸºç¡€(ä¸Šç¯‡)","date":"2020-07-29T16:00:00.000Z","updated":"2020-10-25T02:22:40.561Z","comments":true,"path":"posts/1905208898.html","link":"","permalink":"http://blog.oy6090.top/posts/1905208898.html","excerpt":"","text":"èµ„æ–™å·²ç»æ‰“åŒ…æ”¾åœ¨åšå®¢ä¸‹é¢ï¼ˆæ–‡ç« æœ«å°¾ï¼‰ æºç åˆ†æ æºä»£ç  ä¸€ã€SpringMVC å…¥é—¨æ¡ˆä¾‹ä¸ªäºº CSDN åšå®¢ï¼šCSDN ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ï¼šSpringMVC ä¹‹æ°¸è¿œçš„ Hello world äºŒã€ @RequestMapping æ³¨è§£1ã€@RequestMapping æ¦‚å¿µ åœ¨æ§åˆ¶å™¨çš„ç±»å®šä¹‰åŠæ–¹æ³•å®šä¹‰å¤„éƒ½å¯æ ‡æ³¨ @RequestMapping â€‹ â‘  æ ‡è®°åœ¨ç±»ä¸Šï¼šæä¾›åˆæ­¥çš„æ˜ å°„ä¿¡æ¯ã€‚ç›¸å¯¹äº WEB åº”ç”¨çš„æ ¹ç›®å½• â€‹ â‘¡ æ ‡è®°åœ¨æ–¹æ³•ä¸Šï¼šæä¾›ä¸€æ­¥çš„ç»†åˆ†æ˜ å°„ä¿¡æ¯ã€‚ç›¸å¯¹äºæ ‡è®°åœ¨ç±»çš„ URL è‹¥ç±»ä¸Šæœªæ ‡æ³¨ @RequestMappingï¼Œåˆ™æ–¹æ³•å¤„æ ‡è®°çš„ URL ç›¸å¯¹äº WEB åº”ç”¨çš„æ ¹ç›®å½• ä½œç”¨ï¼šDispatcherServlet æˆªè·è¯·æ±‚åï¼Œå°±é€šè¿‡æ§åˆ¶å™¨ä¸Š @RequestMapping æä¾›çš„æ˜ å°„ä¿¡æ¯ç¡®å®šè¯·æ±‚æ‰€å¯¹åº”çš„å¤„ç†æ–¹æ³•ã€‚ 2ã€RequestMapping å¯æ ‡æ³¨çš„ä½ç½®@RequestMappingï¼šè®¾ç½®è¯·æ±‚æ˜ å°„ï¼ŒæŠŠè¯·æ±‚å’Œæ§åˆ¶å±‚ä¸­çš„æ–¹æ³•è®¾ç½®æ˜ å°„å…³ç³» å½“è¯·æ±‚è·¯å¾„å’Œ@RequestMapping çš„ value å±æ€§å€¼ä¸€è‡´æ—¶ï¼Œåˆ™è¯¥æ³¨è§£çš„æ–¹æ³•å³ä¸ºå¤„ç†è¯·æ±‚çš„æ–¹æ³• 12345@RequestMapping(&quot;/hello&quot;)public String hello()&#123; System.out.println(&quot;hello&quot;); return &quot;hello&quot;;&#125; @RequestMapping å¯ä»¥åŠ åœ¨ç±»ä¸Šï¼Œä¹Ÿå¯åŠ åœ¨æ–¹æ³•ä¸Šã€‚ 12345678910@Controller@RequestMapping(&quot;/test&quot;)public class ControllerTest &#123; @RequestMapping(&quot;/hello&quot;) public String hello()&#123; System.out.println(&quot;hello&quot;); return &quot;hello&quot;; &#125;&#125; è‹¥ç±»å’Œæ–¹æ³•ä¸ŠåŠ å¾—æœ‰ï¼Œåº”è¯¥ä¸€å±‚ä¸€å±‚çš„è®¿é—®ï¼Œå…ˆè®¿é—®ç±»ï¼Œåœ¨è®¿é—®ç±»ä¸­çš„æ–¹æ³• 3ã€RequestMapping æ˜ å°„è¯·æ±‚æ–¹å¼ methodï¼šç”¨æ¥è®¾ç½®è¯·æ±‚æ–¹å¼åªæœ‰å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ–¹å¼å’Œ method çš„å€¼ä¸€è‡´ï¼Œæ‰èƒ½å¤„ç†è¯·æ±‚ã€‚ è¯·æ±‚æ–¹å¼ï¼š GETï¼ˆæŸ¥è¯¢ï¼‰ POSTï¼ˆæ·»åŠ ï¼‰PUTï¼ˆä¿®æ”¹ï¼‰DELETEï¼ˆåˆ é™¤ï¼‰ 1@RequestMapping(value = &quot;/hello&quot;, method = RequestMethod.GET) params: ç”¨æ¥è®¾ç½®å®¢æˆ·ç«¯ä¼ åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œæ”¯æŒè¡¨è¾¾å¼ã€‚ ä¾‹å¦‚ï¼šusername !username username=admin username!=admin 1@RequestMapping(value = &quot;/hello&quot;, params= &#123;&quot;username&quot;,&quot;age!=12&quot;&#125; ) headers: ç”¨æ¥è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ï¼Œæ‰€å‘é€çš„è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯ä¸€å®šè¦å’Œ headers å±æ€§ä¸­æ‰€è®¾ç½®çš„ä¸€è‡´ 1@RequestMapping(value = &quot;/hello&quot;, headers= &#123;&quot;Accept-Language=zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&quot;&#125; ) 4ã€RequestMapping æ”¯æŒ Ant è·¯å¾„é£æ ¼ Ant é£æ ¼èµ„æºåœ°å€æ”¯æŒ 3 ç§åŒ¹é… ?ï¼šåŒ¹é…æ–‡ä»¶åä¸­çš„ä¸€ä¸ªå­—ç¬¦ *ï¼šåŒ¹é…æ–‡ä»¶åä¸­çš„ä»»æ„å­—ç¬¦ **ï¼š** åŒ¹é…å¤šå±‚è·¯å¾„ @RequestMapping æ”¯æŒ Ant é£æ ¼çš„ URL ä¾‹å¦‚ï¼š/user/*/createUser åŒ¹é… /user/aaa/createUserã€/user/bbb/createUser ç­‰ URL ä¾‹å¦‚ï¼š/user/**/createUser åŒ¹é… /user/createUserã€/user/**aaa/bbb/**createUser ç­‰ URL 12345@RequestMapping(value = &quot;/*/ant??/**/testAnt&quot;)public String hello1()&#123; System.out.println(&quot;hello&quot;); return &quot;hello&quot;;&#125; 5ã€RequestMapping æ˜ å°„è¯·æ±‚å ä½ç¬¦ PathVariable æ³¨è§£â€‹ é€šè¿‡ @PathVariable å¯ä»¥å°† URL ä¸­å ä½ç¬¦å‚æ•°ç»‘å®šåˆ°æ§åˆ¶å™¨å¤„ç†æ–¹æ³•çš„å…¥å‚ä¸­ï¼šURL ä¸­çš„ {xxx} å ä½ç¬¦å¯ä»¥é€šè¿‡ @PathVariable(â€œxxxâ€œ) ç»‘å®šåˆ°æ“ä½œæ–¹æ³•çš„å…¥å‚ä¸­ã€‚ 12345@RequestMapping(&quot;/testREST/&#123;id&#125;/&#123;username&#125;&quot;)public String testREST(@PathVariable Integer id, @PathVariable String username)&#123; System.out.println(&quot;id=&quot; + id +&quot;,username=&quot;+username); return &quot;hello&quot;;&#125; ä¸‰ã€REST1ã€ç®€ä»‹ RESTRESTï¼šå³ Representational State Transfer ã€‚ï¼ˆèµ„æºï¼‰è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€‚æ˜¯ç›®å‰æœ€æµè¡Œçš„ä¸€ç§äº’è”ç½‘è½¯ä»¶æ¶æ„ã€‚ 2ã€é…ç½® HiddenHTTPMethodFilter è¿‡æ»¤å™¨åœ¨web.xmlä¸­é…ç½® 12345678&lt;filter&gt; &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; 3ã€åŸç†å›¾ 4ã€ä»£ç ç¤ºä¾‹ GET åœ¨ web ç›®å½•ä¸‹åˆ›å»º rest.jsp æ–‡ä»¶ 123&lt;body&gt; &lt;a href=&quot;testREST/100&quot;&gt;æµ‹è¯•GET&lt;/a&gt;&lt;/body&gt; 12345@RequestMapping(value = &quot;/testREST/&#123;id&#125;&quot;,method = RequestMethod.GET)public String getUserById(@PathVariable(&quot;id&quot;) Integer id)&#123; System.out.println(&quot;GET,id=&quot;+id); return &quot;success&quot;;&#125; POST ã€rest.jspã€‘ 123&lt;form action=&quot;testREST&quot; method=&quot;post&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;æµ‹è¯•POST&quot;&gt;&lt;/form&gt; 12345@RequestMapping(value = &quot;/testREST&quot;, method = RequestMethod.POST)public String insertUser()&#123; System.out.println(&quot;POSt&quot;); return &quot;success&quot;;&#125; PUT ã€rest.jspã€‘ 1234&lt;form action=&quot;testREST&quot; method=&quot;POST&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;PUT&quot; /&gt; &lt;input type=&quot;submit&quot; value=&quot;æµ‹è¯•PUT&quot; /&gt;&lt;/form&gt; 12345@RequestMapping(value = &quot;/testREST&quot;, method = RequestMethod.POST)public String insertUser()&#123; System.out.println(&quot;POSt&quot;); return &quot;success&quot;;&#125; DELETE ã€rest.jspã€‘ 1234&lt;form action=&quot;testREST/1001&quot; method=&quot;POST&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;DELETE&quot; /&gt; &lt;input type=&quot;submit&quot; value=&quot;æµ‹è¯•DELETE&quot; /&gt;&lt;/form&gt; 12345@RequestMapping(value = &quot;/testREST/&#123;id&#125;&quot;, method = RequestMethod.DELETE)public String deleteUser(@PathVariable(&quot;id&quot;) Integer id)&#123; System.out.println(&quot;DELETE, id=&quot; + id); return &quot;success&quot;;&#125; æ³¨æ„ï¼šæµ‹è¯• PUT å’Œ DELETE ä¸­ Tomcat ä¸º 8.0 æˆ–è€…ä»¥ä¸Šï¼Œåˆ™ä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ è§£å†³æ–¹å¼ï¼šã€ JSP åªå…è®¸ GETã€POST æˆ– HEADã€‘ åœ¨ä½ è¦è·³è½¬åˆ°çš„ç›®æ ‡é¡µé¢çš„ä¸‹é¢è¿™å¥ä»£ç é‡Œé¢æ·»åŠ **isErrorPage=â€trueâ€**å³å¯ï¼Œå¦‚ä¸‹ï¼š 1&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt; æ”¹ä¸º 1&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isErrorPage=&quot;true&quot;%&gt; å››ã€å¤„ç†è¯·æ±‚æ•°æ®è¯·æ±‚å‚æ•°ï¼šè¯·æ±‚å‚æ•° cookie ä¿¡æ¯ è¯·æ±‚å¤´ä¿¡æ¯â€¦. JavaWEB: HttpServletRequest â€‹ Request.getParameter(å‚æ•°å)ï¼› Request.getParameterMap(); â€‹ Request.getCookies(); â€‹ Request.getHeader(); 1ã€è¯·æ±‚å¤„ç†çš„æ–¹æ³•ç­¾å Spring MVC é€šè¿‡åˆ†æå¤„ç†æ–¹æ³•çš„ç­¾å(æ–¹æ³•å+ å‚æ•°åˆ—è¡¨)ï¼Œ HTTP è¯· æ±‚ä¿¡æ¯ç»‘å®šåˆ°å¤„ç†æ–¹æ³•çš„ç›¸åº”å½¢å‚ä¸­ã€‚ Spring MVC å¯¹æ§åˆ¶å™¨å¤„ç†æ–¹æ³•ç­¾åçš„é™åˆ¶æ˜¯å¾ˆå®½æ¾çš„ï¼Œå‡ ä¹å¯ä»¥æŒ‰å–œæ¬¢çš„ä»»ä½•æ–¹å¼å¯¹æ–¹æ³•è¿›è¡Œç­¾åã€‚ å¿…è¦æ—¶å¯ä»¥å¯¹æ–¹æ³•åŠæ–¹æ³•å…¥å‚æ ‡æ³¨ç›¸åº”çš„æ³¨è§£ï¼ˆ @PathVariable ã€ @RequestParamã€@RequestHeader ç­‰ï¼‰ ã€ Spring MVC æ¡†æ¶ä¼šå°† HTTP è¯·æ±‚çš„ä¿¡æ¯ç»‘å®šåˆ°ç›¸åº”çš„æ–¹æ³•å…¥å‚ä¸­ï¼Œå¹¶æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼ç±»å‹åšå‡ºç›¸åº”çš„åç»­å¤„ç†ã€‚ 2ã€@RequestParam æ³¨è§£ @RequestParam å¯ä»¥æŠŠè¯·æ±‚å‚æ•°ä¼ é€’ç»™è¯·æ±‚æ–¹æ³• åœ¨å¤„ç†è¯·æ±‚çš„æ–¹æ³•ä¸­ï¼ŒåŠ å…¥ç›¸å¯¹åº”çš„å½¢å‚ï¼Œä¿è¯å½¢å‚æ•°åå’Œä¼ é€’çš„æ•°æ®çš„å‚æ•°åä¿æŒä¸€è‡´ï¼Œå°±å¯ä»¥è‡ªåŠ¨èµ‹å€¼ valueï¼šå½“ä¸æ»¡è¶³èµ‹å€¼æ¡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ value å±æ€§ï¼ŒæŒ‡å®šæ˜ å°„å…³ç³» requiredï¼šè®¾ç½®å½¢å‚æ˜¯å¦èµ‹è¢«èµ‹å€¼ï¼Œé»˜è®¤ä¸º tureï¼Œå¿…é¡»èµ‹å€¼ï¼Œè‹¥è®¾ç½®ä¸º falseï¼Œåˆ™ä¸å¿…é¡»èµ‹å€¼ï¼Œå› æ­¤å½¢å‚çš„å€¼ä¸º null defaultValueï¼šè‹¥å½¢å‚æ‰€è·å–å¾—çš„å€¼ä¸º null,åˆ™è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œç”¨åœ¨åˆ†é¡µå’Œæ¨¡ç³ŠæŸ¥è¯¢ä¸­ ä»£ç ç¤ºä¾‹ï¼š ã€param.jspã€‘ 12345678&lt;body&gt; &lt;form action=&quot;param&quot; method=&quot;post&quot;&gt; username:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt; password:&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;br&gt; age:&lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; &lt;/form&gt;&lt;/body&gt; ã€ParamController.javaã€‘ 12345@RequestMapping(value = &quot;/param&quot;,method = RequestMethod.POST) public String param(@RequestParam(value = &quot;username&quot;,required =false, defaultValue = &quot;xiaoming&quot;) String name, String password, String age)&#123; System.out.println(&quot;name=&quot;+name+&quot;,password=&quot;+password+&quot;,age=&quot;+age); return &quot;success&quot;; &#125; 3ã€@RequsetHeader æ³¨è§£ ä½¿ç”¨@RequestHeader ç»‘å®šè¯·æ±‚å¤´çš„å±æ€§å€¼ è¯·æ±‚å¤´åŒ…å«è‹¥å¹²ä¸ªå±æ€§ï¼ŒæœåŠ¡å™¨å¯æ®æ­¤è·çŸ¥å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œé€šè¿‡@RequestHeader å³å¯å°†è¯·æ±‚å¤´çš„å±æ€§ç»‘å®šåˆ°å¤„ç†æ–¹æ³•çš„å…¥å‚ä¸­ 12345@RequestMapping(value = &quot;/param&quot;, method = RequestMethod.POST)public String param(@RequestHeader(&quot;Accept-Language&quot;) String AcceptLanguage)&#123; System.out.println(&quot;AcceptLanguage=&quot;+AcceptLanguage); return &quot;success&quot;;&#125; 4ã€@CookieValue æ³¨è§£ ä½¿ç”¨@CookieValue ç»‘å®šè¯·æ±‚ä¸­çš„ cookie å€¼ @CookieValue å¯è®©å¤„ç†çš„æ–¹æ³•å…¥å‚ç»‘å®šæŸä¸ª Cookie å€¼ 12345@RequestMapping(value = &quot;/param&quot;, method = RequestMethod.POST)public String param(@CookieValue(value =&quot;JSESSIONID&quot; ) String JSESSIONID)&#123; System.out.println(&quot;JSESSIONID&quot;+JSESSIONID); return &quot;success&quot;;&#125; 5ã€ä½¿ç”¨ POJO ä½œä¸ºå‚æ•° ä½¿ç”¨ POJO å¯¹è±¡ç»‘å®šè¯·æ±‚å‚æ•°å€¼ Spring MVC ä¼šæŒ‰è¯·æ±‚å‚æ•°åå’Œ POJO å±æ€§åè¿›è¡Œè‡ªåŠ¨åŒ¹é…ï¼Œè‡ªåŠ¨ä¸ºè¯¥å¯¹è±¡å¡«å……å±æ€§å€¼ï¼Œæ”¯æŒçº§è”èµ‹å€¼ã€‚ ã€param.jspã€‘ 1234567891011&lt;body&gt; &lt;form action=&quot;param&quot; method=&quot;post&quot;&gt; username:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt; password:&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;br&gt; age:&lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;&lt;br&gt; province:&lt;input type=&quot;text&quot; name=&quot;address.province&quot;&gt;&lt;br&gt; city:&lt;input type=&quot;text&quot; name=&quot;address.city&quot;&gt;&lt;br&gt; county:&lt;input type=&quot;text&quot; name=&quot;address.county&quot;&gt;&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; &lt;/form&gt;&lt;/body&gt; éœ€è¦åˆ›å»º User ç±» å’Œ Address ç±» 12345678910111213public class User &#123; private String username; private String password; private String age; private Address address; ....&#125;public class Address &#123; private String province; private String city; private String county; ...&#125; ã€ParaController.javaã€‘ 12345@RequestMapping(value = &quot;/param&quot;,method = RequestMethod.POST) public String param(User user)&#123; System.out.println(user); return &quot;success&quot;; &#125; 6ã€æ³¨æ„ï¼šå¦‚æœä¸­æ–‡å‡ºç°ä¹±ç ï¼ˆideaï¼‰â€‹ éœ€è¦é…ç½®å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ï¼Œ ä¸”é…ç½®å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰ï¼Œå¦‚ï¼ˆHiddenHttpMethodFilterï¼‰ï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ã€‚ 1234567891011121314151617181920212223242526272829303132&lt;!-- é…ç½®å­—ç¬¦é›† --&gt;&lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;&lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; åœ¨ä¿®æ”¹ Tomcat æ·»åŠ ï¼š**-Dfile.encoding=UTF-8** 7ã€ä½¿ç”¨ Servlet åŸç”Ÿ API ä½œä¸ºå‚æ•° MVC çš„ Handler æ–¹æ³•å¯ä»¥æ¥å—çš„ ServletAPI ç±»å‹çš„å‚æ•° HttpServletRequest HttpServletResponse HttpSession java.security.Principal Locale InputStream OutputStream Reader Writer ä»£ç ç¤ºä¾‹ï¼š éœ€è¦å¯¼å…¥ 123456@RequestMapping(value = &quot;/param&quot;, method = RequestMethod.POST) public String param(HttpServletRequest request, HttpServletResponse response)&#123; String username = request.getParameter(&quot;username&quot;); System.out.println(username); return &quot;success&quot;; &#125; 123456@RequestMapping(value = &quot;/param&quot;,method = RequestMethod.POST)public void param(HttpServletRequest request, HttpServletResponse response, Writer out) throws IOException &#123; System.out.println(&quot;param&quot; + request +&quot;,&quot; + response); out.write(&quot;hello,world&quot;); // return &quot;success&quot;;&#125; äº”ã€å¤„ç†å“åº”æ•°æ®1ã€SpringMVC è¾“å‡ºæ¨¡å‹æ•°æ®çš„é€”å¾„ ModelAndView: å¤„ç†æ–¹æ³•è¿”å›å€¼ç±»å‹ä¸º ModelAndView æ—¶ï¼Œæ–¹æ³•ä½“å³å¯é€šè¿‡è¯¥å¯¹è±¡æ·»åŠ æ¨¡å‹æ•°æ®ã€‚ Map å’Œ Model: å…¥å‚ org.springframework.ui.Modelã€org.springframework.ui.ModelMap æˆ– java.uti.Map æ—¶ï¼Œå¤„ç†æ–¹æ³•è¿”å›æ—¶ï¼Œ Map ä¸­çš„æ•°æ®ä¼šè‡ªåŠ¨æ·»åŠ åˆ°æ¨¡å‹ä¸­ã€‚ 2ã€å¤„ç†æ¨¡å‹æ•°æ®ä¹‹ ModelAndView ä¸¤ä¸ªé‡è¦çš„æˆå‘˜å˜é‡: private Object view; è§†å›¾ä¿¡æ¯ private ModelMap model; æ¨¡å‹æ•°æ® æ·»åŠ æ¨¡å‹æ•°æ® MoelAndView addObject(String attributeName, Object attributeValue) è®¾ç½®æ¨¡å‹æ•°æ® ModelAndView addAllObject(Map&lt;String, ?&gt; modelMap) è®¾ç½®è§†å›¾ void setView(View view) è®¾ç½®è§†å›¾å¯¹è±¡ void setViewName(String viewName) è®¾ç½®è§†å›¾åå­— è·å–æ¨¡å‹æ•°æ® protected Map&lt;String, Object&gt; getModelInternal() è·å–æ¨¡å‹æ•°æ® public ModelMap getModelMap() public Map&lt;String, Object&gt; getModel() ä»£ç ç¤ºä¾‹ï¼š 1234567@RequestMapping(value = &quot;/param&quot;, method = RequestMethod.POST)public ModelAndView param()&#123; ModelAndView mav = new ModelAndView(); mav.addObject(&quot;username&quot;, &quot;root&quot;);//å¾€requestä½œç”¨åŸŸä¸­æ”¾å€¼ mav.setViewName(&quot;success&quot;);//è®¾ç½®è§†å›¾åç§°ï¼Œå®ç°é¡µé¢è·³è½¬ return mav;&#125; ã€success.jspã€‘ 1234&lt;body&gt; &lt;h1&gt;æˆåŠŸ&lt;/h1&gt; $&#123;requestScope.username&#125;&lt;/body&gt; 3ã€å¤„ç†æ¨¡å‹æ•°æ®ä¹‹ Map Modelç¬¬ä¸€ç§æ–¹å¼ï¼š 12345@RequestMapping(value = &quot;/param&quot;, method = RequestMethod.POST)public String param(Map&lt;String, Object&gt; map)&#123; map.put(&quot;username&quot;, &quot;root&quot;); // å¾€ä½œç”¨åŸŸä¸­æ”¾å€¼ return &quot;success&quot;;// è¿”å›ç¤ºå›¾åç§°&#125; ç¬¬äºŒç§æ–¹å¼ï¼š 12345@RequestMapping(value = &quot;/param&quot;, method = RequestMethod.POST)public String param(Model model)&#123; model.addAttribute(&quot;username&quot;, &quot;å¼ ä¸‰&quot;);// å‘ä½œç”¨åŸŸä¸­æ”¾å€¼ return &quot;success&quot;; // è¿”å›è¯•å›¾çš„åç§°&#125; å…­ã€è§†å›¾è§£æ1ã€SpringMVC è§£æè§†å›¾æ¦‚è¿° 2ã€è§†å›¾å’Œè§†å›¾è§£æå™¨ è¯·æ±‚å¤„ç†æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ã€‚å¯¹äºé‚£äº›è¿”å› Stringï¼ŒView æˆ– ModeMap ç­‰ç±»å‹çš„å¤„ç†æ–¹æ³•ï¼Œ Spring MVC ä¹Ÿä¼šåœ¨å†…éƒ¨å°†å®ƒä»¬è£…é…æˆä¸€ä¸ª ModelAndView å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†é€»è¾‘åå’Œæ¨¡å‹å¯¹è±¡çš„è§†å›¾ã€‚ Spring MVC å€ŸåŠ©è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰å¾—åˆ°æœ€ç»ˆçš„è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œæœ€ç»ˆçš„è§†å›¾å¯ä»¥æ˜¯ JSPã€‚ 3ã€å¸¸ç”¨çš„è¯•å›¾å®ç°ç±» 4ã€JstlView è‹¥é¡¹ç›®ä½¿ç”¨äº† JSTLï¼Œåˆ™ SpringMVC ä¼šè‡ªåŠ¨æŠŠè¯•å›¾ç”± InternallResoureView è½¬ä¸º JstlView ï¼ˆæ–­ç‚¹è°ƒè¯•ï¼Œå°† JSTL çš„ jar åŒ…å¢åŠ åˆ°é¡¹ç›®ä¸­ï¼Œè§†å›¾è§£æå™¨ä¼šè‡ªåŠ¨ä¿®æ”¹ä¸º JstlViewï¼‰ ä»£ç ç¤ºä¾‹ï¼šå¢åŠ  jstl æ ‡ç­¾ jar åŒ…ï¼ˆæ–­ç‚¹è°ƒè¯•ï¼Œè¿™æ—¶çš„ View å¯¹è±¡å°±æ˜¯ JstlViewï¼‰ 5ã€è¯•å›¾è§£æå™¨ SpringMVC ä¸ºé€»è¾‘è§†å›¾åçš„è§£ææä¾›äº†ä¸åŒçš„ç­–ç•¥ï¼Œå¯ä»¥åœ¨ SpringMVC ä¸Šä¸‹æ–‡ä¸­é…ç½®ä¸€ç§æˆ–å¤šç§è§£æç­–ç•¥ï¼Œ å¹¶æŒ‡å®šä»–ä»¬ä¹‹é—´çš„å…ˆåé¡ºåºã€‚æ¯ä¸€ç§æ˜ å°„ç­–ç•¥å¯¹åº”ä¸€ä¸ªå…·ä½“çš„è§†å›¾è§£æå™¨å®ç°ç±»ã€‚ è§†å›¾è§£æå™¨çš„ä½œç”¨æ¯”è¾ƒå•ä¸€ï¼šå°†é€»è¾‘è§†å›¾è§£æä¸ºä¸€ä¸ªå…·ä½“çš„è§†å›¾å¯¹è±¡ã€‚ æ‰€æœ‰çš„è§†å›¾è§£æå™¨éƒ½å¿…é¡»å®ç° ViewResolver æ¥å£ï¼š 6ã€å¸¸ç”¨çš„è¯•å›¾è§£æå™¨å®ç°ç±» å¯ä»¥é€‰æ‹©ä¸€ä¸ªè¯•å›¾è§£æå™¨æˆ–æ··ç”¨å¤šç§è¯•å›¾è§£æå™¨ æ¯ä¸ªè¯•å›¾è§£æå™¨éƒ½å®ç°äº† Ordered æ¥å£å¹¶å¼€æ”¾ä¸€ä¸ªorder å±æ€§ï¼Œå¯ä»¥é€šè¿‡ order å±æ€§æŒ‡å®šè§£æå™¨çš„ä¼˜å…ˆé¡ºåºï¼Œ order è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚ 12345&lt;bean id=&quot;viewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot;&gt;&lt;/property&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt; &lt;property name=&quot;order&quot; value=&quot;1&quot;&gt;&lt;/property&gt;&lt;/bean&gt; InternalResourceViewResolver JSP æ˜¯æœ€å¸¸è§çš„è§†å›¾æŠ€æœ¯ï¼Œå¯ä»¥ä½¿ç”¨ InternalResourceViewResolve ä½œä¸ºè§†å›¾è§£æå™¨ï¼š 7ã€é‡å®šå‘ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ§åˆ¶å™¨æ–¹æ³•è¿”å›å­—ç¬¦ä¸²ç±»å‹çš„å€¼ä¼šè¢«å½“æˆé€»è¾‘è¯•å›¾å¤„ç† å¦‚æœè¿”å›çš„å­—ç¬¦ä¸²ä¸­å¸¦ forward: æˆ– redirect: å‰ç¼€æ—¶ï¼ŒSpringMVC ä¼šå¯¹ä»–ä»¬è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ï¼š å°† forward: å’Œ redirect: å½“æˆæŒ‡ç¤ºç¬¦ï¼Œå…¶åçš„å­—ç¬¦ä¸²ä½œä¸º URL æ¥å¤„ç†ã€‚ redirect:success.jspï¼šä¼šå®Œæˆä¸€ä¸ªåˆ° success.jsp çš„é‡å®šå‘çš„æ“ä½œ forward:success.jspï¼šä¼šå®Œæˆä¸€ä¸ªåˆ° success.jsp çš„è½¬å‘æ“ä½œ ä»£ç ç¤ºä¾‹ï¼š ã€redirect.jspã€‘åœ¨ Web ç›®å½•ä¸‹åˆ›å»º 12345&lt;body&gt; &lt;a href=&quot;redirect&quot;&gt;redirectæµ‹è¯•&lt;/a&gt; &lt;br&gt; &lt;a href=&quot;forward&quot;&gt;forwardæµ‹è¯•&lt;/a&gt;&lt;/body&gt; ã€RedirectTest.javaã€‘ 123456789101112131415@Controllerpublic class RedirectTest &#123; @RequestMapping(value = &quot;/redirect&quot;, method = RequestMethod.GET) public String redirect()&#123; System.out.println(&quot;redirectæµ‹è¯•&quot;); return &quot;redirect:/index.jsp&quot;; &#125; @RequestMapping(value = &quot;/forward&quot;,method = RequestMethod.GET) public String forward()&#123; System.out.println(&quot;forwardæµ‹è¯•&quot;); return &quot;forward:/index.jsp&quot;; &#125;&#125; é‡å®šå‘åŸç†ï¼š return â€œforward:/index.jspâ€ æå–ç ï¼špwbr æŸ¥çœ‹æ–‡æ¡£","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://blog.oy6090.top/tags/SpringMVC/"}]},{"title":"Javaä¹‹åå°„","slug":"javaä¹‹åå°„","date":"2020-07-28T16:00:00.000Z","updated":"2021-01-22T03:53:03.335Z","comments":true,"path":"posts/31610.html","link":"","permalink":"http://blog.oy6090.top/posts/31610.html","excerpt":"","text":"ä¸€ã€åå°„çš„æ¦‚å¿µ1ã€åå°„çš„ç†è§£Reflection(åå°„) æ˜¯è¢«è§†ä¸ºåŠ¨æ€è¯­è¨€çš„å…³é”®ï¼Œåå°„çš„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸé—´å€ŸåŠ© Reflection API å–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼Œå¹¶èƒ½ç›´æ¥æ“ä½œä»»æ„å¯¹è±¡çš„å†…éƒ¨å±æ€§æ–¹æ³•ã€‚ æ¡†æ¶ = åå°„ + æ³¨è§£ +è®¾è®¡æ¨¡å¼ 2ã€åå°„çš„â€åŠ¨æ€æ€§â€1234567891011121314151617181920212223242526272829@Test public void test1()&#123; for(int i = 0; i &lt; 100; i++)&#123; int num = new Random().nextInt(3); //0,1,2 String classPath = &quot;&quot;; switch (num)&#123; case 0: classPath = &quot;java.util.Date&quot;; break; case 1: classPath = &quot;java.lang.object&quot;; break; case 2: classPath = &quot;com.oy.online.reflect&quot;; break; &#125; try &#123; Object obj = getInstance(classPath); System.out.println(obj); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; public Object getInstance(String classPath) throws Exception &#123; Class clazz = Class.forName(classPath); return clazz.newInstance(); &#125; 3ã€åå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±» åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³• åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ä¿¡æ¯ åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³• åœ¨è¿è¡Œæ—¶å¤„ç†æ³¨è§£ ç”ŸæˆåŠ¨æ€ä»£ç† 4ã€ç›¸å…³ AIP java.lang.Class: åå°„çš„æºå¤´ java.lang.reflect.Method java.lang.reflect.Field java.lang.reflect.Consructor äºŒã€Class ç±»çš„ç†è§£å’Œè·å– Class å®ä¾‹1ã€Class ç±»çš„ç†è§£ ç±»çš„åŠ è½½è¿‡ç¨‹ï¼š ç¨‹åºç»è¿‡ javac.exe å‘½ä»¤ä»¥åï¼Œä¼šç”Ÿæˆä¸€ä¸ªå¤šå­—èŠ‚ç æ–‡ä»¶ï¼ˆ.class ç»“å°¾ï¼‰ï¼Œæ¥ç€æˆ‘ä»¬ä½¿ç”¨ java.exe å¯¹æŸä¸ªå­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œã€‚ç›¸å½“äºå°†æŸä¸ªå­—èŠ‚ç æ–‡ä»¶è®°è½½åˆ°å†…å­˜ä¸­ã€‚æ­¤è¿‡ç¨‹å°±ç§°ä¸ºç±»çš„åŠ è½½ã€‚åŠ è½½åˆ°å†…å­˜ä¸­çš„ç±»ï¼Œæˆ‘ä»¬ç§°ä¸ºè¿è¡Œæ—¶ç±»ï¼Œå°±ä½œä¸º Class çš„ä¸€ä¸ªå®ä¾‹ã€‚ class çš„å®ä¾‹å°±å¯¹åº”ç€ä¸€ä¸ªè¿è¡Œæ—¶ç±»ã€‚ åŠ è½½åˆ°å†…å­˜ä¸­çš„è¿è¡Œæ—¶ç±»ï¼Œä¼šç¼“å­˜ä¸€å®šçš„æ—¶é—´ï¼Œåœ¨æ­¤æ—¶é—´ä¹‹å†…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼ç±»è·å–è¿è¡Œç±»ã€‚ 2ã€è·å– Class å®ä¾‹çš„æ–¹å¼æ–¹å¼ä¸€ï¼šè°ƒç”¨è¿è¡Œæ—¶ç±»çš„å±æ€§ï¼š.class 12Class&lt;Person&gt; clazz = Person.class;System.out.println(clazz); æ–¹å¼äºŒï¼šé€šè¿‡è¿è¡Œæ—¶ç±»çš„å¯¹è±¡,è°ƒç”¨ getClass() 123Person p1 = new Person();Class clazz = p1.getClass();System.out.println(clazz); æ–¹å¼ä¸‰ï¼šè°ƒç”¨ Class çš„é™æ€æ–¹æ³•ï¼šforName(String classPath) 12Class&lt;?&gt; clazz = Class.forName(&quot;com.oy.online.bean.Person&quot;);System.out.println(clazz); æ–¹å¼å››ï¼šä½¿ç”¨ç±»çš„åŠ è½½å™¨ï¼šClassLoader 123ClassLoader classLoader = ReflectTest2.class.getClassLoader();Class&lt;?&gt; clazz = classLoader.loadClass(&quot;com.oy.online.bean.Person&quot;);System.out.println(clazz); 3ã€Class å®ä¾‹åŒ–çš„ç»“æ„ classï¼šå¤–éƒ¨ç±»ã€æˆå‘˜ï¼ˆæˆå‘˜å†…éƒ¨ç±»ï¼Œé™æ€å†…éƒ¨ç±»ï¼‰ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±» interfaceï¼šæ¥å£ []: æ•°ç»„ enum: æšä¸¾ annotation: æ³¨è§£@interface primitive type : åŸºæœ¬æ•°æ®ç±»å‹ viod ä¸‰ã€äº†è§£ ClassLoad1ã€ç±»çš„åŠ è½½è¿‡ç¨‹ 2ã€ç±»çš„åŠ è½½å™¨çš„ä½œç”¨ 3ã€ç±»çš„åŠ è½½å™¨çš„åˆ†ç±» 4ã€Java ç±»ç¼–è¯‘ã€è¿è¡Œçš„æ‰§è¡Œçš„æµç¨‹ 5ã€è¯•ç”¨ Classloader åŠ è½½ src ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718 @Test public void test5() throws Exception &#123; Properties pros = new Properties(); // æ­¤æ—¶çš„æ–‡ä»¶é»˜è®¤åœ¨å½“å‰moduleä¸‹ã€‚ // è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹å¼ä¸€ï¼š// FileInputStream fis = new FileInputStream(&quot;jdbc.properties&quot;);// pros.load(fis); // è¯»å–é…ç½®äºŒï¼šä½¿ç”¨ClassLoader // é…ç½®æ–‡ä»¶é»˜è®¤è¯†åˆ«ä¸ºï¼šå½“å‰moduleçš„srcä¸‹ ClassLoader clazz = ReflectTest2.class.getClassLoader(); InputStream is = clazz.getResourceAsStream(&quot;jdbc.properties&quot;); pros.load(is); String user = pros.getProperty(&quot;user&quot;); String password = pros.getProperty(&quot;password&quot;); System.out.println(&quot;user =&quot;+ user + &quot;,password =&quot;+ password); &#125; å››ã€åå°„åº”ç”¨ä¸€ï¼šåˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡123Class&lt;Person&gt; clazz = Person.class;Person obj = clazz.newInstance();System.out.println(obj); è¯´æ˜ï¼š newInstance(): è°ƒç”¨æ­¤æ–¹æ³•çš„è¿è¡Œç±»çš„å¯¹è±¡ã€‚å†…éƒ¨è°ƒç”¨äº†è¿è¡Œç±»çš„ç©ºå‚çš„æ„é€ å™¨ã€‚ è¦æƒ³æ–¹æ³•æ­£å¸¸çš„åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ï¼Œè¦æ±‚ï¼š è¿è¡Œæ—¶å¿…é¡»æ˜¯æä¾›ç©ºå‚æ„é€ å™¨ ç©ºå‚çš„æ„é€ å™¨çš„è®¿é—®æƒé™çš„å¤Ÿã€‚é€šå¸¸ï¼Œè®¾ç½®ä¸º public. åœ¨ javabean ä¸­è¦æ±‚æä¾›ä¸€ä¸ª public çš„ç©ºå‚æ„é€ å™¨ã€‚åŸå› ï¼š ä¾¿äºé€šè¿‡åå°„ï¼Œåˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ ä¾¿äºå­ç±»ç»§æ‰¿æ­¤è¿è¡Œç±»ï¼Œé»˜è®¤è°ƒç”¨ super()æ—¶ï¼Œä¿è¯çˆ¶ç±»æ­¤æ„é€ å™¨ äº”ã€åå°„åº”ç”¨äºŒï¼šè·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„é€šè¿‡åå°„ï¼Œè·å–å¯¹åº”çš„è¿è¡Œæ—¶ç±»ä¸­æ‰€æœ‰çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ã€çˆ¶ç±»ã€æ¥å£ã€çˆ¶ç±»çš„æ³›å‹ã€åŒ…ã€æ³¨è§£ã€å¼‚å¸¸ç­‰â€¦ getFields()ï¼šè·å–å½“å‰è¿è¡Œæ—¶ç±»åŠå…¶çˆ¶ç±»ä¸­å£°æ˜ä¸º public è®¿é—®æƒé™çš„å±æ€§ getDeclaredFields()ï¼šè·å–å½“å‰è¿è¡Œç±»ä¸­å£°æ˜çš„å±æ€§ã€‚ï¼ˆä¸åŒ…å«çˆ¶ç±»ä¸­å£°æ˜çš„å±æ€§ï¼‰ 12345678910111213141516171819@Testpublic void test2()&#123; Class&lt;Person&gt; clazz = Person.class; // è·å–å±æ€§ç»“æ„ // getFields():è·å–å½“å‰è¿è¡Œæ—¶ç±»åŠå…¶çˆ¶ç±»ä¸­å£°æ˜ä¸ºpublicè®¿é—®æƒé™çš„å±æ€§ Field[] fields = clazz.getFields(); for (Field f : fields) &#123; System.out.println(f); &#125; System.out.println(); // getDeclaredFields():è·å–å½“å‰è¿è¡Œç±»ä¸­å£°æ˜çš„å±æ€§ã€‚ï¼ˆä¸åŒ…å«çˆ¶ç±»ä¸­å£°æ˜çš„å±æ€§ï¼‰ Field[] declaredFields = clazz.getDeclaredFields(); for (Field f : declaredFields) &#123; System.out.println(f); &#125;&#125; getMethods(): è·å–å½“å‰è¿è¡Œæ—¶ç±»åŠå…¶æ‰€çˆ¶ç±»ä¸­å£°æ˜ä¸º public æƒé™çš„æ–¹æ³• getDeclaredMethods():è·å–å½“å‰è¿è¡Œæ—¶ç±»ä¸­å£°æ˜çš„æ‰€æ–¹æ³•ã€‚ï¼ˆä¸åŒ…å«çˆ¶ç±»ä¸­å£°æ˜çš„æ–¹æ³•ï¼‰ 12345678910111213141516@Testpublic void test3()&#123; Class&lt;Person&gt; clazz = Person.class; //getMethods():è·å–å½“å‰è¿è¡Œæ—¶ç±»åŠå…¶æ‰€çˆ¶ç±»ä¸­å£°æ˜ä¸ºpublicæƒé™çš„æ–¹æ³• Method[] methods = clazz.getMethods(); for (Method m : methods) &#123; System.out.println(m); &#125; System.out.println(&quot;***********************&quot;); //getDeclaredMethods():è·å–å½“å‰è¿è¡Œæ—¶ç±»ä¸­å£°æ˜çš„æ‰€æ–¹æ³•ã€‚ï¼ˆä¸åŒ…å«çˆ¶ç±»ä¸­å£°æ˜çš„æ–¹æ³•ï¼‰ Method[] declaredMethods = clazz.getDeclaredMethods(); for (Method f : declaredMethods) &#123; System.out.println(f); &#125;&#125; getConstructors(): è·å–å½“å‰è¿è¡Œæ—¶ç±»ä¸­å£°æ˜ä¸º public çš„æ„é€ å™¨ getDeclaredConstructors(): è·å–å½“å‰è¿è¡Œæ—¶ç±»ä¸­å£°æ˜çš„æ‰€çš„æ„é€ å™¨ 1234567891011121314151617@Testpublic void test4()&#123; Class&lt;Person&gt; clazz = Person.class; //getConstructors():è·å–å½“å‰è¿è¡Œæ—¶ç±»ä¸­å£°æ˜ä¸ºpublicçš„æ„é€ å™¨ Constructor&lt;?&gt;[] constructors = clazz.getConstructors(); for (Constructor&lt;?&gt; c : constructors) &#123; System.out.println(c); &#125; System.out.println(&quot;**************************&quot;); //getDeclaredConstructors():è·å–å½“å‰è¿è¡Œæ—¶ç±»ä¸­å£°æ˜çš„æ‰€çš„æ„é€ å™¨ Constructor&lt;?&gt;[] declaredConstructors = clazz.getDeclaredConstructors(); for (Constructor&lt;?&gt; d : declaredConstructors) &#123; System.out.println(d); &#125;&#125; getSuperclass()ï¼šè·å–è¿è¡Œæ—¶ç±»çš„çˆ¶ç±» 123456@Testpublic void test5()&#123; Class&lt;Person&gt; clazz = Person.class; Class&lt;? super Person&gt; superclass = clazz.getSuperclass(); System.out.println(superclass);&#125; getGenericSuperclass()ï¼š è·å–è¿è¡Œæ—¶ç±»çš„å¸¦æ³›å‹çš„çˆ¶ç±» 123456@Testpublic void test6()&#123; Class&lt;Person&gt; clazz = Person.class; Type genericSuperclass = clazz.getGenericSuperclass(); System.out.println(genericSuperclass);&#125; 123456789@Testpublic void test7()&#123; Class&lt;Person&gt; clazz = Person.class; Type genericSuperclass = clazz.getGenericSuperclass(); ParameterizedType paramType = (ParameterizedType) genericSuperclass; // è·å–æ³›å‹ç±»å‹ Type[] actualTypeArguments = paramType.getActualTypeArguments(); System.out.println(((Class)actualTypeArguments[0]).getName());&#125; getInterfaces(): è·å–è¿è¡Œæ—¶ç±»å®ç°çš„æ¥å£ 123456789101112131415@Testpublic void test8()&#123; Class&lt;Person&gt; clazz = Person.class; Class&lt;?&gt;[] interfaces = clazz.getInterfaces(); for (Class&lt;?&gt; i : interfaces) &#123; System.out.println(i); &#125; System.out.println(&quot;****************&quot;); // è·å–è¿è¡Œæ—¶ç±»çš„çˆ¶ç±»å®ç°æ¥å£ Class&lt;?&gt;[] interfaces1 = clazz.getSuperclass().getInterfaces(); for (Class&lt;?&gt; c : interfaces1) &#123; System.out.println(c); &#125; getPackage(): è·å–è¿è¡Œæ—¶ç±»æ‰€åœ¨çš„åŒ… 123456@Testpublic void test9()&#123; Class&lt;Person&gt; clazz = Person.class; Package pack = clazz.getPackage(); System.out.println(pack);&#125; getAnnotations(): è·å–è¿è¡Œæ—¶ç±»å£°æ˜çš„æ³¨è§£ 1234567@Testpublic void test10()&#123; Class&lt;Person&gt; clazz = Person.class; Annotation[] annotations = clazz.getAnnotations(); for (Annotation a : annotations) &#123; System.out.println(a); &#125; å…­ã€åå°„åº”ç”¨ä¸‰ï¼šè°ƒç”¨è¿è¡Œæ—¶ç±»çš„æŒ‡å®šç»“æ„1ã€è°ƒç”¨æŒ‡å®šçš„å±æ€§123456789101112131415161718@Testpublic void test1() throws Exception &#123; Class&lt;Person&gt; clazz = Person.class; // åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ Person p = clazz.newInstance(); // 1. getDeclaredField(String fieldName):è·å–è¿è¡Œæ—¶ç±»ä¸­æŒ‡å®šå˜é‡åçš„å±æ€§ Field name = clazz.getDeclaredField(&quot;name&quot;); // 2. ä¿è¯å½“å‰å±æ€§æ˜¯å¯è®¿é—®çš„ name.setAccessible(true); // 3.è·å–ã€è®¾ç½®æŒ‡å®šå±æ€§å¯¹è±¡çš„æ­¤å±æ€§ name.set(p,&quot;Tom&quot;); System.out.println(name.get(p));&#125; 2ã€è°ƒç”¨æŒ‡å®šçš„æ–¹æ³•123456789101112131415161718192021222324252627282930@Testpublic void test2() throws Exception &#123; Class&lt;Person&gt; clazz = Person.class; // åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ Person p = clazz.newInstance(); /* 1.è·å–æŒ‡å®šçš„æŸä¸ªæ–¹æ³• getDeclaredMethod():å‚æ•°1 ï¼šæŒ‡æ˜è·å–çš„æ–¹æ³•çš„åç§° å‚æ•°2ï¼šæŒ‡æ˜è·å–çš„æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ */ Method show = clazz.getDeclaredMethod(&quot;show&quot;, String.class); // 2.ä¿è¯å½“å‰æ–¹æ³•æ—¶å¯è®¿é—®çš„ show.setAccessible(true); /* 3. è°ƒç”¨æ–¹æ³•çš„invoke():å‚æ•°1ï¼šæ–¹æ³•çš„è°ƒç”¨è€… å‚æ•°2ï¼šç»™æ–¹æ³•å½¢å‚èµ‹å€¼çš„å®å‚ invoke()çš„è¿”å›å€¼å³ä¸ºå¯¹åº”ç±»ä¸­è°ƒç”¨çš„æ–¹æ³•çš„è¿”å›å€¼ã€‚ */ Object returnValue = show.invoke(p, &quot;CHN&quot;);//String nation = p.show(&quot;CHN&quot;); System.out.println(returnValue); System.out.println(&quot;********************&quot;); // private static void showDesc Method showDesc = clazz.getDeclaredMethod(&quot;showDesc&quot;); showDesc.setAccessible(true); // å¦‚æœè°ƒç”¨çš„è¿è¡Œæ—¶ç±»ä¸­çš„æ–¹æ³•æ²¡è¿”å›å€¼ï¼Œåˆ™æ­¤invoke()è¿”å›null Object returnVal = showDesc.invoke(Person.class); System.out.println(returnVal);// null&#125; 3ã€è°ƒç”¨æŒ‡å®šçš„æ„é€ å™¨123456789101112131415161718@Testpublic void test3() throws Exception &#123; Class&lt;Person&gt; clazz = Person.class; //private Person(String name) /* 1.è·å–æŒ‡å®šçš„æ„é€ å™¨ getDeclaredConstructor():å‚æ•°ï¼šæŒ‡æ˜æ„é€ å™¨çš„å‚æ•°åˆ—è¡¨ */ Constructor&lt;Person&gt; constructor = clazz.getDeclaredConstructor(String.class); // 2.ä¿è¯æ­¤æ„é€ å™¨å¯è®¿é—®çš„ constructor.setAccessible(true); // 3.è°ƒç”¨æ­¤æ„é€ å™¨åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ Person per = constructor.newInstance(&quot;Tom&quot;); System.out.println(per);&#125; ä¸ƒã€åå°„åº”ç”¨å››ï¼šåŠ¨æ€ä»£ç†1ã€ä»£ç†æ¨¡å¼çš„åŸç†â€‹ ä½¿ç”¨ä¸€ä¸ªä»£ç†å°†å¯¹è±¡åŒ…è£…èµ·æ¥ï¼Œç„¶åç”¨è¯¥ä»£ç†å¯¹è±¡å»æ‰åŸå§‹å¯¹è±¡ã€‚ä»»ä½•å¯¹åŸå§‹å¯¹è±¡çš„è°ƒç”¨éƒ½è¦é€šè¿‡ä»£ç†ã€‚ä»£ç†å¯¹è±¡å†³å®šæ˜¯å¦ä»¥åŠä½•æ—¶å°†æ–¹æ³•è°ƒç”¨è½¬åˆ°åŸå§‹å¯¹è±¡ä¸Šã€‚ 2ã€é™æ€ä»£ç† ä¸¾ä¾‹ 12345678å®ç°Runnableæ¥å£çš„æ–¹æ³•åˆ›å»ºå¤šçº¿ç¨‹ã€‚Class MyThread implements Runnable&#123;&#125;//ç›¸å½“äºè¢«ä»£ç†ç±»Class Thread implements Runnable&#123;&#125;//ç›¸å½“äºä»£ç†ç±»main()&#123; MyTread t = new MyThread(); Thread thread = new Thread(t); thresd.start();//å¯åŠ¨çº¿ç¨‹ï¼›è°ƒç”¨çº¿ç¨‹çš„run()&#125; é™æ€ä»£ç†çš„ç¼ºç‚¹ ä»£ç†ç±»å’Œç›®æ ‡å¯¹è±¡çš„ç±»éƒ½æ˜¯åœ¨ç¼–è¯‘é—´ç¡®å®šä¸‹æ¥çš„ï¼Œä¸åˆ©äºç¨‹åºçš„æ‰©å±•ã€‚ æ¯ä¸€ä¸ªä»£ç†ç±»åªèƒ½ä¸ºä¸€ä¸ªæ¥å£æœåŠ¡ï¼Œè¿™æ ·ä¸€æ¥ç¨‹åºå¼€å‘ä¸­å¿…ç„¶äº§ç”Ÿè¿‡å¤šçš„ä»£ç†ã€‚ åŠ¨æ€ä»£ç†çš„ç‰¹ç‚¹ åŠ¨æ€ä»£ç†æ˜¯æŒ‡å®¢æˆ·ç«¯é€šè¿‡ä»£ç†ç±»æ¥è°ƒç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ 3ã€åŠ¨æ€ä»£ç†çš„å®ç° éœ€è¦è§£å†³çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š é—®é¢˜ä¸€ï¼šå¦‚ä½•æ ¹æ®åŠ è½½åˆ°å†…å­˜ä¸­çš„è¢«ä»£ç†ç±»ï¼ŒåŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªä»£ç†ç±»åŠå…¶å¯¹è±¡ã€‚ï¼ˆé€šè¿‡ Proxy.newProxyInstance()å®ç°ï¼‰ é—®é¢˜äºŒï¼šå½“é€šè¿‡ä»£ç†ç±»çš„å¯¹è±¡è°ƒç”¨æ–¹æ³• a æ—¶ï¼Œå¦‚ä½•åŠ¨æ€çš„å»è°ƒç”¨è¢«ä»£ç†ç±»çš„åŒåæ–¹æ³• aã€‚(é€šè¿‡ InvocationHandler æ¥å£çš„å®ç°ç±»åŠå…¶æ–¹æ³• invoke()) ä»£ç ç¤ºä¾‹ 1234567interface Human&#123; String getBelief(); void eat(String food);&#125; 1234567891011121314//è¢«ä»£ç†ç±»class SuperMan implements Human&#123; @Override public String getBelief() &#123; return &quot;I believe I can fly!&quot;; &#125; @Override public void eat(String food) &#123; System.out.println(&quot;æˆ‘å–œæ¬¢åƒ&quot; + food); &#125;&#125; 123456789101112class HumanUtil&#123; public void method1()&#123; System.out.println(&quot;====================é€šç”¨æ–¹æ³•ä¸€====================&quot;); &#125; public void method2()&#123; System.out.println(&quot;====================é€šç”¨æ–¹æ³•äºŒ====================&quot;); &#125;&#125; 1234567891011class ProxyFactory&#123; //è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªä»£ç†ç±»çš„å¯¹è±¡ã€‚è§£å†³é—®é¢˜ä¸€ public static Object getProxyInstance(Object obj)&#123;//obj:è¢«ä»£ç†ç±»çš„å¯¹è±¡ MyInvocationHandler handler = new MyInvocationHandler(); handler.bind(obj); return Proxy.newProxyInstance(obj.getClass().getClassLoader(),obj.getClass().getInterfaces(),handler); &#125;&#125; 123456789101112131415161718192021222324252627class MyInvocationHandler implements InvocationHandler&#123; private Object obj;//éœ€è¦ä½¿ç”¨è¢«ä»£ç†ç±»çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼ public void bind(Object obj)&#123; this.obj = obj; &#125; //å½“æˆ‘ä»¬é€šè¿‡ä»£ç†ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•aæ—¶ï¼Œå°±ä¼šè‡ªåŠ¨çš„è°ƒç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼šinvoke() //å°†è¢«ä»£ç†ç±»è¦æ‰§è¡Œçš„æ–¹æ³•açš„åŠŸèƒ½å°±å£°æ˜åœ¨invoke()ä¸­ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; HumanUtil util = new HumanUtil(); util.method1(); //method:å³ä¸ºä»£ç†ç±»å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¹Ÿå°±ä½œä¸ºäº†è¢«ä»£ç†ç±»å¯¹è±¡è¦è°ƒç”¨çš„æ–¹æ³• //obj:è¢«ä»£ç†ç±»çš„å¯¹è±¡ Object returnValue = method.invoke(obj,args); util.method2(); //ä¸Šè¿°æ–¹æ³•çš„è¿”å›å€¼å°±ä½œä¸ºå½“å‰ç±»ä¸­çš„invoke()çš„è¿”å›å€¼ã€‚ return returnValue; &#125;&#125; 123456789101112131415161718192021public class ProxyTest &#123; public static void main(String[] args) &#123; SuperMan superMan = new SuperMan(); //proxyInstance:ä»£ç†ç±»çš„å¯¹è±¡ Human proxyInstance = (Human) ProxyFactory.getProxyInstance(superMan); //å½“é€šè¿‡ä»£ç†ç±»å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨çš„è°ƒç”¨è¢«ä»£ç†ç±»ä¸­åŒåçš„æ–¹æ³• String belief = proxyInstance.getBelief(); System.out.println(belief); proxyInstance.eat(&quot;å››å·éº»è¾£çƒ«&quot;); System.out.println(&quot;*****************************&quot;); NikeClothFactory nikeClothFactory = new NikeClothFactory(); ClothFactory proxyClothFactory = (ClothFactory) ProxyFactory.getProxyInstance(nikeClothFactory); proxyClothFactory.produceCloth(); &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"javaä¹‹ç½‘ç»œç¼–ç¨‹","slug":"javaä¹‹ç½‘ç»œç¼–ç¨‹","date":"2020-07-27T16:00:00.000Z","updated":"2021-01-22T03:52:59.170Z","comments":true,"path":"posts/17548.html","link":"","permalink":"http://blog.oy6090.top/posts/17548.html","excerpt":"","text":"ä¸€ã€InetAddress ç±»çš„ä½¿ç”¨1ã€å®ç°ç½‘ç»œé€šä¿¡éœ€è¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜ å¦‚ä½•å‡†ç¡®çš„å®šä½ç½‘ç»œä¸Šä¸€å°æˆ–å¤šå°çš„ä¸»æœº;å®šä½ä¸»æœºä¸Šçš„ç‰¹å®šåº”ç”¨ æ‰¾åˆ°ä¸»æœºåå¦‚ä½•é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®ä¼ è¾“ 2ã€ç½‘ç»œé€šä¿¡çš„ä¸¤ä¸ªè¦ç´  å¯¹åº”é—®é¢˜ä¸€ï¼šIP å’Œç«¯å£å· å¯¹åº”é—®é¢˜äºŒï¼šæä¾›ç½‘ç»œåè®®ï¼šTCP/IP å‚è€ƒæ¨¡å‹ï¼ˆåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€ç‰©ç†+æ•°æ®é“¾è·¯å±‚ï¼‰ 3ã€é€šä¿¡è¦ç´ ä¸€ï¼šIP å’Œç«¯å£å·â‘  IP çš„è§£é‡Š å”¯ä¸€çš„æ ‡è¯† Internet ä¸Šçš„è®¡ç®—æœºï¼ˆé€šä¿¡è½½ä½“ï¼‰ åœ¨ Java ä¸­ä½¿ç”¨ InternetAddress ç±»ä»£è¡¨ IP IP åˆ†ç±»ï¼š IPV4 å’Œ IPV6 ï¼› ä¸‡ç»´ç½‘ å’Œ å±€åŸŸç½‘ åŸŸåï¼šwww.baidu.com ; åŸŸåè§£æï¼šåŸŸåå®¹æ˜“è®°å¿†ã€‚å½“åœ¨è¿æ¥ç½‘ç»œæ—¶è¾“å…¥ä¸€ä¸ªä¸»æœºçš„åŸŸååï¼ŒåŸŸåæœåŠ¡å™¨ï¼ˆDNSï¼‰è´Ÿè´£å°†åŸŸåè½¬åŒ–ä¸º IP åœ°å€ï¼Œè¿™æ ·æ‰èƒ½å’Œæœ¬åœ°å»ºç«‹è¿æ¥ã€‚â€“ åŸŸåè§£æ æœ¬åœ°å›è·¯åœ°å€ï¼š127.0.0.1 å¯¹åº”ç€ï¼šlocalhost â‘¡ InetAddress ç±» æ­¤ç±»çš„ä¸€ä¸ªå¯¹è±¡å°±ä»£è¡¨ç€ä¸€ä¸ªå…·ä½“çš„ IP åœ°å€ å®ä¾‹åŒ– 1getByName(String host)ã€getLocalhost() å¸¸ç”¨æ–¹æ³• 1getHostName()/getHostAddress() 4ã€ç«¯å£å·è¦æ±‚ï¼šä¸åŒçš„è¿›ç¨‹ä¸åŒçš„ç«¯å£å· èŒƒå›´ï¼šè¢«è§„å®šä¸ºä¸€ä¸ª 16 ä½çš„æ•´æ•° 0~65535 ç«¯å£å·ä¸ IP åœ°å€çš„ç»„åˆå¾—å‡ºä¸€ä¸ªç½‘ç»œå¥—æ¥å­—ï¼šSocket 5ã€é€šä¿¡è¦ç´ äºŒï¼šç½‘ç»œé€šä¿¡åè®®â‘  åˆ†ç±»æ¨¡å‹ â‘¡ TCP å’Œ UDP çš„åŒºåˆ« â‘¢ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ â‘£ è¡¥å…… 12345678// geByName ç¡®å®šä¸»æœºåç§°çš„IPåœ°å€InetAddress.getByName(&quot;192.168.12.67&quot;);// è·å–æœ¬åœ°IPInetAddress.getLocalhost();// è·å–æ­¤IPåœ°å€çš„ä¸»æœºåã€‚inet2.getHostName()// è¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²inet2.getHostAddress() äºŒã€TCP ç½‘ç»œç¼–ç¨‹ä»£ç ç¤ºä¾‹ï¼šå®¢æˆ·ç«¯å‘é€ä¿¡æ¯ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å°†æ•°æ®æ˜¾ç¤ºåœ¨æ§åˆ¶å°ä¸Š å®¢æˆ·ç«¯ï¼š 1234567891011121314151617181920212223242526272829303132@Test public void client()&#123; Socket socket = null; OutputStream os = null; try &#123; // 1.åˆ›å»ºSocketå¯¹è±¡ï¼ŒæŒ‡æ˜æœåŠ¡å™¨çš„ipå’Œç«¯å£å· InetAddress inet = InetAddress.getByName(&quot;127.0.0.1&quot;); socket = new Socket(inet, 8899); // è·å–ä¸€ä¸ªè¾“å‡ºæµï¼Œç”¨äºè¾“å‡ºæ•°æ® os = socket.getOutputStream(); os.write(&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯å®¢æˆ·ç«¯&quot;.getBytes()); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(os != null)&#123; os.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(socket != null)&#123; socket.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; æœåŠ¡ç«¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162@Testpublic void Server()&#123; ServerSocket serverSocket = null; Socket socket = null; InputStream is = null; ByteArrayOutputStream baos = null; try &#123; // 1. åˆ›å»ºæœåŠ¡å™¨=ç«¯çš„ServerSocket,æŒ‡æ˜è‡ªå·±çš„ç«¯å£å· serverSocket = new ServerSocket(8899); // 2.è°ƒç”¨accept()è¡¨ç¤ºæ¥å£æ¥è‡ªå®¢æˆ·ç«¯çš„socket socket = serverSocket.accept(); // 3.è·å–è¾“å…¥æµ is = socket.getInputStream(); // 4.è¯»å–è¾“å…¥æµä¸­çš„æ•°æ® baos = new ByteArrayOutputStream(); byte[] bt = new byte[1024]; int len; while((len = is.read(bt)) != -1)&#123; baos.write(bt, 0, len); &#125; System.out.println(baos.toString()); System.out.println(&quot;æ”¶åˆ°äº†æ¥è‡ªï¼š&quot;+socket.getInetAddress().getHostAddress()+&quot;çš„æ•°æ®&quot;); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(serverSocket != null)&#123; serverSocket.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(socket != null)&#123; socket.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(is != null)&#123; is.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(baos != null)&#123; baos.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; ä»£ç ç¤ºä¾‹ 2ï¼šå®¢æˆ·ç«¯å‘é€æ–‡ä»¶ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å°†æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ã€‚ å®¢æˆ·ç«¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344@Testpublic void client()&#123; Socket socket = null; OutputStream os = null; FileInputStream fis = null; try &#123; socket = new Socket(InetAddress.getByName(&quot;127.0.0.1&quot;), 8899); os = socket.getOutputStream(); fis = new FileInputStream(&quot;1.jpg&quot;); byte[] bt = new byte[1024]; int len; while((len = fis.read(bt)) != -1)&#123; os.write(bt, 0, len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; if(fis != null)&#123; try &#123; fis.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(os != null)&#123; try &#123; os.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(socket != null)&#123; try &#123; socket.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; æœåŠ¡ç«¯ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Testpublic void Server()&#123; ServerSocket ss = null; Socket socket = null; InputStream is = null; FileOutputStream fos = null; try &#123; ss = new ServerSocket(8899); socket = ss.accept(); is = socket.getInputStream(); fos = new FileOutputStream(new File(&quot;å›¾ç‰‡2.jpg&quot;)); byte[] bt = new byte[1024]; int len; while((len = is.read(bt)) != -1)&#123; fos.write(bt, 0,len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; if(ss != null)&#123; try &#123; ss.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(socket != null)&#123; try &#123; socket.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(is != null)&#123; try &#123; is.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(fos != null)&#123; try &#123; fos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; ä¸‰ã€UDP ç¼–ç¨‹å‘é€ç«¯ï¼š 123456789101112131415161718@Testpublic void sender()&#123; DatagramSocket socket = null; try &#123; socket = new DatagramSocket(); String str = &quot;æˆ‘æ˜¯UDPæ–¹å¼å‘é€çš„å¯¼å¼¹&quot;; byte[] data = str.getBytes(); InetAddress inet = InetAddress.getLocalHost(); DatagramPacket packet = new DatagramPacket(data, 0, data.length, inet, 9090); socket.send(packet); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; socket.close(); &#125;&#125; æ¥æ”¶ç«¯ï¼š 12345678910@Testpublic void receiver() throws IOException &#123; DatagramSocket socket = new DatagramSocket(9090); byte[] buffer = new byte[1024]; DatagramPacket packet = new DatagramPacket(buffer, 0, buffer.length); socket.receive(packet); System.out.println(new String(packet.getData(),0,packet.getLength()));&#125; å››ã€URL ç¼–ç¨‹1ã€URL(Uniform Resource Locator) çš„ç†è§£â€‹ ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå¯¹åº”ç€äº’è”ç½‘çš„æŸä¸€èµ„æºåœ°å€ 2ã€URL çš„ 5 ä¸ªåŸºæœ¬ç»“æ„ http://localhost:8080/examples/beauty.jpg?username=Tom åè®® ä¸»æœºå ç«¯å£å· èµ„æºåœ°å€ å‚æ•°åˆ—è¡¨ 3ã€å®ä¾‹åŒ–1URL url = new URL(&quot;http://localhost:8080/examples/beauty.jpg?username=Tom&quot;); 4ã€å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° public String getProtocol() è·å–è¯¥ URL çš„åè®®å public String getHost() è·å– URL çš„ä¸»æœºå public String getPort() è·å– URL çš„ç«¯å£å· public String getPath() è·å– URL çš„æ–‡ä»¶è·¯å¾„ public String getFile() è·å– URL çš„æ–‡ä»¶å public String getQuery() è·å– URL çš„æŸ¥è¯¢å äº”ã€å¯ä»¥è¯»å–ã€ä¸‹è½½å¯¹åº”çš„ url èµ„æº123456789101112131415161718192021222324252627282930313233343536373839404142434445public static void main(String[] args) &#123; HttpURLConnection urlConnection = null; InputStream is = null; FileOutputStream fos = null; try &#123; URL url = new URL(&quot;http://localhost:8080/examples/beauty.jpg&quot;); urlConnection = (HttpURLConnection) url.openConnection(); urlConnection.connect(); is = urlConnection.getInputStream(); fos = new FileOutputStream(&quot;day10\\\\beauty3.jpg&quot;); byte[] buffer = new byte[1024]; int len; while((len = is.read(buffer)) != -1)&#123; fos.write(buffer,0,len); &#125; System.out.println(&quot;ä¸‹è½½å®Œæˆ&quot;); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; //å…³é—­èµ„æº if(is != null)&#123; try &#123; is.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(fos != null)&#123; try &#123; fos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if(urlConnection != null)&#123; urlConnection.disconnect(); &#125; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"Spring5ä¹‹äº‹åŠ¡çš„æ“ä½œ","slug":"Spring5ä¹‹äº‹åŠ¡çš„æ“ä½œ","date":"2020-07-26T16:00:00.000Z","updated":"2020-10-25T02:24:00.236Z","comments":true,"path":"posts/2817363972.html","link":"","permalink":"http://blog.oy6090.top/posts/2817363972.html","excerpt":"","text":"ä¸€ã€äº‹åŠ¡çš„æ“ä½œï¼ˆäº‹åŠ¡çš„æ¦‚å¿µï¼‰1ã€äº‹åŠ¡ äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œçš„åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœä¸€ä¸ªå¤±è´¥æ‰€æœ‰çš„æ“ä½œéƒ½å¤±è´¥ å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦ lucy è½¬è´¦ 100 å…ƒ ç»™ mary lucy å°‘ 100 ï¼Œ mary å¤š 100 2ã€äº‹ç‰©å››ä¸ªç‰¹å¾ï¼ˆACIDï¼‰ åŸå­æ€§ ä¸€è‡´æ€§ éš”ç¦»æ€§ æŒä¹…æ€§ äºŒã€äº‹åŠ¡æ“ä½œï¼ˆæ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒï¼‰ 1ã€åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæ·»åŠ è®°å½• 2ã€åˆ›å»º service, æ­å»º dao, å®Œæˆå¯¹è±¡çš„åˆ›å»ºå’Œæ³¨å…¥å…³ç³» service æ³¨å…¥ dao, åœ¨ dao æ³¨å…¥ Jdbctemplate, åœ¨ JdbcTemplate æ³¨å…¥ DataSource 123456789101112@Servicepublic class UserService &#123; //æ³¨å…¥ dao @Autowired private UserDao userDao;&#125;@Repositorypublic class UserDaoImpl implements UserDao &#123; @Autowiredprivate JdbcTemplate jdbcTemplate;&#125; 3ã€åœ¨åˆ°åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼šå¤šé’±å’Œå°‘é’±çš„æ–¹æ³•ï¼Œåœ¨ service åˆ›å»ºæ–¹æ³•ï¼ˆè½¬è´¦çš„æ–¹æ³•ï¼‰1234567891011121314151617@Repositorypublic class UserDaoImpl implements UserDao&#123; @Autowired private JdbcTemplate jdbcTemplate; @Override public void reduceMoney() &#123; String sql = &quot;update t_account set money=money-? where username=?&quot;; jdbcTemplate.update(sql, 100, &quot;lucy&quot;); &#125; @Override public void addMoney() &#123; String sql = &quot;update t_account set money = money + ? where username = ?&quot;; jdbcTemplate.update(sql, 100, &quot;mary&quot;); &#125;&#125; 123456789101112131415@Servicepublic class UserService &#123; // æ³¨å…¥dao @Autowired private UserDao userDao; // è½¬è´¦çš„æ–¹æ³• public void accountMoney()&#123; //lucy å°‘ 100 userDao.reduceMoney(); //mary å¤š 100 userDao.addMoney(); &#125;&#125; 4ã€æ¨¡æ‹Ÿå¼‚å¸¸123456789101112131415161718@Servicepublic class UserService &#123; // æ³¨å…¥dao @Autowired private UserDao userDao; // è½¬è´¦çš„æ–¹æ³• public void accountMoney()&#123; //lucy å°‘ 100 userDao.reduceMoney(); //æ¨¡æ‹Ÿå¼‚å¸¸ int i = 10/0; //mary å¤š 100 userDao.addMoney(); &#125;&#125; ä¸‰ã€äº‹åŠ¡çš„æ“ä½œï¼ˆSpring äº‹åŠ¡ç®¡ç†ä»‹ç»ï¼‰1ã€äº‹åŠ¡æ·»åŠ åˆ° JavaEE ä¸‰å±‚ç»“æ„é‡Œé¢ Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰ 2ã€åœ¨ Spring è¿›è¡Œäº‹åŠ¡ç®¡ç†çš„æ“ä½œ æœ‰ä¸¤ç§æ–¹å¼ï¼šç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆä½¿ç”¨ï¼‰ 3ã€å£°æ˜å¼äº‹åŠ¡ç®¡ç† åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰ åŸºäº xml é…ç½®æ–‡ä»¶æ–¹å¼ 4ã€åœ¨ Spring è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨ AOP åŸç† 5ã€Spring äº‹åŠ¡ç®¡ç† API æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸ç”¨çš„å®ç°ç±» å››ã€äº‹åŠ¡æ“ä½œï¼ˆæ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰1ã€åœ¨ Spring é…ç½®æ–‡ä»¶é…ç½®äº‹åŠ¡ç®¡ç†å™¨12345&lt;!--åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;!--æ³¨å…¥æ•°æ®æº--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 2ã€åœ¨ Spring é…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£ åœ¨ Spring é…ç½®æ–‡ä»¶å¼•å…¥åç§°ç©ºé—´ tx xmlns:tx=â€http://www.springframework.org/schema/tx&quot; 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt; å¼€å¯äº‹åŠ¡çš„æ³¨è§£ 12&lt;!--å¼€å¯äº‹åŠ¡æ³¨è§£--&gt;&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt; 3ã€åœ¨ service ç±»ä¸Šé¢ï¼ˆæˆ–è€… service ç±»é‡Œé¢æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ äº‹åŠ¡æ³¨è§£ @Transactional, è¿™ä¸ªæ³¨è§£æ·»åŠ åˆ°ç±»ä¸Šï¼Œä¹Ÿå¯ä»¥æ·»åŠ åˆ°æ–¹æ³•ä¸Šé¢ å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ ç±»ä¸Šé¢ï¼Œè¿™ä¸ªç±»é‡Œé¢ æ‰€æœ‰çš„æ–¹æ³•éƒ½æ·»åŠ äº‹åŠ¡ å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ æ–¹æ³•ä¸Šé¢ï¼Œä¸ºè¿™ä¸ªæ–¹æ³•æ·»åŠ äº‹åŠ¡ 123@Service@Transactionalpublic class UserService &#123; äº”ã€äº‹åŠ¡æ“ä½œï¼ˆå£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®ï¼‰1ã€åœ¨ service ç±»ä¸Šé¢æ·»åŠ æ³¨è§£@Transactional,åœ¨è¿™ä¸ªæ³¨è§£é‡Œé¢å¯ä»¥é…ç½®äº‹åŠ¡ç›¸å…³å‚æ•° 2ã€propagation: äº‹åŠ¡ä¼ æ’­è¡Œä¸ºâ€‹ ï¼ˆ1ï¼‰å¤šäº‹åŠ¡æ–¹æ³•ç›´æ¥è¿›è¡Œè°ƒç”¨ä»¥åŠç®¡ç† äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¯ä»¥ç”±ä¼ æ’­å±æ€§æŒ‡å®šã€‚Spring å®šä¹‰äº† 7 ç§ç±»ä¼ æ’­è¡Œä¸º 123@Service@Transactional(propagation = Propagation.REQUIRED)public class UserService &#123; 3ã€ioslation: äº‹åŠ¡çš„éš”ç¦»çº§åˆ« äº‹åŠ¡æœ‰ç‰¹å¾æˆä¸ºéš”ç¦»æ€§ï¼Œå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜ æœ‰ä¸‰ä¸ªè¯»é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™šï¼ˆå¹»ï¼‰è¯» è„è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ® ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡ä¿®æ”¹æ•°æ® è™šè¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡æ·»åŠ æ•°æ® è§£å†³ï¼šé€šè¿‡è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œè§£å†³è¯»çš„é—®é¢˜ 123@Service@Transactional(propagation = Propagation.REQUIRED,isolation = Isolation.REPEATABLE_READ)public class UserService &#123; 4ã€timeoutï¼šè¶…æ—¶æ—¶é—´ äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæé«˜ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»šã€‚ ï¼Œé»˜è®¤è®¾ç½®æ˜¯ï¼š-1ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®— 5ã€readOnly: æ˜¯å¦åªè¯» è¯»ï¼šæŸ¥è¯¢æ“ä½œ, å†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ readOnly é»˜è®¤å€¼ false,è¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ è®¾ç½® readOnly å€¼æ˜¯ true,è®¾ç½®æˆ true ä¹‹åï¼Œåªèƒ½æŸ¥è¯¢ 6ã€rollbackFor: å›æ»š è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡çš„å›æ»š 7ã€noRollbackFor: ä¸å›æ»š è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š å…­ã€äº‹åŠ¡æ“ä½œï¼ˆXML å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰1ã€åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½® â€‹ ç¬¬ä¸€æ­¥ é…ç½®äº‹åŠ¡ç®¡ç†å™¨ â€‹ ç¬¬äºŒæ­¥ é…ç½®é€šçŸ¥ â€‹ ç¬¬ä¸‰æ­¥ é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ 123456789101112131415161718192021&lt;!--1 åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot;class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;!--æ³¨å…¥æ•°æ®æº--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--2 é…ç½®é€šçŸ¥--&gt;&lt;tx:advice id=&quot;txadvice&quot;&gt; &lt;!--é…ç½®äº‹åŠ¡å‚æ•°--&gt; &lt;tx:attributes&gt; &lt;!--æŒ‡å®šå“ªç§è§„åˆ™çš„æ–¹æ³•ä¸Šé¢æ·»åŠ äº‹åŠ¡--&gt; &lt;tx:method name=&quot;accountMoney&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;--&gt; &lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!--3 é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢--&gt;&lt;aop:config&gt; &lt;!--é…ç½®åˆ‡å…¥ç‚¹--&gt; &lt;aop:pointcut id=&quot;pt&quot; expression=&quot;execution(*com.atguigu.spring5.service.UserService.*(..))&quot;/&gt; &lt;!--é…ç½®åˆ‡é¢--&gt; &lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pt&quot;/&gt;&lt;/aop:config&gt; ä¸ƒã€äº‹åŠ¡æ“ä½œï¼ˆå®Œå…¨æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰123456789101112131415161718192021222324252627282930313233@Configuration // é…ç½®ç±»@ComponentScan(basePackages = &quot;com.oy.online.Spring&quot;)// ç»„ä»¶æ‰«æ@EnableTransactionManagement // å¼€å¯äº‹åŠ¡public class TxConfig &#123; // åˆ›å»ºæ•°æ®åº“è¿æ¥æ±  @Bean public DruidDataSource getDruidSource()&#123; DruidDataSource dataSource = new DruidDataSource(); dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;); dataSource.setUrl(&quot;jdbc:mysql:///user_db&quot;); dataSource.setUsername(&quot;root&quot;); dataSource.setPassword(&quot;root&quot;); return dataSource; &#125; // åˆ›å»ºJdbcTemplateå¯¹è±¡ @Bean public JdbcTemplate getJdbcTemplate(DataSource dataSource)&#123; // åˆ°iocå®¹å™¨ä¸­æ ¹æ®ç±»å‹æ‰¾åˆ°dataSource JdbcTemplate jdbcTemplate = new JdbcTemplate(); // æ³¨å…¥dataSource jdbcTemplate.setDataSource(dataSource); return jdbcTemplate; &#125; // åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ @Bean public DataSourceTransactionManager dataSourceTransactionManager(DataSource dataSource)&#123; DataSourceTransactionManager transactionManager = new DataSourceTransactionManager(); transactionManager.setDataSource(dataSource); return transactionManager; &#125;&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Spring","slug":"Spring","permalink":"http://blog.oy6090.top/tags/Spring/"}]},{"title":"Spring5ä¹‹JdbcTemplate","slug":"Spring5ä¹‹JdbcTemplate","date":"2020-07-25T16:00:00.000Z","updated":"2020-10-25T02:24:12.348Z","comments":true,"path":"posts/1762820479.html","link":"","permalink":"http://blog.oy6090.top/posts/1762820479.html","excerpt":"","text":"ä¸€ã€JdbcTemplate(æ¦‚å¿µå’Œå‡†å¤‡)1ã€JdbcTemplateâ€‹ Spring æ¡†æ¶å¯¹ jdbc è¿›è¡Œå°è£…ï¼Œ ä½¿ç”¨ JdbcTemPlate æ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“æ“ä½œ 2ã€è¿‡ç¨‹å‡†å¤‡ å¼•å…¥ç›¸å…³ jar åŒ… åœ¨ spring é…ç½®æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ±  1234567&lt;!--æ•°æ®åº“è¿æ¥æ± --&gt;&lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; destroy-method=&quot;close&quot;&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///user_db&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;6090&quot;/&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;&lt;/bean&gt; é…ç½® JdbcTemplate å¯¹è±¡ï¼Œæ³¨å…¥ DataSource 12345&lt;!--JdbcTemplateå¯¹è±¡--&gt;&lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;!--æ³¨å…¥ dateSource--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt; åˆ›å»º service ç±»ï¼Œåˆ›å»º dao ç±»ï¼Œåœ¨ dao æ³¨å…¥ jdbcTemplate å¯¹è±¡ é…ç½®æ–‡ä»¶ 12&lt;!--ç»„ä»¶æ‰«æ--&gt;&lt;context:component-scan base-package=&quot;com.oy.online.Spring&quot;&gt;&lt;/context:component-scan&gt; Service 1234567@Servicepublic class BookService &#123; // æ³¨å…¥dao @Autowired private BookDao bookDao;&#125; Dao 1234567@Repositorypublic class BookDaoImpl implements BookDao &#123; // æ³¨å…¥ JdbcTemplate @Autowired private JdbcTemplate jdbcTemplate;&#125; äºŒã€JdbcTemplate æ“ä½œæ•°æ®åº“ï¼ˆæ·»åŠ ï¼‰1ã€å¯¹åº”æ•°æ®åº“åˆ›å»ºå®ä½“ç±»1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class Book &#123; private String userId; private String username; private String ustatus; public User() &#123; &#125; public User(String userId, String username, String ustatus) &#123; this.userId = userId; this.username = username; this.ustatus = ustatus; &#125; public String getUserId() &#123; return userId; &#125; public void setUserId(String userId) &#123; this.userId = userId; &#125; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getUstatus() &#123; return ustatus; &#125; public void setUstatus(String ustatus) &#123; this.ustatus = ustatus; &#125; @Override public String toString() &#123; return &quot;User&#123;&quot; + &quot;userId=&#x27;&quot; + userId + &#x27;\\&#x27;&#x27; + &quot;, username=&#x27;&quot; + username + &#x27;\\&#x27;&#x27; + &quot;, ustatus=&#x27;&quot; + ustatus + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125; 2ã€ç¼–å†™ service å’Œ dao åœ¨ dao è¿›è¡Œæ•°æ®åº“æ·»åŠ æ“ä½œ è°ƒç”¨ JdbcTemplate å¯¹è±¡é‡Œé¢ update æ–¹æ³•å®ç°æ·»åŠ æ“ä½œ ç¬¬ä¸€ä¸ªå‚æ•°ï¼š sql è¯­å¥ ç¬¬äºŒä¸ªå‚æ•°ï¼š å¯å˜å‚æ•°ï¼Œè®¾ç½® sql è¯­å¥å€¼ 123456789101112131415161718@Repositorypublic class BookDaoImpl implements BookDao &#123; // æ³¨å…¥ JdbcTemplate @Autowired private JdbcTemplate jdbcTemplate; // æ·»åŠ æ–¹æ³• @Override public void add(Book book) &#123; // 1.åˆ›å»ºsqlè¯­å¥ String sql = &quot;insert into t_book values(?,?,?)&quot;; // 2.è°ƒç”¨æ–¹æ³•å®ç° Object[] args = &#123;book.getUserId(), book.getUsername(), book.getUstatus()&#125;; jdbcTemplate.update(sql, args); &#125;&#125; 3ã€æµ‹è¯•ç±»12345678@Testpublic void jdbcTemplateTest()&#123; ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean1.xml&quot;); BookService bookService = context.getBean(&quot;bookService&quot;, BookService.class); Book book = new Book(&quot;1&quot;, &quot;Java&quot;, &quot;a&quot;); bookService.addBook(book);&#125; ä¸‰ã€JdbcTemplate æ“ä½œæ•°æ®åº“ï¼ˆä¿®æ”¹å’Œåˆ é™¤ï¼‰1ã€ä¿®æ”¹12345678// ä¿®æ”¹@Overridepublic void updateBook(Book book) &#123; String sql = &quot;update t_book set username=?, ustatus=? where user_id=?&quot;; Object[] args = &#123;book.getUsername(), book.getUstatus(), book.getUserId()&#125;; int update = jdbcTemplate.update(sql, args); System.out.println(update);&#125; 2ã€åˆ é™¤123456@Override public void deletes(String id) &#123; String sql = &quot;delete from t_book where user_id=?&quot;; int update = jdbcTemplate.update(sql, id); System.out.println(update); &#125; å››ã€JdbcTemplate æ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›æŸä¸ªå€¼ï¼‰1ã€æŸ¥è¯¢è¡¨é‡Œé¢æœ‰å¤šå°‘æ¡è®°å½•ï¼Œè¿”å›æ˜¯æŸä¸ªå€¼ 2ã€ä½¿ç”¨ JdbcTemplate å®ç°æŸ¥è¯¢è¿”å›æŸä¸ªå€¼ä»£ç  ç¬¬ä¸€ä¸ªå‚æ•°ï¼š sql è¯­å¥ ç¬¬äºŒä¸ªå‚æ•°ï¼šè¿”å›ç±»å‹ Class 123456@Overridepublic int selectCountBook() &#123; String sql = &quot;select count(*) from t_book&quot;; Integer count = jdbcTemplate.queryForObject(sql, Integer.class); return count;&#125; äº”ã€JdbcTemplate æ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›å¯¹è±¡ï¼‰1ã€åœºæ™¯ï¼šæŸ¥è¯¢å›¾ä¹¦è¯¦æƒ… 2ã€JdbcTemplate å®ç°æŸ¥è¯¢è¿”å›å¯¹è±¡ ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsql è¯­å¥ ç¬¬äºŒä¸ªå‚æ•°ï¼š RowMapper æ˜¯æ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒçš„ç±»å‹æ•°æ®ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£é‡Œé¢å®ç°ç±»å®Œæˆæ•°æ®å°è£… ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šsql è¯­å¥çš„å€¼ 1234567// æŸ¥è¯¢è¿”å›å¯¹è±¡@Overridepublic Book findBookInfo(String id) &#123; String sql = &quot;select * from t_book where user_id = ?&quot;; Book book = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;Book&gt;(Book.class),id); return book;&#125; å…­ã€JdbcTemplate æ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›é›†åˆï¼‰1ã€åœºæ™¯ï¼šæŸ¥è¯¢å›¾ä¹¦åˆ—è¡¨åˆ†é¡µ 2ã€è°ƒç”¨ JdbcTemplate æ–¹æ³•å®ç°æŸ¥è¯¢è¿”å›é›†åˆ ç¬¬ä¸€ä¸ªå‚æ•°ï¼š sql è¯­å¥ ç¬¬äºŒä¸ªå‚æ•°ï¼šRowMapper æ˜¯æ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿çš„è¿™ä¸ªæ¥å£é‡Œé¢å®ç°ç±»å®Œæˆæ•°æ®å°è£… ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šsql è¯­å¥ 1234567@Overridepublic List&lt;Book&gt; findAllBook() &#123; String sql = &quot;select * from t_book&quot;; // è°ƒç”¨æ–¹æ³• List&lt;Book&gt; list = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;Book&gt;(Book.class)); return list;&#125; ä¸ƒã€JdbcTemplate æ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ“ä½œï¼‰1ã€æ‰¹é‡æ“ä½œï¼šæ“ä½œè¡¨é‡Œé¢çš„å¤šæ¡è®°å½• 2ã€JdbcTemplate å®ç°æ‰¹é‡æ·»åŠ æ“ä½œ ç¬¬ä¸€ä¸ªå‚æ•°ï¼š sql è¯­å¥ ç¬¬äºŒä¸ªå‚æ•°ï¼š List é›†åˆï¼Œæ·»åŠ å¤šæ¡è®°å½•æ•°æ® æ‰¹é‡æ·»åŠ  123456@Override public void batchAddBook(List&lt;Object[]&gt; batchArgs) &#123; String sql = &quot;insert into t_book value(?,?,?)&quot;; int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs); System.out.println(ints); &#125; æµ‹è¯•ï¼š 123456789List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;();Object[] o1 = &#123;&quot;3&quot;,&quot;java&quot;,&quot;a&quot;&#125;;Object[] o2 = &#123;&quot;4&quot;,&quot;c++&quot;,&quot;b&quot;&#125;;Object[] o3 = &#123;&quot;5&quot;,&quot;MySQL&quot;,&quot;c&quot;&#125;;batchArgs.add(o1);batchArgs.add(o2);batchArgs.add(o3);//è°ƒç”¨æ‰¹é‡æ·»åŠ bookService.bacthAdd(batchArgs); 3ã€JDBCTemplate å®ç°æ‰¹é‡ä¿®æ”¹æ“ä½œ 123456@Overridepublic void batchUpdateBook(List&lt;Object[]&gt; batchArgs) &#123; String sql = &quot;update t_book set username=?,ustatus=? where user_id=?&quot;; int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs); System.out.println(Arrays.toString(ints));&#125; æµ‹è¯•ï¼š 123456789List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;();Object[] o1 = &#123;&quot;java0909&quot;,&quot;a3&quot;,&quot;3&quot;&#125;;Object[] o2 = &#123;&quot;c++1010&quot;,&quot;b4&quot;,&quot;4&quot;&#125;;Object[] o3 = &#123;&quot;MySQL1111&quot;,&quot;c5&quot;,&quot;5&quot;&#125;;batchArgs.add(o1);batchArgs.add(o2);batchArgs.add(o3);//è°ƒç”¨æ–¹æ³•å®ç°æ‰¹é‡ä¿®æ”¹bookService.batchUpdate(batchArgs); 4ã€JdbcTemplate å®ç°æ‰¹é‡åˆ é™¤æ“ä½œ 1234567// æ‰¹é‡åˆ é™¤@Overridepublic void batchdeleteBook(List&lt;Object[]&gt; batchArgs) &#123; String sql = &quot;delete from t_book where user_id = ?&quot;; int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs); System.out.println(Arrays.toString(ints));&#125; æµ‹è¯•ï¼š 1234567//æ‰¹é‡åˆ é™¤List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;();Object[] o1 = &#123;&quot;3&quot;&#125;;Object[] o2 = &#123;&quot;4&quot;&#125;;batchArgs.add(o1);batchArgs.add(o2);//è°ƒç”¨æ–¹æ³•å®ç°æ‰¹é‡åˆ é™¤bookService.batchDelete(batchArgs);","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Spring","slug":"Spring","permalink":"http://blog.oy6090.top/tags/Spring/"}]},{"title":"Javaä¹‹IOæµ","slug":"Javaä¹‹IOæµ","date":"2020-07-24T16:00:00.000Z","updated":"2021-01-21T11:04:36.714Z","comments":true,"path":"posts/2120368839.html","link":"","permalink":"http://blog.oy6090.top/posts/2120368839.html","excerpt":"","text":"ä¸€ã€File ç±»çš„ä½¿ç”¨1ã€File ç±»çš„ç†è§£â€‹ â‘  File ç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶ç›®å½•ï¼ˆä¿—ç§°ï¼šæ–‡ä»¶å¤¹ï¼‰ â€‹ â‘¡ File ç±»å£°æ˜çš„ç ¸ Java.io åŒ…ä¸‹ â€‹ â‘¢ File ç±»ä¸­æ¶‰åŠå…³äºæ–‡ä»¶æˆ–æ–‡ä»¶ç›®å½•çš„åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€ä¿®æ”¹æ—¶é—´ã€æ–‡ä»¶å¤§å°ç­‰æ–¹æ³•ï¼Œå¹¶æ¶‰åŠåˆ°å†™å…¥çš„è¯»å–æ–‡ä»¶å†…å®¹çš„æ“ä½œã€‚å¦‚æœéœ€è¦è¯»å–æˆ–å†™å…¥çš„ â€ç»ˆç‚¹â€œã€‚ 2ã€File çš„å®ä¾‹åŒ–å¸¸ç”¨çš„æ„é€ å™¨ 123File(String filePath)File(String parenPath, String childPath)File(File parenFile, String childPath) è·¯å¾„çš„åˆ†ç±» 12ç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹æŸä¸ªè·¯å¾„ï¼ŒæŒ‡æ˜çš„è·¯å¾„ç»å¯¹è·¯å¾„ï¼šåŒ…å«ç›˜ç¬¦åœ¨å†…çš„æ–‡ä»¶æˆ–æ–‡ä»¶ç›®å½•çš„è·¯å¾„ è·¯å¾„åˆ†éš”ç¬¦ 12windows å’Œ DOC ç³»ç»Ÿçš„é»˜è®¤ä½¿ç”¨â€œ\\â€æ¥è¡¨ç¤ºUNIX å’Œ URL ä½¿ç”¨â€œ/â€ æ¥è¡¨ç¤º äºŒã€æµçš„åˆ†ç±»1ã€æµçš„åˆ†ç±» æ“ä½œæ•°æ®çš„å•ä½ï¼šå­—èŠ‚æµã€å­—ç¬¦æµ æ•°æ®çš„æµå‘ï¼šè¾“å…¥æµã€è¾“å‡ºæµ æµçš„è§’è‰²ï¼šèŠ‚ç‚¹æµã€å¤„ç†æµ å›¾ç¤ºï¼š 2ã€æµçš„ä½“ç³»ç»“æ„ è¯´æ˜ï¼š çº¢æ¡†å¯¹åº”çš„æ˜¯ IO æµä¸­çš„ 4 ä¸ªæŠ½è±¡åŸºç±»ã€‚ 3ã€è¾“å…¥ã€è¾“å‡ºçš„æ ‡å‡†åŒ–è¿‡ç¨‹â‘  è¾“å…¥è¿‡ç¨‹ åˆ›å»º File ç±»çš„å¯¹è±¡ï¼ŒæŒ‡æ˜è¯»å–æ•°æ®çš„æ¥æºã€‚ï¼ˆè¦æ±‚æ­¤æ–‡ä»¶ä¸€å®šå­˜åœ¨ï¼‰ åˆ›å»ºç›¸å¯¹åº”çš„è¾“å…¥æµï¼Œå°† File ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥æµçš„æ„é€ å™¨ä¸­ å…·ä½“çš„è¯»å…¥è¿‡ç¨‹ï¼šåˆ›å»ºç›¸å¯¹åº”çš„ byte[ ] æˆ– char[ ] å…³é—­æµèµ„æº è¯´æ˜ï¼š ç¨‹åºä¸­å‡ºç°çš„å¼‚å¸¸éœ€è¦ä½¿ç”¨ try-catch-finally å¤„ç†ã€‚ â‘¡ è¾“å…¥è¿‡ç¨‹ åˆ›å»º File ç±»å¯¹è±¡ï¼ŒæŒ‡æ˜å†™å‡ºçš„æ•°æ®çš„ä½ç½®ã€‚(ä¸è¦æ±‚æ­¤æ–‡ä»¶ä¸€å®šå­˜åœ¨) åˆ›å»ºç›¸å¯¹åº”çš„è¾“å‡ºæµï¼Œå°† File ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥æµçš„æ„é€ å™¨ä¸­ã€‚ å…·ä½“çš„å†™å…¥è¿‡ç¨‹ï¼šwrite(byte[ ] æˆ– char[ ], 0, len) å…³é—­æµèµ„æº è¯´æ˜ï¼šç¨‹åºä¸­å‡ºç°çš„å¼‚å¸¸éœ€è¦ä½¿ç”¨ try-catch-finally å¤„ç†ã€‚ ä¸‰ã€èŠ‚ç‚¹æµï¼ˆæˆ–æ–‡ä»¶æµï¼‰1ã€FileReader/FileWirter çš„ä½¿ç”¨â‘  FileReader çš„ä½¿ç”¨ read() çš„ç†è§£ï¼šè¿”å›è¯»å…¥çš„ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœè¾¾åˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚è¿”å›-1 å¼‚å¸¸çš„å¤„ç†ï¼šä¸ºäº†ä¿è¯æµçš„èµ„æºä¸€å®šå¯ä»¥æ‰§è¡Œå…³é—­æ“ä½œã€‚éœ€è¦ä½¿ç”¨ try-catch-finally å¤„ç† è¯»å…¥çš„æ–‡ä»¶ä¸€å®šè¦å­˜åœ¨ï¼Œå¦åˆ™å°±ä¼šæŠ¥ FileNotExcptionã€‚ 123456789101112131415161718192021222324252627282930@Testpublic void test() &#123; FileReader fr = null; try &#123; // 1. Fileçš„å®ä¾‹åŒ– File file = new File(&quot;hello.txt&quot;); // 2.FileReaderæµçš„å®ä¾‹åŒ– fr = new FileReader(file); // 3.è¯»å…¥çš„æ“ä½œ // read(char[] ch):è¿”å›æ¯æ¬¡è¯»å…¥chæ•°ç»„ä¸­çš„å­—ç¬¦çš„ä¸ªæ•°ã€‚å¦‚æœè¾¾åˆ°æ–‡ä»¶æœ«å°¾ char[] ch = new char[1024]; int len; while((len = fr.read(ch)) != -1)&#123; String str = new String(ch, 0, len); System.out.println(str); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(fr != null)&#123; fr.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; â‘¡ FileWrite çš„ä½¿ç”¨ è¾“å‡ºæ“ä½œï¼Œå¯¹åº”çš„ File å¯ä»¥ä¸å­˜åœ¨çš„ã€‚å¹¶ä¸ä¼šæŠ¥å¼‚å¸¸ File å¯¹åº”çš„ç¡¬ç›˜ä¸­æ–‡ä»¶å¦‚æœä¸å­˜åœ¨ï¼Œåœ¨è¾“å‡ºçš„è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ­¤æ–‡ä»¶ã€‚ File å¯¹åº”çš„ç¡¬ç›˜ä¸­æ–‡ä»¶å¦‚æœå­˜åœ¨ï¼š â€‹ å¦‚æœæµä½¿ç”¨çš„æ„é€ å™¨æ˜¯ï¼šFileWriter(file, false)/ FileWriter(file): å¯¹åŸæ–‡ä»¶çš„è¦†ç›– â€‹ å¦‚æœæµä½¿ç”¨çš„æ„é€ å™¨æ˜¯ï¼šFileWriter(file,true): ä¸ä¼šå¯¹åŸæ–‡ä»¶è¦†ç›–ï¼Œè€Œæ˜¯åŸæ–‡ä»¶åŸºç¡€ä¸Šè¿½åŠ å†…å®¹ 1234567891011121314151617181920212223242526@Testpublic void test2() &#123; FileWriter fw = null; try &#123; // 1.æä¾›Fileç±»çš„å¯¹è±¡ï¼ŒæŒ‡æ˜å†™å‡ºåˆ°æ–‡ä»¶ File file = new File(&quot;hello.txt&quot;); // 2.æä¾›FileWriterçš„å¯¹è±¡ï¼Œç”¨äºæ•°æ®å†™å‡º fw = new FileWriter(file, false); // 3.å†™å‡ºçš„æ“ä½œ fw.write(&quot;I have a dream!\\n&quot;); fw.write(&quot;you need to have a dream!&quot;); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; // 4.æµèµ„æºå…³é—­ try &#123; if (fw != null)&#123; fw.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; â‘¢ æ–‡æœ¬æ–‡ä»¶å¤åˆ¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243@Testpublic void test3()&#123; FileReader fr = null; FileWriter fw = null; try &#123; // 1.åˆ›å»ºFileç±»çš„å¯¹è±¡ï¼ŒæŒ‡æ˜è¯»å…¥å’Œå†™å…¥æ–‡ä»¶ File srcfile = new File(&quot;hello.txt&quot;); File dsrcfile1 = new File(&quot;hello1.txt&quot;); // 2.åˆ›å»ºè¾“å…¥æµå’Œè¾“å‡ºæµ fr = new FileReader(srcfile); fw = new FileWriter(dsrcfile1); // æ•°æ®çš„è¯»å†™å’Œå†™å…¥æ“ä½œ char[] ch = new char[1024]; // è®°å½•æ¯æ¬¡è¯»å…¥åˆ°chæ•°ç»„ä¸­çš„å­—ç¬¦ä¸²çš„ä¸ªæ•° int len; while((len = fr.read(ch)) != -1)&#123; // æ¯æ¬¡å†™å‡ºlenä¸ªå­—ç¬¦ fw.write(ch,0,len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; // 4. å…³é—­æµèµ„æº try &#123; if(fw != null)&#123; fw.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(fr != null)&#123; fr.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 2ã€FileInputStream / FileOutputStream çš„ä½¿ç”¨ å¯¹äºæ–‡æœ¬æ–‡ä»¶ï¼ˆ**.txt**, .java, .c, .cppï¼‰, ä½¿ç”¨å­—ç¬¦æµå¤„ç† å¯¹äºéæ–‡æœ¬æ–‡ä»¶ï¼ˆ**.jpg** , .mp3, .mp4, .avi, .doc, .pptï¼‰ï¼Œä½¿ç”¨å­—èŠ‚æµå¤„ç† 1234567891011121314151617181920212223242526272829303132333435363738394041@Testpublic void test1()&#123; FileInputStream fis = null; FileOutputStream fos = null; try &#123; // 1. é€ æ–‡ä»¶ File srcfile = new File(&quot;å›¾ç‰‡.jpg&quot;); File desrfile = new File(&quot;å›¾ç‰‡2.jpg&quot;); // 2.é€ æµ fis = new FileInputStream(srcfile); fos = new FileOutputStream(desrfile); // 3.å¤åˆ¶çš„è¿‡ç¨‹ byte[] bt = new byte[1024]; int len; while((len = fis.read(bt)) != -1)&#123; fos.write(bt,0,len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(fis != null)&#123; fis.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(fos != null)&#123; fos.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; ã€æ³¨æ„ã€‘ IDEAï¼š å¦‚æœä½¿ç”¨å•å…ƒæµ‹è¯•æ–¹æ³•ï¼Œç›¸å¯¹è·¯å¾„å½“å‰ Module çš„ã€‚ å¦‚æœä½¿ç”¨ main() æµ‹è¯•ï¼Œç›¸å¯¹è·¯å¾„åŸºäºå½“å‰ Project çš„ã€‚ Eclipesï¼š å•å…ƒæµ‹è¯•æ–¹æ³•è¿˜æ˜¯ main(), ç›¸å¯¹è·¯å¾„éƒ½æ˜¯åŸºäºå½“å‰ Project çš„ã€‚ å››ã€ç¼“å†²æµ1ã€ç¼“å†²æµæ¶‰åŠåˆ°çš„ç±» BufferedInputStream BufferedOutputStream BufferedReader BufferedWriter 2ã€ä½œç”¨ä½œç”¨ï¼šæé«˜æµçš„è¯»å–ã€å†™å…¥çš„é€Ÿåº¦ æé«˜è¯»å†™é€Ÿåº¦çš„åŸå› ï¼šå†…éƒ¨æä¾›äº†ä¸€ä¸ªç¼“å†²åŒºã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯ 8kb 3ã€ä»£ç æ¼”ç¤ºâ‘  ä½¿ç”¨ BufferadInputStream å’Œ BufferadOutputStream ï¼šå¤„ç†éæ–‡æœ¬ 12345678910111213141516171819202122232425262728293031323334353637383940@Test public void test1()&#123; BufferedInputStream bis = null; BufferedOutputStream bos = null; try &#123; // 1.é€ æ–‡ä»¶ File srcfile = new File(&quot;å›¾ç‰‡.jpg&quot;); File dsrcfile = new File(&quot;å›¾ç‰‡3.jpg&quot;); // 2.é€ æµ // 2.1èŠ‚ç‚¹æµ FileInputStream fis = new FileInputStream(srcfile); FileOutputStream fos = new FileOutputStream(dsrcfile); // 2.2 èŠ‚ç‚¹æµ bis = new BufferedInputStream(fis); bos = new BufferedOutputStream(fos); // 3.å¤åˆ¶çš„ç»†èŠ‚ï¼šè¯»å–ã€å†™å…¥ byte[] bt = new byte[1024]; int len; while((len = bis.read(bt)) != -1)&#123; bos.write(bt, 0, len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; // 4. å…³é—­èµ„æº try &#123; bos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; bis.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; â‘¡ ä½¿ç”¨ BufferedReader å’Œ BufferedWriterï¼šå¤„ç†æ–‡æœ¬æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637@Test public void test2()&#123; BufferedReader br = null; BufferedWriter bw = null; try &#123; File srcfile = new File(&quot;hello.txt&quot;); File dsrcfile = new File(&quot;hello3.txt&quot;); // é€ æµ br = new BufferedReader(new FileReader(srcfile)); bw = new BufferedWriter(new FileWriter(dsrcfile)); // 3. è¯»å– // ç¬¬ä¸€ç§æ–¹å¼ String data; while((data = br.readLine()) != null)&#123; // dataä¸­ä¸åŒ…å«æ¢è¡Œç¬¦ bw.write(data); // æä¾›æ¢è¡Œç¬¦ bw.newLine(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; // 4. å…³é—­æµèµ„æº try &#123; br.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; bw.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; 1234567//è¯»å–çš„ç¬¬äºŒç§æ–¹å¼char[] cbuf = new char[1024];int len;while((len = br.read(cbuf)) != -1)&#123; bw.write(cbuf,0,len); bw.flush();&#125; äº”ã€è½¬æ¢æµ1ã€è½¬æ¢æµæ¶‰åŠåˆ°çš„ç±»ï¼šå±äºå­—ç¬¦æµ InputStreamReader: å°†ä¸€ä¸ªå­—èŠ‚çš„è¾“å…¥è½¬æ¢ä¸ºå­—ç¬¦çš„è¾“å…¥æµ è§£ç ï¼šå­—èŠ‚ã€å­—èŠ‚ç»„ â€“&gt; å­—ç¬¦æ•°ç»„ã€å­—ç¬¦ä¸² OutputStreamWriter: å°†ä¸€ä¸ªå­—ç¬¦çš„è¾“å…¥æµè½¬æ¢å­—èŠ‚çš„è¾“å‡ºæµ ç¼–ç ï¼šå­—ç¬¦æ•°ç»„ã€å­—ç¬¦ä¸² â€“&gt; å­—èŠ‚ã€å­—èŠ‚æ•°ç»„ è¯´æ˜ï¼šç¼–ç å†³å®šäº†è§£ç çš„çš„æ–¹å¼ 2ã€æ–¹å¼æä¾›å­—èŠ‚æµä¸å­—ç¬¦æµä¹‹é—´çš„è½¬æ¢ 3ã€å›¾ç¤º 4ã€å…¸å‹æ¡ˆä¾‹123456789101112131415161718192021222324252627@Testpublic void test1() &#123; InputStreamReader isr = null; try &#123; FileInputStream fis = new FileInputStream(&quot;hello.txt&quot;); isr = new InputStreamReader(fis, &quot;UTF-8&quot;); char[] ch = new char[1024]; int len; while((len = isr.read(ch)) != -1)&#123; String str = new String(ch, 0, len); System.out.println(str); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (isr != null)&#123; isr.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; å¤„ç†å¼‚å¸¸ä½¿ç”¨ try-catch ç»¼åˆä½¿ç”¨ InputStreamReader å’Œ OutputStreamWriter 123456789101112131415161718192021222324252627282930313233343536373839404142@Testpublic void test2() &#123; InputStreamReader isr = null; OutputStreamWriter osw = null; try &#123; // 1.é€ æ–‡ä»¶ã€é€ æµ File file1 = new File(&quot;hello.txt&quot;); File file2 = new File(&quot;hello_gbk.txt&quot;); FileInputStream fis = new FileInputStream(file1); FileOutputStream fos = new FileOutputStream(file2); isr = new InputStreamReader(fis, &quot;UTF-8&quot;); osw = new OutputStreamWriter(fos, &quot;gbk&quot;); // 2.è¯»å†™è¿‡ç¨‹ char[] ch = new char[1024]; int len; while((len = isr.read(ch)) != -1)&#123; osw.write(ch, 0, len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(isr != null)&#123; isr.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if(osw != null)&#123; osw.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; å…­ã€å¯¹è±¡æµ1ã€å¯¹è±¡æµ ObjectInputStream å’Œ ObjectOutputStream 2ã€ä½œç”¨ObjectInputStream: å†…å­˜ä¸­çš„å¯¹è±¡ â€“&gt; å­˜å‚¨ä¸­çš„æ–‡ä»¶ã€é€šè¿‡ç½‘è·¯ä¼ è¾“è¿‡å»ï¼šåºåˆ—åŒ–è¿‡ç¨‹ ObjectOutputStream: å­˜å‚¨ä¸­æ–‡ä»¶ã€é€šè¿‡ç½‘ç»œæ¥æ”¶è¿‡æ¥ â€“&gt; å†…å­˜ä¸­çš„å¯¹è±¡ï¼šååºåˆ—åŒ–çš„è¿‡ç¨‹ 3ã€å¯¹è±¡çš„åºåˆ—åŒ–æœºåˆ¶ å¯¹è±¡åºåˆ—åŒ–æœºåˆ¶å…è®¸æŠŠå†…å­˜ä¸­çš„ Java å¯¹è±¡è½¬æ¢æˆå¹³å°æ— å…³çš„äºŒè¿›åˆ¶æµï¼Œä»è€Œå…è®¸æŠŠè¿™äºŒè¿›åˆ¶æµæŒä¹…ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œæˆ–é€šè¿‡ç½‘è·¯å°†è¿™ç§äºŒè¿›åˆ¶æµè¾“å…¥åˆ°å¦ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ å½“å…¶ä»–ç¨‹åºè·å–åˆ°è¿™ç§äºŒè¿›åˆ¶æµï¼Œå°±å¯ä»¥æ¢å¤åŸæ¥çš„ java å¯¹è±¡ 4ã€åºåˆ—åŒ–ä»£ç åˆ›å»º Person ç±»(å®ç° Serializable æ¥å£ï¼Œæ·»åŠ åºåˆ—å·)ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940public class Person implements Serializable &#123; /** * åºåˆ—å· */ public static final long serialVersionUID = 475463534532L; private String name; private int id; public Person() &#123; &#125; public Person(String name, int id) &#123; this.name = name; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; @Override public String toString() &#123; return &quot;Person&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, id=&quot; + id + &#x27;&#125;&#x27;; &#125;&#125; 1234567891011121314151617181920212223@Test public void test1() &#123; ObjectOutputStream oos = null; try &#123; oos = new ObjectOutputStream(new FileOutputStream(&quot;object.dat&quot;)); oos.writeObject(new String(&quot;ä½ å¥½&quot;)); oos.flush();//åˆ·æ–°æ“ä½œ oos.writeObject(new Person(&quot;å°æ˜&quot;,23)); oos.flush(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (oos != null)&#123; oos.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; 5ã€ååºåˆ—åŒ–ä»£ç 123456789101112131415161718192021222324252627@Testpublic void test2()&#123; ObjectInputStream ois = null; try &#123; ois = new ObjectInputStream(new FileInputStream(&quot;object.dat&quot;)); Object obj = ois.readObject(); String str = (String) obj; Person p = (Person) ois.readObject(); System.out.println(str); System.out.println(p); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (ois != null)&#123; ois.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 6ã€å®ç°åºåˆ—åŒ–çš„å¯¹è±¡æ‰€å±çš„ç±»éœ€è¦æ»¡è¶³ï¼š éœ€è¦å®ç°æ¥å£ï¼šSerializable å½“å‰ç±»æä¾›ä¸€ä¸ªå…¨å±€å¸¸é‡ï¼šSeriaVersionUID é™¤äº†å½“å‰ Person ç±»éœ€è¦å®ç° Serializable æ¥å£ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¿è¯å…¶å†…éƒ¨ç±»æ‰€å±æ€§ä¹Ÿå¿…é¡»æ˜¯å¯åºåˆ—åŒ–ã€‚(é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å¯åºåˆ—åŒ–) ObjectOutputStream å’Œ ObjectInputStream ä¸èƒ½åºåˆ—åŒ– static ä¿®é¥°çš„æˆå‘˜å˜é‡ã€‚ ä¸ƒã€å…¶ä»–æµçš„ä½¿ç”¨1ã€æ ‡å‡†è¾“å…¥è¾“å‡ºæµ System.in : æ ‡å‡†çš„è¾“å…¥æµï¼Œé»˜è®¤ä»é”®ç›˜è¾“å…¥ System.out : æ ‡å‡†çš„è¾“å‡ºæµï¼Œé»˜è®¤ä»æ§åˆ¶å°è¾“å‡º ä¿®æ”¹é»˜è®¤çš„è¾“å…¥å’Œè¾“å‡ºè¡Œä¸ºï¼š â€‹ System ç±»çš„ setIn(InputStream is) / setOut(prinStream ps) æ–¹å¼é‡æ–°æŒ‡å®šè¾“å…¥å’Œè¾“å‡ºæµã€‚ 2ã€æ‰“å°æµ PrinStream å’Œ PrintWriter è¯´æ˜ï¼š æä¾›ä¸€ç³»åˆ—é‡è½½çš„ print()çš„æ–¹æ³•ï¼Œç”¨äºå¤šç§æ•°æ®ç±»å‹çš„è¾“å‡º System.out è¿”å›çš„æ˜¯ PrintStream çš„å®ä¾‹ 3ã€æ•°æ®æµ DataInputStream å’Œ DataOutputStream ä½œç”¨ï¼šç”¨äºè¯»å–æˆ–å†™å‡ºåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡æˆ–å­—ç¬¦ä¸² å®ä¾‹ 1ï¼šå°†å†…å­˜ä¸­çš„å­—ç¬¦ä¸²ã€åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡å†™åˆ°æ–‡ä»¶ä¸­ã€‚ 12345678910111213141516171819202122232425262728 @Test public void test1()&#123;// DataInputStream dis = new DataInputStream(new FileInputStream(&quot;hello.txt&quot;)); DataOutputStream dos = null; try &#123; dos = new DataOutputStream(new FileOutputStream(&quot;data.txt&quot;)); dos.writeUTF(&quot;OY&quot;); // åˆ·æ–°æ“ä½œï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥æ–‡ä»¶ dos.flush(); dos.writeInt(19); dos.flush(); dos.writeBoolean(true); dos.flush(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(dos != null)&#123; dos.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; å®ä¾‹ 2ï¼šå°†æ–‡ä»¶ä¸­å­˜å‚¨çš„åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å’Œå­—ç¬¦ä¸²è¯»å–åˆ°å†…å­˜ä¸­ï¼Œä¿å­˜åœ¨å˜é‡ä¸­ã€‚ 12345678910111213141516171819202122232425@Testpublic void test2() &#123; DataInputStream dis = null; try &#123; dis = new DataInputStream(new FileInputStream(&quot;data.txt&quot;)); String name = dis.readUTF(); int age = dis.readInt(); Boolean isMale = dis.readBoolean(); System.out.println(&quot;name=&quot; + name); System.out.println(&quot;age=&quot; + age); System.out.println(&quot;isMale=&quot; + isMale); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if(dis != null)&#123; dis.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; å…«ã€RandomAccesFile çš„ä½¿ç”¨1ã€éšæœºå­˜å‚¨æ–‡ä»¶æµ RondomAccessFile ç›´æ¥ç»§æ‰¿äº java.Object ç±»ï¼Œå®ç° DataInput å’Œ DataOutput æ¥å£ RandomAccessFile æ—¢å¯ä»¥ä½œä¸ºè¾“å…¥æµï¼Œåˆå¯ä»¥ä½œä¸ºä¸€ä¸ªè¾“å‡ºæµ å¦‚æœ RandomAccessFile ä½œä¸ºè¾“å‡ºæµæ—¶ï¼Œå†™å‡ºåˆ°çš„æ–‡ä»¶å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è‡ªåŠ¨åˆ›å»ºã€‚ å¦‚æœå†™å‡ºåˆ°çš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¹Ÿå¯¹åŸæ–‡ä»¶å†…å®¹è¿›è¡Œè¦†ç›–ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œä»å¤´è¦†ç›–ï¼‰ å¯ä»¥é€šè¿‡ç›¸å…³çš„æ“ä½œï¼Œå®ç° RandomAccessFileâ€æ’å…¥â€æ•°æ®çš„æ•ˆæœã€‚seekï¼ˆint posï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435@Testpublic void test1()&#123; RandomAccessFile raf1 = null; RandomAccessFile raf2 = null; try &#123; raf1 = new RandomAccessFile(new File(&quot;å›¾ç‰‡.jpg&quot;), &quot;r&quot;); raf2 = new RandomAccessFile(new File(&quot;å›¾ç‰‡4.jpg&quot;), &quot;rw&quot;); byte[] bt = new byte[1024]; int len; while((len = raf1.read(bt)) != -1)&#123; raf2.write(bt, 0, len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (raf1 != null)&#123; raf1.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; if (raf2 != null)&#123; raf2.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"Javaé›†åˆä¹‹Collectionså·¥å…·ç±»","slug":"Javaé›†åˆä¹‹Collectionså·¥å…·ç±»","date":"2020-07-23T16:00:00.000Z","updated":"2021-01-22T03:50:56.903Z","comments":true,"path":"posts/12372.html","link":"","permalink":"http://blog.oy6090.top/posts/12372.html","excerpt":"","text":"ä¸€ã€Collections å·¥å…·ç±»ä½œç”¨ï¼šæ“ä½œ colleaction å’Œ Map çš„å·¥å…·ç±» äºŒã€å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° reverse(List) åè½¬ List ä¸­å…ƒç´ çš„é¡ºåº shuffle(List) å¯¹ List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº sort(List) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ å‡åºæ’åº sort(Listï¼ŒComparator) æ ¹æ®æŒ‡å®šçš„ Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åº swap(Listï¼Œintï¼Œ int) å°†æŒ‡å®š list é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢ Object max(Collection) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´  Object max(Collectionï¼ŒComparator) æ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´  Object min(Collection) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å°å…ƒç´  Object min(Collectionï¼ŒComparator) æ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å°å…ƒç´  int frequency(Collectionï¼ŒObject) è¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•° void copy(List dest,List src) å°† src ä¸­çš„å†…å®¹å¤åˆ¶åˆ° dest ä¸­ boolean replaceAll(List listï¼ŒObject oldValï¼ŒObject newVal) ä½¿ç”¨æ–°å€¼æ›¿æ¢ List å¯¹è±¡çš„æ‰€æ—§å€¼ æ³¨ï¼šcopy ç‰¹åˆ«æ³¨æ„ 123456789101112@Testpublic void test1()&#123; List list = new ArrayList(); list.add(123); list.add(43); list.add(765); list.add(-97); list.add(0); List list1 = Arrays.asList(new Object[list.size()]); Collections.copy(list1,list); System.out.println(list1);&#125; è¯´æ˜ï¼š ArrayList å’Œ HashMap éƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¦‚æœç¨‹åºè¦æ±‚çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥å°† ArrayListã€HashMap è½¬æ¢ä¸ºçº¿ç¨‹çš„ã€‚ ä½¿ç”¨ï¼š sysnchronizedList(List list) å’Œ sysnchronizedMap(Map map) 123//è¿”å›çš„list1å³ä¸ºçº¿ç¨‹å®‰å…¨çš„List List list = new ArrayList();List list1 = Collections.synchronizedList(list);","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"Spring5ä¹‹AOP","slug":"Spring5ä¹‹AOP","date":"2020-07-23T16:00:00.000Z","updated":"2020-10-25T02:25:02.412Z","comments":true,"path":"posts/1738458658.html","link":"","permalink":"http://blog.oy6090.top/posts/1738458658.html","excerpt":"","text":"ä¸€ã€AOPï¼ˆæ¦‚å¿µï¼‰ï¼ˆ1ï¼‰é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆæ–¹é¢ï¼‰ï¼Œåˆ©ç”¨ AOP å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ ï¼ˆ2ï¼‰é€šä¿—çš„æè¿°ï¼šä¸é€šä¿®æ”¹æºä»£ç æ–¹å¼ï¼Œåœ¨ä¸»åŠŸèƒ½é‡Œé¢æ·»åŠ æ–°åŠŸèƒ½ ï¼ˆ3ï¼‰ä½¿ç”¨ç™»å½•ä¾‹å­è¯´æ˜ AOP å›¾ç¤ºï¼š äºŒã€AOP (åº•å±‚åŸç†)1ã€AOP åº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†ï¼ˆ1ï¼‰æœ‰ä¸¤ç§æƒ…å†µåŠ¨æ€ä»£ç† â€‹ ç¬¬ä¸€ç§ æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨ JDK åŠ¨æ€ä»£ç† åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³• ç¬¬äºŒç§æ²¡æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨ CGLIB åŠ¨æ€ä»£ç† åˆ›å»ºå­ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³• ä¸‰ã€AOP(JDK åŠ¨æ€ä»£ç†)1ã€ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨ Proxy ç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡ ï¼ˆ1ï¼‰è°ƒç”¨ newProxyInstance æ–¹æ³• æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š ç¬¬ä¸€å‚æ•°ï¼šç±»åŠ è½½å™¨ ç¬¬äºŒå‚æ•°ï¼šå¢å¼ºæ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œè¿™ä¸ªç±»å®ç°çš„æ¥å£ï¼Œæ”¯æŒå¤šä¸ªæ¥å£ ç¬¬ä¸‰å‚æ•°ï¼Œå®ç°è¿™ä¸ªæ¥å£ InvocationHandler, åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå†™å¢å¼ºçš„éƒ¨åˆ† 2ã€ç¼–å†™ JDK åŠ¨æ€ä»£ç†ä»£ç ï¼ˆ1ï¼‰åˆ›å»ºæ¥å£ï¼Œå®šä¹‰æ–¹æ³• 1234public interface UserDao &#123; public int add(int a,int b); public String update(String id);&#125; ï¼ˆ2ï¼‰åˆ›å»ºæ¥å£å®ç°ç±»ï¼Œå®ç°æ–¹æ³• 12345678910public class UserDaoImpl implements UserDao &#123; @Override public int add(int a, int b) &#123; return a+b; &#125; @Override public String update(String id) &#123; return id; &#125;&#125; ï¼ˆ3ï¼‰ä½¿ç”¨ Proxy ç±»åˆ›å»ºæ¥å£ä»£ç†å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536public class JDKProxy &#123; public static void main(String[] args)&#123; //åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ Class[] interfaces = &#123;UserDao.class&#125;;// Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces,new InvocationHandler() &#123;// @Override// public Object invoke(Object proxy, Method method, Object[] args)throws Throwable &#123;// return null;// &#125;// &#125;); UserDaoImpl userDao = new UserDaoImpl(); UserDao dao = (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new UserDaoProxy(userDao)); int result = dao.add(1,2); System.out.println(&quot;result=&quot;+result); &#125;&#125;// åˆ›å»ºä»£ç†å¯¹è±¡çš„ä»£ç class UserDaoProxy implements InvocationHandler&#123; // 1.æŠŠåˆ›å»ºçš„æ˜¯è°çš„ä»£ç†å¯¹è±¡ï¼ŒæŠŠè°ä¼ é€’è¿‡æ¥ // æœ‰å‚æ•°æ„é€ ä¼ é€’ private Object obj; public UserDaoProxy(Object obj)&#123; this.obj = obj; &#125; // å¢å¼ºçš„é€»è¾‘ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; // æ–¹æ³•ä¹‹å‰ System.out.println(&quot;æ–¹æ³•æ‰§è¡Œ....&quot;+method.getName()+&quot;:ä¼ é€’çš„å‚æ•°...&quot;+ Arrays.toString(args)); // è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ Object res = method.invoke(obj, args); // æ–¹æ³•ä¹‹å System.out.println(&quot;æ–¹æ³•ä¹‹åæ‰§è¡Œ...&quot;+obj); return res; &#125;&#125; ä¸‰ã€AOP æœ¯è¯­1ã€è¿æ¥ç‚¹â€‹ ç±»é‡Œé¢å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œè¿™äº›æ–¹æ³•ç§°ä¸ºè¿æ¥ç‚¹ 2ã€åˆ‡å…¥ç‚¹â€‹ å®é™…è¢«çœŸæ­£å¢å¼ºçš„æ–¹æ³•ï¼Œç§°ä¹‹åˆ‡å…¥ç‚¹ 3ã€é€šçŸ¥ï¼ˆå¢å¼ºï¼‰â€‹ ï¼ˆ1ï¼‰ å®é™…å¢å¼ºçš„é€»è¾‘éƒ¨åˆ†ç§°ä¸ºé€šçŸ¥ â€‹ ï¼ˆ2ï¼‰é€šçŸ¥çš„å¤šç§ç±»å‹ â€‹ â‘  å‰ç½®é€šçŸ¥ â‘¡ åç½®é€šçŸ¥ â‘¢ ç¯ç»•é€šçŸ¥ â‘£ å¼‚å¸¸é€šçŸ¥ â‘¤ æœ€ç»ˆé€šçŸ¥ 4ã€åˆ‡é¢â€‹ æŠŠé€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹çš„è¿‡ç¨‹ å››ã€AOP æ“ä½œ1ã€Spring æ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯åŸºäº AspectJ å®ç° AOP æ“ä½œâ€‹ AspectJ ä¸æ˜¯ Spring ç»„æˆéƒ¨åˆ†ï¼Œç‹¬ç«‹ AOP æ¡†æ¶ï¼Œ ä¸€èˆ¬æŠŠ AspectJ å’Œ Spring æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œè¿›è¡Œ AOP æ“ä½œ 2ã€åŸºäº AspectJ å®ç° AOP æ“ä½œâ€‹ ï¼ˆ1ï¼‰åŸºäº xml é…ç½®æ–‡ä»¶å®ç° â€‹ ï¼ˆ2ï¼‰åŸºäºæ³¨è§£æ–¹å¼å®ç°ï¼ˆä½¿ç”¨ï¼‰ 3ã€åœ¨é¡¹ç›®å·¥ç¨‹é‡Œé¢å¼•å…¥ AOP ç›¸å…³ä¾èµ–â€‹ 4ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼â€‹ ï¼ˆ1ï¼‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º â€‹ ï¼ˆ2ï¼‰è¯­æ³•ç»“æ„ï¼šexecution([æƒé™ä¿®é¥°ç¬¦][è¿”å›å€¼ç±»å‹][ç±»å…¨è·¯å¾„][æ–¹æ³•åç§°][å‚æ•°åˆ—è¡¨]) ä¸¾ä¾‹ 1: å¯¹ com.oy.dao.BookDao ç±»é‡Œé¢çš„ add è¿›è¡Œå¢å¼º 1execution(* com.oy.dao.BookDao.add(..)) ä¸¾ä¾‹ 2ï¼šå¯¹ com.oy.dao.BookDao ç±»é‡Œé¢çš„æ‰€æœ‰çš„æ–¹æ³•è¿›è¡Œå¢å¼º 1execution(*.com.oy.dao.BookDao.*(..)) ä¸¾ä¾‹ 3ï¼šå¯¹ com.atguigu.dao åŒ…é‡Œé¢æ‰€æœ‰ç±»ï¼Œç±»é‡Œé¢æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º 1execution(* com.atguigu.dao.*.* (..)) äº”ã€AOP æ“ä½œï¼ˆAspectJ æ³¨è§£ï¼‰ 1ã€åˆ›å»ºç±»ï¼Œå†ç±»é‡Œé¢å®šä¹‰æ–¹æ³•12345public class User &#123; public void add()&#123; System.out.println(&quot;add....&quot;); &#125;&#125; 2ã€åˆ›å»ºå¢å¼ºç±»ï¼ˆç¼–å†™å¢å¼ºé€»è¾‘ï¼‰â€‹ ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»é‡Œé¢ï¼Œåˆ›å»ºæ–¹æ³•ï¼Œè®©ä¸åŒçš„ä»£è¡¨ä¸åŒçš„é€šçŸ¥ç±»å‹ 123456//å¢å¼ºçš„ç±»public class UserProxy &#123; public void before() &#123;//å‰ç½®é€šçŸ¥ System.out.println(&quot;before......&quot;); &#125;&#125; 3ã€è¿›è¡Œé…ç½®çš„é€šçŸ¥ï¼ˆ1ï¼‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å§‹æ³¨è§£æ‰«æ 12345678910&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!--å¼€å¯æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.oy.online.Spring.aopanno&quot;&gt;&lt;/context:component-scan&gt; â€‹ (2) ä½¿ç”¨æ³¨è§£åˆ›å»ºç±» User å’Œ UserProxy å¯¹è±¡ â€‹ ï¼ˆ3ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Aspect 1234//å¢å¼ºçš„ç±»@Component@Aspect //ç”Ÿæˆä»£ç†å¯¹è±¡public class UserProxy &#123; â€‹ ï¼ˆ4ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶ä¸­åå¼€å¯ç”Ÿæˆä»£ç†å¯¹è±¡ 12&lt;!-- å¼€å¯ Aspect ç”Ÿæˆä»£ç†å¯¹è±¡--&gt;&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt; 4ã€é…ç½®ä¸åŒç±»å‹çš„é€šçŸ¥â€‹ ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»é‡Œé¢ï¼Œåœ¨ä½œä¸ºé€šçŸ¥æ–¹æ³•ä¸Šé¢æ·»åŠ é€šçŸ¥ç±»å‹çš„æ³¨è§£ï¼Œä½¿ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é…ç½® 12345678910111213141516171819202122232425262728293031323334353637@Component@Aspectpublic class UserProxy &#123; // å‰ç½®é€šçŸ¥ // @Before æ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ @Before(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void before()&#123;// å‰ç½®é€šçŸ¥ System.out.println(&quot;before....&quot;); &#125; //åç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰ @AfterReturning(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void afterReturning()&#123;// å‰ç½®é€šçŸ¥ System.out.println(&quot;afterReturning....&quot;); &#125; //æœ€ç»ˆé€šçŸ¥ @After(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void after()&#123;// å‰ç½®é€šçŸ¥ System.out.println(&quot;after....&quot;); &#125; //å¼‚å¸¸é€šçŸ¥ @AfterThrowing(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void afterThrowing()&#123; System.out.println(&quot;afterThrowing.........&quot;); &#125; // ç¯ç»•é€šçŸ¥ @Around(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void around(ProceedingJoinPoint proceedingJoinPoint)throws Throwable&#123; System.out.println(&quot;ç¯ç»•ä¹‹å‰.........&quot;); //è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ proceedingJoinPoint.proceed(); System.out.println(&quot;ç¯ç»•ä¹‹å.........&quot;); &#125;&#125; 5ã€ç›¸åŒçš„åˆ‡å…¥ç‚¹æŠ½å–12345678910// ç›¸åŒåˆ‡å…¥ç‚¹ @Pointcut(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void pointdemo()&#123; &#125; // å‰ç½®é€šçŸ¥ // @Before æ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ @Before(value = &quot;pointdemo()&quot;) public void before()&#123;// å‰ç½®é€šçŸ¥ System.out.println(&quot;before....&quot;); &#125; 6ã€æœ‰å¤šä¸ªå¢å¼ºç±»åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œè®¾ç½®å¢å¼ºç±»ä¼˜å…ˆçº§â€‹ ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨é‡Š @Orderï¼ˆæ•°å­—ç±»å‹å€¼ï¼‰ï¼Œæ•°å­—ç±»å‹å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ 123456789@Component@Aspect@Order(1)public class PersonProxy &#123; @Before(value = &quot;execution(* com.oy.online.Spring.aopanno.User.add(..))&quot;) public void before()&#123;// å‰ç½®é€šçŸ¥ System.out.println(&quot;PersonProxy before....&quot;); &#125;&#125; 7ã€å®Œå…¨ä½¿ç”¨æ³¨è§£å¼€å‘â€‹ ï¼ˆ1ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œä¸éœ€è¦åˆ›å»º xml é…ç½®æ–‡ä»¶ 12345@Configuration@ComponentScan(basePackages = &#123;&quot;com.oy.online.Spring.aopanno&quot;&#125;)@EnableAspectJAutoProxy(proxyTargetClass = true)public class ConfigAOP &#123;&#125; æµ‹è¯•ï¼š 1234567@Testpublic void test2()&#123; ApplicationContext context = new AnnotationConfigApplicationContext(ConfigAOP.class); User user = context.getBean(&quot;user&quot;, User.class); user.add();&#125; å…­ã€AOP æ“ä½œï¼ˆAspectJ é…ç½®æ–‡ä»¶ï¼‰1ã€åˆ›å»ºä¸¤ä¸ªç±»ï¼Œå¢å¼ºç±»å’Œè¢«å¢å¼ºç±»ï¼Œåˆ›å»ºæ–¹æ³•123456// è¢«å¢å¼ºç±»public class Book &#123; public void buy()&#123; System.out.println(&quot;add.....&quot;); &#125;&#125; 123456// å¢å¼ºç±»public class BookProxy &#123; public void before()&#123; System.out.println(&quot;before.....&quot;); &#125;&#125; 2ã€åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­åˆ›å»ºä¸¤ä¸ªç±»çš„å¯¹è±¡123&lt;!--åˆ›å»ºå¯¹è±¡--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.oy.online.Spring.aopxml.Book&quot;&gt;&lt;/bean&gt; &lt;bean id=&quot;bookProxy&quot; class=&quot;com.oy.online.Spring.aopxml.BookProxy&quot;&gt;&lt;/bean&gt; 3ã€åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ‡å…¥ç‚¹123456789&lt;!--é…ç½®aopå¢å¼º--&gt; &lt;aop:config&gt; &lt;aop:pointcut id=&quot;p&quot; expression=&quot;execution(* com.oy.online.Spring.aopxml.Book.buy(..))&quot;/&gt; &lt;!--é…ç½®åˆ‡é¢--&gt; &lt;aop:aspect ref=&quot;bookProxy&quot;&gt; &lt;!--å¢å¼ºä½œç”¨åœ¨å…·ä½“çš„æ–¹æ³•ä¸Š--&gt; &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;p&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; 4ã€æµ‹è¯•ç±»1234567@Testpublic void test3()&#123; ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean2.xml&quot;); Book book = context.getBean(&quot;book&quot;, Book.class); book.buy();&#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Spring","slug":"Spring","permalink":"http://blog.oy6090.top/tags/Spring/"}]},{"title":"javaä¹‹æ³›å‹","slug":"javaæ³›å‹","date":"2020-07-22T16:00:00.000Z","updated":"2021-01-22T03:50:35.159Z","comments":true,"path":"posts/3994269159.html","link":"","permalink":"http://blog.oy6090.top/posts/3994269159.html","excerpt":"","text":"ä¸€ã€æ³›å‹æ¦‚å¿µæ‰€è°“æ³›å‹ï¼Œå°±æ˜¯å…è®¸è‡ªå®šä¹‰ç±»ï¼Œæ¥å£é€šè¿‡ä¸€ä¸ªæ ‡è¯†ç±»ä¸­çš„æŸä¸ªå±æ€§çš„ç±»å‹æˆ–è€…æ˜¯æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼åŠå‚æ•°ç±»å‹ã€‚ è¿™ä¸ªç±»å‹å‚æ•°å°†åœ¨ä½¿ç”¨æ—¶.(ä¾‹å¦‚ï¼Œç»§æ‰¿æˆ–å®ç°è¿™ä¸ªæ¥å£ï¼Œç”¨è¿™ä¸ªç±»å‹å£°æ˜å˜é‡ã€åˆ›å»ºå¯¹è±¡æ—¶ç¡®å®š(å³ä¼ å…¥å®é™…ç±»å‹å‚æ•°ï¼Œä¹Ÿç§°ç±»å‹å®å‚))ã€‚ äºŒã€æ³›å‹çš„å¼•ç”¨èƒŒæ™¯â€‹ é›†åˆå®¹å™¨ç±»åœ¨è®¾è®¡é˜¶æ®µ/å£°æ˜é˜¶æ®µä¸èƒ½ç¡®å®šè¿™ä¸ªå®¹å™¨åˆ°åº•å®é™…å­˜çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ JDK1.5 ä¹‹å‰åªèƒ½æŠŠå…ƒç´ ç±»å‹è®¾è®¡ä¸º object,JDK1.5 ä¹‹åä½¿ç”¨æ³›å‹ç±»è§£å†³ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™é™¤äº†å…ƒç´ çš„ç±»å‹ä¸ç¡®å®šï¼Œå…¶ä»–çš„éƒ¨åˆ†æ˜¯ç¡®å®šçš„ï¼Œä¾‹å¦‚å…³äºè¿™ä¸ªè¿™ä¸ªå…ƒç´ å¦‚ä½•ä¿å­˜çš„ï¼Œå¦‚ä½•ç®¡ç†ç­‰ä½¿ç¡®å®šçš„ï¼Œå› æ­¤æ­¤æ—¶æŠŠå…ƒç´ çš„ç±»å‹è®¾è®¡æˆä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªç±»å‹å‚æ•°å«åšæ³›å‹ã€‚Collectionï¼ŒList è¿™ä¸ªå°±æ˜¯ç±»å‹å‚æ•°ï¼Œå³æ³›å‹ã€‚ ä¸‰ã€æ³›å‹åœ¨é›†åˆä¸­çš„ä½¿ç”¨1ã€æ²¡æœ‰ä½¿ç”¨æ³›å‹ä¹‹å‰å›¾ç¤ºï¼š 1234567891011121314151617 @Test public void test1()&#123; ArrayList list = new ArrayList(); //éœ€æ±‚ï¼šå­˜æ”¾å­¦ç”Ÿçš„æˆç»© list.add(78); list.add(76); list.add(89); list.add(88); // é—®é¢˜ä¸€ï¼šç±»å‹ä¸å®‰å…¨// list.add(&quot;Tom&quot;); for (Object obj : list) &#123; // é—®é¢˜äºŒï¼šå¼ºè½¬æ—¶ï¼Œå¯èƒ½å‡ºç°ClassCastException int stuScore = (Integer) obj; System.out.println(stuScore); &#125; &#125; 2ã€ä½¿ç”¨æ³›å‹å›¾ç¤ºï¼š 12345678910111213141516@Test public void test2()&#123; ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(78); list.add(87); list.add(99); list.add(65); // ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨ // ä½¿ç”¨è¿­ä»£å™¨éå† Iterator&lt;Integer&gt; iterator = list.iterator(); while(iterator.hasNext())&#123; Integer next = iterator.next(); System.out.println(next); &#125; &#125; 1234567891011121314151617181920@Test public void test3()&#123; // åœ¨é›†åˆä¸­ä½¿ç”¨æ³›å‹çš„æƒ…å†µï¼šä»¥HashMapä¸ºä¾‹ // JDK 7 æ–°ç‰¹æ€§ï¼šç±»å‹åˆ¤æ–­ HashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); map.put(&quot;Tom&quot;,87); map.put(&quot;Jerry&quot;,87); map.put(&quot;Jack&quot;,67); // æ³›å‹çš„åµŒå¥— Set&lt;Map.Entry&lt;String, Integer&gt;&gt; entries = map.entrySet(); Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = entries.iterator(); while(iterator.hasNext())&#123; Map.Entry&lt;String, Integer&gt; e = iterator.next(); String key = e.getKey(); Integer value = e.getValue(); System.out.println(key +&quot;--&gt;&quot; + value); &#125; &#125; 3ã€é›†åˆä¸­ä½¿ç”¨æ³›å‹æ€»ç»“ é›†åˆæ¥å£æˆ–é›†åˆç±»åœ¨ JDk 5.0 æ—¶éƒ½ä¿®æ”¹å¸¦æ³›å‹çš„ç»“æ„ã€‚ åœ¨å®ä¾‹åŒ–é›†åˆç±»æ—¶ï¼Œå¯ä»¥æŒ‡æ˜å…·ä½“çš„æ³›å‹ç±»å‹ æŒ‡æ˜å®Œä»¥åï¼Œåœ¨é›†åˆæˆ–æ¥å£ä¸­å‡¡æ˜¯å®šä¹‰ç±»æˆ–æ¥å£æ—¶ï¼Œå†…éƒ¨ç»“æ„ï¼ˆæ¯”å¦‚ï¼šæ–¹æ³•ã€æ„é€ å™¨ã€å±æ€§ç­‰ï¼‰ä½¿ç”¨åˆ°ç±»çš„æ³›å‹çš„ä½ç½®ï¼Œéƒ½æŒ‡å®šä¸ºå®ä¾‹åŒ–çš„æ³›å‹ç±»å‹ã€‚ æ¯”å¦‚ï¼šaddï¼ˆE eï¼‰ â€”&gt; å®ä¾‹åŒ–å¿…é¡»æ˜¯ç±»ï¼Œä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚éœ€è¦ç”¨åˆ°åŸºæœ¬æ•°æ®ç±»å‹çš„ä½ç½®ï¼Œæ‹¿åŒ…è£…ç±»æ›¿æ¢ å¦‚æœå®ä¾‹åŒ–æ—¶ï¼Œæ²¡æŒ‡æ˜æ³›å‹çš„ç±»å‹ã€‚é»˜è®¤ç±»å‹ä¸º java.Object ç±»å‹ã€‚ å››ã€è‡ªå®šä¹‰æ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€Order.javaã€‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243public class Order&lt;T&gt; &#123; String orderName; int orderId; // ç±»çš„å†…éƒ¨ç»“æ„å°±å¯ä»¥ä½¿ç”¨ç±»çš„æ³›å‹ T orderT; public Order()&#123; T[] arr = (T[]) new Object[10]; &#125; public Order(String orderName, int orderId, T orderT) &#123; this.orderName = orderName; this.orderId = orderId; this.orderT = orderT; &#125; // å¦‚ä¸‹çš„æ–¹æ³•ä¸æ˜¯æ³›å‹æ–¹æ³• public T getOrderT() &#123; return orderT; &#125; public void setOrderT(T orderT) &#123; this.orderT = orderT; &#125; @Override public String toString() &#123; return &quot;Order&#123;&quot; + &quot;orderName=&#x27;&quot; + orderName + &#x27;\\&#x27;&#x27; + &quot;, orderId=&quot; + orderId + &quot;, orderT=&quot; + orderT + &#x27;&#125;&#x27;; &#125; public static &lt;E&gt;List&lt;E&gt; copyFormArrayTolist(E[] arr)&#123; ArrayList&lt;E&gt; list = new ArrayList&lt;&gt;(); for(E e : arr)&#123; list.add(e); &#125; return list; &#125;&#125; æ³¨æ„ï¼š é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ç±»çš„æ³›å‹ã€‚ æ³›å‹æ–¹æ³•ï¼šåœ¨æ–¹æ³•ä¸­å‡ºç°äº†æ³›å‹çš„ç»“æ„ï¼Œæ³›å‹å‚æ•°ä¸ç±»çš„æ³›å‹å‚æ•°æ²¡ä»»ä½•å…³ç³»ã€‚ æ¢å¥è¯è¯´ï¼Œæ³›å‹æ–¹æ³•æ‰€å±çš„ç±»æ˜¯ä¸æ˜¯æ³›å‹ç±»éƒ½æ²¡å…³ç³»ã€‚ æ³›å‹æ–¹æ³•ï¼Œå¯ä»¥å£°æ˜ä¸ºé™æ€çš„ã€‚åŸå› ï¼šæ³›å‹å‚æ•°æ˜¯åœ¨è°ƒç”¨æ–¹æ³•æ—¶ç¡®å®šçš„ã€‚å¹¶éåœ¨å®ä¾‹åŒ–ç±»æ—¶ç¡®å®šã€‚ ã€SubOrder.javaã€‘ 1234567891011121314public class SubOrder extends Order&lt;Integer&gt; &#123;//SubOrder:ä¸æ˜¯æ³›å‹ç±» public static &lt;E&gt; List&lt;E&gt; copyFromArrayToList(E[] arr)&#123; ArrayList&lt;E&gt; list = new ArrayList&lt;&gt;(); for(E e : arr)&#123; list.add(e); &#125; return list; &#125;&#125; æ³¨æ„ï¼šå®ä¾‹åŒ–æ—¶ï¼Œå¦‚ä¸‹çš„ä»£ç æ˜¯é”™è¯¯çš„ 1SubOrder&lt;Integer&gt; o &#x3D; new SubOrder&lt;&gt;(); ã€æµ‹è¯•ã€‘ 1234567891011121314151617181920212223242526272829303132public class OrderTest &#123; @Test public void test1()&#123; // å¦‚æœå®šä¹‰äº†æ³›å‹ï¼Œå®ä¾‹åŒ–æ²¡æŒ‡æ˜ç±»çš„æ³›å‹ï¼Œåˆ™è®¤ä¸ºæ­¤æ³›å‹ç±»å‹ä¸ºObjectç±»å‹ // è¦æ±‚ï¼šå¦‚æœå¤§å®¶å®šä¹‰ç±»æ˜¯å¸¦æ³›å‹çš„ï¼Œå»ºè®®åœ¨å®ä¾‹åŒ–æ—¶è¦æŒ‡æ˜ç±»çš„æ³›å‹ã€‚ Order order = new Order(); order.setOrderT(123); order.setOrderT(&quot;abc&quot;); // å»ºè®®ï¼šå®ä¾‹åŒ–æ—¶æŒ‡æ˜ç±»çš„æ³›å‹ Order&lt;String&gt; order1 = new Order&lt;&gt;(&quot;orderAA&quot;,1001,&quot;order:AA&quot;); order1.setOrderT(&quot;AA:hello&quot;); &#125; @Test public void test2()&#123; SubOrder sub1 = new SubOrder(); // ç”±äºå­ç±»åœ¨ç»§æ‰¿å¸¦æ³›å‹æ—¶ï¼ŒæŒ‡æ˜äº†æ³›å‹çš„ç±»å‹ã€‚åˆ™å®ä¾‹åŒ–å­ç±»å¯¹è±¡ï¼Œä¸åœ¨éœ€è¦æŒ‡æ˜æ³›å‹ã€‚ sub1.setOrderT(1122); &#125; @Test public void test3()&#123; Order&lt;String&gt; order = new Order&lt;&gt;(); Integer[] arr = &#123;1, 2, 3, 4, 5&#125;; // æ³›å‹æ–¹æ³•åœ¨è°ƒç”¨æ—¶ï¼ŒæŒ‡æ˜æ³›å‹å‚æ•°çš„ç±»å‹ã€‚ List&lt;Integer&gt; list = order.copyFormArrayTolist(arr); System.out.println(list); &#125;&#125; äº”ã€æ³¨æ„ç‚¹ å…­ã€é€šé…ç¬¦çš„ä½¿ç”¨é€šé…ç¬¦ï¼šï¼Ÿ â€‹ ç±» A æ˜¯ç±» B çš„çˆ¶ç±»ï¼ŒG&lt;A&gt;å’Œ G&lt;B&gt;æ˜¯æ²¡å…³ç³»çš„ï¼ŒäºŒè€…å…±åŒçš„çˆ¶ç±»æ˜¯ï¼šG&lt;?&gt; 12345678910111213@Test public void test()&#123; List&lt;Object&gt; list1 = null; List&lt;String&gt; list2 = null; List&lt;?&gt; list = null; list = list1; list = list2; System.out.println(list1); System.out.println(list2); &#125; è¿è¡Œç»“æœï¼š 12nullnull æœ‰é™åˆ¶æ¡ä»¶çš„é€šé…ç¬¦çš„ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/* é™åˆ¶æ¡ä»¶çš„é€šé…ç¬¦çš„ä½¿ç”¨ã€‚ ? extends A: G&lt;? extends A&gt; å¯ä»¥ä½œä¸ºG&lt;A&gt;å’ŒG&lt;B&gt;çš„çˆ¶ç±»ï¼Œå…¶ä¸­Bæ˜¯Açš„å­ç±» ? super A: G&lt;? super A&gt; å¯ä»¥ä½œä¸ºG&lt;A&gt;å’ŒG&lt;B&gt;çš„çˆ¶ç±»ï¼Œå…¶ä¸­Bæ˜¯Açš„çˆ¶ç±» */ @Test public void test4()&#123; List&lt;? extends Person&gt; list1 = null; List&lt;? super Person&gt; list2 = null; List&lt;Student&gt; list3 = new ArrayList&lt;Student&gt;(); List&lt;Person&gt; list4 = new ArrayList&lt;Person&gt;(); List&lt;Object&gt; list5 = new ArrayList&lt;Object&gt;(); list1 = list3; list1 = list4;// list1 = list5;// list2 = list3; list2 = list4; list2 = list5; //è¯»å–æ•°æ®ï¼š list1 = list3; Person p = list1.get(0); //ç¼–è¯‘ä¸é€šè¿‡ //Student s = list1.get(0); list2 = list4; Object obj = list2.get(0); ////ç¼–è¯‘ä¸é€šè¿‡// Person obj = list2.get(0); //å†™å…¥æ•°æ®ï¼š //ç¼–è¯‘ä¸é€šè¿‡// list1.add(new Student()); //ç¼–è¯‘é€šè¿‡ list2.add(new Person()); list2.add(new Student()); &#125;","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"Javaé›†åˆä¹‹Map","slug":"Javaé›†åˆä¹‹Map","date":"2020-07-21T16:00:00.000Z","updated":"2021-01-22T03:51:17.510Z","comments":true,"path":"posts/37805.html","link":"","permalink":"http://blog.oy6090.top/posts/37805.html","excerpt":"","text":"ä¸€ã€å¸¸ç”¨å®ç°ç±»ç»“æ„ Mapï¼šåŒåˆ—æ•°æ®ï¼šå­˜å‚¨ key-value é”®å€¼å¯¹çš„æ•°æ® HashMap: åœ¨ä½œä¸º Map çš„ä¸»è¦å®ç°ç±»ï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼›å­˜å‚¨ null çš„ key å’Œ value LinkedMapï¼šä¿è¯åœ¨éå† map å…ƒç´ æ—¶ï¼Œå¯ä»¥ç…§æ·»åŠ çš„é¡ºåºå®ç°éå†ã€‚ åŸå› ï¼šåœ¨åŸæ¥çš„ HashMap åº•å±‚ç»“æ„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†ä¸€å¯¹æŒ‡é’ˆï¼ŒæŒ‡å‘å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ ã€‚å¯¹äºé¢‘ç¹çš„éå†æ“ä½œï¼Œæ­¤ç±»æ‰§è¡Œçš„æ•ˆç‡é«˜äº HashMapã€‚ TreeMap: ä¿è¯ç…§æ·»åŠ çš„ key-value å¯¹è¿›è¡Œæ’åºï¼Œå®ç°æ’åºéå†ã€‚æ­¤æ—¶è€ƒè™‘ key çš„è‡ªç„¶æ’åºæˆ–å®šåˆ¶æ’åºï¼Œåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ Hashtableï¼šä½œä¸ºå¤è€å®ç°ç±»ï¼Œçº¿ç¨‹æ˜¯å®‰å…¨çš„ï¼Œæ•ˆç‡ä½ï¼›ä¸èƒ½å­˜å‚¨ null çš„ key å’Œ value properties:å¸¸ç”¨ç±»å¤„ç†é…ç½®æ–‡ä»¶ã€‚key å’Œ value éƒ½æ˜¯ String ç±»å‹ HashMap çš„åº•å±‚ï¼š æ•°ç»„ + é“¾è¡¨ ï¼ˆJDK 7.0 åŠä¹‹å‰ï¼‰ æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ ï¼ˆJDK 8.0ï¼‰ äºŒã€å­˜å‚¨ç»“æ„çš„ç†è§£ Map ä¸­ keyï¼šæ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œä½¿ç”¨ Set å­˜å‚¨çš„ key â€”ã€‹ key æ‰€åœ¨çš„ç±»è¦é‡å†™ equals() å’Œ hashCode() () ï¼ˆä»¥ HashMap ä¸ºä¾‹) Map ä¸­çš„ valueï¼šæ— åºçš„ã€å¯é‡å¤çš„ï¼Œä½¿ç”¨ collection å­˜å‚¨æ‰€åœ¨çš„ç±»è¦é‡å†™ equals() ä¸€ä¸ªé”®å€¼å¯¹ï¼škey - value æ„æˆä¸€ä¸ª Entry å¯¹è±¡ã€‚ Map ä¸­çš„ entryï¼šæ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œä½¿ç”¨ Set å­˜å‚¨æ‰€åœ¨çš„ entry å›¾ç¤ºï¼š ä¸‰ã€å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° put(Object key, Object value) æ·»åŠ  remove(Object key) åˆ é™¤ put(Object key, Object value) ä¿®æ”¹ get(Object key) æŸ¥è¯¢ size() é•¿åº¦ keySet()/value()/entrySet() éå† â‘  keySet() 12345678910111213141516public void test1()&#123; /** * Set keySet()ï¼šè¿”å›æ‰€æœ‰keyæ„æˆçš„Seté›†åˆ */ HashMap map = new HashMap(); map.put(&quot;AA&quot;,123); map.put(45,1234); map.put(&quot;BB&quot;,56); // Set keySet():è¿”å›æ‰€æœ‰çš„keyæ„æˆçš„Seté›†åˆ Set set = map.keySet(); Iterator iterator = set.iterator(); while(iterator.hasNext())&#123; System.out.println(iterator.next()); &#125;&#125; â‘¡ value() 12345678910111213141516 @Test public void test2()&#123; /** * Collection values()ï¼šè¿”å›æ‰€æœ‰valueæ„æˆçš„Collectioné›†åˆ */ HashMap map = new HashMap(); map.put(&quot;AA&quot;,123); map.put(45,1234); map.put(&quot;BB&quot;,56); Collection values = map.values(); Iterator iterator = values.iterator(); while(iterator.hasNext())&#123; System.out.println(iterator.next()); &#125;&#125; â‘¢ entrySet() 123456789101112131415161718@Test public void test3()&#123; /** * Set entrySet()ï¼šè¿”å›æ‰€æœ‰key-valueå¯¹æ„æˆçš„Seté›†åˆ */ HashMap map = new HashMap(); map.put(&quot;AA&quot;,123); map.put(45,1234); map.put(&quot;BB&quot;,56); Set set = map.entrySet(); Iterator iterator = set.iterator(); while (iterator.hasNext())&#123; Object next = iterator.next(); Map.Entry entry = (Map.Entry) next; System.out.println(entry.getKey()+&quot;--&gt;&quot;+entry.getValue()); &#125;&#125; å››ã€å†…å­˜ç»“æ„è¯´æ˜1ã€HashMap åœ¨ JDK 7.0 ä¸­å®ç°çš„åŸç†1234567891011HashMap map = new HashMap(); åœ¨å®ä¾‹åŒ–ä»¥åï¼Œåº•å±‚åˆ›å»ºäº†é•¿åº¦ä¸º16çš„ä¸€ç»´æ•°ç»„Entry[] table. ....å¯èƒ½å·²ç»æ‰§è¡Œå¤šæ¬¡put... map.put(key1ï¼Œ value1); é¦–å…ˆï¼Œè°ƒç”¨Keyæ‰€åœ¨ç±»çš„HashCode()è®¡ç®—Key1çš„å“ˆå¸Œå€¼ï¼Œæ­¤å“ˆå¸Œå€¼ç»è¿‡æŸç§ç®—æ³•è®¡ç®—ä»¥åï¼Œå¾—åˆ°entryæ•°ç»„ä¸­çš„å­˜æ”¾ä½ç½®ã€‚ å¦‚æœæ­¤ä½ç½®ä¸Šçš„æ•°æ®ä¸ºç©ºï¼Œæ­¤æ—¶Key1-value1æ·»åŠ æˆåŠŸã€‚ --&gt; æƒ…å†µ1 å¦‚æœä½ç½®ä¸Šçš„æ•°æ®ä¸ä¸ºç©ºï¼Œï¼ˆæ„å‘³ç€æ­¤ä½ç½®ä¸Šå­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®ï¼ˆä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨ï¼‰ï¼‰,æ¯”è¾ƒKey1å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªçš„å“ˆå¸Œå€¼ï¼š â‘  å¦‚æœkey1çš„å“ˆå¸Œå€¼ä¸å·²ç»å­˜åœ¨çš„æ•°æ®çš„å“ˆå¸Œå€¼ä¸ç›¸åŒï¼Œæ­¤æ—¶key1-value1æ·»åŠ æˆåŠŸã€‚ --&gt; æƒ…å†µ2 â‘¡ å¦‚æœKey1çš„å“ˆå¸Œå€¼å’Œå·²ç»å­˜åœ¨çš„æŸä¸€ä¸ªæ•°æ®(key2-value2)çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œç»§ç»­æ¯”è¾ƒï¼šè°ƒç”¨key1æ‰€åœ¨ç±»çš„equals(Key2)æ–¹æ³•æ¯”è¾ƒï¼š â‘ å¦‚æœequlas()è¿”å›falseï¼šæ­¤æ—¶key1-value1æ·»åŠ æˆåŠŸã€‚--&gt;æƒ…å†µ3 â‘¡å¦‚æœequals()è¿”å›trueï¼šä½¿ç”¨value1æ›¿æ¢value2. è¡¥å……ï¼š å…³äºæƒ…å†µ 2 å’Œæƒ…å†µ 3ï¼šæ­¤æ—¶ key1-value1 å’Œ åŸæ¥çš„æ•°æ®ä»¥é“¾è¡¨çš„æ–¹å¼å­˜å‚¨ åœ¨ä¸æ–­çš„æ·»åŠ è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠçš„é—®é¢˜ï¼Œå½“è¶…å‡ºä¸´ç•Œå€¼ï¼ˆä¸”è¦å­˜æ”¾çš„ä½ç½®éç©ºï¼‰æ—¶ï¼Œæ‰©å®¹ã€‚ é»˜è®¤çš„æ‰©å®¹æ–¹å¼ï¼šæ‰©å®¹ä¸ºåŸæ¥çš„ 2 å€ï¼Œå¹¶å°†åŸæ¥çš„æ•°ç»„å¤åˆ¶è¿‡æ¥ã€‚ 2ã€HashMap åœ¨ JDK 8.0 ä¸­çš„å®ç°åŸç†HashMap åœ¨ Jdk8 ä¸­ç›¸è¾ƒäº jdk7 åœ¨åº•å±‚å®ç°æ–¹é¢ä¸åŒï¼š â€‹ â‘  new HashMap(); åº•å±‚æ²¡åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 16 çš„æ•°ç»„ â€‹ â‘¡ jdk 8 åº•å±‚æ•°ç»„æ˜¯ï¼šNode[ ]ï¼Œ è€Œé Entry[ ] â€‹ â‘¢ é¦–æ¬¡è°ƒç”¨ put() æ–¹æ³•æ—¶ï¼Œåº•å±‚åˆ›å»ºé•¿åº¦ä¸º 16 çš„æ•°ç»„ â€‹ â‘£ jdk 7 åº•å±‚ç»“æ„æ˜¯ï¼š æ•°ç»„åŠ é“¾è¡¨ã€‚ jdk 8 ä¸­åº•å±‚ç»“æ„ï¼š æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ã€‚ â€‹ &lt;1&gt; å½“å½¢æˆé“¾è¡¨æ—¶ï¼Œä¸ƒä¸Šå…«ä¸‹ï¼ˆjdk7: æ–°çš„å…ƒç´ æŒ‡å‘æ—§çš„å…ƒç´ ã€‚jdk8: æ—§çš„å…ƒç´ æŒ‡å‘æ–°çš„å…ƒç´ ï¼‰ â€‹ &lt;2&gt; å½“æ•°ç»„çš„æŸä¸€ä¸ªç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ ä»¥é“¾è¡¨å½¢å¼å­˜åœ¨çš„æ•°æ®ä¸ªæ•° &gt; 8 ä¸”å½“å‰å…ƒç´ æ•°ç»„çš„é•¿åº¦ &gt; 64 æ—¶ï¼Œæ­¤æ—¶æ­¤ç´¢å¼•ä½ç½®ä¸Šçš„æ‰€æœ‰æ•°æ®æ”¹ä¸ºä½¿ç”¨çº¢é»‘æ ‘å­˜å‚¨ã€‚ 3ã€HashMap åº•å±‚å…¸å‹å±æ€§è¯´æ˜ æ–¹æ³• æè¿° DEFAULT_INITIAL_CAPACITY HashMap çš„é»˜è®¤å®¹é‡ï¼Œ16 DEFAULT_LOAD_FACTOR HashMap çš„é»˜è®¤åŠ è½½å› å­ï¼š0.75 threshold æ‰©å®¹çš„ä¸´ç•Œå€¼ï¼Œ=å®¹é‡*å¡«å……å› å­ï¼š16 * 0.75 =&gt; 12 TREEIFY_THRESHOLD Bucket ä¸­é“¾è¡¨é•¿åº¦å¤§äºè¯¥é»˜è®¤å€¼ï¼Œè½¬åŒ–ä¸ºçº¢é»‘æ ‘:8 MIN_TREEIFY_CAPACITY æ¡¶ä¸­çš„ Node è¢«æ ‘åŒ–æ—¶æœ€å°çš„ hash è¡¨å®¹é‡:64 4ã€LinkedHashMap çš„åº•å±‚å®ç°åŸç†â€‹ LinkedMap åº•å±‚ä½¿ç”¨çš„ç»“æ„æ˜¯ä¸ HashMap ç›¸åŒï¼Œå› ä¸º LinkHashMap ç»§æ‰¿ HashMap â€‹ åŒºåˆ«åœ¨äºï¼šLinkHashMap å†…éƒ¨æä¾›äº† Entryï¼Œæ›¿æ¢ HashMap ä¸­çš„ Node äº”ã€TreeMap çš„ä½¿ç”¨â€‹ å‘ TreeMap ä¸­æ·»åŠ  key-value,è¦æ±‚ key å¿…é¡»æ˜¯ç”±ä¸€ä¸ªç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œå› ä¸ºè¦ç…§ key è¿›è¡Œæ’åºï¼šè‡ªç„¶æ’åºã€å®šåˆ¶æ’åºã€‚ â‘  è‡ªç„¶æ’åº 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162public class User implements Comparable&#123; private String name; private int age; public User() &#123; &#125; public User(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; User user = (User) o; return age == user.age &amp;&amp; name.equals(user.name); &#125; @Override public int hashCode() &#123; return Objects.hash(name, age); &#125; @Override public String toString() &#123; return &quot;User&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, age=&quot; + age + &#x27;&#125;&#x27;; &#125; @Override public int compareTo(Object o) &#123; if(o instanceof User)&#123; User user = (User) o; if(this.name.equals(user.name))&#123; return this.age - user.age; &#125; return this.name.compareTo(user.name); &#125; throw new RuntimeException(&quot;è¾“å…¥çš„å€¼æ— æ³•åˆ¤æ–­&quot;); &#125;&#125; 12345678910111213141516171819202122@Test public void test()&#123; TreeMap map = new TreeMap(); User u1 = new User(&quot;Tom&quot;,23); User u2 = new User(&quot;Jerry&quot;,32); User u3 = new User(&quot;Jack&quot;,20); User u4 = new User(&quot;Rose&quot;,18); map.put(u1,98); map.put(u2,78); map.put(u3,90); map.put(u4,67); // å…ƒç¤ºå›¾éå† Set set = map.entrySet(); Iterator iterator = set.iterator(); while(iterator.hasNext())&#123; Object next = iterator.next(); Map.Entry e = (Map.Entry) next; System.out.println(e.getKey()+&quot;-----&quot;+e.getValue()); &#125; &#125; â‘¡ å®šåˆ¶æ’åº 12345678910111213141516171819202122232425262728293031323334@Test public void test2()&#123; Comparator comparator = new Comparator() &#123; @Override public int compare(Object o1, Object o2) &#123; if(o1 instanceof User &amp;&amp; o2 instanceof User)&#123; User user1 = (User) o1; User user2 = (User) o2; return user1.getAge() - user2.getAge(); &#125; throw new RuntimeException(&quot;è¾“å…¥çš„æ•°å€¼é”™è¯¯!!!!&quot;); &#125; &#125;; TreeMap map = new TreeMap(comparator); User u1 = new User(&quot;Tom&quot;,23); User u2 = new User(&quot;Jerry&quot;,32); User u3 = new User(&quot;Jack&quot;,20); User u4 = new User(&quot;Rose&quot;,18); map.put(u1,98); map.put(u2,78); map.put(u3,90); map.put(u4,67); Set set = map.entrySet(); Iterator iterator = set.iterator(); while(iterator.hasNext())&#123; Object next = iterator.next(); Map.Entry e = (Map.Entry) next; System.out.println(e.getKey() +&quot;---&gt;&quot; + e.getValue()); &#125; &#125; å…­ã€ä½¿ç”¨ Properties è¯»å–é…ç½®æ–‡ä»¶åˆ›å»º jdbc.properties æ–‡ä»¶ 12name=OYpassword=123456 123456789101112131415161718//Properties:å¸¸ç”¨é‡Œå¤„ç†é…ç½®æ–‡ä»¶.keyå’Œvalueéƒ½æ˜¯Stringç±»ç±»å‹public static void main(String[] args) &#123; FileInputStream fis = null; try &#123; Properties pro = new Properties(); fis = new FileInputStream(&quot;jdbc.properties&quot;); //åŠ è½½æµå¯¹åº”çš„æ–‡ä»¶ pro.load(fis); String name = pro.getProperty(&quot;name&quot;); String password = pro.getProperty(&quot;password&quot;); System.out.println(&quot;name:&quot;+name+&quot;password&quot;+password); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"Javaå¸¸ç”¨ç±»","slug":"Javaå¸¸ç”¨ç±»ï¼ˆåŸºç¡€ï¼‰","date":"2020-07-21T16:00:00.000Z","updated":"2021-01-22T03:49:38.585Z","comments":true,"path":"posts/34875.html","link":"","permalink":"http://blog.oy6090.top/posts/34875.html","excerpt":"","text":"ä»Šå¤©çš„åŠªåŠ›åªä¸ºæ›´å¥½çš„æ˜å¤©ã€‚ String ç±»ä¸€ã€æ¦‚è¿°String: String å£°æ˜ä¸º fianl çš„ï¼Œä¸å¯è¢«ç»§æ‰¿ã€‚ String å®ç°äº† Serializable æ¥å£ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²æ˜¯æ”¯æŒåºåˆ—åŒ–çš„ã€‚å®ç°äº† Comparable æ¥å£ï¼Œè¡¨ç¤º String å¯ä»¥è¿›è¡Œæ¯”è¾ƒå¤§å°ã€‚ String å†…éƒ¨å®šä¹‰çš„ fianl char[ ] value ç”¨äºå‚¨å­˜å­—ç¬¦ä¸²æ•°æ®ã€‚ é€šè¿‡å­—é¢é‡çš„æ–¹å¼ï¼ˆåŒºåˆ«newç»™ä¸€ä¸ªå­—ç¬¦ä¸²èµ‹å€¼ï¼Œæ­¤æ—¶å¾—åˆ°å­—ç¬¦ä¸²å£°æ˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼‰ã€‚ å­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯ä¸ä¼šå­˜å‚¨ç›¸åŒçš„å†…å®¹ï¼ˆä½¿ç”¨ String ç±»çš„equals()**æ¯”è¾ƒï¼Œè¿”å›true**ï¼‰çš„å­—ç¬¦ä¸²çš„ã€‚ äºŒã€String çš„ä¸å¯å˜æ€§ è¯´æ˜ï¼šâ‘  å½“å¯¹å­—ç¬¦ä¸²é‡æ–°èµ‹å€¼ï¼Œéœ€è¦é‡å†™æŒ‡å®šå†…å­˜ä¸­åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„ value è¿›è¡Œèµ‹å€¼â‘¡ å½“å¯¹ç°æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œæ—¶ï¼Œä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸçš„èµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„ value è¿›è¡Œèµ‹å€¼ã€‚â‘¢ å½“è°ƒç”¨ String çš„ replaceï¼ˆï¼‰æ–¹å¼ä¿®æ”¹æŒ‡å®šå­—ç¬¦ä¸²æ—¶ï¼Œä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šåŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„ value è¿›è¡Œèµ‹å€¼ã€‚ 12345678910111213141516@Test public void test()&#123; // å­—é¢é‡çš„å®šä¹‰ String s1 = &quot;abc&quot;; String s2 = &quot;abc&quot;; //æ¯”è¾ƒs1å’Œs2çš„åœ°å€å€¼ System.out.println(s1 == s2); // true System.out.println(&quot;*****************&quot;); String s4 = &quot;abc&quot;; String s5 = s4.replace(&#x27;a&#x27;, &#x27;m&#x27;); System.out.println(s4);//abc System.out.println(s5);//mbc &#125; ä¸‰ã€String å®ä¾‹åŒ–çš„ä¸åŒæ–¹å¼ æ–¹å¼è¯´æ˜ï¼šæ–¹å¼ä¸€ï¼šé€šè¿‡å­—é¢é‡å®šä¹‰çš„æ–¹å¼æ–¹å¼äºŒï¼šé€šè¿‡ new+æ„é€ å™¨çš„æ–¹å¼ 1234567891011121314@Test public void test1()&#123; // é€šè¿‡å­—é¢å®šä¹‰çš„æ–¹å¼ï¼šæ­¤æ—¶çš„s1å’Œs2çš„æ•°æ®javaEEå£°æ˜åœ¨æ–¹æ³•åŒºä¸­å­—ç¬¦ä¸²å¸¸é‡æ±  String s1 = &quot;JavaEE&quot;; String s2 = &quot;JavaEE&quot;; // é€šè¿‡new + æ„é€ å™¨çš„æ–¹å¼ï¼šæ­¤æ—¶çš„s3å’Œs4ä¿å­˜åœ°å€ï¼Œæ˜¯æ•°æ®åœ¨å †ç©ºé—´ä»¥åå¯¹åº”çš„åœ°å€å€¼ã€‚ String s3 = new String(&quot;javaEE&quot;); String s4 = new String(&quot;javaEE&quot;); System.out.println(s1 == s2);// true System.out.println(s1 == s3);// false System.out.println(s1 == s4);// false System.out.println(s3 == s4);// false &#125; å›¾ç¤ºï¼šé—®é¢˜ï¼š 12String s = new String(&quot;abc&quot;); æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œåœ¨å†…å­˜ä¸­åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯å †ç©ºé—´&quot;new&quot;ç»“æ„ï¼Œå¦ä¸€ä¸ªæ˜¯char[] å¯¹åº”çš„å¸¸é‡æ± ä¸­çš„æ•°æ®ï¼š&quot;abc&quot; å››ã€å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼èµ‹å€¼çš„å¯¹æ¯” è¯´æ˜ï¼š 1.å¸¸é‡ä¸å¸¸é‡çš„æ‹¼æ¥ç»“æœåœ¨å¸¸é‡æ± ï¼Œä¸”å¸¸é‡æ± ä¸­ä¸ä¼šå­˜åœ¨ç›¸åŒçš„å¸¸é‡ 2.åªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯å˜é‡ï¼Œç»“æœå°±åœ¨å †ä¸­ã€‚ 3.å¦‚æœæ‹¼æ¥çš„ç»“æœè°ƒç”¨ **intern()**æ–¹æ³•ï¼Œè¿”å›å€¼å°±æ˜¯åœ¨å¸¸é‡æ± ä¸­ã€‚ ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324@Test public void test2()&#123; String s1 = &quot;javaEE&quot;; String s2 = &quot;hadoop&quot;; String s3 = &quot;javaEEhadoop&quot;; String s4 = &quot;javaEE&quot;+&quot;hadoop&quot;; String s5 = s1 + &quot;hadoop&quot;; String s6 = &quot;javaEE&quot; + s2; String s7 = s1 + s2; System.out.println(s3 == s4);//true System.out.println(s3 == s5);//false System.out.println(s3 == s6);//false System.out.println(s3 == s7);//false System.out.println(s5 == s6);//false System.out.println(s5 == s7);//false System.out.println(s6 == s7);//false System.out.println(&quot;**********************************&quot;); String s8 = s6.intern(); // è¿”å›å€¼å¾—åˆ°çš„s8ä½¿ç”¨çš„å¸¸é‡å€¼ä¸­å·²ç»å­˜åœ¨çš„&quot;javaEEhadoop&quot;; System.out.println(s3 == s8); // true &#125; 1234567891011@Test public void test3()&#123; String s1 = &quot;javaEEhadoop&quot;; String s2 = &quot;javaEE&quot;; String s3 = s2 + &quot;hadoop&quot;; System.out.println(s1 == s3);// false final String s4 = &quot;javaEE&quot;; // s4:å¸¸é‡ String s5 = s4 + &quot;hadoop&quot;; System.out.println(s1 == s5); // true &#125; äº”ã€å¸¸ç”¨æ–¹æ³• int length()ï¼šè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼š return value.length char charAt(int index)ï¼š è¿”å›æŸç´¢å¼•å¤„çš„å­—ç¬¦ return value[index] boolean isEmpty()ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯ç©ºå­—ç¬¦ä¸²ï¼šreturn value.length == 0 1234String str = &quot;abc&quot;;System.out.println(str.length());// 3System.out.println(str.charAt(2));// cSystem.out.println(str.isEmpty());// false String toLowerCase()ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒï¼Œå°† String ä¸­çš„æ‰€å­—ç¬¦è½¬æ¢ä¸ºå°å†™ String toUpperCase()ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒï¼Œå°† String ä¸­çš„æ‰€å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ String trim()ï¼šè¿”å›å­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œå¿½ç•¥å‰å¯¼ç©ºç™½å’Œå°¾éƒ¨ç©ºç™½ 12345String str1 = &quot;abcdefg&quot;;String str2 = &quot; abcdefg &quot;;System.out.println(str1.toLowerCase());// abcdefgSystem.out.println(str1.toUpperCase());// ABCDEFGSystem.out.println(str2.trim());// abcdefg boolean equals(Object obj)ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ boolean equalsIgnoreCase(String anotherString)ï¼šä¸ equals æ–¹æ³•ç±»ä¼¼ï¼Œå¿½ç•¥å¤§å°å†™ String concat(String str)ï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥åˆ°æ­¤å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚ ç­‰ä»·äºç”¨â€œ+â€ 1234567String str3 = &quot;abcdefg&quot;;String str4 = &quot;ABCDEFG&quot;;String str5 = &quot;abcd&quot;;String str6 = &quot;efg&quot;;System.out.println(str3.equals(str4)); // falseSystem.out.println(str3.equalsIgnoreCase(str4)); // trueSystem.out.println(str5.concat(str6));// abcdefg int compareTo(String anotherString)ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å° String substring(int beginIndex)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä» beginIndex å¼€å§‹æˆªå–åˆ°æœ€åçš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚ String substring(int beginIndex, int endIndex) ï¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²ä» beginIndex å¼€å§‹æˆªå–åˆ° endIndex(ä¸åŒ…å«)çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚ int indexOf(String str, int fromIndex)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹ 1234567String str7 = &quot;abcdefg&quot;;String str8 = &quot;abcdefg&quot;;String str9 = &quot;abcd&quot;;System.out.println(str7.compareTo(str8)); // 0 è¡¨ç¤ºç›¸ç­‰System.out.println(str7.substring(2));// cdefgSystem.out.println(str7.substring(0,5)); // abcdeSystem.out.println(str7.indexOf(&quot;d&quot;,0)); // 3 boolean endsWith(String suffix)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“æŸ boolean startsWith(String prefix)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹ boolean startsWith(String prefix, int toffset)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹ 1234567String str1 = &quot;helloworld&quot;;boolean b1 = str1.endsWith(&quot;rld&quot;);boolean b2 = str1.startsWith(&quot;hel&quot;);boolean b3 = str1.startsWith(&quot;ll&quot;,2);System.out.println(b1); //tureSystem.out.println(b2); //tureSystem.out.println(b3); //ture boolean contains(CharSequence s)ï¼šå½“ä¸”ä»…å½“æ­¤å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šçš„ char å€¼åºåˆ—æ—¶ï¼Œè¿”å› true 123String str1 = &quot;helloworld&quot;;String str2 = &quot;wor&quot;;System.out.println(str1.contains(str2)); // true int indexOf(String str)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼• 12System.out.println(str1.indexOf(&quot;ll&quot;)); // 2System.out.println(str1.indexOf(&quot;lo&quot;,5));// -1 int lastIndexOf(String str)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼• int lastIndexOf(String str, int fromIndex)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢ 123String str3 = &quot;hellorworld&quot;;System.out.println(str3.lastIndexOf(&quot;or&quot;)); // 7System.out.println(str3.lastIndexOf(&quot;or&quot;,2)); // -1 æ³¨ï¼šindexOf å’Œ lastIndexOf æ–¹æ³•å¦‚æœæœªæ‰¾åˆ°éƒ½æ˜¯è¿”å›-1 æ›¿æ¢ï¼š String replace(char oldChar, char newChar)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯é€šè¿‡ç”¨ newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€ oldChar å¾—åˆ°çš„ã€‚ String replace(CharSequence target, CharSequence replacement)ï¼šä½¿ç”¨æŒ‡å®šçš„å­—é¢å€¼æ›¿æ¢åºåˆ—æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€åŒ¹é…å­—é¢å€¼ç›®æ ‡åºåˆ—çš„å­å­—ç¬¦ä¸²ã€‚ String replaceAll(String regex, String replacement)ï¼šä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ã€‚ String replaceFirst(String regex, String replacement)ï¼šä½¿ç”¨ç»™å®šçš„ replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚ 123456789String str1 = &quot;ä¸­å›½æ¹–å—&quot;; // String replace(char oldChar, char newChar)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯é€šè¿‡ç”¨ newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰ oldChar å¾—åˆ°çš„ã€‚ String str2 = str1.replace(&quot;æ¹–å—&quot;,&quot;æ¹–åŒ—&quot;); System.out.println(str2); // ä¸­å›½æ¹–åŒ— System.out.println(&quot;*********************************************&quot;); // String replace(CharSequence target, CharSequence replacement)ï¼šä½¿ç”¨æŒ‡å®šçš„å­—é¢å€¼æ›¿æ¢åºåˆ—æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…å­—é¢å€¼ç›®æ ‡åºåˆ—çš„å­å­—ç¬¦ä¸²ã€‚ String str3 = &quot;12hello34world5java7891mysql456&quot;; String str4 = str3.replaceAll(&quot;\\\\d+&quot;, &quot;,&quot;).replaceAll(&quot;^,|,$&quot;, &quot;&quot;); System.out.println(str4); // hello,world,java,mysql åŒ¹é…: boolean matches(String regex)ï¼šå‘ŠçŸ¥æ­¤å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ 1234String str5 = &quot;12345&quot;; //åˆ¤æ–­strå­—ç¬¦ä¸²ä¸­æ˜¯å¦å…¨éƒ¨æœ‰æ•°å­—ç»„æˆï¼Œå³æœ‰1-nä¸ªæ•°å­—ç»„æˆ boolean matches = str5.matches(&quot;\\\\d+&quot;); System.out.println(matches); // true åˆ‡ç‰‡ï¼š String[] split(String regex)ï¼šæ ¹æ®ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ã€‚ String[] split(String regex, int limit)ï¼šæ ¹æ®åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¥æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ï¼Œæœ€å¤šä¸è¶…è¿‡ limit ä¸ªï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œå‰©ä¸‹çš„å…¨éƒ¨éƒ½æ”¾åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¸­ã€‚ 1234567891011String str6 = &quot;hello|world|java&quot;; String[] strs = str6.split(&quot;\\\\|&quot;); for (int i = 0; i &lt; strs.length; i++) &#123; System.out.println(strs[i]); // hello world java &#125; System.out.println(); String str7 = &quot;hello.world.java&quot;; String[] strs2 = str7.split(&quot;\\\\.&quot;); for (int i = 0; i &lt; strs.length; i++) &#123; System.out.println(strs2[i]); // hello world java &#125; String ä¸å…¶ä»–ç»“æ„çš„æ›¿æ¢ â‘  ä¸åŸºæœ¬çš„æ•°æ®ç±»å‹ã€åŒ…è£…ç±»ä¹‹é—´çš„è£…æ¢ String ---- åŸºæœ¬æ•°æ®ç±»å‹ã€åŒ…è£…ç±»ï¼šè°ƒç”¨åŒ…è£…ç±»çš„é™æ€æ–¹æ³•ï¼šparse**XXX**(str) åŸºæœ¬æ•°æ®ç±»å‹ã€åŒ…è£…ç±» â€” Stringï¼šè°ƒç”¨ String é‡è½½çš„ valueof(XXX) ä»£ç ç¤ºä¾‹ 1234567public void test1()&#123; String str = &quot;123&quot;; int num = Integer.parseInt(str); System.out.println(num); String str1 = String.valueOf(num); System.out.println(str1); &#125; String ====ã€‹char[ ]: è°ƒç”¨ String çš„ toCharArray();char[ ] ===ã€‹ String :è°ƒç”¨ String çš„æ„é€ å™¨ ä»£ç ç¤ºä¾‹ 12345678910111213 public void test2()&#123;// String --&gt; char[] :è°ƒç”¨Stringçš„toCharArray(); String str = &quot;abc123&quot;; char[] ch = str.toCharArray(); for(int i = 0; i &lt; ch.length; i++)&#123; System.out.println(ch[i]); &#125; System.out.println(&quot;***************************&quot;);// char[] --&gt; Stringï¼šè°ƒç”¨Stringçš„æ„é€ å™¨ char[] arr = new char[]&#123;&#x27;h&#x27;,&#x27;l&#x27;,&#x27;l&#x27;&#125;; String str2 = new String(arr); System.out.println(str2); &#125; â‘¡ ä¸å­—æ•°ç»„ä¹‹é—´çš„è½¬æ¢ ç¼–ç ï¼šString ===ã€‹ byte[ ]:è°ƒç”¨ String çš„ getBytes();è§£ç ï¼šbyte[ ] ===ã€‹ String :è°ƒç”¨ String çš„æ„é€ å™¨ç¼–ç ï¼šå­—ç¬¦ä¸² ===ã€‹ å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶ï¼‰è§£ç ï¼šç¼–ç çš„é€†è¿‡ç¨‹ï¼Œå­—èŠ‚ ===ã€‹ å­—ç¬¦ä¸²è¯´æ˜ï¼šè§£ç æ—¶ï¼Œè¦æ±‚è§£ç çš„ä½¿ç”¨çš„å­—ç¬¦é›†å¿…é¡»ä¸ç¼–ç çš„å­—ç¬¦é›†ä¸€è‡´ï¼Œå¦åˆ™ä¼šå‡ºç°ä¹±ç ã€‚ ä»£ç ç¤ºä¾‹ï¼š 1234567public void test3() throws UnsupportedEncodingException &#123; String str = &quot;abc&quot;; byte[] bytes = str.getBytes(); // ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†ï¼Œè¿›è¡Œç¼–ç  System.out.println(bytes); byte[] gbks = str.getBytes(&quot;gbk&quot;); System.out.println(Arrays.toString(gbks)); &#125; è¿è¡Œç»“æœï¼šè¡¥å……ï¼šä¸ StringBufferã€StringBuilder ä¹‹é—´çš„è½¬æ¢String === ã€‹ StringBufferã€StringBuilderï¼šè°ƒç”¨ StringBufferã€StringBuilder æ„é€ å™¨ï¼›StringBufferã€StringBuilder ===ã€‹ String: â‘  è°ƒç”¨ String æ„é€ å™¨ â‘¡ StringBufferã€StringBuilder çš„ toString(); JVM ä¸­å­—ç¬¦ä¸²å¸¸é‡æ± å­˜æ”¾ä½ç½®è¯´æ˜ï¼š JDK 1.6ï¼š (jdk 6.0 , java 6.0):å­—ç¬¦ä¸²å¸¸é‡æ± å­˜å‚¨åœ¨æ–¹æ³•åŒºï¼ˆæ°¸ä¹…åŒºï¼‰JDK 1.7ï¼š å­—ç¬¦ä¸²å¸¸é‡æ± å­˜å‚¨åœ¨å †ç©ºé—´JDK 1.8ï¼š å­—ç¬¦ä¸²å¸¸é‡æ± å­˜å‚¨åœ¨æ–¹æ³•åŒºï¼ˆäº‘ç©ºé—´ï¼‰ StringBufferã€StringBuilderä¸€ã€Stringã€Stringã€StringBuilder ä¸‰è€…çš„å¯¹æ¯”123Stringï¼šä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼šåº•å±‚ä½¿ç”¨char[] å‚¨å­˜StringBufferï¼š å¯å˜çš„å­—ç¬¦åºåˆ—ï¼šçº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡ä½ï¼šåº•å±‚ä½¿ç”¨char[]å­˜å‚¨StringBuilderï¼š å¯å˜çš„å­—ç¬¦åºåˆ—ï¼šjdk5.0ï¼šæ–°å¢çš„ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼›åº•å±‚ä½¿ç”¨char[] å­˜å‚¨ å¯å˜ç±»å‹ï¼š æ¯”å¦‚åˆ—è¡¨ï¼šåˆ—è¡¨åï¼ˆæˆ–ç§°ä¸ºåˆ—è¡¨å¼•ç”¨ï¼‰æŒ‡å‘å †ç©ºé—´ä¸­çš„ä¸€ä¸ªåˆ—è¡¨ã€‚åˆ—è¡¨å¼•ç”¨å½“ä¸­å­˜å‚¨çš„å†…å®¹ä¸ºåœ°å€ï¼Œå¯ä»¥æŒ‡å‘å †å†…å­˜ä¸­çš„å…·ä½“å¯¹è±¡. ä¸€æ–¹é¢ï¼Œè¯¥åˆ—è¡¨å¯ä»¥ä¿è¯åœ¨åœ°å€ä¸å˜çš„å‰æä¸‹ï¼Œæ”¹å˜åˆ—è¡¨å†…å®¹;å¦ä¸€æ–¹é¢ï¼Œè¯¥å¼•ç”¨ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å‘å †ç©ºé—´ä¸­çš„å¦å¤–ä¸€ä¸ªåˆ—è¡¨.. ä¸å¯å˜åºåˆ—: æ¯”å¦‚æ•°å­—ã€å­—ç¬¦ã€ï¼ˆå…ƒç¥–ï¼‰ï¼šå¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼Œå˜é‡åœ°å€å³å˜é‡æœ¬èº«ï¼Œæ‰€ä»¥å€¼å‘ç”Ÿå˜åŒ–äº†ï¼Œå†…å­˜åœ°å€å°±ä¸€å®šä¹Ÿå˜äº†ã€‚ æ¯”å¦‚å­—ç¬¦ä¸²ï¼šè¢«ç§°ä¸ºä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œæ¯ä¸ªå­—ç¬¦åº•å±‚å‡æœ‰è§„èŒƒçš„Unicodeç å¯¹åº”ï¼Œå†…å­˜è§„å®šæ— æ³•å¯¹å•ä¸€çš„ä¸€ä¸ªå­—ç¬¦è¿›è¡Œä¿®æ”¹ï¼Œè¦ä¿®æ”¹å­—ç¬¦ä¸²å¿…é¡»é‡æ–°æŒ‡å‘ä¸€ä¸ªå…¨æ–°çš„å­—ç¬¦ä¸² äºŒã€StringBuffer ä¸ StringBuilder çš„å†…å­˜è§£æ12345678910ä»¥Stringufferä¸ºä¾‹ï¼šString str = new String();//char[] value = new char[0];String str1 = new String(&quot;abc&quot;);//char[] value = new char[]&#123;&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;&#125;;StringBuffer sb1 = new StringBuffer();//char[] value = new char[16];åº•å±‚åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦æ˜¯16çš„æ•°ç»„ã€‚System.out.println(sb1.length());//sb1.append(&#x27;a&#x27;);//value[0] = &#x27;a&#x27;;sb1.append(&#x27;b&#x27;);//value[1] = &#x27;b&#x27;;StringBuffer sb2 = new StringBuffer(&quot;abc&quot;);//char[] value = new char[&quot;abc&quot;.length() + 16]; æ‰©å®¹é—®é¢˜ï¼šå¦‚æœæ·»åŠ çš„æ•°ç»„åº•å±‚æ•°ç»„ç››ä¸ä¸‹ï¼Œé‚£å°±éœ€è¦æ‰©å®¹åº•å±‚çš„æ•°ç»„é»˜è®¤çš„æƒ…å†µ,æ‰©å®¹ä¸ºåŸæ¥çš„ 2 å€+2;åŒæ—¶å°†åŸæ¥çš„æ•°ç»„å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚åœ¨å¼€å‘ä¸­ä¼˜å…ˆä½¿ç”¨ï¼šStringBufferã€StringBuilder ä¸‰ã€å¯¹æ¯” Stringã€StringBuffer ã€StringBuilder ä¸‰è€…çš„æ‰§è¡Œæ•ˆç‡ ä»é«˜åˆ°ä½æ’åºï¼šStringBuiler &gt; StringBuffer &gt; String å››ã€StringBufferã€StringBuilder ä¸­å¸¸ç”¨çš„æ–¹æ³•1234567å¢ï¼šoppendï¼ˆXXXï¼‰åˆ ï¼šdeleteï¼ˆint start, int endï¼‰æ”¹ï¼šsetCharAt(int n , char ch) / replance(int start, int end , Sting str)æŸ¥ï¼šcharAt(int n)æ’ï¼š insertï¼ˆint offset , XXXï¼‰;é•¿åº¦ï¼šLenght();*éå†ï¼šforï¼ˆï¼‰ + charAt() / toStringï¼ˆï¼‰ JDK 8 ä¹‹å‰æ—¥æœŸæ—¶é—´ APIä¸€ã€è·å–ç³»ç»Ÿä¹‹å‰å½“å‰æ—¶é—´ System ç±»ä¸­çš„ CurrentTimeMills() 1234long time = Sysem.cuurenTimeMillis()//è¿”å›å½“å‰æ—¶é—´ä¸1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†ä¹‹é—´ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å·®ã€‚//ç§°ä¸ºæ—¶é—´æˆ³System.out.println(time); äºŒã€java.util.Date ç±»ä¸ java.sql.Date ç±»1234567891011java.util.Dateç±» |---java.sql.Dateç±»1.ä¸¤ä¸ªæ„é€ å™¨çš„ä½¿ç”¨ &gt;æ„é€ å™¨ä¸€ï¼šDate()åˆ›å»ºä¸€ä¸ªå¯¹åº”å½“å‰æ—¶é—´çš„Dateå¯¹è±¡ &gt;æ„é€ å™¨äºŒï¼šåˆ›å»ºæŒ‡å®šæ¯«ç§’æ•°çš„Dateå¯¹è±¡2.ä¸¤ä¸ªæ–¹æ³•çš„ä½¿ç”¨ &gt;toString() æ˜¾ç¤ºå½“å‰çš„å¹´ã€æœˆã€æ—¥ã€åˆ†ã€ç§’ &gt;getTime() è·å–å½“å‰Dateå¯¹è±¡å¯¹åº”çš„æ¯«ç§’æ•°ã€‚(æ—¶é—´æˆ³)3.java.sql.Dateå¯¹åº”ç€æ•°æ®ä¸­æ—¥æœŸç±»å‹çš„å˜é‡ &gt; å®ä¾‹åŒ– &gt; å°†java.util.Date è½¬ä¸º java.sql.Date ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637@Test public void test1()&#123; long time = System.currentTimeMillis(); System.out.println(time); &#125; @Test public void test2()&#123; // æ„é€ å™¨ä¸€ï¼šDate()ï¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”å½“å‰æ—¶é—´çš„Dateå¯¹è±¡ Date date = new Date(); System.out.println(date.toString()); // Sat Jun 13 17:07:02 CST 2020 System.out.println(date.getTime()); // 1592039273009 &#125; @Test public void test3()&#123; // æ„é€ å™¨äºŒï¼šåˆ›å»ºæŒ‡å®šæ¯«ç§’æ•°çš„Dateå¯¹è±¡ Date date = new Date(1592039273009L); System.out.println(date.toString()); // Sat Jun 13 17:07:53 CST 2020 System.out.println(&quot;***********************&quot;); // åˆ›å»ºjava.sql.Dateå¯¹è±¡ java.sql.Date date1 = new java.sql.Date(1592039273009L); System.out.println(date1); // 2020-06-13 &#125; @Test /** * å°†java.util.Dateå¯¹è±¡è½¬æ¢ä¸ºjava.sql.Dateå¯¹è±¡ */ public void test4()&#123; // æƒ…å†µä¸€ï¼š Date date = new java.sql.Date(1592039273009L); java.sql.Date date1 = (java.sql.Date) date; // æƒ…å†µäºŒï¼š Date date2 = new Date(); java.sql.Date date3 = new java.sql.Date(date2.getTime()); &#125; ä¸‰ã€java.text.SimpleDateFormat ç±»12345simpleDateFormat å¯¹æ—¥æœŸDateç±»çš„æ ¼å¼åŒ–å’Œè§£æ1.ä¸¤ä¸ªæ“ä½œ 1.1 æ ¼å¼åŒ–ï¼šæ—¥æœŸ --&gt; å­—ç¬¦ä¸² 1.2 è§£æï¼š æ ¼å¼åŒ–çš„é€†è¿‡ç¨‹ï¼Œå­—ç¬¦ä¸² --&gt; æ—¥æœŸ2.SimpleDateFormat 1234567891011121314 @Test public void test5() throws ParseException &#123;// ç…§æŒ‡å®šçš„æ–¹å¼æ ¼å¼åŒ–å’Œè§£æï¼šè°ƒç”¨å¸¦å‚çš„æ„é€ å™¨ SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm aaa&quot;); // æ ¼å¼åŒ– Date date = new Date(); String format = sdf.format(date); System.out.println(format); // 2020-06-13 05:23 ä¸‹åˆ //è§£æ:è¦æ±‚å­—ç¬¦ä¸²å¿…é¡»æ˜¯ç¬¦åˆSimpleDateFormatè¯†åˆ«çš„æ ¼å¼(é€šè¿‡æ„é€ å™¨å‚æ•°ä½“ç°), //å¦åˆ™ï¼ŒæŠ›å¼‚å¸¸ Date parse = sdf.parse(&quot;2020-06-13 05:23 ä¸‹åˆ&quot;); System.out.println(parse); // Sat Jun 13 17:23:00 CST 2020 &#125; å››ã€Calendar ç±»ï¼šæ—¥å†ç±»ã€æŠ½è±¡ç±»12345678910111213141516171819202122232425262728293031323334@Test public void test6()&#123; //1.å®ä¾‹åŒ– //æ–¹å¼ä¸€ï¼šåˆ›å»ºå…¶å­ç±»ï¼ˆGregorianCalendarçš„å¯¹è±¡ //æ–¹å¼äºŒï¼šè°ƒç”¨å…¶é™æ€æ–¹æ³•getInstance() Calendar calendar = Calendar.getInstance();// System.out.println(calendar); //2 å¸¸ç”¨æ–¹æ³• // get int days = calendar.get(Calendar.DAY_OF_MONTH); System.out.println(days);// 13 System.out.println(calendar.get(Calendar.DAY_OF_YEAR)); // 165 // set() calendar.set(Calendar.DAY_OF_MONTH,22); int days1 = calendar.get(Calendar.DAY_OF_MONTH); System.out.println(days1); // 22 //add() calendar.add(Calendar.DAY_OF_MONTH,-3); days = calendar.get(Calendar.DAY_OF_MONTH); System.out.println(days); // 19 // getTime() æ—¥å†ç±» ---&gt; Date Date time = calendar.getTime(); System.out.println(time);// Fri Jun 19 17:41:29 CST 2020 //setTime():Date ---&gt; æ—¥å†ç±» Date date = new Date(); calendar.setTime(date); days = calendar.get(Calendar.DAY_OF_MONTH); System.out.println(days); // 13 &#125; JDK8 ä¸­æ–°æ—¥æœŸæ—¶é—´ APIä¸€ã€æ—¥æœŸæ—¶é—´çš„è¿­ä»£ ç¬¬ä¸€ä»£ï¼šjdk 1.0 Date ç±»ç¬¬äºŒä»£ï¼šjdk 1.1 Calender ç±»ï¼Œä¸€å®šçš„ç¨‹åº¦ä¸Šæ›¿ä»£äº† Date ç±»ç¬¬ä¸‰ä»£ï¼šjdk 1.8 æå‡ºäº†æ–°çš„ä¸€å¥— API äºŒã€å‰ä¸¤ä»£å­˜åœ¨çš„é—®é¢˜ä¸¾ä¾‹ï¼š å¯å˜æ€§ï¼šåƒæ—¶é—´å’Œæ—¥æœŸè¿™æ ·çš„ç±»åº”è¯¥æ˜¯å§ä¸å¯å˜çš„ã€‚åç§»æ€§ï¼šDate ä¸­çš„å¹´ä»½æ˜¯ä» 1900 å¹´å¼€å§‹çš„ï¼Œæœˆä»½æ˜¯ä» 0 å¼€å§‹çš„ã€‚æ ¼å¼åŒ–ï¼šæ ¼å¼è¯åªå¯¹ Date æœ‰ç”¨ï¼Œcalender åˆ™ä¸è¡Œã€‚æ­¤å¤–ï¼Œå®ƒä»¬ä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸èƒ½å¤„ç†é—°ç§’ç­‰ã€‚ ä¸‰ã€java 8 ä¸­æ–°çš„æ—¥æœŸæ—¶é—´ API æ¶‰åŠåˆ°çš„åŒ… å››ã€æœ¬åœ°æ—¥æœŸã€æœ¬åœ°æ—¶é—´ã€æœ¬åœ°æ—¥æœŸæ—¶é—´çš„ä½¿ç”¨ï¼šLocalDate/LocalTime/LocalDateTime ä¸€ã€è¯´æ˜ â‘  åˆ†åˆ«è¡¨ç¤ºä½¿ç”¨ ISO-8601 æ—¥å†ç³»ç»Ÿçš„æ—¥æœŸã€æ—¶é—´ã€å’Œæ—¶é—´ã€‚å®ƒä»¬æä¾›äº†ç®€å•çš„æœ¬åœ°æ—¶é—´ä¿¡æ¯ï¼Œä¹Ÿä¸åŒ…å«å½“å‰çš„æ—¶é—´ä¿¡æ¯ï¼Œä¹Ÿä¸åŒ…å«ä¸æ—¶åŒºç›¸å…³çš„ä¿¡æ¯ã€‚â‘¡ LocalDatetime ç›¸è¾ƒäº LocalDateã€LocalTIme,ä½¿ç”¨é¢‘ç‡é«˜â‘¢ ç±»ä¼¼äº Calender äºŒã€å¸¸ç”¨æ–¹æ³• äº” æ—¶é—´ç‚¹ï¼šInstant ä¸€ã€è¯´æ˜ â‘  æ—¶é—´çº¿ä¸Šçš„ä¸€ä¸ªç¬æ—¶ç‚¹ï¼Œæ¦‚å¿µä¸Šè®²ã€‚å®ƒåªæ˜¯ç®€å•çš„è¡¨ç¤ºè‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 0 æ—¶ 0 ç§’ï¼ˆUTC å¼€å§‹çš„ç§’æ•°ï¼‰â‘¡ ç±»ä¼¼äº java.util.Date ç±» äºŒã€å¸¸ç”¨æ–¹æ³• å…­ã€æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–ç±»ï¼šDateTimeFormatter ä¸€ã€è¯´æ˜ â‘  æ ¼å¼åŒ–æˆ–è§£ææ—¥æœŸã€æ—¶é—´â‘¡ ç±»ä¼¼äº SimpleDateFormat äºŒã€å¸¸ç”¨æ–¹æ³•â‘  å®ä¾‹åŒ–æ–¹å¼ï¼š é¢„å®šä¹‰çš„æ ‡å‡†æ ¼å¼ï¼Œå¦‚ï¼šISO_LOCAL_DATE_TIME; ISO_LOCAL_DATE;ISO_DATE;ISO_LOCAL_TIMEæœ¬åœ°ç›¸å…³çš„æ ¼å¼ï¼šå¦‚ï¼šofLocalizedDateTime(FormatStyle.LONG)è‡ªå®šä¹‰çš„æ ¼å¼ï¼šå¦‚ï¼šofPatternï¼ˆâ€œyyyy-MM-dd hh:mm:ssâ€ï¼‰ â‘¡ å¸¸ç”¨æ–¹æ³• 1234567891011public void test1()&#123; DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd hh:mm:ss&quot;); // æ ¼å¼åŒ– String str = formatter.format(LocalDateTime.now()); System.out.println(str); // 2020-06-20 03:38:37 // è§£æ TemporalAccessor accessor = formatter.parse(&quot;2020-06-20 03:38:37&quot;); System.out.println(accessor); // &#123;MinuteOfHour=38, HourOfAmPm=3, MilliOfSecond=0, MicroOfSecond=0, NanoOfSecond=0, SecondOfMinute=37&#125;,ISO resolved to 2020-06-20 &#125; ä¸ƒã€å…¶ä»– å¸¦æ—¶åŒºçš„æ—¥æœŸæ—¶é—´ï¼šZonedDateTime / ZoneId 12345678910111213141516171819202122232425262728/** * ZoneId:ç±»ä¸­åŒ…å«çš„å¤±å»ä¿¡æ¯ */ @Test public void test3()&#123; // getAvailableZoneIds():è·å–æ‰€æœ‰çš„ZoneId Set&lt;String&gt; zoneIds = ZoneId.getAvailableZoneIds(); for (String s : zoneIds) &#123; System.out.println(s); &#125; System.out.println(&quot;***********************&quot;); LocalDateTime localDateTime = LocalDateTime.now(ZoneId.of(&quot;Asia/Tokyo&quot;)); System.out.println(localDateTime); // 2020-06-20T16:53:34.885 &#125; /** * ZonedDateTime: å¸¦æ—¶åŒºçš„æ—¶é—´ */ @Test public void test4()&#123; // now() è·å–æœ¬æ—¶åŒºçš„ZoneDateTimeå¯¹è±¡ ZonedDateTime now = ZonedDateTime.now(); System.out.println(now); // 2020-06-20T15:57:00.163+08:00[Asia/Shanghai] // now(ZoneId id) è·å–æŒ‡å®šæ—¶åŒºçš„ZonedTimeå¯¹è±¡ ZonedDateTime zonedDateTiem = ZonedDateTime.now(ZoneId.of(&quot;Asia/Shanghai&quot;)); System.out.println(zonedDateTiem); &#125; æ—¶é—´é—´éš”ï¼šDurationâ€“ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´â€é—´éš”ï¼Œä»¥ç§’å’Œçº³ç§’ä¸ºåŸºå‡† 123456789101112131415public void test5()&#123; LocalTime localTime = LocalTime.now(); LocalTime localTime2 = LocalTime.of(15, 23, 32); // between() é™æ€æ–¹æ³•ï¼Œè¿”å›Durationå¯¹è±¡ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ—¶é—´é—´éš” Duration between = Duration.between(localTime, localTime2); System.out.println(between); System.out.println(between.getSeconds()); System.out.println(between.getNano()); LocalDateTime localdatetime = LocalDateTime.of(2016, 6, 12, 15, 23, 32); LocalDateTime localdatetime1 = LocalDateTime.of(2017, 6, 12, 15, 23, 32); Duration between1 = Duration.between(localdatetime, localdatetime1); System.out.println(between1.toDays()); // 365 &#125; æ—¥æœŸé—´éš”ï¼šPeriod â€“ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¥æœŸâ€é—´éš”ï¼Œä»¥å¹´ã€æœˆã€æ—¥è¡¡é‡ 1234567891011121314public void test6()&#123; LocalDate localdate = LocalDate.now(); LocalDate localdate1 = LocalDate.of(2028, 3, 18); Period period = Period.between(localdate, localdate1); System.out.println(period); // P7Y8M27D System.out.println(period.getYears()); // 7 System.out.println(period.getMonths()); // 8 System.out.println(period.getDays()); // 27 Period period1 = period.withYears(2); System.out.println(period1); // P2Y8M27D &#125; æ—¥æœŸæ—¶é—´æ ¡æ­£å™¨ï¼šTemporalAdjuster 12345678910111213141516171819202122public void test7()&#123; // è·å–å½“å‰æ—¥æœŸçš„ä¸‹ä¸€ä¸ªå‘¨æ—¥æ˜¯å“ªå¤©ï¼Ÿ TemporalAdjuster temporalAdjuster = TemporalAdjusters.next(DayOfWeek.SUNDAY); LocalDateTime localDateTime = LocalDateTime.now().with(temporalAdjuster); System.out.println(localDateTime); // 2020-06-21T16:42:13.229 // è·å–ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥é£Ÿå“ªå¤© LocalDate localDate = LocalDate.now().with(new TemporalAdjuster() &#123; @Override public Temporal adjustInto(Temporal temporal) &#123; LocalDate date = (LocalDate) temporal; if (date.getDayOfWeek().equals(DayOfWeek.FRIDAY)) &#123; return date.plusDays(3); &#125; else if (date.getDayOfWeek().equals(DayOfWeek.SATURDAY)) &#123; return date.plusDays(2); &#125; else &#123; return date.plusDays(1); &#125; &#125; &#125;); System.out.println(&quot;ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ˜¯:&quot;+localDate); &#125; Java æ¯”è¾ƒå™¨ä¸€ã€java æ¯”è¾ƒå™¨çš„ä½¿ç”¨èƒŒæ™¯ â‘  Java ä¸­çš„å¯¹è±¡ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œåªèƒ½è¿›è¡Œæ¯”è¾ƒï¼š == æˆ– ï¼= ï¼Œä¸èƒ½ä½¿ç”¨ &gt; æˆ– &lt; ä½†æ˜¯åœ¨å¼€å‘åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œæ’åºï¼Œè¨€å¤–ä¹‹æ„ï¼Œå°±éœ€è¦æ¯”è¾ƒå¯¹è±¡çš„å¤§å°ã€‚ä½¿ç”¨ä¸¤ä¸ªæ¥å£ä¸­çš„ä»»ä½•ä¸€ä¸ª: Comparable æˆ– Compartor äºŒã€è‡ªç„¶æ’åºï¼šä½¿ç”¨ comparable æ¥å£ è¯´æ˜ â‘  åƒ Stringã€åŒ…è£…ç±»ç­‰å®ç°äº† Comparable æ¥å£ï¼Œé‡å†™äº† comparaToï¼ˆobjï¼‰æ–¹æ³•ï¼Œç»™å‡ºäº†æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡å¤§å°çš„æ–¹å¼ã€‚â‘¡ Stringã€åŒ…è£…ç±»é‡å†™äº† comparaTo(ï¼‰çš„è§„åˆ™ï¼šå¦‚æœå½“å‰çš„å¯¹è±¡ this å¤§äºå½¢å‚å¯¹è±¡ objï¼Œåˆ™è¿”å›æ­£æ•´æ•°.å¦‚æœå½“å‰å¯¹è±¡ this å°äºå½¢å‚ objï¼Œåˆ™è¿”å›è´Ÿæ•´æ•°å¦‚æœå½“å‰å¯¹è±¡ this ç­‰äºå½¢å¯¹è±¡ obj,åˆ™è¿”å›é›¶ã€‚â‘¢ å¯¹äºè‡ªå®šä¹‰ç±»æ¥è¯´ï¼Œå¦‚æœéœ€è¦æ’åºï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç±»å®ç° Comparablej æ¥å£ï¼Œé‡å†™ comparaToï¼ˆobjï¼‰æ–¹æ³•ã€‚åœ¨ comparaTo()æ–¹æ³•ä¸­æŒ‡æ˜å¦‚ä½•æ’åº 123456789101112131415161718192021222324252627282930public class Goods implements Comparable&#123; private Sting name; private double price; //æŒ‡æ˜å•†å“æ¯”è¾ƒå¤§å°çš„æ–¹å¼ï¼šç…§ä»·æ ¼ä»ä½åˆ°é«˜æ’åºï¼Œåœ¨ç…§äº§å“åç§°ä»é«˜åˆ°ä½æ’åº @Override public int compareTo(Object o) &#123;// System.out.println(&quot;**************&quot;); if(o instanceof Goods)&#123; Goods goods = (Goods)o; //æ–¹å¼ä¸€ï¼š if(this.price &gt; goods.price)&#123; return 1; &#125;else if(this.price &lt; goods.price)&#123; return -1; &#125;else&#123;// return 0; return -this.name.compareTo(goods.name); &#125; //æ–¹å¼äºŒï¼š// return Double.compare(this.price,goods.price); &#125;// return 0; throw new RuntimeException(&quot;ä¼ å…¥çš„æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼&quot;); &#125;// getterã€setterã€toString()ã€æ„é€ å™¨ï¼šçœç•¥&#125; &#125;&#125; ä¸‰ã€å®šåˆ¶æ’åºï¼šä½¿ç”¨ Comparator æ¥å£è¯´æ˜ï¼š â‘  èƒŒæ™¯ï¼š å½“å…ƒç´ çš„ç±»å‹æ²¡å®ç° java.lang.comparable æ¥å£è€Œåˆä¸æ–¹ä¾¿ä¿®æ”¹ä»£ç ï¼Œæˆ–å®ç°äº† java.lang.Comparableæ¥å£çš„æ’åºè§„åˆ™ä¸é€‚åˆå½“å‰çš„æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ Comparator çš„å¯¹è±¡ç±»æ’åº â‘¡ é‡å†™ comparator(Object o1, Object o2)æ–¹æ³•ï¼Œæ¯”è¾ƒ o1 å’Œ o2 çš„å¤§å°ï¼š é‡å†™æ–¹æ³•è¿”å›æ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤º o1 å¤§äº o2å¦‚æœè¿”å› 0,è¡¨ç¤ºç›¸ç­‰è¿”å›è´Ÿæ•´æ•°ï¼Œè¡¨ç¤º o1 å°äº o2 ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516Comparator com = new Comparator() &#123; //æŒ‡æ˜å•†å“æ¯”è¾ƒå¤§å°çš„æ–¹å¼:ç…§äº§å“åç§°ä»ä½åˆ°é«˜æ’åº,å†ç…§ä»·æ ¼ä»é«˜åˆ°ä½æ’åº @Override public int compare(Object o1, Object o2) &#123; if(o1 instanceof Goods &amp;&amp; o2 instanceof Goods)&#123; Goods g1 = (Goods)o1; Goods g2 = (Goods)o2; if(g1.getName().equals(g2.getName()))&#123; return -Double.compare(g1.getPrice(),g2.getPrice()); &#125;else&#123; return g1.getName().compareTo(g2.getName()); &#125; &#125; throw new RuntimeException(&quot;è¾“å…¥çš„æ•°æ®ç±»å‹ä¸ä¸€è‡´&quot;); &#125;&#125; ä½¿ç”¨ï¼š 123Arrays.sort(goods,com);Collections.sort(coll,com);new TreeSet(com); 123456789101112131415161718192021222324252627 public void test3()&#123; Goods[] arr = new Goods[6]; arr[0] = new Goods(&quot;lenovoMouse&quot;,34.0); arr[1] = new Goods(&quot;dellMouse&quot;,43.0); arr[2] = new Goods(&quot;xiaomiMouse&quot;,12.0); arr[3] = new Goods(&quot;huaweiMouse&quot;,65.0); arr[4] = new Goods(&quot;huaweiMouse&quot;,224.0); arr[5] = new Goods(&quot;microsoftMouse&quot;,43.0); Arrays.sort(arr); System.out.println(&quot;Comparableæ’åº&quot;+Arrays.toString(arr)); // ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼Œå¯ä»¥åœ¨ä¸€å®šçš„ç¨‹åº¦ä¸Šä¼˜åŒ–ä»£ç  new Comparator&lt;T&gt;()&#123;&#125; Arrays.sort(arr, new Comparator&lt;Goods&gt;() &#123; @Override public int compare(Goods o1, Goods o2) &#123; // name ç›¸åŒ å°±æ¯”è¾ƒ ä»·æ ¼ï¼ˆé™åºï¼‰ if(o1.getName().equals(o2.getName()))&#123; return -Double.compare(o1.getPrice(),o2.getPrice()); &#125;else&#123; return o1.getName().compareTo(o2.getName()); &#125; &#125; &#125;); System.out.println(&quot;Comparator:&quot;+Arrays.toString(arr)); &#125;&#125; å…¶ä»–ç±»ä¸€ã€System ç±» â‘  System ç±»ä»£è¡¨ç³»ç»Ÿï¼Œç³»ç»Ÿçº§çš„å¾ˆå¤šå±æ€§å’Œæ§åˆ¶æ–¹æ³•éƒ½æ”¾ç½®åœ¨è¯¥ç±»çš„å†…éƒ¨ã€‚è¯¥ç±»ä½äº java.lang åŒ…ã€‚â‘¡ ç”±äºè¯¥ç±»çš„æ„é€ å™¨æ˜¯ private çš„ï¼Œæ‰€ä»¥æ— æ³•åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ— æ³•å®ä¾‹åŒ–è¯¥ç±»ã€‚å…¶å†…éƒ¨çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•éƒ½æ˜¯ static çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œè°ƒç”¨ã€‚ æ–¹æ³•ï¼š 1234native long currentTimeMillis()void exit(int status)void gc()String getProperty(String key) äºŒã€Math ç±»1java.lang.Mathæä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ç”¨äºç§‘å­¦è®¡ç®—ã€‚å…¶æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ä¸€èˆ¬ä¸ºdoubleå‹ã€‚ ä¸‰ã€BigInteger ç±»ã€BigDecimal ç±»è¯´æ˜ï¼š â‘  java.math åŒ…çš„ BigInteger å¯ä»¥è¡¨ç¤ºä¸å¯å˜çš„ä»»æ„ç²¾åº¦çš„æ•´æ•°ã€‚â‘¡ è¦æ±‚æ•°å­—ç²¾åº¦æ¯”è¾ƒé«˜ï¼Œç”¨åˆ° java.math.BigDecimal ç±» 123456789101112public class BigIntegerTest &#123; @Test public void test1()&#123; BigInteger bi = new BigInteger(&quot;12323443544535&quot;); BigDecimal bd = new BigDecimal(&quot;233434.35445&quot;); BigDecimal bd2 = new BigDecimal(&quot;2113&quot;); System.out.println(bi); // 12323443544535 System.out.println(bd.divide(bd2,BigDecimal.ROUND_HALF_UP)); // 110.47532 System.out.println(bd.divide(bd2,15,BigDecimal.ROUND_HALF_UP)); // 110.475321557027922 &#125;&#125;","categories":[{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/categories/Java%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"}]},{"title":"Spring5ä¹‹IOC","slug":"Spring5ä¹‹IOC","date":"2020-07-21T16:00:00.000Z","updated":"2020-10-25T02:19:13.978Z","comments":true,"path":"posts/3979597380.html","link":"","permalink":"http://blog.oy6090.top/posts/3979597380.html","excerpt":"","text":"Spring5 ä»‹ç» Spring æ˜¯è½»é‡çº§çš„å¼€æºçš„ JavaEE æ¡†æ¶ Spring å¯ä»¥è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§ Spring æœ‰ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼šIOC å’Œ Aop (1) IOC : æ§åˆ¶åè½¬ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡è¿‡ç¨‹ç»™ Spring è¿›è¡Œç®¡ç† (2) Aop: é¢å‘åˆ‡é¢ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼º Spring ç‰¹ç‚¹ ï¼ˆ1ï¼‰æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ ï¼ˆ2ï¼‰Aop ç¼–ç¨‹æ”¯æŒ ï¼ˆ3ï¼‰æ–¹ä¾¿ç¨‹åºæµ‹è¯• ï¼ˆ4ï¼‰ æ–¹ä¾¿å’Œå…¶ä»–æ¡†æ¶è¿›è¡Œæ•´åˆ ï¼ˆ5ï¼‰æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œ ï¼ˆ6ï¼‰é™ä½ API å¼€å‘éš¾åº¦ Spring5 å…¥é—¨æ¡ˆä¾‹ ä½¿ç”¨ idea åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ java å·¥ç¨‹ å¯¼å…¥ Spring5 ç›¸å…³çš„ jar åŒ…ï¼ˆå…ˆå» Spring å®˜ç½‘ä¸‹è½½ï¼‰ åˆ›å»ºæ™®é€šç±»ï¼Œåœ¨è¿™ä¸ªç±»åˆ›å»ºæ™®é€šæ–¹æ³• 12345public class User&#123; public void add()&#123; System.out.println(&quot;add....&quot;); &#125;&#125; åˆ›å»º Spring é…ç½®æ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶é…ç½®åˆ›å»ºçš„å¯¹è±¡ï¼ˆbean1.xmlï¼‰ 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--é…ç½®Userå¯¹è±¡çš„åˆ›å»º--&gt; &lt;bean id=&quot;user&quot; class=&quot;com.oy.online.spring.User&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; 5.è¿›è¡Œæµ‹è¯•ä»£ç ç¼–å†™ 12345678910@Testpublic void userTest()&#123; // 1.åŠ è½½Springé…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean1.xml&quot;); // 2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ User user = context.getBean(&quot;user&quot;, User.class); System.out.println(user); user.add();&#125; ä¸€ã€IOC(æ¦‚å¿µå’ŒåŸç†)1ã€IOC æ§åˆ¶åè½¬ï¼ŒæŠŠå¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹ï¼Œäº¤ç»™ Spring è¿›è¡Œç®¡ç† ä½¿ç”¨ IOC ç›®çš„ï¼šä¸ºäº†è€¦åˆåº¦é™ä½ 2ã€IOC åº•å±‚åŸç† xml è§£æã€å·¥å‚æ¨¡å¼ã€åå°„ äºŒã€ IOC(BeanFactory æ¥å£) IOC æ€æƒ³åŸºäº IOC å®¹å™¨å®Œæˆï¼ŒIOC å®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚ Spring æä¾› IOC å®¹å™¨å®ç°çš„ä¸¤ç§æ–¹å¼:ï¼ˆä¸¤ä¸ªæ¥å£ï¼‰ (1) BeanFactory: IOC å®¹å™¨åŸºæœ¬å®ç°ï¼Œæ˜¯ Spring å†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ â€‹ åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™ä¸ä¼šåŠ è½½ï¼Œåœ¨è·å–å¯¹è±¡ï¼ˆä½¿ç”¨ï¼‰æ‰ä¼šå»åˆ›å»ºå¯¹è±¡ (2)ApplicationContext: BeanFactory æ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸€èˆ¬æœ‰å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ â€‹ åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠé…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»º ApplicationContext æ¥å£æœ‰å®ç°ç±» ä¸‰ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆæ¦‚å¿µï¼‰1ã€Bean ç®¡ç† Bean ç®¡ç†æŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œ Spring åˆ›å»ºå¯¹è±¡ Spring æ³¨å…¥å±æ€§ 2ã€Bean ç®¡ç†çš„æ“ä½œçš„ä¸¤ç§æ–¹å¼ åŸºäº xml é…ç½®æ–‡ä»¶æ–¹å¼å®ç° åŸºäºæ³¨è§£æ–¹å¼å®ç° å››ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäº xml æ–¹å¼ï¼‰1ã€åŸºäº xml æ–¹å¼åˆ›å»ºå¯¹è±¡12&lt;!--é…ç½®Userå¯¹è±¡çš„åˆ›å»º--&gt;&lt;bean id=&quot;user&quot; class=&quot;com.oy.online.spring.User&quot;&gt;&lt;/bean&gt; (1) åœ¨ spring é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ bean æ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡çš„åˆ›å»º (2) åœ¨ bean æ ‡ç­¾æœ‰å¾ˆå¤šå±æ€§ï¼Œä»‹ç»å¸¸ç”¨å±æ€§ Id å±æ€§ ï¼š å”¯ä¸€æ ‡è¯†ç¬¦ class å±æ€§ï¼šç±»å…¨è·¯å¾„ï¼ˆåŒ…ç±»è·¯å¾„ï¼‰ (3) åˆ›å»ºå¯¹è±¡æ—¶å€™ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ‰§è¡Œæ— å‚æ„é€ å™¨å®Œæˆå¯¹è±¡çš„åˆ›å»º 2ã€åŸºäº xml æ–¹å¼æ³¨å…¥å±æ€§ï¼ˆ1ï¼‰DIï¼šä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯æ³¨å…¥å±æ€§ 3ã€ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šä½¿ç”¨ set æ–¹æ³•è¿›è¡Œæ³¨å…¥â€‹ (1) åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§å’Œå¯¹åº”çš„ set æ–¹æ³• 1234567891011121314151617public class Book &#123; // åˆ›å»ºå±æ€§ private String bname; private String bauthor; // åˆ›å»ºå±æ€§å¯¹åº”çš„setæ–¹æ³• public void setBname(String bname)&#123; this.bname = bname; &#125; public void setBauthor(String bauthor)&#123; this.bauthor = bauthor; &#125; // æµ‹è¯•æ–¹æ³• public void show()&#123; System.out.println(bname+&quot;::&quot;+bauthor); &#125;&#125; â€‹ (2) åœ¨ spring é…ç½®æ–‡ä»¶é…ç½®å¯¹è±¡åˆ›å»ºï¼Œé…ç½®å±æ€§æ³¨å…¥ 12345678910&lt;!--é…ç½®Bookå¯¹è±¡çš„åˆ›å»º--&gt; &lt;!--set æ–¹æ³•æ³¨å…¥å±æ€§--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.oy.online.spring.Book&quot;&gt; &lt;!--ä½¿ç”¨property å®Œæˆå±æ€§çš„æ³¨å…¥ name : ç±»é‡Œé¢å±æ€§åç§° value: å‘å±æ€§æ³¨å…¥çš„å€¼ --&gt; &lt;property name=&quot;bname&quot; value=&quot;Javaç¼–ç¨‹ä¹‹ç¾&quot;&gt;&lt;/property&gt; &lt;property name=&quot;bauthor&quot; value=&quot;Java&quot;&gt;&lt;/property&gt; &lt;/bean&gt; 4ã€ç¬¬äºŒç§æ³¨å…¥æ–¹å¼ï¼šä½¿ç”¨æœ‰å‚æ•°æ„æˆè¿›è¡Œæ³¨å…¥â€‹ (1) åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ï¼Œåˆ›å»ºå±æ€§å¯¹åº”æœ‰å‚æ•°æ„é€ æ–¹æ³• 12345678910111213141516public class Order &#123; // å±æ€§ private String oname; private String address; // æœ‰å‚æ•°æ„é€  public Order(String oname, String address)&#123; this.oname = oname; this.address = address; &#125; // æµ‹è¯•æ–¹æ³• public void show()&#123; System.out.println(oname+&quot;::&quot;+address); &#125;&#125; â€‹ (2) åœ¨ spring é…ç½®æ–‡ä»¶ä¸­çš„è¿›è¡Œé…ç½® 12345&lt;!--æœ‰å‚æ„é€ å‡½æ•°æ³¨å…¥å±æ€§--&gt; &lt;bean id=&quot;order&quot; class=&quot;com.oy.online.spring.Order&quot;&gt; &lt;constructor-arg name=&quot;oname&quot; value=&quot;ç”µè„‘&quot;&gt;&lt;/constructor-arg&gt; &lt;constructor-arg name=&quot;address&quot; value=&quot;China&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt; 5ã€p ç©ºé—´åç§°æ³¨å…¥ï¼ˆäº†è§£ï¼‰â€‹ (1) ä½¿ç”¨ p åç§°ç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç®€åŒ–åŸºäº xml é…ç½®æ–¹å¼ ç¬¬ä¸€æ­¥ æ·»åŠ  p åç§°ç©ºé—´åœ¨é…ç½®æ–‡ä»¶ä¸­ xmlns:p=â€http://www.springframework.org/schema/p&quot; 12345&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;&lt;/beans&gt; ç¬¬äºŒæ­¥ è¿›è¡Œå±æ€§æ³¨å…¥ï¼Œåœ¨ bean æ ‡ç­¾é‡Œé¢è¿›è¡Œæ“ä½œ 12&lt;!--set æ–¹æ³•æ³¨å…¥å±æ€§--&gt;&lt;bean id&#x3D;&quot;book&quot; class&#x3D;&quot;com.oy.online.spring.Book&quot; p:bname&#x3D;&quot;javaç¼–ç¨‹ä¹‹ç¾&quot; p:bauthor&#x3D;&quot;java&quot;&gt;&lt;&#x2F;bean&gt; äº”ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆxml æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰1ã€ å­—é¢é‡ï¼ˆ1ï¼‰null å€¼ 123 &lt;property name=&quot;address&quot;&gt; &lt;null/&gt;&lt;/property&gt; â€‹ (2) å±æ€§åŒ…å«ç‰¹æ®Šç¬¦å· 1234567&lt;!--å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·1 æŠŠ&lt;&gt;è¿›è¡Œè½¬ä¹‰ &amp;lt; &amp;gt;2 æŠŠå¸¦ç‰¹æ®Šç¬¦å·å†…å®¹å†™åˆ° CDATA--&gt;&lt;property name=&quot;address&quot;&gt; &lt;value&gt;&lt;![CDATA[&lt;&lt;å—äº¬&gt;&gt;]]&gt;&lt;/value&gt;&lt;/property&gt; 2ã€æ³¨å…¥å±æ€§-å¤–éƒ¨ bean(1) åˆ›å»ºä¸¤ä¸ªç±» service ç±» å’Œ dao ç±» (2) åœ¨ service è°ƒç”¨ dao é‡Œé¢çš„æ–¹æ³• (3) åœ¨ spring é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½® 1234567891011public class UserService &#123; //åˆ›å»º UserDao ç±»å‹å±æ€§ï¼Œç”Ÿæˆ set æ–¹æ³• private UserDao userDao; public void setUserDao(UserDao userDao) &#123; this.userDao = userDao; &#125; public void add() &#123; System.out.println(&quot;service add...............&quot;); userDao.update(); &#125;&#125; 123456789&lt;!--1 service å’Œ dao å¯¹è±¡åˆ›å»º--&gt;&lt;bean id=&quot;userService&quot; class=&quot;com.atguigu.spring5.service.UserService&quot;&gt; &lt;!--æ³¨å…¥ userDao å¯¹è±¡ name å±æ€§ï¼šç±»é‡Œé¢å±æ€§åç§° ref å±æ€§ï¼šåˆ›å»º userDao å¯¹è±¡ bean æ ‡ç­¾ id å€¼ --&gt; &lt;property name=&quot;userDao&quot; ref=&quot;userDaoImpl&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;userDaoImpl&quot; class=&quot;com.atguigu.spring5.dao.UserDaoImpl&quot;&gt;&lt;/bean&gt; 3ã€æ³¨å…¥å±æ€§-å†…éƒ¨ beanï¼ˆ1ï¼‰ ä¸€å¯¹å¤šå…³ç³»ï¼šéƒ¨é—¨å’Œå‘˜å·¥ â€‹ ä¸€ä¸ªéƒ¨é—¨æœ‰å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨ â€‹ éƒ¨é—¨æ˜¯ä¸€ï¼Œå‘˜å·¥æ˜¯å¤š ï¼ˆ2ï¼‰åœ¨å®ä½“ç±»ä¹‹é—´è¡¨ç¤ºä¸€å¯¹å¤šå…³ç³»ï¼Œå‘˜å·¥è¡¨ç¤ºæ‰€å±éƒ¨é—¨ï¼Œä½¿ç”¨å¯¹è±¡ç±»å‹å±æ€§è¿›è¡Œè¡¨ç¤º â€‹ éƒ¨é—¨ï¼š 1234567891011121314public class Dept &#123; private String dname; public void setDname(String dname) &#123; this.dname = dname; &#125; @Override public String toString() &#123; return &quot;Dept&#123;&quot; + &quot;dname=&#x27;&quot; + dname + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125; â€‹ å‘˜å·¥ï¼š 12345678910111213141516171819202122public class Emp &#123; private String ename; private String gender; // å‘˜å·¥å±äºæŸä¸€ä¸ªéƒ¨é—¨ï¼Œä½¿ç”¨å¯¹è±¡å½¢å¼è¡¨ç¤º private Dept dept; public void setEname(String ename) &#123; this.ename = ename; &#125; public void setGender(String gender) &#123; this.gender = gender; &#125; public void setDept(Dept dept) &#123; this.dept = dept; &#125; public void show()&#123; System.out.println(ename + &quot;::&quot; + gender + &quot;::&quot; + dept); &#125;&#125; â€‹ (3) åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½® 123456789101112&lt;!--å†…éƒ¨bean--&gt; &lt;bean id=&quot;emp&quot; class=&quot;com.oy.online.spring.bean.Emp&quot;&gt; &lt;!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§--&gt; &lt;property name=&quot;ename&quot; value=&quot;jack&quot;&gt;&lt;/property&gt; &lt;property name=&quot;gender&quot; value=&quot;å¥³&quot;&gt;&lt;/property&gt; &lt;!--è®¾ç½®å¯¹è±¡ç±»å‹å±æ€§--&gt; &lt;property name=&quot;dept&quot;&gt; &lt;bean id=&quot;dept&quot; class=&quot;com.oy.online.spring.bean.Dept&quot;&gt; &lt;property name=&quot;dname&quot; value=&quot;è®¾è®¡éƒ¨&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt; â€‹ æµ‹è¯•ï¼š 12345678910 @Testpublic void EmpTest()&#123; // åŠ è½½Springé…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean3.xml&quot;); // è·å–åˆ›å»ºå¯¹è±¡ Emp emp = context.getBean(&quot;emp&quot;, Emp.class); System.out.println(emp); emp.show();&#125; 4ã€æ³¨å…¥å±æ€§-çº§è”èµ‹å€¼ ç¬¬ä¸€ç§å†™æ³• 1234567891011&lt;!--çº§è”èµ‹å€¼--&gt;&lt;bean id=&quot;emp&quot; class=&quot;com.oy.online.spring.bean.Emp&quot;&gt; &lt;!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§--&gt; &lt;property name=&quot;ename&quot; value=&quot;lucy&quot;&gt;&lt;/property&gt; &lt;property name=&quot;gender&quot; value=&quot;å¥³&quot;&gt;&lt;/property&gt; &lt;!--çº§è”èµ‹å€¼--&gt; &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;dept&quot; class=&quot;com.oy.online.spring.bean.Dept&quot;&gt; &lt;property name=&quot;dname&quot; value=&quot;æŠ€æœ¯éƒ¨&quot;&gt;&lt;/property&gt;&lt;/bean&gt; ç¬¬äºŒç§å†™æ³• 123456789101112 &lt;!--çº§è”èµ‹å€¼--&gt;&lt;bean id=&quot;emp&quot; class=&quot;com.oy.online.spring.bean.Emp&quot;&gt; &lt;!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§--&gt; &lt;property name=&quot;ename&quot; value=&quot;lucy&quot;&gt;&lt;/property&gt; &lt;property name=&quot;gender&quot; value=&quot;å¥³&quot;&gt;&lt;/property&gt; &lt;!--çº§è”èµ‹å€¼--&gt; &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt; &lt;property name=&quot;dept.dname&quot; value=&quot;è´¢åŠ¡éƒ¨&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;dept&quot; class=&quot;com.oy.online.spring.bean.Dept&quot;&gt; &lt;property name=&quot;dname&quot; value=&quot;æŠ€æœ¯éƒ¨&quot;&gt;&lt;/property&gt;&lt;/bean&gt; å…­ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆxml æ³¨å…¥é›†åˆå±æ€§ï¼‰ 1ã€æ³¨å…¥æ•°ç»„ç±»å‹å±æ€§2ã€æ³¨å…¥ List é›†åˆç±»å‹å±æ€§3ã€æ³¨å…¥ Map é›†åˆå±æ€§ï¼ˆ1ï¼‰ åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ã€listã€mapã€set ç±»å‹å±æ€§ï¼Œç”Ÿæˆå¯¹åº”çš„ set æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536public class Stu &#123; // 1.æ•°ç»„ç±»å‹å±æ€§ private String[] courses; // 2. listé›†åˆç±»å‹å±æ€§ private List&lt;String&gt; list; // 3.map é›†åˆç±»å‹å±æ€§ private Map&lt;String, String&gt; maps; // 4.seté›†åˆç±»å‹å±æ€§ private Set&lt;String&gt; set; public void setCourses(String[] courses) &#123; this.courses = courses; &#125; public void setList(List&lt;String&gt; list) &#123; this.list = list; &#125; public void setMaps(Map&lt;String, String&gt; maps) &#123; this.maps = maps; &#125; public void setSet(Set&lt;String&gt; set) &#123; this.set = set; &#125; @Override public String toString() &#123; return &quot;Stu&#123;&quot; + &quot;courses=&quot; + Arrays.toString(courses) + &quot;, list=&quot; + list + &quot;, maps=&quot; + maps + &quot;, set=&quot; + set + &#x27;&#125;&#x27;; &#125;&#125; â€‹ ï¼ˆ2ï¼‰åœ¨ Spring é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½® 12345678910111213141516171819202122232425262728293031&lt;!--é›†åˆç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;bean id=&quot;stu&quot; class=&quot;com.oy.online.Spring.Stu&quot;&gt; &lt;!--æ•°ç»„ç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;courses&quot;&gt; &lt;array&gt; &lt;value&gt;javaè¯¾ç¨‹&lt;/value&gt; &lt;value&gt;æ•°æ®åº“è¯¾ç¨‹&lt;/value&gt; &lt;/array&gt; &lt;/property&gt; &lt;!--list ç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;list&quot;&gt; &lt;list&gt; &lt;value&gt;å¼ ä¸‰&lt;/value&gt; &lt;value&gt;æå››&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;!--Map ç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;maps&quot;&gt; &lt;map&gt; &lt;entry key=&quot;Java&quot; value=&quot;java&quot;&gt;&lt;/entry&gt; &lt;entry key=&quot;PHP&quot; value=&quot;php&quot;&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;!--set ç±»å‹å±æ€§æ³¨å…¥--&gt; &lt;property name=&quot;set&quot;&gt; &lt;set&gt; &lt;value&gt;MySql&lt;/value&gt; &lt;value&gt;Redis&lt;/value&gt; &lt;/set&gt; &lt;/property&gt; &lt;/bean&gt; 4ã€åœ¨é›†åˆé‡Œé¢è®¾ç½®å¯¹è±¡ç±»å‹å€¼â€‹ åœ¨ Stu ä¸­æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼š 123456//å­¦ç”Ÿæ‰€å­¦å¤šé—¨è¯¾ç¨‹ private List&lt;Course&gt; courseList; public void setCourseList(List&lt;Course&gt; courseList) &#123; this.courseList = courseList; &#125; åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­ 1234567&lt;!--æ³¨å…¥ list é›†åˆç±»å‹ï¼Œå€¼æ˜¯å¯¹è±¡--&gt;&lt;property name=&quot;courseList&quot;&gt; &lt;list&gt; &lt;ref bean=&quot;course1&quot;&gt;&lt;/ref&gt; &lt;ref bean=&quot;course2&quot;&gt;&lt;/ref&gt; &lt;/list&gt;&lt;/property&gt; 1234567&lt;!--åˆ›å»ºå¤šä¸ª course å¯¹è±¡--&gt;&lt;bean id=&quot;course1&quot; class=&quot;com.oy.online.Spring.Course&quot;&gt; &lt;property name=&quot;cname&quot; value=&quot;Spring5æ¡†æ¶&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;course2&quot; class=&quot;com.oy.online.Spring.Course&quot;&gt; &lt;property name=&quot;cname&quot; value=&quot;Mybaitsæ¡†æ¶&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 5ã€æŠŠé›†åˆæ³¨å…¥éƒ¨åˆ†æå–å‡ºæ¥ï¼ˆ1ï¼‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¼•å…¥åç§° util http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd 12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt; (2) ä½¿ç”¨ util æ ‡ç­¾å®Œæˆ list é›†åˆæ³¨å…¥æå– 12345678910&lt;!--1ã€æå–listé›†åˆç±»å‹å±æ€§æ³¨å…¥ä½¿ç”¨--&gt; &lt;util:list id=&quot;bookList&quot;&gt; &lt;value&gt;javaç¼–ç¨‹ä¹‹ç¾&lt;/value&gt; &lt;value&gt;javaæ ¸å¿ƒå·&lt;/value&gt; &lt;value&gt;MYSQLå¿…çŸ¥å¿…ä¼š&lt;/value&gt; &lt;/util:list&gt; &lt;!--2ã€æå–listé›†åˆç±»å‹å±æ€§æ³¨å…¥ä½¿ç”¨--&gt; &lt;bean id=&quot;book&quot; class=&quot;com.oy.online.Spring.book&quot;&gt; &lt;property name=&quot;list&quot; ref=&quot;bookList&quot;&gt;&lt;/property&gt; &lt;/bean&gt; ä¸ƒã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆFactoryBeanï¼‰ Spring æœ‰ä¸¤ç§ç±»å‹ beanï¼Œ ä¸€ç§æ™®é€š bean, å¦å¤–ä¸€ç§å·¥å‚ bean(FactroyBean) æ™®é€š bean: åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ bean ç±»å‹å°±æ˜¯è¿”å›ç±»å‹ å·¥å‚ beanï¼šåœ¨é…ç½®æ–‡ä»¶å®šä¹‰ bean ç±»å‹å¯ä»¥å’Œè¿”å›ç±»å‹ä¸ä¸€æ · ç¬¬ä¸€æ­¥ åˆ›å»ºç±»ï¼Œè®©è¿™ä¸ªç±»ä¸ºå·¥å‚ bean,å®ç°æ¥å£ FactoryBean ç¬¬äºŒæ­¥ å®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨å®ç°çš„æ–¹æ³•ä¸­å®šä¹‰è¿”å›çš„ bean ç±»å‹ 12345678910111213141516171819public class Mybean implements FactoryBean &#123; @Override public Course getObject() throws Exception &#123; Course course = new Course(); course.setCname(&quot;abc&quot;); return course; &#125; @Override public Class&lt;?&gt; getObjectType() &#123; return null; &#125; @Override public boolean isSingleton() &#123; return false; &#125;&#125; 1&lt;bean id=&quot;myBean&quot; class=&quot;com.oy.online.Spring.bean.Mybean&quot;&gt;&lt;/bean&gt; 123456789@org.junit.Test public void FactoryTest()&#123; // åŠ è½½Springé…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean2.xml&quot;); // è·å–åˆ›å»ºå¯¹è±¡ Course course = context.getBean(&quot;myBean&quot;, Course.class); System.out.println(course); &#125; å…«ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆbean ä½œç”¨åŸŸï¼‰1.åœ¨ Spring é‡Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œbean æ˜¯å•å®ä¾‹å¯¹è±¡1234567891011@org.junit.Testpublic void BookTest()&#123; // åŠ è½½Springé…ç½®æ–‡ä»¶ ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean2.xml&quot;); // è·å–åˆ›å»ºå¯¹è±¡ book book1 = context.getBean(&quot;book&quot;, book.class); book book2 = context.getBean(&quot;book&quot;, book.class); System.out.println(book1); System.out.println(book2);&#125; 2.è®¾ç½®å•å®ä¾‹æˆ–å¤šå®ä¾‹ åœ¨ Spring é…ç½®æ–‡ä»¶ bean æ ‡ç­¾é‡Œé¢æœ‰å±æ€§**(scope)**ç”¨äºè®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹ scope å±æ€§å€¼ ç¬¬ä¸€ä¸ªå€¼ é»˜è®¤å€¼ï¼Œsingletonï¼Œè¡¨ç¤ºæ˜¯å•å®ä¾‹ ç¬¬äºŒä¸ªå€¼ prototype, è¡¨ç¤ºç¬¬å¤šå®ä¾‹å¯¹è±¡ 123&lt;bean id=&quot;book&quot; class=&quot;com.oy.online.Spring.book&quot; scope=&quot;prototype&quot;&gt; &lt;property name=&quot;list&quot; ref=&quot;bookList&quot;&gt;&lt;/property&gt;&lt;/bean&gt; singleton å’Œ prototype åŒºåˆ« ç¬¬ä¸€ singleton å•å®ä¾‹ï¼Œprototype å¤šå®ä¾‹ ç¬¬äºŒ è®¾ç½® scope å€¼æ˜¯ singleton æ—¶å€™ï¼ŒåŠ è½½ spring é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šåˆ›å»ºå•å®ä¾‹å¯¹è±¡ã€‚ â€‹ è®¾ç½® scope å€¼æ˜¯ prototype æ—¶å€™ï¼Œä¸æ˜¯åŠ è½½ spring é…ç½®æ–‡ä»¶æ—¶å€™åˆ›å»º å¯¹è±¡ï¼Œåœ¨è°ƒç”¨ getBean æ–¹æ³•æ—¶å€™åˆ›å»ºå¤šå®ä¾‹å¯¹è±¡ã€‚ ä¹ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆbean ç”Ÿå‘½å‘¨æœŸï¼‰1ã€ç”Ÿå‘½å‘¨æœŸ ä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹ 2ã€bean ç”Ÿå‘½å‘¨æœŸ é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰ ä¸º bean çš„å±æ€§è®¾ç½®å€¼ å’Œ å¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰ è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–æ–¹æ³•ï¼‰ bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰ å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰ 3ã€æ¼”ç¤º bean ç”Ÿå‘½å‘¨æœŸ1234567891011121314151617181920212223public class Orders &#123; private String oname; // æ— å‚æ„é€ å™¨ public Orders()&#123; System.out.println(&quot;ç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ„é€ åˆ›å»º bean å®ä¾‹&quot;); &#125; public void setOname(String oname) &#123; this.oname = oname; System.out.println(&quot;ç¬¬äºŒæ­¥ è°ƒsetæ–¹æ³•è®¾ç½®å±æ€§å€¼&quot;); &#125; // åˆ›å»ºæ‰§è¡Œçš„åˆå§‹åŒ–çš„æ–¹æ³• public void initMethod()&#123; System.out.println(&quot;ç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–çš„æ–¹æ³•&quot;); &#125; // åˆ›å»ºæ‰§è¡Œçš„é”€æ¯çš„æ–¹æ³• public void destroyMethod()&#123; System.out.println(&quot;ç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯çš„æ–¹æ³•&quot;); &#125;&#125; 123&lt;bean id=&quot;orders&quot; class=&quot;com.oy.online.Spring.bean.Orders&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt; &lt;property name=&quot;oname&quot; value=&quot;æ‰‹æœº&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 1234567891011 @org.junit.Test public void OrdersTest()&#123;// ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean3.xml&quot;); ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean3.xml&quot;); Orders orders = context.getBean(&quot;orders&quot;, Orders.class); System.out.println(&quot;ç¬¬å››æ­¥ è·å–åˆ›å»ºBean å®ä¾‹å¯¹è±¡&quot;); System.out.println(orders); // æ‰‹åŠ¨è®©beanå®ä¾‹é”€æ¯ context.close(); &#125; 4ã€bean çš„åç½®å¤„ç†å™¨ï¼Œbean ç”Ÿå‘½å‘¨æœŸ é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ„é€ å™¨ï¼‰ ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰ **æŠŠ bean çš„å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• **postProcessBefoInitialization è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³• æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessAfterInitialization bean å¯ä»¥ä½¿ç”¨ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰ å½“å‰å®¹å™¨å…³é—­æ—¶ï¼Œè°ƒç”¨ bean çš„é”€æ¯æ–¹æ³•ï¼ˆéœ€è¦ç²¾å¿ƒé…åˆ¶é”€æ¯çš„æ–¹æ³•ï¼‰ 5ã€æ·»åŠ åç½®å¤„ç†å™¨12345678910111213public class MybeanPost implements BeanPostProcessor &#123; @Override public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; System.out.println(&quot;åœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•&quot;); return bean; &#125; @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; System.out.println(&quot;åœ¨åˆå§‹åŒ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•&quot;); return bean; &#125;&#125; 12&lt;!--é…ç½®åç½®å¤„ç†å™¨--&gt;&lt;bean id=&quot;myBeanPost&quot; class=&quot;com.oy.online.Spring.bean.MybeanPost&quot;&gt;&lt;/bean&gt; åã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆXML è‡ªåŠ¨è£…é…ï¼‰1ã€è‡ªåŠ¨è£…é… æ ¹æ®æŒ‡å®šè£…é…è§„åˆ™ï¼ˆå±æ€§åç§°æˆ–è€…å±æ€§ç±»å‹ï¼‰ï¼ŒSpring è‡ªåŠ¨å°†åŒ¹é…çš„å±æ€§å€¼è¿›è¡Œæ³¨å…¥ 2ã€è‡ªåŠ¨è£…é…è¿‡ç¨‹ï¼ˆ1ï¼‰æ ¹æ®å±æ€§åç§°è‡ªåŠ¨æ³¨å…¥ 1234567891011121314151617public class Emp &#123; private Dept dept; public void setDept(Dept dept) &#123; this.dept = dept; &#125; @Override public String toString() &#123; return &quot;Emp&#123;&quot; + &quot;dept=&quot; + dept + &#x27;&#125;&#x27;; &#125; public void test()&#123; System.out.println(dept); &#125;&#125; 123456public class Dept &#123; @Override public String toString() &#123; return &quot;Dept&#123;&#125;&quot;; &#125;&#125; 123456789&lt;!--å®ç°è‡ªåŠ¨è£…é… beanæ ‡ç­¾å±æ€§autowire,é…ç½®è‡ªåŠ¨è£…é… autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ï¼Œæ³¨å…¥å€¼beançš„idå€¼å’Œç±»å‹æ€§åç§°ä¸€æ · byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥--&gt;&lt;bean id=&quot;emp&quot; class=&quot;com.oy.online.Spring.autowire.Emp&quot; autowire=&quot;byName&quot;&gt;&lt;/bean&gt;&lt;bean id=&quot;dept&quot; class=&quot;com.oy.online.Spring.autowire.Dept&quot;&gt;&lt;/bean&gt; (2) æ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨æ³¨å…¥ 123456789&lt;!--å®ç°è‡ªåŠ¨è£…é… beanæ ‡ç­¾å±æ€§autowire,é…ç½®è‡ªåŠ¨è£…é… autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ï¼Œæ³¨å…¥å€¼beançš„idå€¼å’Œç±»å‹æ€§åç§°ä¸€æ · byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥--&gt;&lt;bean id=&quot;emp&quot; class=&quot;com.oy.online.Spring.autowire.Emp&quot; autowire=&quot;byType&quot;&gt;&lt;/bean&gt;&lt;bean id=&quot;dept&quot; class=&quot;com.oy.online.Spring.autowire.Dept&quot;&gt;&lt;/bean&gt; åä¸€ã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼‰ ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯ ï¼ˆ1ï¼‰é…ç½®å¾·é²ä¼Šè¿æ¥æ±  ï¼ˆ2ï¼‰å¼•å…¥å¾·é²ä¼Šè¿æ¥æ± ä¾èµ– jar åŒ… 1234567&lt;!--ç›´æ¥é…ç½®è¿æ¥æ± --&gt;&lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:8080/test&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;&lt;/bean&gt; å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ±  (1) åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼Œproperties æ ¼å¼æ–‡ä»¶ï¼Œå†™æ•°æ®åº“ä¿¡æ¯ 1234prop.driverClass=com.mysql.jdbc.Driverprop.url=jdbc:mysql://localhost:8080/testprop.username=rootprop.password=root â€‹ (2) æŠŠå¤–éƒ¨ properties å±æ€§æ–‡ä»¶å¼•å…¥åˆ° spring é…ç½®æ–‡ä»¶ä¸­ å¼•å…¥ context åç§°ç©ºé—´ xmlns:context=â€http://www.springframework.org/schema/context&quot; http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd 12345&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; åœ¨ spring é…ç½®æ–‡ä»¶ä½¿ç”¨æ ‡ç­¾å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ 12345678910&lt;!--å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!--é…ç½®è¿æ¥æ± --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;prop.driverClass&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;prop.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;prop.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;prop.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; åäºŒã€IOC æ“ä½œ Bean ç®¡ç†ï¼ˆåŸºäºæ³¨è§£æ–¹å¼ï¼‰ 1ã€æ³¨è§£â€‹ ï¼ˆ1ï¼‰æ³¨è§£æ˜¯ä»£ç çš„ç‰¹æ®Šæ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°(å±æ€§åç§°=å±æ€§å€¼ï¼Œå±æ€§åç§°=å±æ€§å€¼â€¦) â€‹ ï¼ˆ2ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ â€‹ ï¼ˆ3ï¼‰ä½¿ç”¨æ³¨è§£ç›®çš„ï¼šç®€åŒ– xml é…ç½® 2ã€Spring é’ˆå¯¹ Bean ç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£â€‹ ï¼ˆ1ï¼‰@Component â€‹ ï¼ˆ2ï¼‰@Service â€‹ ï¼ˆ3ï¼‰@Controller â€‹ ï¼ˆ4ï¼‰@Repository ä¸Šé¢å››ä¸ªæ³¨è§£åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»º bean å®ä¾‹ 3ã€åŸºäºæ³¨è§£æ–¹å¼å®ç°å¯¹è±¡åˆ›å»ºç¬¬ä¸€æ­¥ å¼•å…¥ä¾èµ– ç¬¬äºŒæ­¥ï¼šå¼€å§‹ç»„ä»¶æ‰«æ 12345&lt;!--å¼€å¯ç»„ä»¶æ‰«æ 1.å¦‚æœæ‰«æå¤šä¸ªåŒ…ï¼Œå¤šä¸ªåŒ…ä½¿ç”¨é€—å·éš”å¼€ 2.æ‰«æåŒ…ä¸Šçš„ç›®å½• --&gt; &lt;context:component-scan base-package=&quot;com.oy.online.Spring&quot;&gt;&lt;/context:component-scan&gt; ç¬¬ä¸‰æ­¥ åˆ›å»ºç±»ï¼Œåœ¨ç±»ä¸Šé¢æ·»åŠ åˆ›å»ºå¯¹è±¡çš„æ³¨è§£ 123456789//åœ¨æ³¨è§£é‡Œé¢ value å±æ€§å€¼å¯ä»¥çœç•¥ä¸å†™ï¼Œ//é»˜è®¤å€¼æ˜¯ç±»åç§°ï¼Œé¦–å­—æ¯å°å†™//UserService -- userService@Component(value = &quot;userService&quot;) //&lt;bean id=&quot;userService&quot; class=&quot;..&quot;/&gt;public class UserService &#123; public void add() &#123; System.out.println(&quot;service add.......&quot;); &#125;&#125; 4ã€å¼€å¯ç»„ä»¶æ‰«æç»†èŠ‚è®¾ç½®1234567&lt;!--ç¤ºä¾‹ 1 use-default-filters=&quot;false&quot; è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤ filterï¼Œè‡ªå·±é…ç½® filter context:include-filter ï¼Œè®¾ç½®æ‰«æå“ªäº›å†…å®¹--&gt;&lt;context:component-scan base-package=&quot;com.oy.online.Spring&quot; use-defaultfilters=&quot;false&quot;&gt; &lt;context:include-filter type=&quot;annotation&quot;expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;&lt;/context:component-scan&gt; 1234567&lt;!--ç¤ºä¾‹ 2 ä¸‹é¢é…ç½®æ‰«æåŒ…æ‰€æœ‰å†…å®¹ context:exclude-filterï¼š è®¾ç½®å“ªäº›å†…å®¹ä¸è¿›è¡Œæ‰«æ--&gt;&lt;context:component-scan base-package=&quot;com.oy.online.Spring&quot;&gt; &lt;context:exclude-filter type=&quot;annotation&quot;expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;&lt;/context:component-scan&gt; 5ã€åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥ï¼ˆ1ï¼‰**@Autowired**: æ ¹æ®å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é… â€‹ ç¬¬ä¸€æ­¥ï¼šæŠŠ service å’Œ dao å¯¹è±¡åˆ›å»ºï¼Œåœ¨ service å’Œ dao ç±»åˆ›å»ºå¯¹è±¡æ³¨è§£ â€‹ ç¬¬äºŒæ­¥ï¼šæŠŠ service æ³¨å…¥ dao å¯¹è±¡ï¼Œ åœ¨ service ç±»æ·»åŠ  dao ç±»å‹å±æ€§ï¼Œåœ¨å±æ€§ä¸Šé¢ä½¿ç”¨æ³¨è§£ 123public interface UserDao &#123; public void add();&#125; 1234567@Repositorypublic class UserDaoImpl implements UserDao&#123; @Override public void add() &#123; System.out.println(&quot;dao add...&quot;); &#125;&#125; 12345678910111213@Servicepublic class UserService &#123; // å®šä¹‰dao ç±»å‹å±æ€§ // ä¸éœ€è¦æ·»åŠ  set æ–¹æ³• // æ·»åŠ æ³¨å…¥å±æ€§æ³¨è§£ @Autowired private UserDao userDao; public void add()&#123; System.out.println(&quot;service add....&quot;); userDao.add(); &#125;&#125; æµ‹è¯•ï¼š 12345678@Test public void test()&#123; ApplicationContext context = new ClassPathXmlApplicationContext(&quot;bean6.xml&quot;); UserService userService = context.getBean(&quot;userService&quot;, UserService.class); System.out.println(userService); userService.add(); &#125; ï¼ˆ2ï¼‰**@Qualifier**ï¼šæ ¹æ®åç§°è¿›è¡Œæ³¨å…¥ è¿™ä¸ª@Qualifier æ³¨è§£çš„ä½¿ç”¨ ï¼Œå’Œä¸Šé¢@Autowired ä¸€èµ·ä½¿ç”¨ 123456//å®šä¹‰ dao ç±»å‹å±æ€§//ä¸éœ€è¦æ·»åŠ  set æ–¹æ³•//æ·»åŠ æ³¨å…¥å±æ€§æ³¨è§£@Autowired //æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥@Qualifier(value = &quot;userDaoImpl1&quot;) //æ ¹æ®åç§°è¿›è¡Œæ³¨å…¥private UserDao userDao; ï¼ˆ3ï¼‰**@Resource**: å¯ä»¥æ ¹æ®ç±»å‹æ³¨å…¥ï¼Œå¯ä»¥æ ¹æ®åç§°æ³¨å…¥ 123//@Resource //æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥@Resource(name = &quot;userDaoImpl1&quot;) //æ ¹æ®åç§°è¿›è¡Œæ³¨å…¥private UserDao userDao; ï¼ˆ4ï¼‰**@Value**ï¼šæ³¨å…¥æ™®é€šç±»å‹çš„å±æ€§ 12@Value(value = &quot;abc&quot;)private String name; 6ã€å®Œå…¨æ³¨è§£å¼€å‘ï¼ˆ1ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œæ›¿ä»£ xml é…ç½®æ–‡ä»¶ 1234@Configuration // ä½œä¸ºé…ç½®ç±»ï¼Œæ›¿ä»£xml é…ç½®æ–‡ä»¶@ComponentScan(basePackages = &#123;&quot;com.oy.online.Spring&quot;&#125;)public class SpringConfig &#123;&#125; ï¼ˆ2ï¼‰æµ‹è¯•ç±» 123456789@Test public void SpringConfigTest()&#123; // åŠ è½½é…ç½®ç±» ApplicationContext context = new AnnotationConfigApplicationContext(SpringConfig.class); UserService userService = context.getBean(&quot;userService&quot;, UserService.class); System.out.println(userService); userService.add(); &#125;","categories":[{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Spring","slug":"Spring","permalink":"http://blog.oy6090.top/tags/Spring/"}]},{"title":"javaé›†åˆä¹‹Listã€Set","slug":"javaé›†åˆä¹‹Listã€Set","date":"2020-07-20T16:00:00.000Z","updated":"2021-01-22T03:51:06.496Z","comments":true,"path":"posts/28765.html","link":"","permalink":"http://blog.oy6090.top/posts/28765.html","excerpt":"","text":"Collection å­æ¥å£ï¼šList æ¥å£ä¸€ã€å­˜å‚¨çš„æ•°æ®ç‰¹ç‚¹â€‹ æœ‰åºçš„ã€å¯é‡å¤çš„æ•°æ® äºŒã€å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³• æè¿° add(Object) å¢åŠ  removeï¼ˆint indexï¼‰/ remove(Object obj) åˆ é™¤ set(int index , object ele) ä¿®æ”¹ get(int index) æŸ¥æ‰¾ add(int indexï¼Œ Object ele) æ’å…¥ size() é•¿åº¦ â‘  Itertor è¿­ä»£å™¨ â‘¡foreach â‘¢ for éå† ä¸‰ã€å¸¸ç”¨çš„å®ç°ç±» Collection æ¥å£ï¼šå•ä¾‹é›†åˆï¼Œç”¨æ¥å­˜å‚¨ä¸€ä¸ªä¸€ä¸ªå¯¹è±¡ List æ¥å£ï¼›å­˜å‚¨æœ‰åºçš„ï¼Œå¯é‡å¤çš„æ•°æ®ã€‚ ArrayList: ä½œä¸º List æ¥å£çš„ä¸»è¦çš„å®ç°ç±»ï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼šåº•å±‚ä½¿ç”¨ Objecet[] elementDate å­˜å‚¨ LinkedList: å¯¹äºé¢‘ç¹çš„æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œä½¿ç”¨æ­¤ç±»æ•ˆç‡æ¯” ArraList é«˜ï¼šåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ã€‚ Vector: ä½œä¸º List æ¥å£çš„å¤è€å®ç°ç±»ï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ï¼šåº•å±‚ä½¿ç”¨ object[] elementDate å­˜å‚¨ å››ã€æºç åˆ†æ ArrayList çš„æºç åˆ†æ JDK 7 æƒ…å†µä¸‹ï¼š ArrayList list = new ArrayList(); åº•å±‚åˆ›å»ºé•¿åº¦æ˜¯ 10 çš„ object[ ]æ•°ç»„ elementDate List.add(123); elementDate[0] = new Integer(123) â€¦. list.add(11); å¦‚æœæ­¤æ¬¡çš„æ·»åŠ å¯¼è‡´åº•å±‚ elementDate æ•°ç»„å®¹é‡ä¸å¤Ÿï¼Œåˆ™æ‰©å®¹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼šæ‰©å®¹ä¸ºåŸæ¥çš„ 1.5 å€ï¼ŒåŒæ—¶éœ€è¦å°†åŸæœ‰çš„æ•°ç»„ä¸­çš„æ•°æ®å¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚ ç»“è®ºï¼šå»ºè®®å¼€å‘ä¸­ä½¿ç”¨å¸¦å‚çš„æ„é€ å™¨ï¼šArrayList list = new ArrayList(int capacity) JDK 8 ä¸­çš„ ArrayList çš„å˜åŒ–ï¼š ArrayList list = new ArrayList(); åº•å±‚ object[ ] elementDate åˆå§‹åŒ–ä¸º{}ï¼Œå¹¶æ²¡æœ‰åˆ›å»ºé•¿åº¦ä¸º 10 çš„æ•°ç»„ list.add(123); ç¬¬ä¸€æ¬¡è°ƒç”¨ add()æ—¶ï¼Œåº•å±‚åˆ›å»ºäº†é•¿åº¦ä¸º 10 çš„æ•°ç»„ï¼Œå¹¶å°†æ•°ç»„ 123 æ·»åŠ  dao elementDate[0] â€¦. åç»­çš„æ·»åŠ å’Œæ‰©å®¹ä¸ jdk 7 æ— å¼‚ã€‚ ç»“è®ºï¼šjdk 7 ä¸­çš„ ArrayList çš„å¯¹è±¡çš„åˆ›å»ºç±»ä¼¼äºå•ä¾‹çš„é¥¿æ±‰å¼ï¼Œè€Œ jdk 8 ä¸­çš„ ArrayList çš„å¯¹è±¡çš„åˆ›å»ºç±»ä¼¼äºå•ä¾‹æ¨¡å¼çš„æ‡’æ±‰å¼å»¶è¿Ÿäº†æ•°ç»„çš„åˆ›å»ºï¼ŒèŠ‚çœäº†ç©ºé—´ã€‚ LinkedList çš„æºç åˆ†æ LinkedList list = new LinkedList(); å†…éƒ¨å£°æ˜çš„ Node ç±»å‹çš„ first å’Œ last å±æ€§ï¼Œé»˜è®¤å€¼ nullã€‚ list.add(123); å°† 123 å°è£…åˆ° Node ä¸­ï¼Œåˆ›å»º Node å…¶ä¸­ Node å®šä¹‰ä¸ºï¼šä½“ç°äº† linkedList çš„åŒå‘é“¾è¡¨çš„è¯´æ³• 1234567891011private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next; Node&lt;E&gt; prev;//å‰ Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; this.item = element; this.next = next; this.prev = prev; &#125;&#125; Vector çš„æºç åˆ†æ jdk 7 å’Œ jdk 8 ä¸­é€šç”¨ Vector() æ„é€ å™¨åˆ›å»ºå¯¹è±¡ï¼Œåº•å±‚éƒ½æ˜¯åˆ›å»º 10 çš„æ•°ç»„ã€‚ åœ¨æ‰©å®¹æ–¹é¢ã€‚é»˜è®¤æ‰©å®¹ä¸ºåŸæ•°ç»„çš„ 2 å€ã€‚ äº”ã€å­˜å‚¨å…ƒç´ çš„è¦æ±‚â€‹ æ·»åŠ å¯¹è±¡ï¼Œæ‰€åœ¨çš„ç±»è¦é‡å†™ equals()æ–¹æ³• Collection å­æ¥å£ï¼šset æ¥å£ä¸€ã€å­˜å‚¨çš„æ•°æ®ç‰¹ç‚¹â€‹ æ— åºçš„ï¼Œä¸å¯é‡å¤çš„å…ƒç´  ä»¥ HashSet ä¸ºä¾‹è¯´æ˜ æ— åºæ€§ï¼šä¸ç­‰äºéšæœºæ€§ã€‚å­˜å‚¨çš„æ•°æ®åœ¨åº•å±‚æ•°ç»„ä¸­å¹¶éæŒ‰ç…§æ•°ç»„ç´¢å¼•çš„é¡ºåºæ·»åŠ ï¼Œè€Œæ˜¯æ ¹æ®æ•°ç»„çš„å“ˆå¸Œå€¼å†³å®šçš„ã€‚ ä¸å¯é‡å¤æ€§ï¼šä¿è¯æ·»åŠ çš„å…ƒç´ æŒ‰ç…§ equals()åˆ¤æ–­æ—¶ï¼Œä¸èƒ½è¿”å› trueï¼Œå³ï¼Œç›¸åŒçš„å…ƒç´ åªèƒ½æ·»åŠ ä¸€ä¸ªã€‚ äºŒã€å…ƒç´ æ·»åŠ çš„è¿‡ç¨‹ï¼šï¼ˆä»¥ HashSet ä¸ºä¾‹ï¼‰ æˆ‘ä»¬å‘ HashSet ä¸­æ·»åŠ å…ƒç´  a,é¦–å…ˆè°ƒç”¨å…ƒç´  a æ‰€åœ¨ç±»çš„ hashcode()æ–¹æ³•ï¼Œè®¡ç®—å…ƒç´  a çš„å“ˆå¸Œå€¼ï¼Œæ­¤å“ˆå¸Œå€¼æ¥ç€æŸç§ç®—æ³•åœ¨ HashSet åº•å±‚æ•°ç»„ä¸­çš„å­˜æ”¾ä½ç½®ï¼ˆå³ä¸ºï¼šç´¢å¼•ä½ç½®ï¼‰ æ¥ç€åˆ¤æ–­æ•°ç»„ä½ç½®ä¸Šæ˜¯å¦å·²ç»æœ‰å…ƒç´ ï¼š å¦‚æœæ­¤ä½ç½®ä¸Šæ²¡æœ‰å…¶ä»–å…ƒç´ ï¼Œåˆ™å…ƒç´  a æ·»åŠ æˆåŠŸã€‚ â€”-ã€‹ æƒ…å†µ 1 å¦‚æœæ­¤ä½ç½®ä¸Šæœ‰å…¶ä»–å…ƒç´  b(è·ä»¥é“¾è¡¨å½¢å¼å­˜åœ¨çš„å¤šä¸ªå…ƒç´ ï¼Œåˆ™æ¯”è¾ƒå…ƒç´  a ä¸å…ƒç´  b çš„ hash å€¼) å¦‚æœ hash å€¼ä¸ç›¸åŒï¼Œåˆ™å…ƒç´  a æ·»åŠ æˆåŠŸã€‚ â€”ã€‹ æƒ…å†µ 2 å¦‚æœ hash å€¼ç›¸åŒï¼Œè¿›è€Œéœ€è¦è°ƒç”¨å…ƒç´ çš„ a æ‰€åœ¨ç±»çš„ equals()æ–¹æ³• equals() è¿”å› true, å…ƒç´  a æ·»åŠ å¤±è´¥ equals() è¿”å› false, å…ƒç´  a æ·»åŠ æˆåŠŸã€‚ â€”ã€‹ æƒ…å†µ 3 å¯¹äºæ·»åŠ æˆåŠŸçš„æƒ…å†µ 2 å’Œæƒ…å†µ 3 è€Œè¨€ï¼šå…ƒç´  a ä¸å·²ç»å­˜åœ¨æŒ‡å®šç´¢å¼•ä¸Šæ•°æ®ä»¥é“¾è¡¨çš„æ–¹å¼å­˜å‚¨ã€‚ JDK 7 ï¼šå…ƒç´  a æ”¾å¤§æ•°ç»„ä¸­ï¼ŒæŒ‡å‘å…ƒç´  aã€‚ JDK 8 : åŸæ¥çš„å…ƒç´ åœ¨æ•°ç»„ä¸­ï¼ŒæŒ‡å‘å…ƒç´  aã€‚ æ€»ç»“ï¼šä¸ƒä¸Šå…«ä¸‹ HashSet åº•å±‚ï¼šæ•°ç»„åŠ é“¾è¡¨çš„ç»“æ„ã€‚(å‰æï¼šjdk7) ä¸‰ã€å¸¸ç”¨çš„æ–¹æ³•â€‹ set æ¥å£æ²¡æœ‰å®šä¹‰æ–°çš„æ–¹æ³•ï¼Œä½¿ç”¨çš„éƒ½æ˜¯ collection å£°æ˜æ–¹æ³•ã€‚ å››ã€å¸¸ç”¨å®ç°ç±» Collection æ¥å£ï¼šå•ä¾‹é›†åˆï¼Œç”¨æ¥å­˜å‚¨ä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡ã€ set æ¥å£ï¼šå­˜å‚¨æ— åºçš„ã€ä¸å¯é‡å¤çš„æ•°æ® HashSet : ä½œä¸º Set æ¥å£ä¸»è¦å®ç°ç±»ï¼›å¯ä»¥å­˜å‚¨ null å€¼ LinkedHashSet: ä½œä¸º HashSet çš„å­ç±»ï¼›éå†å…¶å†…éƒ¨æ•°æ®æ—¶ï¼Œå¯ä»¥æŒ‰ç…§æ·»åŠ çš„é¡ºåºéå†ï¼Œé€ æ·»åŠ æ•°æ®çš„åŒæ—¶ï¼Œæ¯ä¸€ä¸ªæ•°æ®è¿˜åœ¨ç»´æŠ¤ä¸¤ä¸ªå¼•ç”¨ã€‚è®°å½•æ­¤æ•°æ®çš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªæ•°æ®ã€‚å¯¹äºé¢‘ç¹çš„éå†æ“ä½œï¼ŒLinkedHashSetLinkedHashSet æ•ˆç‡é«˜äº HashSet. TreeSet:å¯ä»¥æ·»åŠ å¯¹è±¡çš„æŒ‡å®šå±æ€§ï¼Œè¿›è¡Œæ’åºã€‚ äº”ã€å­˜å‚¨å¯¹è±¡æ‰€åœ¨ç±»çš„è¦æ±‚ HashSet/LinkedHashSetï¼š è¦æ±‚:å‘ Set(ä¸»è¦æŒ‡ï¼šHashSetã€LinkedHashSet)ä¸­æ·»åŠ æ•°æ®ï¼Œå…¶æ‰€åœ¨çš„ç±»ä¸€å®šè¦é‡å†™hashcode()**å’Œequals()**ã€‚ è¦æ±‚:é‡å†™çš„ HashCode() å’Œ equals() å°½å¯èƒ½ä¿æŒä¸€è‡´ï¼šç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·ä½“çš„ç›¸ç­‰çš„æ•£åˆ—ç  â€‹ é‡å†™çš„ä¸¤ä¸ªæ–¹æ³•çš„å°æŠ€å·§ï¼šå¯¹è±¡ä¸­ç”¨ä½œ equals()æ–¹æ³•æ¯”è¾ƒçš„ Fieldï¼Œéƒ½åº”è¯¥ç”¨æ¥è®¡ç®— hashcode å€¼ã€‚ TreeSet: è‡ªç„¶æ’åºä¸­ï¼Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ ‡å‡†ä¸ºï¼šcompareTo() è¿”å› 0ï¼Œä¸å†æ˜¯ equals() å®šåˆ¶æ’åºä¸­ï¼Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒçš„æ ‡å‡†ä¸ºï¼šcompare()è¿”å› 0.ä¸å†æ˜¯ equals(). å…­ã€TreeSet çš„ä½¿ç”¨ å‘ TreeSet ä¸­æ·»åŠ çš„æ•°æ®ï¼Œè¦æ±‚æ˜¯ç›¸åŒç±»çš„å¯¹è±¡ã€‚ ä¸¤ç§æ’åºæ–¹å¼ï¼šè‡ªç„¶æ’åºï¼ˆå®ç° Comparable æ¥å£ å’Œ å®šåˆ¶æ’åºï¼ˆComparatorï¼‰ è‡ªç„¶æ’åºï¼š åˆ›å»º User ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162public class User implements Comparable&#123; private String name; private int age; public User() &#123; &#125; public User(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; User user = (User) o; return age == user.age &amp;&amp; name.equals(user.name); &#125; @Override public int hashCode() &#123; return Objects.hash(name, age); &#125; @Override public String toString() &#123; return &quot;User&#123;&quot; + &quot;name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, age=&quot; + age + &#x27;&#125;&#x27;; &#125; @Override public int compareTo(Object o) &#123; if(o instanceof User)&#123; User user = (User) o; if(this.name.equals(user.name))&#123; return this.age - user.age; &#125; return this.name.compareTo(user.name); &#125; throw new RuntimeException(&quot;è¾“å…¥çš„å€¼æ— æ³•åˆ¤æ–­&quot;); &#125;&#125; 1234567891011121314@Testpublic void test1() &#123; TreeSet set = new TreeSet(); set.add(new User(&quot;hunan&quot;, 12)); set.add(new User(&quot;beijing&quot;, 12)); set.add(new User(&quot;hunan&quot;, 9)); set.add(new User(&quot;fujian&quot;, 15)); set.add(new User(&quot;lingxia&quot;, 18)); Iterator iterator = set.iterator(); while(iterator.hasNext())&#123; System.out.println(iterator.next()); &#125;&#125; å®šåˆ¶æ’åº 1234567891011121314151617181920212223242526272829@Testpublic void test2()&#123; Comparator com = new Comparator() &#123; @Override public int compare(Object o1, Object o2) &#123; if(o1 instanceof User &amp;&amp; o2 instanceof User)&#123; User user1 = (User) o1; User user2 = (User) o2; return Integer.compare(user1.getAge(), user2.getAge()); &#125;else&#123; throw new RuntimeException(&quot;è¾“å…¥çš„æ•°æ®ç±»å‹ä¸åŒ¹é…&quot;); &#125; &#125; &#125;; TreeSet set = new TreeSet(com); set.add(new User(&quot;Tom&quot;,12)); set.add(new User(&quot;Jerry&quot;,32)); set.add(new User(&quot;Jim&quot;,2)); set.add(new User(&quot;Mike&quot;,65)); set.add(new User(&quot;Mary&quot;,33)); set.add(new User(&quot;Jack&quot;,33)); set.add(new User(&quot;Jack&quot;,56)); Iterator iterator = set.iterator(); while(iterator.hasNext())&#123; System.out.println(iterator.next()); &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"}],"tags":[{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"}]},{"title":"javaé›†åˆä¹‹Collection","slug":"javaé›†åˆä¹‹Collection","date":"2020-07-19T16:00:00.000Z","updated":"2021-01-22T03:50:45.267Z","comments":true,"path":"posts/30673.html","link":"","permalink":"http://blog.oy6090.top/posts/30673.html","excerpt":"","text":"æ•°ç»„ä¸é›†åˆä¸€ã€é›†åˆä¸æ•°ç»„å­˜å‚¨æ•°æ®çš„æ¦‚è¿°é›†åˆï¼šæ•°ç»„éƒ½æ˜¯å¯¹æ•°æ®è¿›è¡Œå­˜å‚¨æ“ä½œçš„ç»“æ„ï¼Œç®€ç§° Java å®¹å™¨ è¯´æ˜ï¼šæ­¤æ—¶çš„å­˜å‚¨ï¼Œä¸»è¦æŒ‡çš„æ˜¯å†…å­˜å±‚é¢çš„å­˜å‚¨ï¼Œä¸æ¶‰åŠåˆ°æŒä¹…åŒ–çš„å‚¨å­˜ï¼ˆ.text,.jpg,avi,æ•°æ®åº“ä¸­ï¼‰ äºŒã€æ•°ç»„å­˜å‚¨çš„ç‰¹ç‚¹ä¸€æ—¦åˆå§‹åŒ–ä»¥åï¼Œå…¶é•¿åº¦å°±ç¡®å®šäº†ã€‚ æ•°ç»„ä¸€æ—¦å®šä¹‰å¥½ï¼Œå…¶å…ƒç´ çš„ç±»å‹ä¹Ÿå°±æå®šäº†ã€‚æˆ‘ä»¬ä¹Ÿå°±åªèƒ½æ“ä½œæŒ‡å®šç±»å‹çš„æ•°æ®äº†ã€‚ æ¯”å¦‚ï¼šString[] arr; int[] arr1; Object[] arr2; ä¸‰ã€æ•°ç»„å­˜å‚¨çš„å¼Šç«¯ ä¸€æ—¦åˆå§‹åŒ–ä»¥åï¼Œå…¶é•¿åº¦å°±ä¸å¯ä¿®æ”¹ã€‚ æ•°ç»„ä¸­æä¾›çš„æ–¹æ³•éå¸¸æœ‰é™ï¼Œå¯¹äºæ·»åŠ ã€æ’å…¥æ•°æ®ç­‰æ“ä½œï¼Œéå¸¸ä¸ä¾¿ï¼ŒåŒæ—¶æ•ˆç‡ä¸é«˜ã€‚ è·å–æ•°ç»„ä¸­å®é™…å…ƒç´ çš„ä¸ªæ•°çš„éœ€æ±‚ï¼Œæ•°ç»„æ²¡æœ‰è§„å®šçš„å±æ€§æ–¹æ³•å¯ç”¨ æ•°ç»„å­˜å‚¨çš„ç‰¹ç‚¹ï¼šæœ‰åºã€å¯é‡å¤æ€§ã€å¯¹äºæ— åºã€ä¸å¯é‡å¤çš„éœ€æ±‚ï¼Œä¸èƒ½æ»¡è¶³ã€‚ å››ã€é›†åˆå­˜å‚¨çš„ä¼˜ç‚¹â€‹ è§£å†³æ•°ç»„å­˜å‚¨æ•°æ®æ–¹é¢çš„å¼Šç«¯ã€‚ Collection æ¥å£ä¸€ã€å•åˆ—é›†åˆæ¡†æ¶ç»“æ„ Collectionæ¥å£ï¼šå•åˆ—é›†åˆï¼Œç”¨æ¥å­˜å‚¨ä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡ listæ¥å£ï¼šå­˜å‚¨æœ‰åºçš„ã€å¯é‡å¤çš„æ•°æ®ã€‚(åŠ¨æ€æ•°ç»„) ArrayListã€LinkedListã€Vector setæ¥å£ï¼šå­˜å‚¨æ— åºçš„ã€ä¸å¯é‡å¤çš„æ•°æ® ï¼ˆé›†åˆï¼‰ HashSetã€LinkedHashSetã€TreeSet å¯¹åº”å›¾ç¤º äºŒã€Collection æ¥å£å¸¸ç”¨æ–¹æ³• æ–¹æ³• æè¿° add(Object obj) å°†å…ƒç´  obj æ·»åŠ åˆ°é›†åˆ coll ä¸­ addAll(Collection coll) å°† coll1 é›†åˆä¸­çš„å…ƒç´ æ·»åŠ åˆ°å½“å‰çš„é›†åˆä¸­ isEmpty() åˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦ä¸ºç©º clear() æ¸…ç©ºé›†åˆå…ƒç´  contains(Object obj) åˆ¤æ–­å½“å‰é›†åˆä¸­æ˜¯å¦åŒ…å« obj containsAll(Collection coll) åˆ¤æ–­å½¢å‚ coll1 ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨äºå½“å‰é›†åˆä¸­ã€‚ remove(Object obj) å½“å‰é›†åˆä¸­ç§»é™¤ obj å…ƒç´  removeAll(Collection coll) ä»å½“å‰é›†åˆä¸­ç§»é™¤ coll1 ä¸­æ‰€æœ‰çš„å…ƒç´  retainsAll(Collection coll) è·å–å½“å‰é›†åˆå’Œ coll1 é›†åˆçš„äº¤é›†ï¼Œå¹¶è¿”å›ç»™å½“å‰é›†åˆ equals(Object obj) ç›¸åŒè¿”å› trueï¼Œéœ€è¦å½“å‰é›†åˆå’Œå½¢å‚é›†åˆçš„å…ƒç´ éƒ½ç›¸åŒã€‚ hasCode() è¿”å›å½“å‰å¯¹è±¡çš„å“ˆå¸Œå€¼ toArray() è¿”å›ä¸€ä¸ªåŒ…å«æ­¤é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚ iterator() è¿­ä»£å™¨éå† size() è·å–æ·»åŠ çš„å…ƒç´ çš„ä¸ªæ•° ä¸‰ã€Collection é›†åˆä¸æ•°ç»„çš„è½¬æ¢12345//é›†åˆ ---&gt; æ•°ç»„ï¼štoArray()Object[] arr =coll.toArray();for(int i =0; i &lt; arr.length; i++)&#123; System.out.println(arr[i]);&#125; 123456789//æ‹“å±•ï¼šæ•°ç»„ --&gt; é›†åˆï¼šè°ƒç”¨Arraysç±»çš„é™æ€æ–¹æ³•asList(T ... t)List&lt;String&gt; list = Arrays.asList(new String[] &#123;&quot;AA&quot;,&quot;BB&quot;,&quot;CC&quot;&#125;);System.out.println(lis.size()); // 3List arr1 = Arrays.asList(new int[]&#123;123,456&#125;);System.oout.println(arr1.size());//1List arr2 = Arrays.asList(new Integer[]&#123;123,456&#125;);System.out.println(arr2.size());//2 å›› ã€ä½¿ç”¨ Collection é›†åˆå­˜å‚¨å¯¹è±¡ï¼Œè¦æ±‚æ‰€å±å¯¹è±¡çš„ç±»å—ï¼Œæ»¡è¶³â€‹ å‘ collection æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡ä¸­æ·»åŠ æ•°æ® obj,è¦æ±‚ obj æ‰€åœ¨ç±»è¦é‡å†™ equals(); Iteratorj æ¥å£ä¸ foreach å¾ªç¯ä¸€ã€éå† Collection çš„ä¸¤ç§æ–¹å¼ ä½¿ç”¨è¿­ä»£å™¨ iterator foreach å¾ªç¯ï¼ˆæˆ–å¢å¼º for å¾ªç¯ï¼‰ äºŒã€è¯´æ˜Iterator å¯¹è±¡æˆä¸ºè¿­ä»£å™¨ï¼ˆè®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼‰ï¼Œä¸»è¦ç”¨äºéå† collection é›†åˆä¸­çš„å…ƒç´ ã€‚ GOF ç»™è¿­ä»£å™¨æ¨¡å¼å®šä¹‰ä¸ºï¼šæä¾›ä¸€ä¸ªæ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨ï¼ˆcontainerï¼‰å¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚è¿­ä»£å™¨æ¨¡å¼ï¼Œå°±æ˜¯ä¸ºå®¹å™¨è€Œç”Ÿã€‚ ä½œç”¨ï¼šéå†é›†åˆ Collection å…ƒç´  è·å–ç¤ºä¾‹ï¼š coll.iterator()è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å®ä¾‹ éå†çš„ä»£ç å®ç°ï¼š 123456Iterator iterator = coll.iterator();// hasNext():åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ while(iterator.hasNext())&#123; // next();â‘ æŒ‡é’ˆä¸‹ç§» â‘¡å°†ä¸‹ç§»çš„ä»¥åçš„é›†åˆä½ç½®ä¸Šçš„å…ƒç´ è¿”å› System.out.prinln(iterator.next());&#125; å›¾ç¤ºï¼š remove()ä½¿ç”¨è¯´æ˜ æµ‹è¯• Iterator ä¸­çš„ removeï¼ˆï¼‰ å¦‚æœè¿˜æœªè°ƒç”¨ nextï¼ˆï¼‰æˆ–åœ¨ä¸Šä¸€æ¬¡è°ƒç”¨ next()æ–¹æ³•ä¹‹åå·²ç»è°ƒç”¨ remove æ–¹æ³•ï¼Œåœ¨è°ƒç”¨ remove æŠ¥ IllegalStateExceptionã€‚ å†…éƒ¨å®šä¹‰äº† removeï¼ˆï¼‰,å¯ä»¥åœ¨éå†çš„æ—¶å€™ï¼Œåˆ é™¤é›†åˆä¸­çš„å…ƒç´ ã€‚æ­¤æ–¹æ³•ä¸åŒäºé›†åˆè°ƒç”¨ remove() ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526@Test public void test3()&#123; Collection coll = new ArrayList(); coll.add(123); coll.add(456); coll.add(new Person(&quot;Jerry&quot;,20)); coll.add(new String(&quot;Tom&quot;)); coll.add(false); //åˆ é™¤é›†åˆä¸­&quot;Tom&quot; Iterator iterator = coll.iterator(); while (iterator.hasNext())&#123;// iterator.remove(); Object obj = iterator.next(); if(&quot;Tom&quot;.equals(obj))&#123; iterator.remove();// iterator.remove(); &#125; &#125; //éå†é›†åˆ iterator = coll.iterator(); while (iterator.hasNext())&#123; System.out.println(iterator.next()); &#125; &#125; ä¸‰ã€JDK5.0 æ–°ç‰¹æ€§ â€“ å¢å¼º for å¾ªç¯ï¼šï¼ˆforech å¾ªç¯ï¼‰ éå†é›†åˆä¸¾ä¾‹ 123456789101112131415@Testpublic void test1()&#123; Collection coll = new ArrayList(); coll.add(123); coll.add(456); coll.add(new Person(&quot;Jerry&quot;,20)); coll.add(new String(&quot;Tom&quot;)); coll.add(false); //for(é›†åˆå…ƒç´ çš„ç±»å‹ å±€éƒ¨å˜é‡ : é›†åˆå¯¹è±¡) for(Object obj : coll)&#123; System.out.println(obj); &#125;&#125; è¯´æ˜ï¼š â€‹ å†…éƒ¨ä»è°ƒç”¨äº†è¿­ä»£å™¨ã€‚ éå†æ•°ç»„ä¸¾ä¾‹ï¼š 12345678@Testpublic void test2()&#123; int[] arr = new int[]&#123;1,2,3,4,5,6&#125;; //for(æ•°ç»„å…ƒç´ çš„ç±»å‹ å±€éƒ¨å˜é‡ : æ•°ç»„å¯¹è±¡) for(int i : arr)&#123; System.out.println(i); &#125;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"http://blog.oy6090.top/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.oy6090.top/tags/Java/"}]},{"title":"Linuxä¹‹Shellç¼–ç¨‹","slug":"Linuxä¹‹Shellç¼–ç¨‹","date":"2020-07-17T16:00:00.000Z","updated":"2020-10-25T02:20:18.787Z","comments":true,"path":"posts/427140827.html","link":"","permalink":"http://blog.oy6090.top/posts/427140827.html","excerpt":"","text":"Shell ç¼–ç¨‹1.1 shellç¤ºä¾‹å›¾ï¼š â€‹ â€‹ Shell æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œ å®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå‘ Linux å†…æ ¸å‘é€è¯·æ±‚ä»¥ä¾¿è¿è¡Œç¨‹åºçš„ç•Œé¢ç³»ç»Ÿçº§ç¨‹åºï¼Œ ç”¨æˆ·å¯ä»¥ç”¨ Shell æ¥å¯åŠ¨ã€ æŒ‚èµ·ã€ åœæ­¢ç”šè‡³æ˜¯ç¼–å†™ä¸€äº›ç¨‹åº. 1.2 shell ç¼–ç¨‹å¿«é€Ÿå…¥é—¨-shell è„šæœ¬çš„æ‰§è¡Œæ–¹å¼1.2.1 è„šæœ¬æ ¼å¼è¦æ±‚ è„šæœ¬ä»¥#!/bin/bash å¼€å¤´ æ‰§è¡Œè„šæœ¬éœ€è¦æœ‰æ‰§è¡Œçš„æƒé™ 1.2.2 ç¼–å†™ç¬¬ä¸€ä¸ª shell è„šæœ¬ éœ€æ±‚è¯´æ˜ åˆ›å»ºä¸€ä¸ª shell è„šæœ¬ï¼Œ è¾“å‡º hello world! æ¡ˆä¾‹ 12#!/bin/bashecho &quot;hello world&quot; 1.2.3 è„šæœ¬çš„å¸¸ç”¨æ‰§è¡Œæ–¹å¼ æ–¹å¼ 1(è¾“å…¥è„šæœ¬çš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„) é¦–å…ˆè¦èµ‹äºˆ helloworld.sh è„šæœ¬çš„+x æƒé™ æ‰§è¡Œè„šæœ¬ æ–¹å¼ 2(sh+è„šæœ¬)ï¼Œ ä¸æ¨è è¯´æ˜ï¼š ä¸ç”¨èµ‹äºˆè„šæœ¬+x æƒé™ï¼Œ ç›´æ¥æ‰§è¡Œå³å¯ 1.3 shell çš„å˜é‡1.3.1 shell çš„å˜é‡çš„ä»‹ç» linux shell å˜é‡åˆ†ä¸ºï¼Œç³»ç»Ÿå˜é‡å’Œç”¨æˆ·è‡ªå®šä¹‰å˜é‡ ç³»ç»Ÿå˜é‡ ï¼š $HOMEã€$PWDã€ $SHELLã€ $USER ç­‰ç­‰ æ¯”å¦‚ï¼š echo $HOME ç­‰ç­‰ æ˜¾ç¤ºå½“å‰ shell ä¸­æ‰€æœ‰å˜é‡ï¼š set 1.3.2 shell å˜é‡çš„å®šä¹‰ å®šä¹‰å˜é‡ï¼š å˜é‡=å€¼ æ’¤é”€å˜é‡ï¼š unset å˜é‡ å£°æ˜é™æ€å˜é‡ï¼š readonly å˜é‡ï¼Œ æ³¨æ„ï¼š ä¸èƒ½ unset å¿«é€Ÿå…¥é—¨ æ¡ˆä¾‹ 1ï¼š å®šä¹‰å˜é‡ A æ¡ˆä¾‹ 2ï¼š æ’¤é”€å˜é‡ A æ¡ˆä¾‹ 3ï¼š å£°æ˜é™æ€çš„å˜é‡ B=2ï¼Œ ä¸èƒ½ unset 1.3.3 å®šä¹‰å˜é‡çš„è§„åˆ™ å˜é‡åç§°å¯ä»¥ç”±å­—æ¯ã€ æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œ ä½†æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚ ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼ å˜é‡åç§°ä¸€èˆ¬ä¹ æƒ¯ä¸ºå¤§å†™ 1.3.4 å°†å‘½ä»¤çš„è¿”å›å€¼èµ‹ç»™å˜é‡ï¼ˆé‡ç‚¹ï¼‰ A=`ls -la` åå¼•å·ï¼Œ è¿è¡Œé‡Œé¢çš„å‘½ä»¤ï¼Œ å¹¶æŠŠç»“æœè¿”å›ç»™å˜é‡ A A=$(ls -la) ç­‰ä»·äºåå¼•å· 1.4 è®¾ç½®ç¯å¢ƒå˜é‡1.4.1 åŸºæœ¬è¯­æ³• export å˜é‡å=å˜é‡å€¼ ï¼ˆåŠŸèƒ½æè¿°ï¼š å°† shell å˜é‡è¾“å‡ºä¸ºç¯å¢ƒå˜é‡ï¼‰ source é…ç½®æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼š è®©ä¿®æ”¹åçš„é…ç½®ä¿¡æ¯ç«‹å³ç”Ÿæ•ˆï¼‰ echo $å˜é‡å ï¼ˆåŠŸèƒ½æè¿°ï¼š æŸ¥è¯¢ç¯å¢ƒå˜é‡çš„å€¼ï¼‰ å¿«é€Ÿå…¥é—¨ åœ¨/etc/profile æ–‡ä»¶ä¸­å®šä¹‰ TOMCAT_HOME ç¯å¢ƒå˜é‡ æŸ¥çœ‹ç¯å¢ƒå˜é‡ TOMCAT_HOME çš„å€¼ 1echo $TOMCAT_HOME åœ¨å¦å¤–ä¸€ä¸ª shell ç¨‹åºä¸­ä½¿ç”¨ TOMCAT_HOME æ³¨æ„ï¼šåœ¨è¾“å‡º TOMCAT_HOME ç¯å¢ƒå˜é‡å‰ï¼Œéœ€è¦è®©å…¶ç”Ÿæ•ˆ 1source /etc/profile 1.5 ä½ç½®å‚æ•°å˜é‡1.5.1 ä»‹ç»â€‹ å½“æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª shell è„šæœ¬æ—¶ï¼Œ å¦‚æœå¸Œæœ›è·å–åˆ°å‘½ä»¤è¡Œçš„å‚æ•°ä¿¡æ¯ï¼Œ å°±å¯ä»¥ä½¿ç”¨åˆ°ä½ç½®å‚æ•°å˜é‡ï¼Œ æ¯”å¦‚ ï¼š ./myshell.sh 100 200 , è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ‰§è¡Œ shell çš„å‘½ä»¤è¡Œï¼Œ å¯ä»¥åœ¨ myshell è„šæœ¬ä¸­è·å–åˆ°å‚æ•°ä¿¡æ¯ 1.5.2 åŸºæœ¬è¯­æ³• æŒ‡ä»¤ æè¿° $n åŠŸèƒ½æè¿°ï¼š n ä¸ºæ•°å­—ï¼Œ $0 ä»£è¡¨å‘½ä»¤æœ¬èº«ï¼Œ $1-$9 ä»£è¡¨ç¬¬ä¸€åˆ°ç¬¬ä¹ä¸ªå‚æ•°ï¼Œ åä»¥ä¸Šçš„å‚æ•°ï¼Œ åä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å·åŒ…å«ï¼Œ å¦‚${10}ï¼‰ $* ï¼ˆåŠŸèƒ½æè¿°ï¼š è¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ $*æŠŠæ‰€æœ‰çš„å‚æ•°çœ‹æˆä¸€ä¸ªæ•´ä½“ï¼‰ $@ ï¼ˆåŠŸèƒ½æè¿°ï¼š è¿™ä¸ªå˜é‡ä¹Ÿä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ ä¸è¿‡$@æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…ï¼‰ $# ï¼ˆåŠŸèƒ½æè¿°ï¼š è¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰å‚æ•°çš„ä¸ªæ•°ï¼‰ 1.5.3 ä½ç½®å‚æ•°å˜é‡åº”ç”¨å®ä¾‹â€‹ æ¡ˆä¾‹ï¼š ç¼–å†™ä¸€ä¸ª shell è„šæœ¬ positionPara.sh ï¼Œ åœ¨è„šæœ¬ä¸­è·å–åˆ°å‘½ä»¤è¡Œçš„å„ä¸ªå‚æ•°ä¿¡æ¯ â€‹ 1.6 é¢„å®šä¹‰å˜é‡1.6.1 åŸºæœ¬è¯­æ³• æŒ‡ä»¤ æè¿° $$ ï¼ˆåŠŸèƒ½æè¿°ï¼š å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ ï¼‰ $! ï¼ˆåŠŸèƒ½æè¿°ï¼š åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ ï¼‰ $ï¼Ÿ ï¼ˆåŠŸèƒ½æè¿°ï¼š æœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„è¿”å›çŠ¶æ€ã€‚ å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸º 0ï¼Œ è¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ­£ç¡®æ‰§è¡Œï¼› å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸ºé 0ï¼ˆå…·ä½“æ˜¯å“ªä¸ªæ•°ï¼Œ ç”±å‘½ä»¤è‡ªå·±æ¥å†³å®šï¼‰ ï¼Œ åˆ™è¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä¸æ­£ç¡®äº†ã€‚ ï¼‰ 1.6.2 åº”ç”¨å®ä¾‹åœ¨ä¸€ä¸ª shell è„šæœ¬ä¸­ç®€å•ä½¿ç”¨ä¸€ä¸‹é¢„å®šä¹‰å˜é‡ 1.7 è¿ç®—ç¬¦1.7.1 åŸºæœ¬è¯­æ³• â€œ$((è¿ç®—å¼))â€ æˆ–â€œ$[è¿ç®—å¼]â€ expr m + n æ³¨æ„ expr è¿ç®—ç¬¦é—´è¦æœ‰ç©ºæ ¼ expr m - n expr *, /, % ä¹˜ï¼Œ é™¤ï¼Œ å–ä½™ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1ï¼š è®¡ç®—ï¼ˆ2+3ï¼‰ X4 çš„å€¼ $((è¿ç®—å¼)) $[è¿ç®—å¼] expr æ¡ˆä¾‹ 2ï¼š è¯·æ±‚å‡ºå‘½ä»¤è¡Œçš„ä¸¤ä¸ªå‚æ•°[æ•´æ•°]çš„å’Œ 1.8 æ¡ä»¶åˆ¤æ–­1.8.1 åŸºæœ¬è¯­æ³•â€‹ **[ condition ]**ï¼ˆæ³¨æ„ condition å‰åè¦æœ‰ç©ºæ ¼ï¼‰ â€‹ #éç©ºè¿”å› trueï¼Œ å¯ä½¿ç”¨$?éªŒè¯ï¼ˆ0 ä¸º trueï¼Œ &gt;1 ä¸º falseï¼‰ 1.8.2 åº”ç”¨å®ä¾‹â€‹ [ atguigu ] è¿”å› true â€‹ [] è¿”å› false â€‹ [condition] &amp;&amp; echo OK || echo notok æ¡ä»¶æ»¡è¶³ï¼Œ æ‰§è¡Œåé¢çš„è¯­å¥ â€‹ 1.8.3 å¸¸ç”¨åˆ¤æ–­æ¡ä»¶ ä¸¤ä¸ªæ•´æ•°çš„æ¯”è¾ƒ æ–¹æ³• æè¿° = å­—ç¬¦ä¸²æ¯”è¾ƒ -lt å°äº -le å°äºç­‰äº -eq ç­‰äº -gt å¤§äº -ge å¤§äºç­‰äº -ne ä¸ç­‰äº æŒ‰ç…§æ–‡ä»¶çš„æƒé™è¿›è¡Œåˆ¤æ–­ æ–¹æ³• æè¿° -r æœ‰è¯»çš„æƒé™[-r æ–‡ä»¶] -w æœ‰å†™çš„æƒé™ -x æœ‰æ‰§è¡Œçš„æƒé™ æŒ‰ç…§æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­ æ–¹æ³• æè¿° -f æ–‡ä»¶å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ–‡ä»¶ -e æ–‡ä»¶å­˜åœ¨ -d æ–‡ä»¶å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½• 1.8.4 åº”ç”¨å®ä¾‹â€‹ æ¡ˆä¾‹ 1ï¼š â€œokâ€æ˜¯å¦ç­‰äºâ€okâ€ â€‹ åˆ¤æ–­è¯­å¥ï¼š æ¡ˆä¾‹ 2ï¼š 23 æ˜¯å¦å¤§äºç­‰äº 22 åˆ¤æ–­è¯­å¥ï¼š æ¡ˆä¾‹ 3ï¼š /root/install.log ç›®å½•ä¸­çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ åˆ¤æ–­è¯­å¥ï¼š 1.9 æµç¨‹æ§åˆ¶1.9.1 if åˆ¤æ–­ åŸºæœ¬è¯­æ³• 123if[ æ¡ä»¶æµ‹è¯• ];then ç¨‹åºfi æˆ–è€… 1234567if[ æ¡ä»¶åˆ¤æ–­å¼ ]then ç¨‹åºelif[ æ¡ä»¶åˆ¤æ–­å¼ ]then ç¨‹åºfi æ³¨æ„äº‹é¡¹ï¼š ï¼ˆ1ï¼‰ [ æ¡ä»¶åˆ¤æ–­å¼ ]ï¼Œ ä¸­æ‹¬å·å’Œæ¡ä»¶åˆ¤æ–­å¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼ â€‹ (2) æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ï¼š è¯·ç¼–å†™ä¸€ä¸ª shell ç¨‹åºï¼Œ å¦‚æœè¾“å…¥çš„å‚æ•°ï¼Œ å¤§äºç­‰äº 60ï¼Œ åˆ™è¾“å‡º â€œåŠæ ¼äº†â€ï¼Œ å¦‚æœå°äº 60,åˆ™è¾“å‡º â€œä¸åŠæ ¼â€ 1.9.2 case è¯­å¥ åŸºæœ¬è¯­æ³• 123456789101112case $å˜é‡å in&quot;å€¼ 1&quot;ï¼‰å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼ 1ï¼Œ åˆ™æ‰§è¡Œç¨‹åº 1;;&quot;å€¼ 2&quot;ï¼‰å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼ 2ï¼Œ åˆ™æ‰§è¡Œç¨‹åº 2;;â€¦çœç•¥å…¶ä»–åˆ†æ”¯â€¦*ï¼‰å¦‚æœå˜é‡çš„å€¼éƒ½ä¸æ˜¯ä»¥ä¸Šçš„å€¼ï¼Œ åˆ™æ‰§è¡Œæ­¤ç¨‹åº Linux è¯¾ç¨‹;;esac åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1 ï¼š å½“å‘½ä»¤è¡Œå‚æ•°æ˜¯ 1 æ—¶ï¼Œ è¾“å‡º â€œå‘¨ä¸€â€, æ˜¯ 2 æ—¶ï¼Œ å°±è¾“å‡ºâ€å‘¨äºŒâ€ï¼Œ å…¶å®ƒæƒ…å†µè¾“å‡º â€œotherâ€ 1.9.3 for å¾ªç¯ åŸºæœ¬è¯­æ³• 1 1234for å˜é‡å€¼ in å€¼1 å€¼2 å€¼3...do ç¨‹åºdone åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1 ï¼š æ‰“å°å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•° ã€ä¼šä½¿ç”¨åˆ°$* $@ã€‘ åŸºæœ¬è¯­æ³• 2 1234567for(( åˆå§‹å€¼:å¾ªç¯æ§åˆ¶æ¡ä»¶;å˜é‡å˜åŒ–))do ç¨‹åºdone åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1 ï¼š ä» 1 åŠ åˆ° 100 çš„å€¼è¾“å‡ºæ˜¾ç¤º 1.10 while å¾ªç¯ åŸºæœ¬è¯­æ³• 1234while [ æ¡ä»¶åˆ¤æ–­å¼ ]do ç¨‹åºdone åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1 ï¼š ä»å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸ªæ•° nï¼Œ ç»Ÿè®¡ä» 1+..+ n çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ 1.11 read è¯»å–æ§åˆ¶å°è¾“å…¥1.11.1 åŸºæœ¬è¯­æ³•1read(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ï¼š æŒ‡ä»¤ æè¿° -p æŒ‡å®šè¯»å–å€¼æ—¶çš„æç¤ºç¬¦ï¼› -t æŒ‡å®šè¯»å–å€¼æ—¶ç­‰å¾…çš„æ—¶é—´ï¼ˆç§’ï¼‰ ï¼Œ å¦‚æœæ²¡æœ‰åœ¨æŒ‡å®šçš„æ—¶é—´å†…è¾“å…¥ï¼Œ å°±ä¸å†ç­‰å¾…äº† å‚æ•°ï¼š å˜é‡ï¼šæŒ‡å®šè¯»å–å€¼çš„å˜é‡å 1.11.2 åº”ç”¨å®ä¾‹æ¡ˆä¾‹ 1ï¼š è¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ª num å€¼æ¡ˆä¾‹ 2ï¼š è¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ª num å€¼ï¼Œ åœ¨ 10 ç§’å†…è¾“å…¥ 1.12 å‡½æ•°1.12.1 å‡½æ•°ä»‹ç»â€‹ shell ç¼–ç¨‹å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œ æœ‰ç³»ç»Ÿå‡½æ•°ï¼Œ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‡½æ•°ã€‚ ç³»ç»Ÿå‡½æ•°ä¸­ï¼Œ æˆ‘ä»¬è¿™é‡Œå°±ä»‹ç»ä¸¤ä¸ªã€‚ 1.12.2 ç³»ç»Ÿå‡½æ•° basename åŸºæœ¬è¯­æ³• åŠŸèƒ½ï¼š è¿”å›å®Œæ•´è·¯å¾„æœ€å / çš„éƒ¨åˆ†ï¼Œ å¸¸ç”¨äºè·å–æ–‡ä»¶å basename [pathname] [suffix] basename [string] [suffix] ï¼ˆåŠŸèƒ½æè¿°ï¼š basename å‘½ä»¤ä¼šåˆ æ‰æ‰€æœ‰çš„å‰ç¼€åŒ…æ‹¬æœ€åä¸€ä¸ªï¼ˆâ€˜/â€™ ï¼‰å­—ç¬¦ï¼Œ ç„¶åå°†å­—ç¬¦ä¸²æ˜¾ç¤ºå‡ºæ¥ã€‚ é€‰é¡¹ï¼šsuffix ä¸ºåç¼€ï¼Œ å¦‚æœ suffix è¢«æŒ‡å®šäº†ï¼Œ basename ä¼šå°† pathname æˆ– string ä¸­çš„ suffix å»æ‰ã€‚ dirname åŸºæœ¬è¯­æ³• åŠŸèƒ½ï¼š è¿”å›å®Œæ•´è·¯å¾„æœ€å / çš„å‰é¢çš„éƒ¨åˆ†ï¼Œ å¸¸ç”¨äºè¿”å›è·¯å¾„éƒ¨åˆ† dirname æ–‡ä»¶ç»å¯¹è·¯å¾„ ï¼ˆåŠŸèƒ½æè¿°ï¼š ä»ç»™å®šçš„åŒ…å«ç»å¯¹è·¯å¾„çš„æ–‡ä»¶åä¸­å»é™¤æ–‡ä»¶åï¼ˆéç›®å½•çš„éƒ¨åˆ†ï¼‰ ï¼Œ ç„¶åè¿”å›å‰©ä¸‹çš„è·¯å¾„ï¼ˆç›®å½•çš„éƒ¨åˆ†ï¼‰ ï¼‰ 1.12.3 åº”ç”¨å®ä¾‹æ¡ˆä¾‹ 1ï¼š è¯·è¿”å› /home/aaa/test.txt çš„ â€œtest.txtâ€ éƒ¨åˆ† æ¡ˆä¾‹ 2ï¼š è¯·è¿”å› /home/aaa/test.txt çš„ /home/aaa 1.12.4 è‡ªå®šä¹‰å‡½æ•° åŸºæœ¬è¯­æ³• 123456[ function ] funname[()]&#123; Action; [return int;]&#125;è°ƒç”¨ç›´æ¥å†™å‡½æ•°åï¼š funname [å€¼] åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1ï¼š è®¡ç®—è¾“å…¥ä¸¤ä¸ªå‚æ•°çš„å’Œï¼ˆreadï¼‰ ï¼Œ getSum 1.13 shell ç¼–ç¨‹ç»¼åˆæ¡ˆä¾‹éœ€æ±‚åˆ†æ æ¯å¤©å‡Œæ™¨ 2:10 å¤‡ä»½ æ•°æ®åº“ atguiguDB åˆ° /data/backup/db å¤‡ä»½å¼€å§‹å’Œå¤‡ä»½ç»“æŸèƒ½å¤Ÿç»™å‡ºç›¸åº”çš„æç¤ºä¿¡æ¯ å¤‡ä»½åçš„æ–‡ä»¶è¦æ±‚ä»¥å¤‡ä»½æ—¶é—´ä¸ºæ–‡ä»¶åï¼Œ å¹¶æ‰“åŒ…æˆ .tar.gz çš„å½¢å¼ï¼Œ æ¯”å¦‚ï¼š 2020-07-22_230201.tar.gz åœ¨å¤‡ä»½çš„åŒæ—¶ï¼Œ æ£€æŸ¥æ˜¯å¦æœ‰ 10 å¤©å‰å¤‡ä»½çš„æ•°æ®åº“æ–‡ä»¶ï¼Œ å¦‚æœæœ‰å°±å°†å…¶åˆ é™¤ã€‚ ç¼–å†™ä¸€ä¸ª shell è„šæœ¬ æ€è·¯åˆ†æï¼š ä»£ç å®ç°ï¼š","categories":[{"name":"Linux","slug":"Linux","permalink":"http://blog.oy6090.top/categories/Linux/"}],"tags":[{"name":"CentOS 7","slug":"CentOS-7","permalink":"http://blog.oy6090.top/tags/CentOS-7/"}]},{"title":"Linux æ­å»º JavaEE ç¯å¢ƒ","slug":"Linux æ­å»º JavaEE ç¯å¢ƒ","date":"2020-07-15T16:00:00.000Z","updated":"2020-10-25T02:20:58.840Z","comments":true,"path":"posts/2922948377.html","link":"","permalink":"http://blog.oy6090.top/posts/2922948377.html","excerpt":"","text":"LInux æ­å»º JavaEE ç¯å¢ƒä¸€ã€å®‰è£… JDK(1.8)å…ˆå°†è½¯ä»¶é€šè¿‡ xftp5 ä¸Šä¼ åˆ° /opt ä¸‹ è§£å‹ç¼©åˆ° /opt é…ç½®ç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶ vim /etc/profile 123JAVA_HOME&#x3D;&#x2F;opt&#x2F;opt&#x2F;jdk1.8.0_261PATH&#x3D;&#x2F;opt&#x2F;jdk1.8.0_261&#x2F;bin:$PATHexport JAVA_HOME PATH éœ€è¦æ³¨é”€ç”¨æˆ·ï¼Œç¯å¢ƒå˜é‡æ‰èƒ½ç”Ÿæ•ˆ å¦‚æœæ˜¯åœ¨ 3 è¿è¡Œçº§åˆ«ï¼Œ logout å¦‚æœæ˜¯åœ¨ 5 çš„è¿è¡Œçº§åˆ« åœ¨ä»»ä½•ç›®å½•ä¸‹å°±å¯ä»¥ä½¿ç”¨ java å’Œ javac æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ ç¼–å†™ä¸€ä¸ªç®€å•çš„ Hello.java è¾“å‡ºâ€hello,world!â€ 12345public class Hello&#123; public static void main(String[] args)&#123; System.out.println(&quot;hello&quot;); &#125;&#125; ä½¿ç”¨ javac ç¼–è¯‘ , åœ¨ä½¿ç”¨ java æ‰§è¡Œ äºŒã€Tomcat æœåŠ¡å™¨æ­å»º è§£å‹ç¼©åˆ°/opt 2**.å¯åŠ¨ tomcat ./startup.sh** â€‹ å…ˆè¿›å…¥åˆ° tomcat çš„ bin ç›®å½• â€‹ â€‹ â€‹ åœ¨ liunx æµè§ˆå™¨ä¸­ï¼Œè¾“å…¥ http://localhost:808 å¯åŠ¨æˆåŠŸå³å¯ã€‚ å¼€æ”¾ç«¯å£ 8080 ,è¿™æ ·å¤–ç½‘æ‰èƒ½è®¿é—®åˆ° tomcat ï¼ˆCentOS7ï¼‰ â‘  æ£€éªŒé˜²ç«å¢™æ˜¯å¦å¯åŠ¨ â€‹ è¾“å…¥å‘½ä»¤ â€œ ==firewall-cmd â€“state== â€œ å¦‚æœå‡ºç°å¦‚å›¾æ‰€ç¤ºçš„è¿™ç§æƒ…å†µè¯´æ˜æ­£åœ¨è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰æ­£åœ¨è¿è¡Œéœ€è¦æ‰§è¡Œå‘½ä»¤â€ ==systemctl start firewalld== â€œå¼€å¯é˜²ç«å¢™æœåŠ¡ â€‹ â‘¡ é…ç½®é˜²ç«å¢™ï¼Œå¼€æ”¾ 8080 ç«¯å£ 12firewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanentfirewall-cmd --reload 4.å¼€æ”¾ç«¯å£ 8080 ,è¿™æ ·å¤–ç½‘æ‰èƒ½è®¿é—®åˆ° tomcat ï¼ˆCentOS7 ä»¥ä¸‹ï¼‰ vim /etc/sysconfig/iptables é‡å¯é˜²ç«å¢™ â€‹ ä¸‰ã€Tomcat å¯åŠ¨å¤±è´¥è§£å†³æ–¹æ¡ˆï¼ˆå¯åŠ¨æˆåŠŸè·³è¿‡ï¼‰ å¯åŠ¨ tomcat è¿›å…¥ tomcat æ‰€åœ¨çš„ç›®å½•çš„ bin çš„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œâ€ ./ startup.shâ€œ å‘½ä»¤ å¯åŠ¨ tomcat ï¼Œå¦‚æœå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µè¯´æ˜ tomcat å¯åŠ¨ æˆåŠŸã€‚ éªŒè¯ tomcat æ˜¯å¦å¯åŠ¨æˆåŠŸ è¾“å…¥â€ ps -ef|grep tomcat â€œ å‘½ä»¤éªŒè¯ tomcat æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œå¦‚æœå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µè¯´æ˜å¯åŠ¨æˆåŠŸã€‚ è‹¥å¯åŠ¨æˆåŠŸï¼Œåœ¨ linux ä¸­è¾“å…¥ curl http://192.168.112.130:8080ï¼ˆè‡ªå·± linux çš„ ipï¼‰çœ‹æ˜¯å¦æ­£å¸¸è®¿é—®ã€‚ å¦‚ä¸‹åˆ™è¡¨ç¤ºæ­£å¸¸è®¿é—®ï¼š æ£€éªŒé˜²ç«å¢™æ˜¯å¦å¯åŠ¨ è¾“å…¥å‘½ä»¤ â€œ ==firewall-cmd â€“state== â€œ å¦‚æœå‡ºç°å¦‚å›¾æ‰€ç¤ºçš„è¿™ç§æƒ…å†µè¯´æ˜æ­£åœ¨è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰æ­£åœ¨è¿è¡Œéœ€è¦æ‰§è¡Œå‘½ä»¤â€ ==systemctl start firewalld== â€œå¼€å¯é˜²ç«å¢™æœåŠ¡ æ£€æŸ¥ 8080 ç«¯å£æ˜¯å¦è¢«é˜²ç«å¢™å¼€å¯ è¾“å…¥å‘½ä»¤â€ ==firewall-cmd â€“permanent â€“zone=public â€“list-ports== â€œ å¦‚æœç»ˆç«¯è¾“å‡º â€œ8080/tcpâ€ åˆ™è¯´æ˜ 8080 ç«¯å£è¢«å¼€å¯ å¦‚æœæ²¡æœ‰è¯¥è¾“å‡ºåˆ™éœ€è¦æ‰§è¡Œå‘½ä»¤â€ ==firewall-cmd â€“zone=public â€“add-port=8080/tcp â€“permanent==â€å¼€å¯ 8080 ç«¯å£, å‡ºç°â€ ==success==â€ åˆ™è¡¨ç¤ºæ·»åŠ æˆåŠŸã€‚ é‡æ–°å¯åŠ¨é˜²ç«å¢™ è¾“å…¥å‘½ä»¤â€ firewall-cmd â€“reloadâ€ é‡æ–°å¯åŠ¨é˜²ç«å¢™ï¼Œå‡ºç°â€ successâ€œ å­—æ ·åˆ™è¡¨ç¤ºé‡æ–°å¯åŠ¨æˆåŠŸã€‚ éªŒè¯å¼€å¯çš„ 8080 ç«¯å£æ˜¯å¦ç”Ÿæ•ˆ è¾“å…¥å‘½ä»¤â€ firewall-cmd â€“zone=public â€“query-port=8080/tcpâ€œ éªŒè¯ 8080 ç«¯å£æ˜¯å¦ç”Ÿæ•ˆï¼Œå¦‚æœå‡ºç° â€ yes â€œå­—æ ·åˆ™ä»£è¡¨ç”Ÿæ•ˆã€‚ æ­¤æ—¶ï¼Œé‡æ–°å¯åŠ¨ tomcat å°±å¯ä»¥ä½¿ç”¨å¤–éƒ¨æµè§ˆå™¨è®¿é—® centos ä¸­çš„ tomcat å•¦ã€‚ è¡¥å……ï¼š â€‹ å¦‚æœä»¥ä¸Šè¿˜æ²¡æœ‰è§£å†³ï¼Œæˆ–è€… tomcat æç¤ºéœ€è¦é…ç½®ç¯å¢ƒã€‚è¯·å»å»æŸ¥çœ‹ä½ çš„JDKçš„é…ç½®ä¿¡æ¯ï¼Œé…ç½®æ–‡ä»¶åœ¨å®‰è£… JDK ä¸­ä»¥æåŠã€‚æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œå¯ä»¥é‡å¯ Linux,é‡æ–°ç™»å…¥ã€‚ å›› ã€Eclipse çš„å®‰è£… è§£å‹ç¼©åˆ°/opt å¯åŠ¨ eclipse è¿›å…¥åˆ° eclipse è§£å‹åçš„æ–‡ä»¶å¤¹ï¼Œ ç„¶åæ‰§è¡Œ ./eclipse äº”ã€mysql çš„å®‰è£…å’Œé…ç½®ã€è¯´æ˜ã€‘ï¼šå› ä¸º mysql å®‰è£…æ—¶é—´è¾ƒé•¿ï¼Œæ‰€ä»¥æˆ‘å·²ç»æŠŠå®‰è£…æ­¥éª¤æ”¾åˆ°æˆ‘åšå®¢çš„æ–‡ä»¶ä¸­äº†ã€‚æœ‰éœ€è¦çš„è¯ã€‚ç‚¹å‡»é“¾æ¥ä¸‹è½½å³å¯ã€‚æˆ–è€…ä½ å¯ä»¥ç™¾åº¦ç”¨ yum å®‰è£…ã€‚ æå–ç ï¼š9ifr æŸ¥çœ‹æ–‡æ¡£","categories":[{"name":"Linuxè¯­è¨€","slug":"Linuxè¯­è¨€","permalink":"http://blog.oy6090.top/categories/Linux%E8%AF%AD%E8%A8%80/"}],"tags":[{"name":"CentOS 7","slug":"CentOS-7","permalink":"http://blog.oy6090.top/tags/CentOS-7/"}]},{"title":"Linux ç¬”è®°ã€é€‚ç”¨æ–°æ‰‹ã€‘","slug":"Linuxç¬”è®°","date":"2020-07-15T16:00:00.000Z","updated":"2020-10-25T02:20:39.606Z","comments":true,"path":"posts/2761314235.html","link":"","permalink":"http://blog.oy6090.top/posts/2761314235.html","excerpt":"","text":"åšå®¢ä¸­æ‰€éœ€è¦çš„å·¥å…·æˆ‘å·²ç»æ‰“åŒ…å¥½ï¼Œæ”¾åœ¨åšå®¢æ–‡ç« æœ€åã€‚ é‡Œé¢åŒ…å«äº†: PDF ç‰ˆçŸ¥è¯†ç‚¹ Xshell Xftp ç¬¬ä¸€ç«  å¼€æœºã€é‡å¯å’Œç”¨æˆ·ç™»å½•æ³¨é”€Linux ç›®å½•ç»“æ„ï¼š 1.1 å…³æœº&amp;é‡å¯å‘½ä»¤ shutdown shutdown -h now : è¡¨ç¤ºç«‹å³å…³æœº shutdown -h 1 : è¡¨ç¤º 1 åˆ†é’Ÿåå…³æœº shutdown -r now : ç«‹å³é‡å¯ halt å°±æ˜¯ç›´æ¥ä½¿ç”¨ï¼Œæ•ˆæœç­‰ä»·äºå…³æœº reboot å°±æ˜¯é‡å¯ç³»ç»Ÿ syn æŠŠå†…å­˜çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜ 1.2 ç”¨æˆ·åŸºæœ¬ç™»å…¥å’Œæ³¨é”€1.2.1 åŸºæœ¬ä»‹ç»â€‹ 1ï¼‰ç™»å…¥æ—¶å°½é‡å°‘ç”¨ root ç™»å½•ï¼Œå› ä¸ºå®ƒæ˜¯ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæœ€å¤§æƒé™ï¼Œé¿å…æ“ä½œå¤±è¯¯ã€‚å¯åˆ©ç”¨æ™®é€šç”¨æˆ·ç™»å½•ï¼Œç™»å…¥åå†ç”¨**â€su -ç”¨æˆ·åâ€** å‘½ä»¤æ¥åˆ‡æ¢æˆç³»ç»Ÿç®¡ç†å‘˜èº«ä»½. â€‹ 2) åœ¨æç¤ºç¬¦è¾“å…¥ logout å³å¯ä»¥æ³¨é”€ç”¨æˆ· ç¬¬äºŒç«  ç”¨æˆ·ç®¡ç†2.1 æ·»åŠ ç”¨æˆ·2.1.1 åŸºæœ¬è¯­æ³•â€‹ useradd [é€‰é¡¹] ç”¨æˆ·å 2.1.2 å®é™…æ¡ˆä¾‹â€‹ æ·»åŠ ä¸€ä¸ªç”¨æˆ· xm â€‹ â€‹ ç‰¹åˆ«è¯´æ˜ â€‹ cd è¡¨ç¤º change directory 2.1.3 ç»†èŠ‚è¯´æ˜â€‹ 1ï¼‰å½“åˆ›å»ºç”¨æˆ·æˆåŠŸåï¼Œä¼šè‡ªåŠ¨çš„åˆ›å»ºå’Œç”¨æˆ·ååŒåçš„å®¶çš„ç›®å½• â€‹ 2ï¼‰ ä¹Ÿå¯ä»¥é€šè¿‡ useradd - d æŒ‡å®šç›®å½• æ–°çš„ç”¨æˆ·åï¼Œç»™æ–°åˆ›å»ºçš„ç”¨æˆ·æŒ‡å®šå®¶ç›®å½• 2.2 ç»™ç”¨æˆ·æŒ‡å®šæˆ–ä¿®æ”¹å¯†ç 2.2.1 åŸºæœ¬è¯­æ³•â€‹ passwd ç”¨æˆ·å 2.2.2 åº”ç”¨æ¡ˆä¾‹â€‹ 1ï¼‰ ç»™ xm æŒ‡å®šå¯†ç  â€‹ 2.3 åˆ é™¤ç”¨æˆ·2.3.1 åŸºæœ¬è¯­æ³•â€‹ userdel ç”¨æˆ·å 2.3.2 åº”ç”¨æ¡ˆä¾‹â€‹ 1ï¼‰åˆ é™¤ç”¨æˆ· xm, ä½†æ˜¯è¦ä¿ç•™åŠ ç›®å½• â€‹ â€‹ 2ï¼‰åˆ é™¤ç”¨æˆ· xq ä»¥åŠç”¨æˆ·ä¸»ç›®å½• â€‹ 2.4 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯2.4.1 åŸºæœ¬è¯­æ³•â€‹ id ç”¨æˆ·å 2.4.2 åº”ç”¨å®ä¾‹â€‹ æ¡ˆä¾‹ 1ï¼šè¯·æŸ¥è¯¢ root ä¿¡æ¯ â€‹ 2.4.3 ç»†èŠ‚è¯´æ˜â€‹ 1ï¼‰å½“ç”¨æˆ·ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›â€œæ— æ­¤ç”¨æˆ·â€ 2.5 åˆ‡æ¢ç”¨æˆ·2.5.1 ä»‹ç»â€‹ åœ¨æ“ä½œ Linux ä¸­ï¼Œå¦‚æœå½“å‰ç”¨æˆ·çš„æƒé™ä¸å¤Ÿï¼Œå¯ä»¥é€šè¿‡ su - æŒ‡ä»¤ï¼Œåˆ‡æ¢åˆ°é«˜æƒé™ç”¨æˆ·ï¼Œæ¯”å¦‚ rootã€‚ 2.5.2 åŸºæœ¬è¯­æ³•â€‹ su - åˆ‡æ¢ç”¨æˆ·å 2.5.3 åº”ç”¨å®ä¾‹â€‹ 1) åˆ›å»ºä¸€ä¸ªç”¨æˆ· zf, æŒ‡å®šå¯†ç ï¼Œç„¶ååˆ‡æ¢åˆ° zf â€‹ 2.5.4 ç»†èŠ‚è¯´æ˜â€‹ 1ï¼‰ä»æƒé™é«˜çš„ç”¨æˆ·åˆ‡æ¢åˆ°æƒé™ä½çš„ç”¨æˆ·ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œåä¹‹éœ€è¦ â€‹ 2ï¼‰å½“éœ€è¦è¿”å›åˆ°åŸæ¥çš„ç”¨æˆ·æ—¶ï¼Œä½¿ç”¨exitå‘½å 2.6 ç”¨æˆ·ç»„2.6.1 ä»‹ç»â€‹ ç±»ä¼¼äºè§’è‰²ï¼Œ ç³»ç»Ÿå¯ä»¥å¯¹æœ‰å…±æ€§çš„å¤šä¸ªç”¨æˆ·è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ã€‚ 2.6.2 å¢åŠ ç»„groupadd ç»„å 2.6.3 æ¡ˆä¾‹æ¼”ç¤ºâ€‹ 2.6.4 åˆ é™¤ç»„â€‹ æŒ‡ä»¤ï¼ˆåŸºæœ¬è¯­æ³•ï¼‰ groupdel ç»„å 2.6.5 æ¡ˆä¾‹æ¼”ç¤ºâ€‹ 2.7 å¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ ä¸Šç»„2.7.1 æŒ‡ä»¤ï¼ˆåŸºæœ¬è¯­æ³•ï¼‰â€‹ useradd -g ç”¨æˆ·ç»„ ç”¨æˆ·å 2.7.2 æ¡ˆä¾‹æ¼”ç¤ºâ€‹ å¢åŠ ä¸€ä¸ªç”¨æˆ· zwj, ç›´æ¥å°†ä»–æŒ‡å®šåˆ° wudang â€‹ 2.8 ä¿®æ”¹ç”¨æˆ·çš„ç»„2.8.1 æŒ‡ä»¤ï¼ˆåŸºæœ¬è¯­æ³•ï¼‰â€‹ usermod -g ç”¨æˆ·ç»„ ç”¨æˆ·å 2.8.2 æ¡ˆä¾‹æ¼”ç¤ºâ€‹ åˆ›å»ºä¸€ä¸ª shaolin ç»„ï¼Œ è®©å°† zwj ç”¨æˆ·ä¿®æ”¹åˆ° shaolin 2.9 /etc/passwd æ–‡ä»¶â€‹ ç”¨æˆ·(user) çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•ç”¨æˆ·çš„å„ç§ä¿¡æ¯ â€‹ æ¯è¡Œçš„å«ä¹‰ï¼šç”¨æˆ·åï¼šå£ä»¤ï¼šç”¨æˆ·æ ‡è¯†ç¬¦ï¼šç»„æ ‡è¯†å·ï¼šæ³¨é‡Šæ€§æè¿°ï¼šä¸»ç›®å½•ï¼šç™»å½• Shell æ“ä½œä»£ç  â€‹ 2.10 /etc/shadow æ–‡ä»¶â€‹ å£ä»¤çš„é…ç½®æ–‡ä»¶ â€‹ æ¯è¡Œçš„å«ä¹‰ï¼š ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨ æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿— 2.11 /etc/group æ–‡ä»¶â€‹ ç»„(group)çš„é…ç½®æ–‡ä»¶ ï¼Œè®°å½• Linux åŒ…å«çš„ç»„çš„ä¿¡æ¯ â€‹ æ¯è¡Œå«ä¹‰ï¼šç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨ â€‹ ç¬¬ä¸‰ç«  å®ç”¨æŒ‡ä»¤3.1 æŒ‡å®šè¿è¡Œçš„çº§åˆ«3.1.1 è¿è¡Œçº§åˆ«è¯´æ˜ï¼š 0 ï¼š å…³æœº 1 ï¼š å•ç”¨æˆ·ã€æ‰¾å›ä¸¢å¤±å¯†ç ã€‘ 2ï¼š å¤šç”¨æˆ·çŠ¶æ€æ²¡æœ‰ç½‘ç»œæœåŠ¡ 3ï¼š å¤šç”¨æˆ·çŠ¶æ€æœ‰ç½‘ç»œæœåŠ¡ 4ï¼š ç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ· 5ï¼š å›¾å½¢ç•Œé¢ 6ï¼š ç³»ç»Ÿé‡å¯ å¸¸ç”¨è¿è¡Œçº§åˆ«æ˜¯ 3 å’Œ 5 ï¼Œ è¦ä¿®æ”¹é»˜è®¤çš„è¿è¡Œçº§åˆ«å¯æ”¹æ–‡ä»¶ /etc/inittab çš„ id:5:initdefault:è¿™ä¸€è¡Œä¸­çš„æ•°å­— 3.1.2 è¿è¡Œçº§åˆ«çš„ç¤ºæ„å›¾ï¼šâ€‹ 3.2 åˆ‡æ¢åˆ°æŒ‡å®šè¿è¡Œçº§åˆ«çš„æŒ‡ä»¤3.2.1 åŸºæœ¬è¯­æ³•â€‹ init [0123456] â€‹ è¡¥å……ï¼š â€‹ å…³äº root å¯†ç å¿˜è®°ï¼Œæ”¹æ€ä¹ˆç”¨è¿è¡Œçº§åˆ«çš„æŒ‡ä»¤æ¥æ“ä½œï¼Œæ¯ä¸ªç‰ˆæœ¬ä¸åŒï¼Œæ‰€ä»¥è‡ªè¡Œç™¾åº¦ã€‚ 3.3 å¸®åŠ©æŒ‡ä»¤3.3.1 ä»‹ç»â€‹ å½“æˆ‘ä»¬å¯¹æŸä¸ªæŒ‡ä»¤ä¸ç†Ÿæ‚‰æ—¶ï¼Œ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Linux æä¾›çš„å¸®åŠ©æŒ‡ä»¤æ¥äº†è§£è¿™ä¸ªæŒ‡ä»¤çš„ä½¿ç”¨æ–¹æ³•ã€‚ 3.3.2 man è·å–å¸®åŠ©ä¿¡æ¯ åŸºæœ¬è¯­æ³• man [å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶] ï¼ˆåŠŸèƒ½æè¿°: è·å–å¸®åŠ©ä¿¡æ¯ï¼‰ å®ç”¨æ¡ˆä¾‹ â€‹ æ¡ˆä¾‹ï¼šæŸ¥çœ‹ ls å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ â€‹ 3.3.3 help æŒ‡ä»¤ åŸºæœ¬è¯­æ³• â€‹ help å‘½ä»¤ ï¼ˆåŠŸèƒ½æè¿°ï¼š è·å– shell å†…ç½®å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼‰ åº”ç”¨æ¡ˆä¾‹ â€‹ æ¡ˆä¾‹ï¼š æŸ¥çœ‹ cd å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ â€‹ 3.4 æ–‡ä»¶ç›®å½•ç±»3.4.1 pwd æŒ‡ä»¤ åŸºæœ¬ç”¨æ³• â€‹ pwd (åŠŸèƒ½æè¿°ï¼š æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„) åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ï¼šæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ 3.4.2 ls æŒ‡ä»¤ åŸºæœ¬è¯­æ³• â€‹ ls [é€‰é¡¹] [ç›®å½•æˆ–æ˜¯æ–‡ä»¶] åº”ç”¨æ¡ˆä¾‹ â€‹ -a : æ˜¾ç¤ºå½“å‰ç›®å½•æ‰€åœ¨çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—çš„ã€‚ â€‹ -l : ä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤ºä¿¡æ¯ åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ï¼š æŸ¥çœ‹å½“å‰ç›®å½•çš„æ‰€åœ¨çš„å†…å®¹ä¿¡æ¯ â€‹ 3.4.3 cd æŒ‡ä»¤ åŸºæœ¬è¯­æ³• â€‹ cd [å‚æ•°] ï¼ˆåŠŸèƒ½åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•ï¼‰ å¸¸ç”¨å‚æ•° â€‹ ==ç»å¯¹è·¯å¾„== å’Œ ==ç›¸å¯¹è·¯å¾„== â€‹ â€‹ cd ~ æˆ–è€… cd : å›åˆ°è‡ªå·±çš„å®¶ç›®å½• â€‹ cd.. å›åˆ°å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½• åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1ï¼š ä½¿ç”¨ç»å¯¹è·¯å¾„åˆ‡æ¢åˆ° root ç›®å½• â€‹ æ¡ˆä¾‹ 2ï¼š å›åˆ°å®¶ç›®å½• 3.4.4 mkdir æŒ‡ä»¤â€‹ mkdir æŒ‡ä»¤ç”¨äºåˆ›å»ºç›®å½•ï¼ˆmake directoryï¼‰ åŸºæœ¬ç”¨æ³• â€‹ mkdir [é€‰é¡¹] è¦åˆ›å»ºçš„ç›®å½• å¸¸ç”¨é€‰é¡¹ â€‹ -p : åˆ›å»ºå¤šçº§ç›®å½• åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1:åˆ›å»ºä¸€ä¸ªç›®å½• /home/dog â€‹ â€‹ æ¡ˆä¾‹ 2:åˆ›å»ºå¤šçº§ç›®å½• /home/animal/tiger 3.4.5 rmdir æŒ‡ä»¤ ä»‹ç» â€‹ rmdir æŒ‡ä»¤åˆ é™¤ç©ºç›®å½• åŸºæœ¬è¯­æ³• â€‹ rmdir [é€‰é¡¹] è¦åˆ é™¤çš„ç©ºç›®å½• åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1:åˆ é™¤ä¸€ä¸ªç›®å½• /home/dog â€‹ ä½¿ç”¨ç»†èŠ‚ â€‹ rmdir åˆ é™¤çš„æ˜¯ç©ºç›®å½•ï¼Œ å¦‚æœç›®å½•ä¸‹æœ‰å†…å®¹æ—¶æ— æ³•åˆ é™¤çš„ã€‚â€‹ æç¤ºï¼š å¦‚æœéœ€è¦åˆ é™¤éç©ºç›®å½•ï¼Œ éœ€è¦ä½¿ç”¨ rm -rf è¦åˆ é™¤çš„ç›®å½• 3.4.6 touch æŒ‡ä»¤â€‹ touch æŒ‡ä»¤åˆ›å»ºç©ºæ–‡ä»¶ åŸºæœ¬ç”¨æ³• â€‹ touch æ–‡ä»¶åç§° åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1: åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ hello.txt â€‹ 3.4.7 cp æŒ‡ä»¤â€‹ cp æŒ‡ä»¤æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šçš„ç›®å½• åŸºæœ¬ç”¨æ³• â€‹ cp [é€‰é¡¹] source dest å¸¸ç”¨é€‰é¡¹ â€‹ -r : é€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹ åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1: å°† /home/aaa.txt æ‹·è´åˆ° /home/bbb ç›®å½•ä¸‹[æ‹·è´å•ä¸ªæ–‡ä»¶] æ¡ˆä¾‹ 2: é€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œ ä¸¾ä¾‹ ï¼šå°†/home/test æ•´ä¸ªç›®å½•æ‹·è´åˆ° /home/zwj ç›®å½• ä½¿ç”¨ç»†èŠ‚ â€‹ å¼ºåˆ¶è¦†ç›–ä¸æç¤ºçš„æ–¹æ³•ï¼š \\cp â€‹ 3.4.8 rm æŒ‡ä»¤â€‹ rm æŒ‡ä»¤ç§»é™¤ã€åˆ é™¤ã€‘ æ–‡ä»¶æˆ–ç›®å½• åŸºæœ¬ç”¨æ³• â€‹ rm [é€‰é¡¹] è¦åˆ é™¤çš„æ–‡ä»¶æˆ–ç›®å½• å¸¸ç”¨é€‰é¡¹ â€‹ -r : é€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹ â€‹ -f : å¼ºåˆ¶åˆ é™¤ä¸æç¤º åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1: å°† /home/aaa.txt åˆ é™¤ â€‹ æ¡ˆä¾‹ 2: é€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹ /home/bbb ä½¿ç”¨ç»†èŠ‚ â€‹ å¼ºåˆ¶åˆ é™¤ä¸æç¤ºçš„æ–¹æ³•ï¼š å¸¦ä¸Š -f å‚æ•°å³å¯ â€‹ 3.4.9 cat æŒ‡ä»¤â€‹ cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œ æ˜¯ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€ã€‚ åŸºæœ¬è¯­æ³• cat [é€‰é¡¹] è¦æŸ¥çœ‹çš„æ–‡ä»¶ å¸¸ç”¨é€‰é¡¹ -n : æ˜¾ç¤ºè¡Œå· åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1: /etc/profile æ–‡ä»¶å†…å®¹ï¼Œ å¹¶æ˜¾ç¤ºè¡Œå· â€‹ ä½¿ç”¨ç»†èŠ‚ â€‹ cat åªèƒ½ä¿®æ”¹æ–‡ä»¶ï¼Œ è€Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶ï¼Œä¸ºäº†æµè§ˆæ–¹ä¾¿ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š ç®¡é“å‘½ä»¤ | more â€‹ cat æ–‡ä»¶å | more [åˆ†é¡µæµè§ˆ] 3.4.10 mv æŒ‡ä»¤â€‹ mv ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•æˆ–é‡å‘½å åŸºæœ¬ç”¨æ³• â€‹ mv oldNameFile newNameFile (åŠŸèƒ½æè¿°ï¼š é‡å‘½å)â€‹ mv /temp/movefile /targetFolder (åŠŸèƒ½æè¿°ï¼š ç§»åŠ¨æ–‡ä»¶) åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1: å°† /home/aaa.txt æ–‡ä»¶ é‡æ–°å‘½åä¸º pig.txt â€‹ æ¡ˆä¾‹ 2:å°† /home/pig.txt æ–‡ä»¶ ç§»åŠ¨åˆ° /root ç›®å½•ä¸‹ 3.4.11 more æŒ‡ä»¤â€‹ more æŒ‡ä»¤æ˜¯ä¸€ä¸ªåŸºäº VI ç¼–è¾‘å™¨çš„æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œ ==å®ƒä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹==ã€‚more æŒ‡ä»¤ä¸­å†…ç½®äº†è‹¥å¹²å¿«æ·é”®ï¼Œ è¯¦è§æ“ä½œè¯´æ˜ åŸºæœ¬è¯­æ³• â€‹ more è¦æŸ¥çœ‹çš„æ–‡ä»¶ åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹: é‡‡ç”¨ more æŸ¥çœ‹æ–‡ä»¶ /etc/profileâ€‹ å¿«æ·é”® 3.4.12 less æŒ‡ä»¤â€‹ less æŒ‡ä»¤ç”¨æ¥==åˆ†å±æŸ¥çœ‹æ–‡ä»¶å†…å®¹==ï¼Œ å®ƒçš„åŠŸèƒ½ä¸ more æŒ‡ä»¤ç±»ä¼¼ï¼Œ ä½†æ˜¯æ¯” more æŒ‡ä»¤æ›´åŠ å¼ºå¤§ï¼Œ æ”¯æŒå„ç§æ˜¾ç¤ºç»ˆç«¯ã€‚ less æŒ‡ä»¤åœ¨æ˜¾ç¤ºæ–‡ä»¶å†…å®¹æ—¶ï¼Œ å¹¶ä¸æ˜¯ä¸€æ¬¡å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½ä¹‹åæ‰æ˜¾ç¤ºï¼Œ è€Œæ˜¯æ ¹æ®æ˜¾ç¤ºéœ€è¦åŠ è½½å†…å®¹ï¼Œ å¯¹äºæ˜¾ç¤ºå¤§å‹æ–‡ä»¶å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ã€‚ åŸºæœ¬è¯­æ³• â€‹ less è¦æŸ¥çœ‹çš„æ–‡ä»¶ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹: é‡‡ç”¨ less æŸ¥çœ‹ä¸€ä¸ªå¤§æ–‡ä»¶æ–‡ä»¶ /opt/é‡‘åº¸-å°„é›•è‹±é›„ä¼  txt ç²¾æ ¡ç‰ˆ.txt å¿«æ·é”® 3.4.13 &gt; æŒ‡ä»¤ å’Œ &gt;&gt; æŒ‡ä»¤ ä»‹ç» ==&gt; æŒ‡ä»¤ å’Œ &gt;&gt; æŒ‡ä»¤== &gt; è¾“å‡ºé‡å®šå‘ : ä¼šå°†åŸæ¥çš„æ–‡ä»¶çš„å†…å®¹è¦†ç›– &gt;&gt; è¿½åŠ ï¼š ä¸ä¼šè¦†ç›–åŸæ¥æ–‡ä»¶çš„å†…å®¹ï¼Œ è€Œæ˜¯è¿½åŠ åˆ°æ–‡ä»¶çš„å°¾éƒ¨ã€‚ åŸºæœ¬è¯­æ³• 1) ls -l &gt;æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼š åˆ—è¡¨çš„å†…å®¹å†™å…¥æ–‡ä»¶ a.txt ä¸­ï¼ˆ==è¦†ç›–å†™==ï¼‰ ï¼‰ è¯´æ˜ï¼š ls -l &gt; a.txt , å°† ls -l çš„æ˜¾ç¤ºçš„å†…å®¹è¦†ç›–å†™å…¥åˆ° a.txt æ–‡ä»¶ï¼Œ å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œ å°±åˆ›å»ºè¯¥æ–‡ä»¶ã€‚ â€‹ 2) ls -al &gt;&gt;æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼š åˆ—è¡¨çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶ a.txt çš„æœ«å°¾ï¼‰ â€‹ 3) cat æ–‡ä»¶ 1 &gt; æ–‡ä»¶ 2 ï¼ˆåŠŸèƒ½æè¿°ï¼š å°†æ–‡ä»¶ 1 çš„å†…å®¹è¦†ç›–åˆ°æ–‡ä»¶ 2ï¼‰ åº”ç”¨å®ä¾‹ â€‹ æ¡ˆä¾‹ 1: å°† /home ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ å†™å…¥åˆ° /home/info.txt ä¸­ â€‹ æ¡ˆä¾‹ 2: å°†å½“å‰æ—¥å†ä¿¡æ¯ è¿½åŠ åˆ° /home/mycal æ–‡ä»¶ä¸­ [æç¤º cal ] â€‹ 3.4.14 echo æŒ‡ä»¤â€‹ echo è¾“å‡ºå†…å®¹åˆ°æ§åˆ¶å°ã€‚ åŸºæœ¬è¯­æ³• echo [é€‰é¡¹] [è¾“å‡ºå†…å®¹] åº”ç”¨å®ä¾‹ æ¡ˆä¾‹: ä½¿ç”¨ echo æŒ‡ä»¤è¾“å‡ºç¯å¢ƒå˜é‡,è¾“å‡ºå½“å‰çš„ç¯å¢ƒè·¯å¾„ã€‚ 3.4.15 head æŒ‡ä»¤â€‹ head ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†å†…å®¹ï¼Œ é»˜è®¤æƒ…å†µä¸‹ head æŒ‡ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å‰ 10 è¡Œå†…å®¹ åŸºæœ¬è¯­æ³• head æ–‡ä»¶ (åŠŸèƒ½æè¿°ï¼š æŸ¥çœ‹æ–‡ä»¶å¤´ 10 è¡Œå†…å®¹)head -n 5 æ–‡ä»¶ (åŠŸèƒ½æè¿°ï¼š æŸ¥çœ‹æ–‡ä»¶å¤´ 5 è¡Œå†…å®¹ï¼Œ 5 å¯ä»¥æ˜¯ä»»æ„è¡Œæ•°) åº”ç”¨å®ä¾‹ æ¡ˆä¾‹: æŸ¥çœ‹/etc/profile çš„å‰é¢ 5 è¡Œä»£ç  3.4.16 tail æŒ‡ä»¤â€‹ tail ç”¨äºè¾“å‡ºæ–‡ä»¶ä¸­å°¾éƒ¨çš„å†…å®¹ï¼Œ é»˜è®¤æƒ…å†µä¸‹ tail æŒ‡ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å 10 è¡Œå†…å®¹ã€‚ åŸºæœ¬è¯­æ³• tail æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼š æŸ¥çœ‹æ–‡ä»¶å 10 è¡Œå†…å®¹ï¼‰ tail -n 5 æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼š æŸ¥çœ‹æ–‡ä»¶å 5 è¡Œå†…å®¹ï¼Œ 5 å¯ä»¥æ˜¯ä»»æ„è¡Œæ•°ï¼‰ tail -f æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼š å®æ—¶è¿½è¸ªè¯¥æ–‡æ¡£çš„æ‰€æœ‰æ›´æ–°ï¼Œ å·¥ä½œç»å¸¸ä½¿ç”¨ï¼‰ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: æŸ¥çœ‹/etc/profile æœ€å 5 è¡Œçš„ä»£ç  æ¡ˆä¾‹ 2: å®æ—¶ç›‘æ§ mydate.txt , çœ‹çœ‹åˆ°æ–‡ä»¶æœ‰å˜åŒ–æ—¶ï¼Œ æ˜¯å¦çœ‹åˆ°ï¼Œ å®æ—¶çš„è¿½åŠ æ—¥æœŸ 3.4.17 ln æŒ‡ä»¤è½¯é“¾æ¥ä¹Ÿå«ç¬¦å·é“¾æ¥ï¼Œç±»ä¼¼äº window é‡Œçš„å¿«æ·æ–¹å¼ï¼Œä¸»è¦å­˜æ”¾äº†é“¾æ¥å…¶ä»–æ–‡ä»¶çš„è·¯å¾„ã€‚ åŸºæœ¬ç”¨æ³• In -s [åŸæ–‡ä»¶æˆ–ç›®å½•]è½¯è¿æ¥] ï¼ˆåŠŸèƒ½æè¿°ï¼šç»™åŸæ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼‰ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: åœ¨/home ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ linkToRootï¼Œ è¿æ¥åˆ° /root ç›®å½• æ¡ˆä¾‹ 2: åˆ é™¤è½¯è¿æ¥ linkToRoot ç»†èŠ‚è¯´æ˜ å½“æˆ‘ä»¬ä½¿ç”¨ pwd æŒ‡ä»¤æŸ¥çœ‹ç›®å½•æ—¶ï¼Œä»ç„¶çœ‹åˆ°çš„æ˜¯è½¯é“¾æ¥æ‰€åœ¨çš„ç›®å½• 3.4.18 history æŒ‡ä»¤â€‹ æŸ¥çœ‹å·²ç»æ‰§è¡Œçš„å†å²å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œå†å²çš„æŒ‡ä»¤ åŸºæœ¬ç”¨æ³• history (åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹å·²ç»æ‰§è¡Œçš„å†å²å‘½ä»¤) åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: æ˜¾ç¤ºæ‰€æœ‰çš„å†å²å‘½ä»¤ æ¡ˆä¾‹ 2: æ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨è¿‡çš„ 10 ä¸ªæŒ‡ä»¤ã€‚ æ¡ˆä¾‹ 3ï¼š æ‰§è¡Œå†å²ç¼–å·ä¸º 5 çš„æŒ‡ä»¤ 3.5 æ—¶é—´æ—¥æœŸç±»3.5.1 date æŒ‡ä»¤-æ˜¾ç¤ºå½“å‰æ—¥æœŸ åŸºæœ¬ç”¨æ³• 1ï¼‰date (åŠŸèƒ½æè¿°ï¼š æ˜¾ç¤ºå½“å‰æ—¶é—´) 2ï¼‰date+%Y ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰å¹´ä»½ï¼‰ 3ï¼‰date +%m (åŠŸèƒ½æè¿°ï¼š æ˜¾ç¤ºå½“å‰æœˆä»½) 4ï¼‰date + %d (åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ˜¯å“ªä¸€å¤©) 5ï¼‰dateâ€+Y-%m-%d%H:%M:%Sâ€ (åŠŸèƒ½æè¿°ï¼š æ˜¾ç¤ºå¹´æœˆä»½æ—¶åˆ†ç§’) åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: æ˜¾ç¤ºå½“å‰æ—¶é—´ä¿¡æ¯ æ¡ˆä¾‹ 2: æ˜¾ç¤ºå½“å‰æ—¶é—´å¹´æœˆæ—¥ æ¡ˆä¾‹ 3: æ˜¾ç¤ºå½“å‰æ—¶é—´å¹´æœˆæ—¥æ—¶åˆ†ç§’ â€‹ 3.5.2 date æŒ‡ä»¤- è®¾ç½®æ—¥æœŸ åŸºæœ¬è¯­æ³• date -s å­—ç¬¦ä¸²æ—¶é—´ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: è®¾ç½®ç³»ç»Ÿå½“å‰æ—¶é—´ ï¼Œ æ¯”å¦‚è®¾ç½®æˆ 2020-10-10 11:22:22 3.5.3 cal æŒ‡ä»¤â€‹ æŸ¥çœ‹æ—¥å†çš„æŒ‡ä»¤ åŸºæœ¬æŒ‡ä»¤ cal [é€‰é¡¹] ï¼ˆåŠŸèƒ½æè¿°ï¼‰ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: æ˜¾ç¤ºå½“å‰æ—¥å† â€‹ æ¡ˆä¾‹ 2: æ˜¾ç¤º 2020 å¹´æ—¥å† â€‹ 3.6 æœç´¢æŸ¥æ‰¾ç±»3.6.1 find æŒ‡ä»¤â€‹ find æŒ‡ä»¤å°†ä»æŒ‡å®šç›®å½•å‘ä¸‹é€’å½’åœ°éå†å…¶å„ä¸ªå­ç›®å½•ï¼Œ å°†æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¾ç¤ºåœ¨ç»ˆç«¯ã€‚ åŸºæœ¬ç”¨æ³• find [æœç´¢èŒƒå›´] [é€‰é¡¹] é€‰é¡¹è¯´æ˜ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: æŒ‰æ–‡ä»¶åï¼š æ ¹æ®åç§°æŸ¥æ‰¾/home ç›®å½•ä¸‹çš„ hello.txt æ–‡ä»¶ æ¡ˆä¾‹ 2ï¼š æŒ‰æ‹¥æœ‰è€…ï¼š æŸ¥æ‰¾/opt ç›®å½•ä¸‹ï¼Œ ç”¨æˆ·åç§°ä¸º nobody çš„æ–‡ä»¶ â€‹ æ¡ˆä¾‹ 3ï¼š æŸ¥æ‰¾æ•´ä¸ª linux ç³»ç»Ÿä¸‹å¤§äº 20m çš„æ–‡ä»¶ï¼ˆ+n å¤§äº -n å°äº n ç­‰äºï¼‰ â€‹ â€‹ æŸ¥è¯¢ / ç›®å½•ä¸‹ï¼Œ æ‰€æœ‰ .txt çš„æ–‡ä»¶ 3.6.2 Locate æŒ‡ä»¤â€‹ locaate æŒ‡ä»¤å¯ä»¥å¿«é€Ÿå®šä½æ–‡ä»¶è·¯å¾„ã€‚ locate æŒ‡ä»¤åˆ©ç”¨äº‹å…ˆå»ºç«‹çš„ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶åç§°åŠè·¯å¾„çš„ ocate æ•°æ®åº“å®ç°å¿«é€Ÿå®šä½ç»™å®šçš„æ–‡ä»¶ã€‚ Locate æŒ‡ä»¤æ— éœ€éå†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œ æŸ¥è¯¢é€Ÿåº¦è¾ƒå¿«ã€‚ ä¸ºäº†ä¿è¯æŸ¥è¯¢ç»“æœçš„å‡†ç¡®åº¦ï¼Œ ç®¡ç†å‘˜å¿…é¡»å®šæœŸæ›´æ–° locate æ—¶åˆ»ã€‚ åŸºæœ¬è¯­æ³• locate æœç´¢æ–‡ä»¶ ç‰¹åˆ«è¯´æ˜ ç”±äº locate æŒ‡ä»¤åŸºäºæ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œ ==æ‰€ä»¥ç¬¬ä¸€æ¬¡è¿è¡Œå‰ï¼Œ å¿…é¡»ä½¿ç”¨ updatedb æŒ‡ä»¤åˆ›å»º locate æ•°æ®åº“ã€‚== åº”ç”¨æ¡ˆä¾‹ æ¡ˆä¾‹ 1: è¯·ä½¿ç”¨ locate æŒ‡ä»¤å¿«é€Ÿå®šä½ hello.txt æ–‡ä»¶æ‰€åœ¨ç›®å½• 3.6.3 grep æŒ‡ä»¤ å’Œ ç®¡é“ç¬¦å·â€‹ grep è¿‡æ»¤æŸ¥æ‰¾ ï¼Œ ç®¡é“ç¬¦ï¼Œ â€œ|â€ï¼Œ è¡¨ç¤ºå°†å‰ä¸€ä¸ªå‘½ä»¤çš„å¤„ç†ç»“æœè¾“å‡ºä¼ é€’ç»™åé¢çš„å‘½ä»¤å¤„ç†ã€‚ åŸºæœ¬ç”¨æ³• grep [é€‰é¡¹] æŸ¥æ‰¾å†…å®¹ å¸¸ç”¨é€‰é¡¹ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: è¯·åœ¨ hello.txt æ–‡ä»¶ä¸­ï¼Œ æŸ¥æ‰¾ â€œyesâ€ æ‰€åœ¨è¡Œï¼Œ å¹¶ä¸”æ˜¾ç¤ºè¡Œå· 3.7 å‹ç¼©å’Œè§£å‹ç±»3.7.1 gzip/gunzip æŒ‡ä»¤â€‹ gzip ç”¨äºå‹ç¼©æ–‡ä»¶ï¼Œgunzip ç”¨äºè§£å‹ åŸºæœ¬ç”¨æ³• gzip æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼‰ gunzip æ–‡ä»¶ ï¼ˆåŠŸèƒ½æè¿°ï¼šè§£å‹æ–‡ä»¶å‘½ä»¤ï¼‰ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: gzip å‹ç¼©ï¼Œ å°† /home ä¸‹çš„ hello.txt æ–‡ä»¶è¿›è¡Œå‹ç¼© æ¡ˆä¾‹ 2: gunzip å‹ç¼©ï¼Œ å°† /home ä¸‹çš„ hello.txt.gz æ–‡ä»¶è¿›è¡Œè§£å‹ç¼© ç»†èŠ‚è¯´æ˜ å½“æˆ‘ä»¬ä½¿ç”¨ gzip å¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©åï¼Œæ•è·ä¿ç•™åŸæ¥çš„æ–‡ä»¶ 3.7.2 zip/unzip æŒ‡ä»¤â€‹ zip ç”¨äºå‹ç¼©æ–‡ä»¶ï¼Œunzip ç”¨äºè§£å‹çš„ï¼Œè¿™ä¸ªåœ¨é¡¹ç›®æ‰“åŒ…å‘å¸ƒä¸­å¾ˆæœ‰ç”¨çš„ åŸºæœ¬ç”¨æ³• zip [é€‰é¡¹]XXX.zip å°†è¦å‹ç¼©åœ°å†…å®¹ï¼ˆåŠŸèƒ½æè¿°ï¼šå‹ç¼©æ–‡ä»¶å’Œç›®å½•çš„å‘½ä»¤ï¼‰ unzip [é€‰é¡¹] XXX.zip ï¼ˆåŠŸèƒ½æè¿°ï¼šè§£å‹ç¼©æ–‡ä»¶ï¼‰ å¸¸ç”¨é€‰é¡¹ -r é€’å½’å‹ç¼©ï¼Œå³å‹ç¼©ç›®å½• unzip çš„å¸¸ç”¨é€‰é¡¹ -d&lt;ç›®å½•&gt;ï¼š æŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ç›®å½• åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: å°† /home ä¸‹çš„ æ‰€æœ‰æ–‡ä»¶è¿›è¡Œå‹ç¼©æˆ mypackage.zip æ¡ˆä¾‹ 2: å°† mypackge.zip è§£å‹åˆ° /opt/tmp ç›®å½•ä¸‹ 3.7.3 tar æŒ‡ä»¤â€‹ tar æŒ‡ä»¤ æ˜¯æ‰“åŒ…æŒ‡ä»¤ ï¼Œæœ€åæ‰“åŒ…çš„æ–‡ä»¶æ˜¯**.tar.gz** çš„æ–‡ä»¶ åŸºæœ¬è¯­æ³• tar [é€‰é¡¹] XXX.tar.gz æ‰“åŒ…çš„å†…å®¹ ï¼ˆåŠŸèƒ½æè¿°ï¼šæ‰“åŒ…ç›®å½•,å‹ç¼©åçš„æ–‡ä»¶æ ¼å¼.tar.gzï¼‰ é€‰é¡¹è¯´æ˜ åº”ç”¨å®ä¾‹ æ¡ˆä¾‹ 1: å‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼Œ å°† /home/a1.txt å’Œ /home/a2.txt å‹ç¼©æˆ a.tar.gz æ¡ˆä¾‹ 2: å°†/home çš„æ–‡ä»¶å¤¹ å‹ç¼©æˆ myhome.tar.gz æ¡ˆä¾‹ 3: å°† a.tar.gz è§£å‹åˆ°å½“å‰ç›®å½• æ¡ˆä¾‹ 4: å°† myhome.tar.gz è§£å‹åˆ° /opt/ ç›®å½•ä¸‹ ==æŒ‡å®šè§£å‹åˆ°çš„é‚£ä¸ªç›®å½•ï¼Œ äº‹å…ˆè¦å­˜åœ¨æ‰èƒ½æˆåŠŸï¼Œ å¦åˆ™ä¼šæŠ¥é”™ã€‚== ç¬¬å››ç«  ç»„ç®¡ç†å’Œæƒé™ç®¡ç†4.1 Linux ç»„åŸºæœ¬ä»‹ç»â€‹ åœ¨ linux ä¸­çš„æ¯ä¸ªç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œ ä¸èƒ½ç‹¬ç«‹äºç»„å¤–ã€‚ åœ¨ linux ä¸­æ¯ä¸ªæ–‡ä»¶æœ‰æ‰€æœ‰è€…ã€ æ‰€åœ¨ç»„ã€ å…¶å®ƒç»„çš„æ¦‚å¿µã€‚â€‹ 1) æ‰€æœ‰è€…â€‹ 2) æ‰€åœ¨ç»„â€‹ 3) å…¶å®ƒç»„â€‹ 4) æ”¹å˜ç”¨æˆ·æ‰€åœ¨çš„ç»„ 4.2 æ–‡ä»¶/ç›®å½• æ‰€æœ‰è€…4.2.1 æŸ¥çœ‹æ–‡ä»¶çš„æ‰€æœ‰è€… æŒ‡ä»¤ï¼š ls -ahl åº”ç”¨å®ä¾‹ï¼šåˆ›å»ºä¸€ä¸ªç»„ policï¼Œåœ¨åˆ›å»ºä¸€ä¸ªç”¨æˆ· tomï¼Œå°† tom æ”¾åœ¨ polic ç»„ï¼Œç„¶åä½¿ç”¨ tom æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ ok.txt,çœ‹çœ‹æƒ…å†µå¦‚ä½• 4.2.3 ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€… æŒ‡ä»¤ chown ç”¨æˆ·å æ–‡ä»¶å åº”ç”¨å®ä¾‹ è¦æ±‚ï¼š ä½¿ç”¨ root åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ apple.txtï¼Œç„¶åå°†å…¶æ‰€æœ‰è€…ä¿®æ”¹æˆ tom 4.3 ç»„çš„åˆ›å»º4.3.1 åŸºæœ¬æŒ‡ä»¤â€‹ groupadd ç»„å 4.3.2 åº”ç”¨å®ä¾‹â€‹ åˆ›å»ºä¸€ä¸ªç»„ï¼Œmonster â€‹ åˆ›å»ºä¸€ä¸ªç”¨æˆ· fox , å¹¶æ”¾å…¥åˆ° monster ç»„ä¸­ â€‹ 4.4 æ–‡ä»¶/ç›®å½• æ‰€åœ¨ç»„â€‹ å½“æŸä¸ªç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶åï¼Œ é»˜è®¤è¿™ä¸ªæ–‡ä»¶çš„æ‰€åœ¨ç»„å°±æ˜¯è¯¥ç”¨æˆ·æ‰€åœ¨çš„ç»„ã€‚ 4.4.1 æŸ¥çœ‹æ–‡ä»¶/ç›®å½•æ‰€åœ¨ç»„ åŸºæœ¬æŒ‡ä»¤ ls -alh 4.4.2 ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨çš„ç»„ åŸºæœ¬æŒ‡ä»¤ chgrp ç»„å æ–‡ä»¶å åº”ç”¨å®ä¾‹ ä½¿ç”¨ root ç”¨æˆ·åˆ›å»ºæ–‡ä»¶ orange.txt ,çœ‹çœ‹å½“å‰è¿™ä¸ªæ–‡ä»¶å±äºå“ªä¸ªç»„ï¼Œ ç„¶åå°†è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨ç»„ï¼Œ ä¿®æ”¹åˆ° police ç»„ã€‚ 4.5 å…¶å®ƒç»„â€‹ é™¤æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„çš„ç”¨æˆ·å¤–ï¼Œ ç³»ç»Ÿçš„å…¶å®ƒç”¨æˆ·éƒ½æ˜¯æ–‡ä»¶çš„å…¶å®ƒç»„. 4.6 æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„â€‹ åœ¨æ·»åŠ ç”¨æˆ·æ—¶ï¼Œ å¯ä»¥æŒ‡å®šå°†è¯¥ç”¨æˆ·æ·»åŠ åˆ°å“ªä¸ªç»„ä¸­ï¼Œ åŒæ ·çš„ç”¨ root çš„ç®¡ç†æƒé™å¯ä»¥æ”¹å˜æŸä¸ªç”¨æˆ·æ‰€åœ¨çš„ç»„ã€‚ 4.6.1 æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„ â€‹ usermod - g ç»„å ç”¨æˆ·å â€‹ usermod -d ç›®å½•å ç”¨æˆ·å æ”¹å˜è¯¥ç”¨æˆ·ç™»é™†çš„åˆå§‹ç›®å½• 4.6.2 åº”ç”¨å®ä¾‹â€‹ 4.7 æƒé™çš„åŸºæœ¬ä»‹ç»â€‹ ls -l ä¸­æ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹ï¼š â€‹ -rwxrw-râ€“ 1 root root 1213 Feb 2 09:39 abc â€‹ ==0-9 ä½è¯´æ˜== ç¬¬ 0 ä½ç¡®å®šæ–‡ä»¶ç±»å‹(d, -, c, b) ç¬¬ 1-3 ä½ç¡®å®šæ‰€æœ‰è€…ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚ â€”User ç¬¬ 4-6 ä½ç¡®å®šæ‰€å±ç»„ï¼ˆåŒç”¨æˆ·ç»„çš„ï¼‰ æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œ â€”Group ç¬¬ 7-9 ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ â€”Other 4.8 rwx æƒé™çš„è¯¦è§£4.8.1 rwx ä½œç”¨åˆ°æ–‡ä»¶ [ r ]ä»£è¡¨å¯è¯»(read): å¯ä»¥è¯»å–,æŸ¥çœ‹ [ w ]ä»£è¡¨å¯å†™(write): å¯ä»¥ä¿®æ”¹,ä½†æ˜¯ä¸ä»£è¡¨å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶,åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„å‰ææ¡ä»¶æ˜¯å¯¹è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•æœ‰å†™æƒé™ï¼Œ æ‰èƒ½åˆ é™¤è¯¥æ–‡ä»¶ [ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¢«æ‰§è¡Œ 4.8.2 rwx ä½œç”¨åˆ°ç›®å½• [ r ]ä»£è¡¨å¯è¯»(read): å¯ä»¥è¯»å–ï¼Œ ls æŸ¥çœ‹ç›®å½•å†…å®¹ [ w ]ä»£è¡¨å¯å†™(write): å¯ä»¥ä¿®æ”¹,ç›®å½•å†…åˆ›å»º+åˆ é™¤+é‡å‘½åç›®å½• [ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¿›å…¥è¯¥ç›®å½• 4.9 æ–‡ä»¶åŠç›®å½•æƒé™çš„å®é™…æ¡ˆä¾‹â€‹ ls -l ä¸­æ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹ï¼š ==(è®°ä½)== â€‹ -rwxrw-râ€“ 1 root root 1213 Feb 2 09:39 abc 10 ä¸ªå­—ç¬¦ç¡®å®šä¸åŒç”¨æˆ·èƒ½å¯¹æ–‡ä»¶å¹²ä»€ä¹ˆ â€‹ ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨æ–‡ä»¶ç±»å‹ï¼š æ–‡ä»¶ (-),ç›®å½•(d),é“¾æ¥(l)â€‹ å…¶ä½™å­—ç¬¦æ¯ 3 ä¸ªä¸€ç»„(rwx) è¯»(r) å†™(w) æ‰§è¡Œ(x)â€‹ ç¬¬ä¸€ç»„ rwx : æ–‡ä»¶æ‹¥æœ‰è€…çš„æƒé™æ˜¯è¯»ã€ å†™å’Œæ‰§è¡Œâ€‹ ç¬¬äºŒç»„ rw- : ä¸æ–‡ä»¶æ‹¥æœ‰è€…åŒä¸€ç»„çš„ç”¨æˆ·çš„æƒé™æ˜¯è¯»ã€ å†™ä½†ä¸èƒ½æ‰§è¡Œâ€‹ ç¬¬ä¸‰ç»„ râ€“ : ä¸ä¸æ–‡ä»¶æ‹¥æœ‰è€…åŒç»„çš„å…¶ä»–ç”¨æˆ·çš„æƒé™æ˜¯è¯»ä¸èƒ½å†™å’Œæ‰§è¡Œ å¯ç”¨æ•°å­—è¡¨ç¤ºä¸º: r=4,w=2,x=1 å› æ­¤ rwx=4+2+1=7 1 æ–‡ä»¶ï¼š ç¡¬è¿æ¥æ•°æˆ– ç›®å½•ï¼š å­ç›®å½•æ•° root ç”¨æˆ· root ç»„ 1213 æ–‡ä»¶å¤§å°(å­—èŠ‚)ï¼Œ å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œ æ˜¾ç¤º 4096 å­—èŠ‚ Feb 2 09:39 æœ€åä¿®æ”¹æ—¥æœŸ abc æ–‡ä»¶å 4.10. ä¿®æ”¹æƒé™-chmod4.10.1 åŸºæœ¬è¯´æ˜â€‹ é€šè¿‡ chmod æŒ‡ä»¤ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æƒé™ 4.10.2 ç¬¬ä¸€ç§æ–¹å¼ï¼š + ã€-ã€= å˜æ›´æƒé™â€‹ u ï¼š æ‰€æœ‰è€… g: æ‰€æœ‰ç»„ o:å…¶ä»–äºº a:æ‰€æœ‰äººï¼ˆuã€gã€o çš„æ€»å’Œï¼‰ chmod u= rwx , g = rx , o=x æ–‡ä»¶ç›®å½•å chmod o+w æ–‡ä»¶ç›®å½•å chmod a-x æ–‡ä»¶ç›®å½•å æ¡ˆä¾‹æ¼”ç¤º ç»™ abc æ–‡ä»¶ çš„==æ‰€æœ‰è€…è¯»å†™æ‰§è¡Œçš„æƒé™==ï¼Œ ç»™==æ‰€åœ¨ç»„è¯»æ‰§è¡Œæƒé™==ï¼Œ ç»™å…¶å®ƒç»„è¯»æ‰§è¡Œæƒé™ã€‚ ç»™ abc æ–‡ä»¶çš„æ‰€æœ‰è€…é™¤å»æ‰§è¡Œçš„æƒé™ï¼Œ å¢åŠ ç»„å†™çš„æƒé™ 4.10.3 ç¬¬äºŒç§æ–¹å¼ï¼š é€šè¿‡æ•°å­—å˜æ›´æƒé™â€‹ è§„åˆ™ï¼š â€‹ r=4 w=2 x=1 rwx=4+2+1=7 â€‹ chmod u=rwx,g=rx,o=x æ–‡ä»¶ç›®å½•å â€‹ ç›¸å½“äº chmod 751 æ–‡ä»¶ç›®å½•å æ¡ˆä¾‹æ¼”ç¤º è¦æ±‚ï¼š å°† /home/abc.txt æ–‡ä»¶çš„æƒé™ä¿®æ”¹æˆ rwxr-xr-x, ä½¿ç”¨ç»™æ•°å­—çš„æ–¹å¼å®ç°ï¼š rwx = 4+2+1 = 7 r-x = 4+1=5 r-x = 4+1 =5 4.11 ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…-chown4.11.1 åŸºæœ¬ä»‹ç»â€‹ chown newowner file æ”¹å˜æ–‡ä»¶çš„æ‰€æœ‰è€… â€‹ chown newowner:newgroup file æ”¹å˜ç”¨æˆ·çš„æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„ â€‹ -R å¦‚æœæ˜¯ç›®å½• åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰çš„å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ 4.11.2 æ¡ˆä¾‹æ¼”ç¤ºâ€‹ 1. è¯·å°† /home/abc .txt æ–‡ä»¶çš„æ‰€æœ‰è€…ä¿®æ”¹æˆ tom â€‹ 2. è¯·å°† /home/kkk ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰è€…éƒ½ä¿®æ”¹æˆ tom ![image-20200714123616286](https://gitee.com/oy_chart_bed/no1_drawing_bed/raw/master/20200714123617.png) 4.12 ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„-chgrp4.12.1 åŸºæœ¬ä»‹ç»â€‹ chgrp newgroup file æ”¹å˜æ–‡ä»¶çš„æ‰€æœ‰ç»„ 4.12.2 æ¡ˆä¾‹æ¼”ç¤ºâ€‹ 1.è¯·å°† /home/abc .txt æ–‡ä»¶çš„æ‰€åœ¨ç»„ä¿®æ”¹æˆ bandit (åœŸåŒª) â€‹ â€‹ 2**.è¯·å°† /home/kkk ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•çš„æ‰€åœ¨ç»„éƒ½ä¿®æ”¹æˆ bandit(åœŸåŒª)** â€‹ 4.13 å®æˆ˜ç»ƒä¹ é¢˜ç›®ï¼š æœ€ä½³å®è·µ-è­¦å¯Ÿå’ŒåœŸåŒªæ¸¸æˆ â€‹ police ï¼Œ bandit â€‹ jack, jerry: è­¦å¯Ÿâ€‹ xh, xq: åœŸåŒª (1) åˆ›å»ºç»„ (2) åˆ›å»ºç”¨æˆ· åŒæ—¶ç»™ 4 ä¸ªç”¨æˆ·è®¾ç½®å¯†ç ï¼šï¼ˆç¤ºä¾‹ï¼‰ â€‹ (3) jack åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œ è‡ªå·±å¯ä»¥è¯»å†™ï¼Œ æœ¬ç»„äººå¯ä»¥è¯»ï¼Œ å…¶å®ƒç»„æ²¡äººä»»ä½•æƒé™ (4) jack ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œ è®©å…¶å®ƒç»„äººå¯ä»¥è¯», æœ¬ç»„äººå¯ä»¥è¯»å†™ (5) xh æŠ•é  è­¦å¯Ÿï¼Œ çœ‹çœ‹æ˜¯å¦å¯ä»¥è¯»å†™. å…ˆç”¨ root ä¿®æ”¹ xh çš„ç»„ ï¼š ä½¿ç”¨ jack ç»™ä»–çš„å®¶ç›®å½• /home/jack çš„æ‰€åœ¨ç»„ä¸€ä¸ª rx çš„æƒé™ xh éœ€è¦é‡æ–°æ³¨é”€åœ¨åˆ° jack ç›®å½•å°±å¯ä»¥æ“ä½œ jack çš„æ–‡ä»¶ ç¬¬äº”ç«  crond ä»»åŠ¡è°ƒåº¦5.1 åŸç†ç¤ºæ„å›¾ crontab è¿›è¡Œ å®šæ—¶ä»»åŠ¡çš„è®¾ç½® 5.2 åŸºæœ¬è¯­æ³•â€‹ crontab [é€‰é¡¹] 5.2.1 å¸¸ç”¨é€‰é¡¹ 5.3 å¿«é€Ÿå…¥é—¨5.3.1 ä»»åŠ¡çš„è¦æ±‚â€‹ è®¾ç½®ä»»åŠ¡çš„è°ƒåº¦æ–‡ä»¶ï¼š /ect/crontab â€‹ è®¾ç½®ä¸ªäººä»»åŠ¡è°ƒåº¦ã€‚æ‰§è¡Œ crontab -e å‘½ä»¤ â€‹ æ¥ç€è¾“å…¥ä»»åŠ¡åˆ°è°ƒåº¦æ–‡ä»¶ â€‹ å¦‚ï¼š _/1 _ * * * ls â€“ l /etc/ &gt; /tmp/to.txtâ€‹ æ„æ€è¯´æ¯å°æ—¶çš„æ¯åˆ†é’Ÿæ‰§è¡Œ ls â€“ l /etc/ &gt; /tmp/to.txt å‘½ä»¤ 5.3.2 æ­¥éª¤å¦‚ä¸‹ cron -e _/ 1 _ * * * ls -l /etc &gt;&gt; /tmp/to.txt ä¿å­˜é€€å‡ºå°±ä¼šå¯åŠ¨ç¨‹åºã€‚ åœ¨æ¯ä¸€åˆ†é’Ÿéƒ½ä¼šè‡ªåŠ¨ä¿å­˜çš„è°ƒç”¨ ls -l /etc &gt;&gt; /tmp/to.txt 5.3.3 å‚æ•°ç»†èŠ‚è¯´æ˜ 5ä¸ªå ä½ç¬¦çš„è¯´æ˜ ç‰¹æ®Šç¬¦å·è¯´æ˜ ç‰¹å®šæ—¶é—´æ‰§è¡Œä»»åŠ¡æ¡ˆä¾‹ 5.4 ä»»åŠ¡è°ƒåº¦çš„å‡ ä¸ªä½¿ç”¨æ¡ˆä¾‹5.4.1 æ¡ˆä¾‹ 1ï¼šæ¯éš” 1 åˆ†é’Ÿï¼Œå°±å°†å½“å‰çš„æ—¥æœŸä¿¡æ¯ï¼Œè¿½åŠ åˆ°/tmp/mydate æ–‡ä»¶ä¸­ å…ˆç¼–å†™ä¸€ä¸ªæ–‡ä»¶ /home/mytask1.shdate &gt;&gt; /tmp/mydate ç»™ mytask1.sh ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæƒé™chmod 744 /home/mytask1.sh crontab -e _/1 _ * * * /home/mytask1.sh æˆåŠŸ 5.4.2 æ¡ˆä¾‹ 2ï¼šæ¯éš” 1 åˆ†é’Ÿï¼Œ å°†å½“å‰æ—¥æœŸå’Œæ—¥å†éƒ½è¿½åŠ åˆ° /home/mycal æ–‡ä»¶ä¸­ 1.å…ˆç¼–å†™ä¸€ä¸ªæ–‡ä»¶ /home/mytask2.shdate &gt;&gt; /tmp/mycalcal &gt;&gt; /tmp/mycal ç»™ mytask1.sh ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæƒé™chmod 744 /home/mytask2.sh crontab -e _/1 _ * * * /home/mytask2.sh æˆåŠŸ 5.4.3 æ¡ˆä¾‹ 3:æ¯å¤©å‡Œæ™¨ 2:00 å°† mysql æ•°æ®åº“ testdb ï¼Œ å¤‡ä»½åˆ°æ–‡ä»¶ä¸­ mydb.bakã€‚ å…ˆç¼–å†™ä¸€ä¸ªæ–‡ä»¶ /home/mytask3.sh/usr/local/mysql/bin/mysqldump -u root -proot testdb &gt; /tmp/mydb.bak ç»™ mytask3.sh ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæƒé™chmod 744 /home/mytask3.sh crontab -e 0 2 * * * /home/mytask3.sh æˆåŠŸ 5.5 crond ç›¸å…³æŒ‡ä»¤ crontab -r : ç»ˆæ­¢ä»»åŠ¡è°ƒåº¦ã€‚ crontab -l : åˆ—å‡ºå½“å‰æœ‰å“ªäº›ä»»åŠ¡è°ƒåº¦ service crond restart : [é‡å¯ä»»åŠ¡è°ƒåº¦] ç¬¬å…­ç«  Linux ç£ç›˜åˆ†åŒºã€æŒ‚è½½6.1 åˆ†åŒºåŸºç¡€çŸ¥è¯†6.1.1 åˆ†åŒºçš„æ–¹å¼mbr åˆ†åŒº æœ€å¤šæ”¯æŒå››ä¸ªä¸»åˆ†åŒº ç³»ç»Ÿåªèƒ½å®‰è£…åœ¨ä¸»åˆ†åŒº æ‰©å±•åˆ†åŒºè¦å ä¸€ä¸ªä¸»åˆ†åŒº MBR æœ€å¤§åªæ”¯æŒ 2TBï¼Œ ä½†æ‹¥æœ‰æœ€å¥½çš„å…¼å®¹æ€§ gtp åˆ†åŒº æ”¯æŒæ— é™å¤šä¸ªä¸»åˆ†åŒºï¼ˆä½†æ“ä½œç³»ç»Ÿå¯èƒ½é™åˆ¶ï¼Œ æ¯”å¦‚ windows ä¸‹æœ€å¤š 128 ä¸ªåˆ†åŒºï¼‰ æœ€å¤§æ”¯æŒ 18EB çš„å¤§å®¹é‡ï¼ˆ1EB=1024 PBï¼Œ 1PB=1024 TB ï¼‰ windows7 64 ä½ä»¥åæ”¯æŒ gtp 6.2 Linux åˆ†åŒº6.2.1 åŸç†ä»‹ç» Linux æ¥è¯´æ— è®ºæœ‰å‡ ä¸ªåˆ†åŒºï¼Œ åˆ†ç»™å“ªä¸€ç›®å½•ä½¿ç”¨ï¼Œ å®ƒå½’æ ¹ç»“åº•å°±åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œ ä¸€ä¸ªç‹¬ç«‹ä¸”å”¯ä¸€çš„æ–‡ä»¶ç»“æ„ , Linux ä¸­æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ç”¨æ¥ç»„æˆæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚ Linux é‡‡ç”¨äº†ä¸€ç§å«â€œè½½å…¥â€ çš„å¤„ç†æ–¹æ³•ï¼Œ å®ƒçš„æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­åŒ…å«äº†ä¸€æ•´å¥—çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¸”å°†ä¸€ä¸ªåˆ†åŒºå’Œä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ã€‚ è¿™æ—¶è¦è½½å…¥çš„ä¸€ä¸ªåˆ†åŒºå°†ä½¿å®ƒçš„å­˜å‚¨ç©ºé—´åœ¨ä¸€ä¸ªç›®å½•ä¸‹è·å¾—ã€‚ ç¤ºæ„å›¾ï¼š 6.2.2 ç¡¬ç›˜è¯´æ˜ Linux ç¡¬ç›˜åˆ† IDE ç¡¬ç›˜å’Œ SCSI ç¡¬ç›˜ï¼Œ ç›®å‰åŸºæœ¬ä¸Šæ˜¯ SCSI ç¡¬ç›˜ å¯¹äº IDE ç¡¬ç›˜ï¼Œ é©±åŠ¨å™¨æ ‡è¯†ç¬¦ä¸ºâ€œhdxâ€,å…¶ä¸­â€œhdâ€è¡¨æ˜åˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹ï¼Œ è¿™é‡Œæ˜¯æŒ‡ IDE ç¡¬ç›˜äº†ã€‚ â€œxâ€ä¸ºç›˜å·ï¼ˆa ä¸ºåŸºæœ¬ç›˜ï¼Œ b ä¸ºåŸºæœ¬ä»å±ç›˜ï¼Œ c ä¸ºè¾…åŠ©ä¸»ç›˜ï¼Œ d ä¸ºè¾…åŠ©ä»å±ç›˜ï¼‰ ,â€œâ€ä»£è¡¨åˆ†åŒºï¼Œå‰å››ä¸ªåˆ†åŒºç”¨æ•°å­— 1 åˆ° 4 è¡¨ç¤ºï¼Œ å®ƒä»¬æ˜¯ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºï¼Œ ä» 5 å¼€å§‹å°±æ˜¯é€»è¾‘åˆ†åŒºã€‚ ä¾‹ï¼Œ hda3 è¡¨ç¤ºä¸ºç¬¬ä¸€ä¸ª IDE ç¡¬ç›˜ä¸Šçš„ç¬¬ä¸‰ä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒº,hdb2 è¡¨ç¤ºä¸ºç¬¬äºŒä¸ª IDE ç¡¬ç›˜ä¸Šçš„ç¬¬äºŒä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºã€‚ å¯¹äº SCSI ç¡¬ç›˜åˆ™æ ‡è¯†ä¸ºâ€œsdx~â€ï¼Œ SCSI ç¡¬ç›˜æ˜¯ç”¨â€œsdâ€æ¥è¡¨ç¤ºåˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹çš„ï¼Œ å…¶ä½™åˆ™å’Œ IDE ç¡¬ç›˜çš„è¡¨ç¤ºæ–¹æ³•ä¸€æ ·ã€‚ 6.2.3 ä½¿ç”¨ lsblk æŒ‡ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„åˆ†åŒºæƒ…å†µ 6.3 æŒ‚è½½çš„ç»å…¸æ¡ˆä¾‹éœ€æ±‚æ˜¯ç»™æˆ‘ä»¬çš„ Linux ç³»ç»Ÿå¢åŠ ä¸€ä¸ªæ–°çš„ç¡¬ç›˜ï¼Œ å¹¶ä¸”æŒ‚è½½åˆ°/home/newdisk 6.3.1 å¦‚ä½•å¢åŠ ä¸€å—ç¡¬ç›˜ è™šæ‹Ÿæœºæ·»åŠ ç¡¬ç›˜ åˆ†åŒº fdisk /dev/sdb æ ¼å¼åŒ– mkfs -t ext4 /dev/sdb1 æŒ‚è½½ å…ˆåˆ›å»ºä¸€ä¸ª /home/newdisk , æŒ‚è½½ mount /dev/sdb1 /home/newdisk è®¾ç½®å¯ä»¥è‡ªåŠ¨æŒ‚è½½(æ°¸ä¹…æŒ‚è½½ï¼Œ å½“ä½ é‡å¯ç³»ç»Ÿï¼Œ ä»ç„¶å¯ä»¥æŒ‚è½½åˆ° /home/newdisk) ã€‚ vim /etc/fstab/dev/sdb1 /home/newdisk ext4 defaults 0 0 6.4 å…·ä½“çš„æ“ä½œæ­¥éª¤æ•´ç†6.4.1 è™šæ‹Ÿæœºå¢åŠ ç¡¬ç›˜æ­¥éª¤ 1â€‹ åœ¨ã€è™šæ‹Ÿæœºã€‘ èœå•ä¸­ï¼Œ é€‰æ‹©ã€è®¾ç½®ã€‘ ï¼Œ ç„¶åè®¾å¤‡åˆ—è¡¨é‡Œæ·»åŠ ç¡¬ç›˜ï¼Œ ç„¶åä¸€è·¯ã€ä¸‹ä¸€æ­¥ã€‘ ï¼Œ ä¸­é—´åªé€‰æ‹©ç£ç›˜å¤§å°çš„åœ°æ–¹éœ€è¦ä¿®æ”¹ï¼Œ è‡³åˆ°å®Œæˆã€‚ ç„¶åé‡å¯ç³»ç»Ÿï¼ˆæ‰èƒ½è¯†åˆ«ï¼‰ ï¼ 6.4.2 è™šæ‹Ÿæœºå¢åŠ ç¡¬ç›˜æ­¥éª¤ 2â€‹ åˆ†åŒºå‘½ä»¤ fdisk /dev/sdbâ€‹ å¼€å§‹å¯¹/sdb åˆ†åŒºâ€‹ â€¢m æ˜¾ç¤ºå‘½ä»¤åˆ—è¡¨â€‹ â€¢p æ˜¾ç¤ºç£ç›˜åˆ†åŒº åŒ fdisk â€“ lâ€‹ â€¢n æ–°å¢åˆ†åŒºâ€‹ â€¢d åˆ é™¤åˆ†åŒºâ€‹ â€¢w å†™å…¥å¹¶é€€å‡º **==è¯´æ˜ï¼š==**å¼€å§‹åˆ†åŒºåè¾“å…¥ nï¼Œ æ–°å¢åˆ†åŒºï¼Œ ç„¶åé€‰æ‹© p ï¼Œ åˆ†åŒºç±»å‹ä¸ºä¸»åˆ†åŒºã€‚ ä¸¤æ¬¡å›è½¦é»˜è®¤å‰©ä½™å…¨éƒ¨ç©ºé—´ã€‚ æœ€åè¾“å…¥ w å†™å…¥åˆ†åŒºå¹¶é€€å‡ºï¼Œ è‹¥ä¸ä¿å­˜é€€å‡ºè¾“å…¥ qã€‚ 6.4.3 è™šæ‹Ÿæœºå¢åŠ ç¡¬ç›˜æ­¥éª¤ 3â€‹ æ ¼å¼åŒ–ç£ç›˜ â€‹ åˆ†åŒºå‘½ä»¤:mkfs -t ext4 /dev/sdb1â€‹ å…¶ä¸­ ext4 æ˜¯åˆ†åŒºç±»å‹ 6.4.4 è™šæ‹Ÿæœºå¢åŠ ç¡¬ç›˜æ­¥éª¤ 4â€‹ æŒ‚è½½: å°†ä¸€ä¸ªåˆ†åŒºä¸ä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ï¼Œâ€‹ â€¢mount è®¾å¤‡åç§° æŒ‚è½½ç›®å½•â€‹ â€¢ä¾‹å¦‚ï¼š mount /dev/sdb1 /newdiskâ€‹ â€¢==umount è®¾å¤‡åç§° æˆ–è€… æŒ‚è½½ç›®å½•== 6.4.5 è™šæ‹Ÿæœºå¢åŠ ç¡¬ç›˜æ­¥éª¤ 5â€‹ æ°¸ä¹…æŒ‚è½½: é€šè¿‡ä¿®æ”¹/etc/fstab å®ç°æŒ‚è½½â€‹ æ·»åŠ å®Œæˆå æ‰§è¡Œ mount â€“ a å³åˆ»ç”Ÿæ•ˆ 6.5 ç£ç›˜æƒ…å†µæŸ¥è¯¢6.5.1 æŸ¥è¯¢ç³»ç»Ÿæ•´ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µ åŸºæœ¬è¯­æ³• df -h åº”ç”¨å®ä¾‹ æŸ¥è¯¢ç³»ç»Ÿæ•´ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µ 6.5.2 æŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µ åŸºæœ¬è¯­æ³• du -h / ç›®å½• æŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µï¼Œ é»˜è®¤ä¸ºå½“å‰ç›®å½• æŒ‡ä»¤ æè¿° -s æŒ‡å®šç›®å½•å ç”¨å¤§å°æ±‡æ€» -h å¸¦è®¡é‡å•ä½ -a å«æ–‡ä»¶ â€“max-depth=1 å­ç›®å½•æ·±åº¦ -c åˆ—å‡ºæ˜ç»†çš„åŒæ—¶ï¼Œ å¢åŠ æ±‡æ€»å€¼ 6.6 ç£ç›˜æƒ…å†µ-å·¥ä½œå®ç”¨æŒ‡ä»¤ ç»Ÿè®¡/home æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•° ç»Ÿè®¡/home æ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•° ç»Ÿè®¡/home æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼Œ åŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œçš„ ç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•°ï¼Œ åŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œçš„ ä»¥æ ‘çŠ¶æ˜¾ç¤ºç›®å½•ç»“æ„ ï¼ˆCenOS 7ï¼‰ ç¬¬ä¸ƒç«  ç½‘ç»œé…ç½®7.1 Linux ç½‘ç»œé…ç½®åŸç†å›¾(å«è™šæ‹Ÿæœº)ç›®å‰æˆ‘ä»¬çš„ç½‘ç»œé…ç½®é‡‡ç”¨çš„æ˜¯ NATã€‚ 7.2 æŸ¥çœ‹ç½‘ç»œ IP å’Œç½‘å…³7.2.1 æŸ¥çœ‹è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ 7.2.2 ä¿®æ”¹ ip åœ°å€(ä¿®æ”¹è™šæ‹Ÿç½‘ç»œçš„ ip) 7.2.3 æŸ¥çœ‹ç½‘å…³ 7.2.4 æŸ¥çœ‹ windows ç¯å¢ƒçš„ä¸­ VMnet8 ç½‘ç»œé…ç½® (ipconfig æŒ‡ä»¤) ä½¿ç”¨ ipconfig æŸ¥çœ‹ ç•Œé¢æŸ¥çœ‹ 7.3 ping æµ‹è¯•ä¸»æœºä¹‹é—´ç½‘ç»œè¿é€š7.3.1 åŸºæœ¬è¯­æ³•â€‹ ping ç›®çš„ä¸»æœº ï¼ˆåŠŸèƒ½æè¿°ï¼š æµ‹è¯•å½“å‰æœåŠ¡å™¨æ˜¯å¦å¯ä»¥è¿æ¥ç›®çš„ä¸»æœºï¼‰ 7.3.2 åº”ç”¨å®ä¾‹â€‹ æµ‹è¯•å½“å‰æœåŠ¡å™¨æ˜¯å¦å¯ä»¥è¿æ¥ç™¾åº¦ â€‹ 7.4 linux ç½‘ç»œç¯å¢ƒé…ç½®7.4.1 æŒ‡å®šå›ºå®šçš„ ipè¯´æ˜ â€‹ ç›´ æ¥ ä¿® æ”¹ é… ç½® æ–‡ ä»¶ æ¥ æŒ‡ å®š IP, å¹¶ å¯ ä»¥ è¿ æ¥ åˆ° å¤– ç½‘ ( ç¨‹ åº å‘˜ æ¨ è ) ï¼Œ ç¼– è¾‘ 1vi /etc/sysconfig/network-scripts/ifcfg-eth0 è¦æ±‚ï¼š å°† ip åœ°å€é…ç½®çš„é™æ€çš„ï¼Œ ip åœ°å€ä¸º 192.168.184.130 (IP åœ°å€å‚çœ‹è‡ªå·±çš„) 1ifconfig //åœ¨Linuxç»ˆç«¯å³å¯æŸ¥çœ‹ ä¿®æ”¹åï¼Œ ä¸€å®šè¦ ==é‡å¯æœåŠ¡== 1service network restart 1reboot é‡å¯ç³»ç»Ÿ ç¬¬å…«ç«  è¿›ç¨‹ç®¡ç†8.1 æ˜¾ç¤ºç³»ç»Ÿæ‰§è¡Œçš„è¿›ç¨‹8.1.1 è¯´æ˜â€‹ æŸ¥çœ‹è¿›è¡Œä½¿ç”¨çš„æŒ‡ä»¤æ˜¯ ps ,ä¸€èˆ¬æ¥è¯´ä½¿ç”¨çš„å‚æ•°æ˜¯ ps -aux â€‹ 8.1.2 ps æŒ‡ä»¤è¯¦è§£ æŒ‡ä»¤ï¼š ps â€“ aux|grep xxx ï¼Œ æ¯”å¦‚æˆ‘çœ‹çœ‹æœ‰æ²¡æœ‰ sshd æœåŠ¡ æŒ‡ä»¤è¯´æ˜ æŒ‡ä»¤ æè¿° System V å±•ç¤ºé£æ ¼ USER ç”¨æˆ·åç§° PID è¿›ç¨‹å· %CPU è¿›ç¨‹å ç”¨ CPU çš„ç™¾åˆ†æ¯” %MEM è¿›ç¨‹å ç”¨ç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯” VSZ è¿›ç¨‹å ç”¨çš„è™šæ‹Ÿå†…å­˜å¤§å°ï¼ˆå•ä½ï¼š KBï¼‰ RSS è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜å¤§å°ï¼ˆå•ä½ï¼š KBï¼‰ TT ç»ˆç«¯åç§°,ç¼©å†™ STAT è¿›ç¨‹çŠ¶æ€ï¼Œ å…¶ä¸­ S-ç¡çœ ï¼Œ s-è¡¨ç¤ºè¯¥è¿›ç¨‹æ˜¯ä¼šè¯çš„å…ˆå¯¼è¿›ç¨‹ï¼Œ N-è¡¨ç¤ºè¿›ç¨‹æ‹¥æœ‰æ¯”æ™®é€šä¼˜å…ˆçº§æ›´ä½çš„ä¼˜å…ˆçº§ï¼Œ R-æ­£åœ¨è¿è¡Œï¼Œ D-çŸ­æœŸç­‰å¾…ï¼Œ Z-åƒµæ­»è¿›ç¨‹ï¼Œ T-è¢«è·Ÿè¸ªæˆ–è€…è¢«åœæ­¢ç­‰ç­‰ STARTED è¿›ç¨‹çš„å¯åŠ¨æ—¶é—´ TIME CPU æ—¶é—´ï¼Œ å³è¿›ç¨‹ä½¿ç”¨ CPU çš„æ€»æ—¶é—´ COMMAND å¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•°ï¼Œ å¦‚æœè¿‡é•¿ä¼šè¢«æˆªæ–­æ˜¾ç¤º 8.1.3 åº”ç”¨å®ä¾‹ è¦æ±‚ï¼š ä»¥å…¨æ ¼å¼æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„è¿›ç¨‹ï¼Œ æŸ¥çœ‹è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚ 12ps -ef æ˜¯ä»¥å…¨æ ¼å¼æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„è¿›ç¨‹-e æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ã€‚ -f å…¨æ ¼å¼ ps -ef| grep xxx æ˜¯ BSD é£æ ¼ æ–¹æ³• æè¿° UID ç”¨æˆ· ID PID è¿›ç¨‹ ID PPID çˆ¶è¿›ç¨‹ ID C CPU ç”¨äºè®¡ç®—æ‰§è¡Œä¼˜å…ˆçº§çš„å› å­ã€‚ æ•°å€¼è¶Šå¤§ï¼Œ è¡¨æ˜è¿›ç¨‹æ˜¯ CPU å¯†é›†å‹è¿ç®—ï¼Œ æ‰§è¡Œä¼˜å…ˆçº§ä¼šé™ä½ï¼› æ•°å€¼è¶Šå°ï¼Œ è¡¨æ˜è¿›ç¨‹æ˜¯ I/O å¯†é›†å‹è¿ç®—ï¼Œ æ‰§è¡Œä¼˜å…ˆçº§ä¼šæé«˜ STIME è¿›ç¨‹å¯åŠ¨çš„æ—¶é—´ TTY å®Œæ•´çš„ç»ˆç«¯åç§° TIME CPU æ—¶é—´ CMD å¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•° è¦æ±‚ï¼šæŸ¥çœ‹ sshd è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å·æ˜¯å¤šå°‘ï¼Œ åº”è¯¥æ€æ ·æŸ¥è¯¢ 8.2 ç»ˆæ­¢è¿›ç¨‹ kill å’Œ killall8.2.1 ä»‹ç»:â€‹ è‹¥æ˜¯æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€åŠéœ€è¦åœæ­¢æ—¶ï¼Œ æˆ–æ˜¯å·²æ¶ˆäº†å¾ˆå¤§çš„ç³»ç»Ÿèµ„æºæ—¶ï¼Œ æ­¤æ—¶å¯ä»¥è€ƒè™‘åœæ­¢è¯¥è¿›ç¨‹ã€‚ä½¿ç”¨ kill å‘½ä»¤æ¥å®Œæˆæ­¤é¡¹ä»»åŠ¡ã€‚ 8.2.1 åŸºæœ¬è¯­æ³•â€‹ kill [é€‰é¡¹] è¿›ç¨‹å·ï¼ˆåŠŸèƒ½æè¿°ï¼š é€šè¿‡è¿›ç¨‹å·æ€æ­»è¿›ç¨‹ï¼‰ â€‹ killall è¿›ç¨‹åç§° ï¼ˆåŠŸèƒ½æè¿°ï¼š é€šè¿‡è¿›ç¨‹åç§°æ€æ­»è¿›ç¨‹ï¼Œ ä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼Œ è¿™åœ¨ç³»ç»Ÿå› è´Ÿè½½è¿‡å¤§è€Œå˜å¾—å¾ˆæ…¢æ—¶å¾ˆæœ‰ç”¨ï¼‰ 8.2.2 å¸¸ç”¨é€‰é¡¹â€‹ -9 :è¡¨ç¤ºå¼ºè¿«è¿›ç¨‹ç«‹å³åœæ­¢ 8.2.3 æœ€ä½³å®è·µâ€‹ æ¡ˆä¾‹ 1ï¼š è¸¢æ‰æŸä¸ªéæ³•ç™»å½•ç”¨æˆ· â€‹ æ¡ˆä¾‹ 2: ç»ˆæ­¢è¿œç¨‹ç™»å½•æœåŠ¡ sshd, åœ¨é€‚å½“æ—¶å€™å†æ¬¡é‡å¯ sshd æœåŠ¡ â€‹ â€‹ æ¡ˆä¾‹ 3: ç»ˆæ­¢å¤šä¸ª gedit ç¼–è¾‘å™¨ ã€killall , é€šè¿‡è¿›ç¨‹åç§°æ¥ç»ˆæ­¢è¿›ç¨‹ã€‘ â€‹ æ¡ˆä¾‹ 4ï¼š å¼ºåˆ¶æ€æ‰ä¸€ä¸ªç»ˆç«¯ 8.3 æŸ¥çœ‹è¿›ç¨‹æ ‘ pstree8.3.1 åŸºæœ¬è¯­æ³•â€‹ pstree [é€‰é¡¹] ,å¯ä»¥æ›´åŠ ç›´è§‚çš„æ¥çœ‹è¿›ç¨‹ä¿¡æ¯ 8.3.2 å¸¸ç”¨é€‰é¡¹â€‹ -p :æ˜¾ç¤ºè¿›ç¨‹çš„ PID â€‹ -u :æ˜¾ç¤ºè¿›ç¨‹çš„æ‰€å±ç”¨æˆ· 8.3.3 åº”ç”¨å®ä¾‹â€‹ æ¡ˆä¾‹ 1ï¼š è¯·ä½ æ ‘çŠ¶çš„å½¢å¼æ˜¾ç¤ºè¿›ç¨‹çš„ pid â€‹ â€‹ æ¡ˆä¾‹ 2ï¼š è¯·ä½ æ ‘çŠ¶çš„å½¢å¼è¿›ç¨‹çš„ç”¨æˆ· id â€‹ 8.4 æœåŠ¡(Service)ç®¡ç†8.4.1 ä»‹ç»â€‹ æœåŠ¡(service) æœ¬è´¨å°±æ˜¯è¿›ç¨‹ï¼Œ ä½†æ˜¯æ˜¯è¿è¡Œåœ¨åå°çš„ï¼Œ é€šå¸¸éƒ½ä¼šç›‘å¬æŸä¸ªç«¯å£ï¼Œ ç­‰å¾…å…¶å®ƒç¨‹åºçš„è¯·æ±‚ï¼Œ æ¯”å¦‚(mysql , sshd é˜²ç«å¢™ç­‰)ï¼Œ å› æ­¤æˆ‘ä»¬åˆç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œ æ˜¯ Linux ä¸­éå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚ ã€åŸç†å›¾ã€‘ 8.4.2 service ç®¡ç†æŒ‡ä»¤â€‹ service æœåŠ¡å [start | stop | restart | reload | status] â€‹ åœ¨ CentOS7.0 å ä¸å†ä½¿ç”¨ service ,è€Œæ˜¯ systemctl 8.4.3 ä½¿ç”¨æ¡ˆä¾‹==CentOS 7== ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526# æŸ¥çœ‹firewallæœåŠ¡çŠ¶æ€systemctl status firewalld# å¼€å¯service firewalld start# é‡å¯service firewalld restart# å…³é—­service firewalld stop# æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™firewall-cmd --list-all# æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾firewall-cmd --query-port=8080/tcp# å¼€æ”¾80ç«¯å£firewall-cmd --permanent --add-port=80/tcp# ç§»é™¤ç«¯å£firewall-cmd --permanent --remove-port=8080/tcp#é‡å¯é˜²ç«å¢™(ä¿®æ”¹é…ç½®åè¦é‡å¯é˜²ç«å¢™)firewall-cmd --reload# å‚æ•°è§£é‡Š1ã€firwall-cmdï¼šæ˜¯Linuxæä¾›çš„æ“ä½œfirewallçš„ä¸€ä¸ªå·¥å…·ï¼›2ã€--permanentï¼šè¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…ï¼›3ã€--add-portï¼šæ ‡è¯†æ·»åŠ çš„ç«¯å£ï¼› æŸ¥çœ‹å½“å‰é˜²ç«å¢™çš„çŠ¶å†µï¼Œ å…³é—­é˜²ç«å¢™å’Œé‡å¯é˜²ç«å¢™ã€‚ ==CenOS 6:== 8.4.4 ç»†èŠ‚è®¨è®º å…³é—­æˆ–è€…å¯ç”¨é˜²ç«å¢™åï¼Œ ç«‹å³ç”Ÿæ•ˆã€‚ [telnet æµ‹è¯• æŸä¸ªç«¯å£å³å¯] è¿™ç§æ–¹å¼åªæ˜¯ä¸´æ—¶ç”Ÿæ•ˆï¼Œ å½“é‡å¯ç³»ç»Ÿåï¼Œ è¿˜æ˜¯å›å½’ä»¥å‰å¯¹æœåŠ¡çš„è®¾ç½®ã€‚ 8.4.5 æŸ¥çœ‹æœåŠ¡åâ€‹ æ–¹å¼ 1ï¼š ä½¿ç”¨ setup -&gt; ç³»ç»ŸæœåŠ¡ å°±å¯ä»¥çœ‹åˆ°ã€‚ â€‹ æ–¹å¼ 2: /etc/init.d/æœåŠ¡åç§° â€‹ 8.4.6 æœåŠ¡çš„è¿è¡Œçº§åˆ«(runlevel)â€‹ æŸ¥çœ‹æˆ–è€…ä¿®æ”¹é»˜è®¤çº§åˆ«ï¼š vi /etc/inittabâ€‹ Linux ç³»ç»Ÿæœ‰ 7 ç§è¿è¡Œçº§åˆ«(runlevel)ï¼š å¸¸ç”¨çš„æ˜¯çº§åˆ« 3 å’Œ 5 è¿è¡Œçº§åˆ« 0ï¼š ç³»ç»ŸåœæœºçŠ¶æ€ï¼Œ ç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º 0ï¼Œ å¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ è¿è¡Œçº§åˆ« 1ï¼š å•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œ root æƒé™ï¼Œ ç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œ ç¦æ­¢è¿œç¨‹ç™»é™† è¿è¡Œçº§åˆ« 2ï¼š å¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰ NFS)ï¼Œ ä¸æ”¯æŒç½‘ç»œ è¿è¡Œçº§åˆ« 3ï¼š å®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰ NFS)ï¼Œ ç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼ è¿è¡Œçº§åˆ« 4ï¼š ç³»ç»Ÿæœªä½¿ç”¨ï¼Œ ä¿ç•™ è¿è¡Œçº§åˆ« 5ï¼š X11 æ§åˆ¶å°ï¼Œ ç™»é™†åè¿›å…¥å›¾å½¢ GUI æ¨¡å¼ è¿è¡Œçº§åˆ« 6ï¼š ç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œ é»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º 6ï¼Œ å¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ 8.4.7 å¼€æœºçš„æµç¨‹è¯´æ˜ 8.4.8 chkconfig æŒ‡ä»¤ ä»‹ç» é€šè¿‡ chkconfig å‘½ä»¤å¯ä»¥ç»™æ¯ä¸ªæœåŠ¡çš„å„ä¸ªè¿è¡Œçº§åˆ«è®¾ç½®è‡ªå¯åŠ¨/å…³é—­ åŸºæœ¬è¯­æ³• (==CenOS 6==) æŸ¥çœ‹æœåŠ¡ chkconfig â€“list|grep xxx chkconfig æœåŠ¡å â€“list chkconfig â€“level 5 æœåŠ¡å on/off è¯·å°† sshd æœåŠ¡åœ¨è¿è¡Œçº§åˆ«ä¸º 5 çš„æƒ…å†µä¸‹ï¼Œ ä¸è¦è‡ªå¯åŠ¨ã€‚ 8.4.9 åº”ç”¨å®ä¾‹ (CenOS 6)â€‹ æ¡ˆä¾‹ 1ï¼š è¯·æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ‰€æœ‰æœåŠ¡çš„å„ä¸ªè¿è¡Œçº§åˆ«çš„è¿è¡ŒçŠ¶æ€ 1chkconfig --list â€‹ æ¡ˆä¾‹ 2 ï¼š è¯·æŸ¥çœ‹ sshd æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ 1service sshd status â€‹ æ¡ˆä¾‹ 3ï¼š å°† sshd æœåŠ¡åœ¨è¿è¡Œçº§åˆ« 5 ä¸‹è®¾ç½®ä¸ºä¸è‡ªåŠ¨å¯åŠ¨ï¼Œ çœ‹çœ‹æœ‰ä»€ä¹ˆæ•ˆæœï¼Ÿ 1chkconfig --level 5 sshd off â€‹ æ¡ˆä¾‹ 4ï¼š å½“è¿è¡Œçº§åˆ«ä¸º 5 æ—¶ï¼Œ å…³é—­é˜²ç«å¢™ã€‚ 1chkconfig --level 5 iptables off æ¡ˆä¾‹ 5ï¼š åœ¨æ‰€æœ‰è¿è¡Œçº§åˆ«ä¸‹ï¼Œ å…³é—­é˜²ç«å¢™ 1chkconfig iptables off â€‹ æ¡ˆä¾‹ 6ï¼š åœ¨æ‰€æœ‰è¿è¡Œçº§åˆ«ä¸‹ï¼Œ å¼€å¯é˜²ç«å¢™ 1chkconfig iptables on 8.4.10 ä½¿ç”¨ç»†èŠ‚chkconfig é‡æ–°è®¾ç½®æœåŠ¡åè‡ªå¯åŠ¨æˆ–å…³é—­ï¼Œ éœ€è¦é‡å¯æœºå™¨ reboot æ‰èƒ½ç”Ÿæ•ˆ. 8.5 åŠ¨æ€ç›‘æ§è¿›ç¨‹8.5.1 ä»‹ç»â€‹ top ä¸ ps å‘½ä»¤å¾ˆç›¸ä¼¼ã€‚ å®ƒä»¬éƒ½ç”¨æ¥æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ã€‚ Top ä¸ ps æœ€å¤§çš„ä¸åŒä¹‹å¤„ï¼Œ åœ¨äº top åœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´å¯ä»¥æ›´æ–°æ­£åœ¨è¿è¡Œçš„çš„è¿›ç¨‹ã€‚ 8.5.2 åŸºæœ¬è¯­æ³•â€‹ top [é€‰é¡¹] 8.5.3 é€‰é¡¹è¯´æ˜ 8.5.4 åº”ç”¨å®ä¾‹â€‹ æ¡ˆä¾‹ 1.ç›‘è§†ç‰¹å®šç”¨æˆ· topï¼š è¾“å…¥æ­¤å‘½ä»¤ï¼Œ æŒ‰å›è½¦é”®ï¼Œ æŸ¥çœ‹æ‰§è¡Œçš„è¿›ç¨‹ã€‚ uï¼š ç„¶åè¾“å…¥==â€œuâ€ å›è½¦ï¼Œ å†è¾“å…¥ç”¨æˆ·åï¼Œ å³å¯== â€‹ æ¡ˆä¾‹ 2ï¼š ç»ˆæ­¢æŒ‡å®šçš„è¿›ç¨‹ â€‹ topï¼š è¾“å…¥æ­¤å‘½ä»¤ï¼Œ æŒ‰å›è½¦é”®ï¼Œ æŸ¥çœ‹æ‰§è¡Œçš„è¿›ç¨‹ã€‚â€‹ kï¼š ç„¶åè¾“å…¥â€œkâ€ å›è½¦ï¼Œ å†è¾“å…¥è¦ç»“æŸçš„è¿›ç¨‹ ID å· æ¡ˆä¾‹ 3:æŒ‡å®šç³»ç»ŸçŠ¶æ€æ›´æ–°çš„æ—¶é—´(æ¯éš” 10 ç§’è‡ªåŠ¨æ›´æ–°ï¼Œ é»˜è®¤æ˜¯ 3 ç§’) 1top -d 10 8.5.5 æŸ¥çœ‹ç³»ç»Ÿç½‘ç»œæƒ…å†µ netstat(é‡è¦) åŸºæœ¬è¯­æ³• netstat [é€‰é¡¹]netstat -anp é€‰é¡¹è¯´æ˜ -an æŒ‰ä¸€å®šé¡ºåºæ’åˆ—è¾“å‡º-p æ˜¾ç¤ºå“ªä¸ªè¿›ç¨‹åœ¨è°ƒç”¨ åº”ç”¨æ¡ˆä¾‹ (==CenOS 6==) æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰çš„ç½‘ç»œæœåŠ¡ è¯·æŸ¥çœ‹æœåŠ¡åä¸º sshd çš„æœåŠ¡çš„ä¿¡æ¯ã€‚ ç¬¬ä¹ç«  RPM å’Œ YUM9.1 rpm åŒ…çš„ç®¡ç†9.1.1 rpm åŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤â€‹ æŸ¥è¯¢å·²å®‰è£…çš„ rpm åˆ—è¡¨ rpm â€“ qa|grep xx â€‹ è¯·æŸ¥è¯¢çœ‹ä¸€ä¸‹ï¼Œ å½“å‰çš„ Linux æœ‰æ²¡æœ‰å®‰è£… firefox . 9.1.2 rpm åŒ…ååŸºæœ¬æ ¼å¼â€‹ ä¸€ä¸ª rpm åŒ…åï¼š firefox-45.0.1-1.el6.centos.x86_64.rpmâ€‹ åç§°:firefoxâ€‹ ç‰ˆæœ¬å·ï¼š 45.0.1-1â€‹ é€‚ç”¨æ“ä½œç³»ç»Ÿ: el6.centos.x86_64â€‹ è¡¨ç¤º centos6.x çš„ 64 ä½ç³»ç»Ÿâ€‹ å¦‚æœæ˜¯ i686ã€ i386 è¡¨ç¤º 32 ä½ç³»ç»Ÿï¼Œ noarch è¡¨ç¤ºé€šç”¨ã€‚ ã€‚ 9.1.3 rpm åŒ…çš„å…¶å®ƒæŸ¥è¯¢æŒ‡ä»¤â€‹ rpm -qa :æŸ¥è¯¢æ‰€å®‰è£…çš„æ‰€æœ‰ rpm è½¯ä»¶åŒ… â€‹ rpm -qa | more [åˆ†é¡µæ˜¾ç¤º] â€‹ rpm -qa | grep X [rpm -qa | grep firefox ] â€‹ â€‹ rpm -q è½¯ä»¶åŒ…å :æŸ¥è¯¢è½¯ä»¶åŒ…æ˜¯å¦å®‰è£… â€‹ â€‹ rpm -qi è½¯ä»¶åŒ…å ï¼š æŸ¥è¯¢è½¯ä»¶åŒ…ä¿¡æ¯ â€‹ â€‹ rpm -ql è½¯ä»¶åŒ…å :æŸ¥è¯¢è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶ â€‹ â€‹ rpm -qf æ–‡ä»¶å…¨è·¯å¾„å æŸ¥è¯¢æ–‡ä»¶æ‰€å±çš„è½¯ä»¶åŒ… â€‹ rpm -qf /etc/passwdâ€‹ rpm -qf /root/install.log 9.1.4 å¸è½½ rpm åŒ… åŸºæœ¬è¯­æ³• â€‹ rpm -e RPM åŒ…çš„åç§° åº”ç”¨æ¡ˆä¾‹ åˆ é™¤ firefox è½¯ä»¶åŒ… ç»†èŠ‚é—®é¢˜ å¦‚æœå…¶å®ƒè½¯ä»¶åŒ…ä¾èµ–äºæ‚¨è¦å¸è½½çš„è½¯ä»¶åŒ…ï¼Œ å¸è½½æ—¶åˆ™ä¼šäº§ç”Ÿé”™è¯¯ä¿¡æ¯ã€‚ å¦‚ï¼š $ rpm -e foo removing these packages would break dependencies:foo is needed by bar-1.0-1 å¦‚æœæˆ‘ä»¬å°±æ˜¯è¦åˆ é™¤ foo è¿™ä¸ª rpm åŒ…ï¼Œ å¯ä»¥å¢åŠ å‚æ•° â€“nodeps ,å°±å¯ä»¥å¼ºåˆ¶åˆ é™¤ï¼Œ ä½†æ˜¯ä¸€èˆ¬ä¸æ¨èè¿™æ ·åšï¼Œ å› ä¸ºä¾èµ–äºè¯¥è½¯ä»¶åŒ…çš„ç¨‹åºå¯èƒ½æ— æ³•è¿è¡Œ å¦‚ï¼š $ rpm -e ==â€“nodeps== fooå¸¦ä¸Š ==â€“nodeps== å°±æ˜¯å¼ºåˆ¶åˆ é™¤ã€‚ 9.1.5 å®‰è£… rpm åŒ… åŸºæœ¬è¯­æ³• rpm -ivh RPM åŒ…å…¨è·¯å¾„åç§° å‚æ•°è¯´æ˜ i=install å®‰è£…v=verbose æç¤ºh=hash è¿›åº¦æ¡ åº”ç”¨å®ä¾‹ æ¼”ç¤ºå®‰è£… firefox æµè§ˆå™¨ æ­¥éª¤å…ˆæ‰¾åˆ° firefox çš„å®‰è£… rpm åŒ…,ä½ éœ€è¦æŒ‚è½½ä¸Šæˆ‘ä»¬å®‰è£… centos çš„ iso æ–‡ä»¶ï¼Œ ç„¶ååˆ°/media/ä¸‹å»æ‰¾ rpm æ‰¾ã€‚ cp firefox-45.0.1-1.el6.centos.x86_64.rpm /opt/ 9.2 yum9.2.1 ä»‹ç»â€‹ Yum æ˜¯ä¸€ä¸ª Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚ åŸºäº RPM åŒ…ç®¡ç†ï¼Œ èƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½ RPM åŒ…å¹¶ä¸”å®‰è£…ï¼Œ å¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œ å¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ã€‚ ä½¿ç”¨ yum çš„å‰ææ˜¯å¯ä»¥è”ç½‘ã€‚ 9.2.2 yum çš„åŸºæœ¬æŒ‡ä»¤ æŸ¥è¯¢ yum æœåŠ¡å™¨æ˜¯å¦æœ‰éœ€è¦å®‰è£…çš„è½¯ä»¶ yum list|grep xx è½¯ä»¶åˆ—è¡¨ è½¯ä»¶åˆ—è¡¨ å®‰è£…æŒ‡å®šçš„ yum åŒ… yum install xxx ä¸‹è½½å®‰è£… 9.2.3 yum åº”ç”¨å®ä¾‹â€‹ æ¡ˆä¾‹ï¼š è¯·ä½¿ç”¨ yum çš„æ–¹å¼æ¥å®‰è£… firefox â€‹ 1.å…ˆæŸ¥çœ‹ä¸€ä¸‹ firefox rpm åœ¨ yum æœåŠ¡å™¨æœ‰æ²¡æœ‰ 1rpm -e firefox â€‹ å®‰è£… 1yum install firefox â€‹ ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶ â€‹ ã€å®Œæˆã€‘ æå–ç ï¼š0xub æŸ¥çœ‹æ–‡æ¡£","categories":[{"name":"Linuxè¯­è¨€","slug":"Linuxè¯­è¨€","permalink":"http://blog.oy6090.top/categories/Linux%E8%AF%AD%E8%A8%80/"}],"tags":[{"name":"CentOS 7","slug":"CentOS-7","permalink":"http://blog.oy6090.top/tags/CentOS-7/"}]},{"title":"jQuery","slug":"jQuery","date":"2020-07-14T16:00:00.000Z","updated":"2020-12-28T00:31:08.806Z","comments":true,"path":"posts/1005838445.html","link":"","permalink":"http://blog.oy6090.top/posts/1005838445.html","excerpt":"","text":"ä¸€ã€jQuery ä½¿ç”¨ï¼š1.æœ¬åœ°å¼•å…¥1&lt;script src=&quot;js/jquery-1.10.1.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; 2.CDN è¿œç¨‹å¼•å…¥1&lt;script src=&quot;http://code.jquery.com/jquery-migrate-1.2.1.min.js&quot;&gt;&lt;/script&gt; 3.ä½¿ç”¨ jQueryæ–¹å¼ä¸€ï¼š 12345678910&lt;head&gt; &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt; &lt;title&gt;jQuery&lt;&#x2F;title&gt; &lt;script src&#x3D;&quot;..&#x2F;JS&#x2F;jquery-3.5.1.js&quot;&gt;&lt;&#x2F;script&gt; &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt; $(function () &#123; &#125;); &lt;&#x2F;script&gt;&lt;&#x2F;head&gt; æ–¹å¼äºŒï¼š 123456&lt;body&gt; &lt;script src&#x3D;&quot;..&#x2F;JS&#x2F;jquery-3.5.1.js&quot;&gt;&lt;&#x2F;script&gt; &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt; &lt;&#x2F;script&gt;&lt;&#x2F;body&gt; äºŒã€jQuery å¯¹è±¡å’Œ dom å¯¹è±¡åŒºåˆ†1.jQuery å¯¹è±¡ä¸ dom å¯¹è±¡â‘  DOM å¯¹è±¡ï¼š é€šè¿‡ getElementById()æŸ¥è¯¢å‡ºæ¥çš„æ ‡ç­¾å¯¹è±¡æ—¶ Dom å¯¹è±¡ é€šè¿‡ getElementName()æŸ¥è¯¢å‡ºæ¥çš„æ ‡ç­¾å¯¹è±¡æ—¶ Dom å¯¹è±¡ é€šè¿‡ getElementByTagName()æŸ¥è¯¢å‡ºæ¥çš„æ ‡ç­¾å¯¹è±¡æ˜¯ Dom å¯¹è±¡ é€šè¿‡ createElemnet()æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡,æ˜¯ Dom å¯¹è±¡ DOM å¯¹è±¡ Alert å‡ºæ¥çš„æ•ˆæœæ˜¯:[object HTML æ ‡ç­¾å Element] â‘¡ jQuery å¯¹è±¡ï¼š é€šè¿‡ jQuery æä¾›çš„ API åˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯ jQuery å¯¹è±¡ é€šè¿‡ jquery åŒ…è£…çš„ Dom å¯¹è±¡,ä¹Ÿæ˜¯ jQuery å¯¹è±¡ é€šè¿‡ jquery æä¾›çš„ API æŸ¥è¯¢åˆ°çš„å¯¹è±¡,æ˜¯ jQuery å¯¹è±¡ 2.jQuery å¯¹è±¡çš„æœ¬è´¨ JQuery å¯¹è±¡æ—¶ dom å¯¹è±¡çš„æ•°ç»„ + JQuery æä¾›çš„ä¸€ç³»åˆ—åŠŸèƒ½å‡½æ•°ã€‚ 3.jQuery å¯¹è±¡å’Œ Dom å¯¹è±¡ä½¿ç”¨çš„åŒºåˆ« JQuery å¯¹è±¡ä¸èƒ½ä½¿ç”¨ DOM å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• DOM å¯¹è±¡ä¹Ÿä¸èƒ½ä½¿ç”¨ JQuery å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• 4.DOM å¯¹è±¡ å’Œ jQuery å¯¹è±¡äº’è½¬ dom å¯¹è±¡è½¬ä¸º JQuery å¯¹è±¡ å…ˆæœ‰ Dom å¯¹è±¡ $(DOM å¯¹è±¡) å°±å¯ä»¥è½¬æ¢ä¸º jQuery å¯¹è±¡ jQuery å¯¹è±¡è½¬ä¸º dom å¯¹è±¡ å…ˆæœ‰ jQuery å¯¹è±¡ jQuery å¯¹è±¡(ä¸‹æ ‡)å–å‡ºç›¸å¯¹åº”çš„ DOM å¯¹è±¡ ä¸‰ã€jQuery çš„ 2 æŠŠåˆ©å™¨1.jQuery å‡½æ•°; $/jQuery jQuery å‘å¤–æš´éœ²çš„å°±æ˜¯ jQuery å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ å½“æˆä¸€èˆ¬å‡½æ•°ä½¿ç”¨ï¼š$(param) param æ˜¯ function: ç›¸å½“äº windown.onload = function(æ–‡æ¡£åŠ è½½å®Œæˆçš„ç›‘å¬) param æ˜¯é€‰æ‹©å™¨å­—ç¬¦ä¸²ï¼šæŸ¥æ‰¾æ‰€æœ‰çš„åŒ¹é… Dom å…ƒç´ ï¼Œè¿”å›åŒ…å«æ‰€æœ‰çš„ DOM å…ƒç´ çš„ jQuery å¯¹è±¡ param æ˜¯ DOM å…ƒç´ ï¼šå°† DOM å…ƒç´ å¯¹è±¡åŒ…è£…æˆ jQuery å¯¹è±¡è¿”å›$(this) param æ˜¯æ ‡ç­¾å­—ç¬¦ä¸²ï¼š åˆ›å»ºæ ‡ç­¾ DOM å…ƒç´ å¯¹è±¡å¹¶åŒ…è£…ä¸º jQuery å¯¹è±¡è¿”å› å½“æˆå¯¹è±¡ä½¿ç”¨ï¼š$.xxx each(obj/arr, function(key, value){}) trim(str) 2.jQuery å¯¹è±¡ åŒ…å«æ‰€æœ‰åŒ¹é…çš„ n ä¸ª DOM å…ƒç´ çš„ä¼ªæ•°ç»„å¯¹è±¡ æ‰§è¡Œ$()è¿”å›çš„å°±æ˜¯ jQuery å¯¹è±¡ åŸºæœ¬è¡Œä¸ºï¼š length/size(): å¾—åˆ° dom å…ƒç´ çš„ä¸ªæ•° [index] : å¾—åˆ°æŒ‡å®šä¸‹æ ‡å¯¹åº”çš„ dom å…ƒç´  each(function(index, domEle){}): éå†æ‰€æœ‰çš„ dom å…ƒç´  index(): å¾—åˆ°å½“å‰ dom å…ƒç´ åœ¨æ‰€åœ¨å…„å¼Ÿä¸­çš„ä¸‹æ ‡ å››ã€jQuery é€‰æ‹©å™¨ æœ‰ç‰¹å®šè¯­æ³•è§„åˆ™ï¼ˆCSS é€‰æ‹©å™¨ï¼‰çš„å­—ç¬¦ä¸² ç”¨æ¥æŸ¥æ‰¾æŸä¸ª/äº› DOM å…ƒç´ ï¼š$(selector) 1.åŸºæœ¬é€‰æ‹©å™¨ æ–¹æ³• æè¿° #id æ ¹æ®ç»™å®šçš„ ID åŒ¹é…ä¸€ä¸ªå…ƒç´ ã€‚ tagName/* æ ¹æ®åŒ¹é…æ ‡ç­¾å…ƒç´ /æ‰€æœ‰å…ƒç´ ã€‚ .class æ ¹æ®ç»™å®šçš„ç±»åŒ¹é…å…ƒç´ ã€‚ selector1,selector2,selector3 å°†æ¯ä¸€ä¸ªé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ åˆå¹¶åä¸€èµ·è¿”å›ã€‚ selector1selector2selector3 å°†æ¯ä¸€ä¸ªé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ äº¤é›†éƒ¨åˆ†ä¸€èµ·è¿”å›ã€‚ 2.å±‚æ¬¡é€‰æ‹©å™¨ æ‰¾å­å­™åä»£ï¼Œå…„å¼Ÿå…ƒç´  æ–¹æ³• æè¿° selector1&gt;selector2 å­å…ƒç´  selector1 selector2 åä»£å…ƒç´  3.è¿‡æ»¤é€‰æ‹©å™¨ æ–¹æ³• æè¿° :first è·å–ç¬¬ä¸€ä¸ªå…ƒç´  :last è·å–æœ€åä¸ªå…ƒç´  :eq(index) åŒ¹é…ä¸€ä¸ªç»™å®šç´¢å¼•å€¼çš„å…ƒç´  :lt åŒ¹é…æ‰€æœ‰å°äºç»™å®šç´¢å¼•å€¼çš„å…ƒç´  :gt åŒ¹é…æ‰€æœ‰å¤§äºç»™å®šç´¢å¼•å€¼çš„å…ƒç´  :odd åŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼ä¸ºå¥‡æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•° :even åŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼ä¸ºå¶æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•° :not(selector) å»é™¤æ‰€æœ‰ä¸ç»™å®šé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´  :hidden åŒ¹é…æ‰€æœ‰ä¸å¯è§å…ƒç´ ï¼Œæˆ–è€… type ä¸º hidden çš„å…ƒç´  :visible åŒ¹é…æ‰€æœ‰çš„å¯è§å…ƒç´  [attrName] åŒ¹é…åŒ…å«ç»™å®šå±æ€§çš„å…ƒç´ ã€‚ [attrName=value] åŒ¹é…ç»™å®šçš„å±æ€§æ˜¯æŸä¸ªç‰¹å®šå€¼çš„å…ƒç´  ä»£ç ç¤ºä¾‹ [attrName]ï¼š 1234&lt;div&gt; &lt;p&gt;Hello!&lt;/p&gt;&lt;/div&gt;&lt;div id=&quot;test2&quot;&gt;&lt;/div&gt; jQuery ä»£ç ï¼š 1$(&quot;div[id]&quot;) è¿è¡Œç»“æœï¼š 1&lt;div id&#x3D;&quot;test2&quot;&gt;&lt;&#x2F;div&gt; ä»£ç ç¤ºä¾‹ [attrName=value]ï¼š 123&lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; value=&quot;Hot Fuzz&quot; /&gt;&lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; value=&quot;Cold Fusion&quot; /&gt;&lt;input type=&quot;checkbox&quot; name=&quot;accept&quot; value=&quot;Evil Plans&quot; /&gt; jQuery ä»£ç ï¼š 1$(&quot;input[name&#x3D;&#39;newsletter&#39;]&quot;).attr(&quot;checked&quot;, true); è¿è¡Œç»“æœï¼š 12&lt;input type&#x3D;&quot;checkbox&quot; name&#x3D;&quot;newsletter&quot; value&#x3D;&quot;Hot Fuzz&quot; checked&#x3D;&quot;true&quot; &#x2F;&gt;&lt;input type&#x3D;&quot;checkbox&quot; name&#x3D;&quot;newsletter&quot; value&#x3D;&quot;Cold Fusion&quot; checked&#x3D;&quot;true&quot; &#x2F;&gt; 4.è¡¨å•é€‰æ‹©å™¨ æ–¹æ³• æè¿° :input åŒ¹é…æ‰€æœ‰ input, textarea, select å’Œ button å…ƒç´  :text åŒ¹é…æ‰€æœ‰çš„å•è¡Œæ–‡æœ¬æ¡† :checkbox åŒ¹é…æ‰€æœ‰å¤é€‰æ¡† :radio åŒ¹é…æ‰€æœ‰å•é€‰æŒ‰é’® :checked åŒ¹é…æ‰€æœ‰é€‰ä¸­çš„è¢«é€‰ä¸­å…ƒç´ (å¤é€‰æ¡†ã€å•é€‰æ¡†ç­‰ï¼Œä¸åŒ…æ‹¬ select ä¸­çš„ option) ä»£ç ç¤ºä¾‹ ã€:inputã€‘ï¼š 123456789101112131415161718192021&lt;form&gt; &lt;input type=&quot;button&quot; value=&quot;Input Button&quot; /&gt; &lt;input type=&quot;checkbox&quot; /&gt; &lt;input type=&quot;file&quot; /&gt; &lt;input type=&quot;hidden&quot; /&gt; &lt;input type=&quot;image&quot; /&gt; &lt;input type=&quot;password&quot; /&gt; &lt;input type=&quot;radio&quot; /&gt; &lt;input type=&quot;reset&quot; /&gt; &lt;input type=&quot;submit&quot; /&gt; &lt;input type=&quot;text&quot; /&gt; &lt;select&gt; &lt;option&gt;Option&lt;/option&gt; &lt;/select&gt; &lt;textarea&gt;&lt;/textarea&gt; &lt;button&gt;Button&lt;/button&gt;&lt;/form&gt; jQuery ä»£ç ï¼š 1$(&quot;:input&quot;) è¿è¡Œç»“æœï¼š 123456789101112131415161718&lt;input type=&quot;button&quot; value=&quot;Input Button&quot; /&gt;&lt;input type=&quot;checkbox&quot; /&gt;&lt;input type=&quot;file&quot; /&gt;&lt;input type=&quot;hidden&quot; /&gt;&lt;input type=&quot;image&quot; /&gt;&lt;input type=&quot;password&quot; /&gt;&lt;input type=&quot;radio&quot; /&gt;&lt;input type=&quot;reset&quot; /&gt;&lt;input type=&quot;submit&quot; /&gt;&lt;input type=&quot;text&quot; /&gt;&lt;select&gt; &lt;option&gt;Option&lt;/option&gt;&lt;/select&gt;&lt;textarea&gt;&lt;/textarea&gt;&lt;button&gt;Button&lt;/button&gt; ä»£ç ç¤ºä¾‹ ã€:checkedã€‘ï¼š 12345&lt;form&gt; &lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; checked=&quot;checked&quot; value=&quot;Daily&quot; /&gt; &lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; value=&quot;Weekly&quot; /&gt; &lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; checked=&quot;checked&quot; value=&quot;Monthly&quot; /&gt;&lt;/form&gt; jQuery ä»£ç ï¼š 1$(&quot;input:checked&quot;) è¿è¡Œç»“æœï¼š 12&lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; checked=&quot;checked&quot; value=&quot;Daily&quot; /&gt;&lt;input type=&quot;checkbox&quot; name=&quot;newsletter&quot; checked=&quot;checked&quot; value=&quot;Monthly&quot; /&gt; äº”ã€å±æ€§/æ–‡æœ¬ æ“ä½œæ ‡ç­¾çš„å±æ€§, æ ‡ç­¾ä½“æ–‡æœ¬ æ–¹æ³• æè¿° attr(name) / attr(name, value) è¯»å†™éå¸ƒå°”å€¼çš„æ ‡ç­¾å±æ€§ prop(name) / prop(name, value) è¯»å†™å¸ƒå°”å€¼çš„æ ‡ç­¾å±æ€§ removeAttr(name)/removeProp(name) åˆ é™¤å±æ€§ addClass(classValue) æ·»åŠ  class removeClass(classValue) ç§»é™¤æŒ‡å®š class val() / val(value) è¯»å†™æ ‡ç­¾çš„ value html() / html(htmlString) è¯»å†™æ ‡ç­¾ä½“æ–‡æœ¬ å…­ã€CSS æ¨¡å—1. style æ ·å¼ æ–¹æ³• æè¿° css(styleName) æ ¹æ®æ ·å¼åå¾—åˆ°å¯¹åº”çš„å€¼ css(styleName, value) è®¾ç½®ä¸€ä¸ªæ ·å¼ css(å¤šä¸ªæ ·å¼å¯¹) è®¾ç½®å¤šä¸ªæ ·å¼ ä»£ç ç¤ºä¾‹ï¼š å–å¾—ç¬¬ä¸€ä¸ªæ®µè½çš„ color æ ·å¼å±æ€§çš„å€¼ã€‚ 1$(&quot;p&quot;).css(&quot;color&quot;); å°†æ‰€æœ‰æ®µè½çš„å­—ä½“é¢œè‰²è®¾ä¸ºçº¢è‰²å¹¶ä¸”èƒŒæ™¯ä¸ºè“è‰²ã€‚ 1$(&quot;p&quot;).css(&#123; color: &quot;#ff0011&quot;, background: &quot;blue&quot; &#125;); 3. å°†æ‰€æœ‰æ®µè½å­—ä½“è®¾ä¸ºçº¢è‰² 1$(&quot;p&quot;).css(&quot;color&quot;,&quot;red&quot;); 2.ä½ç½®åæ ‡ æ–¹æ³• æè¿° offset() è¯»/å†™å½“å‰åæ ‡ï¼ˆåŸç‚¹æ˜¯é¡µé¢å·¦ä¸Šè§’ï¼‰ position() è¯»å†™å½“å‰å…ƒç´ çš„åæ ‡çš„ï¼ˆåŸç‚¹æ˜¯çˆ¶å…ƒç´ å·¦ä¸Šè§’ï¼‰ scrollTop()/scrollLeft() è¯»/å†™å…ƒç´ /é¡µé¢çš„æ»šåŠ¨åæ ‡ ä»£ç ç¤ºä¾‹ï¼š offset() 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;2nd Paragraph&lt;/p&gt; 12// jQueryä»£ç  var p = $(&quot;p:last&quot;); var offset = p.offset(); p.html( &quot;left: &quot; +offset.left + &quot;, top: &quot; + offset.top ); è¿è¡Œç»“æœ 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;left: 0, top: 35&lt;/p&gt; position() 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;2nd Paragraph&lt;/p&gt; 12// jQueryä»£ç  var p = $(&quot;p:first&quot;); var position = p.position();$(&quot;p:last&quot;).html( &quot;left: &quot; + position.left + &quot;, top: &quot; + position.top ); è¿è¡Œç»“æœï¼š 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;left: 15, top: 15&lt;/p&gt; scrollTop() 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;2nd Paragraph&lt;/p&gt; 12// jQueryä»£ç  var p = $(&quot;p:first&quot;); $(&quot;p:last&quot;).text( &quot;scrollTop:&quot; +p.scrollTop() ); è¿è¡Œç»“æœï¼š 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;scrollTop: 0&lt;/p&gt; scrollLeft() 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;2nd Paragraph&lt;/p&gt; 123&#x2F;&#x2F; jQueryä»£ç var p &#x3D; $(&quot;p:first&quot;);$(&quot;p:last&quot;).text( &quot;scrollLeft:&quot; + p.scrollLeft() ); è¿è¡Œç»“æœï¼š 12&lt;p&gt;Hello&lt;&#x2F;p&gt;&lt;p&gt;scrollLeft: 0&lt;&#x2F;p&gt; 3.å°ºå¯¸ æ–¹æ³• æè¿° width()/height() width/height innerWidth()/innerHeight() width + padding outerWidth()/outerHeight() width + padding + border outerWidth(true)/outerHeight(true) width + padding + border+margin ä»£ç ç¤ºä¾‹ï¼š width() è·å–ç¬¬ä¸€æ®µçš„é«˜ 1$(&quot;p&quot;).height(); innerWidth() è·å–ç¬¬ä¸€æ®µè½å†…éƒ¨åŒºåŸŸé«˜åº¦ã€‚ 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;2nd Paragraph&lt;/p&gt; 123// jQueryvar p = $(&quot;p:first&quot;);$(&quot;p:last&quot;).text(&quot;innerHeight:&quot; + p.innerHeight()); ç»“æœç¤ºä¾‹ï¼š 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;innerHeight: 16&lt;/p&gt; outerWidth() 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;2nd Paragraph&lt;/p&gt; 12345678// jQueryvar p = $(&quot;p:first&quot;);$(&quot;p:last&quot;).text( &quot;outerHeight:&quot; + p.outerHeight() + &quot; , outerHeight(true):&quot; + p.outerHeight(true)); è¿è¡Œç»“æœï¼š 12&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;outerHeight: 35 , outerHeight(true):55&lt;/p&gt; ä¸ƒã€ç­›é€‰æ¨¡å—1.è¿‡æ»¤ åœ¨ jQuery å¯¹è±¡å†…éƒ¨çš„å…ƒç´ ä¸­æ‰¾å‡ºéƒ¨åˆ†åŒ¹é…çš„å…ƒç´ , å¹¶å°è£…æˆæ–°çš„ jQuery å¯¹è±¡è¿”å› æ–¹æ³• æè¿° first() è·å–ç¬¬ä¸€ä¸ªå…ƒç´  last() è·å–æœ€åä¸ªå…ƒç´  eq(index) è·å–ç¬¬ N ä¸ªå…ƒç´  filter(selector) ç­›é€‰å‡ºä¸æŒ‡å®šè¡¨è¾¾å¼åŒ¹é…çš„å…ƒç´ é›†åˆã€‚ not(selector) åˆ é™¤ä¸æŒ‡å®šè¡¨è¾¾å¼åŒ¹é…çš„å…ƒç´  has(selector) ä¿ç•™åŒ…å«ç‰¹å®šåä»£çš„å…ƒç´ ï¼Œå»æ‰é‚£äº›ä¸å«æœ‰æŒ‡å®šåä»£çš„å…ƒç´ ã€‚ ä»£ç ç¤ºä¾‹ï¼š filter(selector) 123&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;Hello Again&lt;/p&gt;&lt;p class=&quot;selected&quot;&gt;And Again&lt;/p&gt; 12// jQuery$(&quot;p&quot;).filter(&quot;.selected&quot;); 12// è¿è¡Œç»“æœ&lt;p class=&quot;selected&quot;&gt;And Again&lt;/p&gt; not(selector) 12&lt;p&gt;Hello&lt;/p&gt;&lt;p id=&quot;selected&quot;&gt;Hello Again&lt;/p&gt; 12// jQuery$(&quot;p&quot;).not($(&quot;#selected&quot;)[0]); 12// è¿è¡Œç»“æœ&lt;p&gt;Hello&lt;/p&gt; 3. **has(selector)** 123456789101112&lt;ul&gt; &lt;li&gt;list item 1&lt;/li&gt; &lt;li&gt; list item 2 &lt;ul&gt; &lt;li&gt;list item 2-a&lt;/li&gt; &lt;li&gt;list item 2-b&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;list item 3&lt;/li&gt; &lt;li&gt;list item 4&lt;/li&gt;&lt;/ul&gt; 12// jQuery$(&quot;li&quot;).has(&quot;ul&quot;).css(&quot;background-color&quot;, &quot;red&quot;); 2.æŸ¥æ‰¾ æŸ¥æ‰¾ jQuery å¯¹è±¡å†…éƒ¨çš„å…ƒç´ çš„å­å­™/å…„å¼Ÿ/çˆ¶æ¯å…ƒç´ , å¹¶å°è£…æˆæ–°çš„ jQuery å¯¹è±¡è¿”å› æ–¹æ³• æè¿° children(selector) å–å¾—ä¸€ä¸ªåŒ…å«åŒ¹é…çš„å…ƒç´ é›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ çš„å…ƒç´ é›†åˆã€‚ï¼ˆå­å…ƒç´ ï¼‰ find(selector) æœç´¢æ‰€æœ‰ä¸æŒ‡å®šè¡¨è¾¾å¼åŒ¹é…çš„å…ƒç´ ã€‚è¿™ä¸ªå‡½æ•°æ˜¯æ‰¾å‡ºæ­£åœ¨å¤„ç†çš„å…ƒç´ çš„åä»£å…ƒç´ çš„æ–¹æ³•ã€‚ï¼ˆåä»£å…ƒç´ ï¼‰ preAll(selector) æŸ¥æ‰¾å½“å‰å…ƒç´ ä¹‹å‰æ‰€æœ‰çš„åŒè¾ˆå…ƒç´ ï¼ˆå‰çš„æ‰€æœ‰å…„å¼Ÿï¼‰ siblings(selector) å–å¾—ä¸€ä¸ªåŒ…å«åŒ¹é…çš„å…ƒç´ é›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰å”¯ä¸€åŒè¾ˆå…ƒç´ çš„å…ƒç´ é›†åˆã€‚ï¼ˆæ‰€æœ‰å…„å¼Ÿï¼‰ parent() å–å¾—ä¸€ä¸ªåŒ…å«ç€æ‰€æœ‰åŒ¹é…å…ƒç´ çš„å”¯ä¸€çˆ¶å…ƒç´ çš„å…ƒç´ é›†åˆã€‚ï¼ˆçˆ¶å…ƒç´ ï¼‰ ä»£ç ç¤ºä¾‹ï¼š preAll(selector) 1234&lt;div&gt;&lt;&#x2F;div&gt;&lt;div&gt;&lt;&#x2F;div&gt;&lt;div&gt;&lt;&#x2F;div&gt;&lt;div&gt;&lt;&#x2F;div&gt; 12// jQuery$(&quot;div:last&quot;).prevAll().addClass(&quot;before&quot;); 1234// è¿è¡Œç»“æœ&lt;div class=&quot;before&quot;&gt;&lt;/div&gt;&lt;div class=&quot;before&quot;&gt;&lt;/div&gt;&lt;div class=&quot;before&quot;&gt;&lt;/div&gt; å…«ã€æ–‡æ¡£å¤„ç†(CUD)æ¨¡å—1.å¢åŠ  æ–¹æ³• æè¿° append() / appendTo() æ’å…¥åéƒ¨ preppend() / preppendTo() æ’å…¥å‰éƒ¨ before() æ’åˆ°å‰é¢ after() æ’åˆ°åé¢ 2.åˆ é™¤ æ–¹æ³• æè¿° remove() ä» DOM ä¸­åˆ é™¤æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ã€‚(å°†è‡ªå·±åŠå†…éƒ¨çš„å­©å­éƒ½åˆ é™¤) empty() åˆ é™¤åŒ¹é…çš„å…ƒç´ é›†åˆä¸­æ‰€æœ‰çš„å­èŠ‚ç‚¹ã€‚(æç©º(è‡ªå·±è¿˜åœ¨)) ä»£ç ç¤ºä¾‹ï¼š remove() 123&lt;p&gt;Hello&lt;/p&gt;how are&lt;p&gt;you?&lt;/p&gt; 12// jQuery$(&quot;p&quot;).remove(); 1// è¿è¡Œç»“æœ how are 3.æ›´æ–° æ–¹æ³• æè¿° replaceWith() å°†æ‰€æœ‰åŒ¹é…çš„å…ƒç´ æ›¿æ¢æˆæŒ‡å®šçš„ HTML æˆ– DOM å…ƒç´ ã€‚ ä»£ç ç¤ºä¾‹ï¼š 123&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;cruel&lt;/p&gt;&lt;p&gt;World&lt;/p&gt; 12// jQuery$(&quot;p&quot;).replaceWith(&quot;&lt;b&gt;Paragraph. &lt;/b&gt;&quot;); 1234// è¿è¡Œç»“æœ&lt;b&gt;Paragraph. &lt;/b&gt;&lt;b&gt;Paragraph. &lt;/b&gt;&lt;b&gt;Paragraph. &lt;/b&gt; ä¹ã€äº‹ä»¶æ¨¡å—1.ç»‘å®šäº‹ä»¶ eventName(function(){}) on(â€˜eventNameâ€™, function(){}) å¸¸ç”¨: click,mouseenter /mouseleave , mouseover /mouseout,focus/blur hover(function(){}, function(){}) 2.è§£ç»‘äº‹ä»¶ off(â€˜eventNameâ€™) 3.äº‹ä»¶å§”æ‰˜ç†è§£: å°†å­å…ƒç´ çš„äº‹ä»¶å§”æ‰˜ç»™çˆ¶è¾ˆå…ƒç´ å¤„ç† äº‹ä»¶ç›‘å¬ç»‘å®šåœ¨çˆ¶å…ƒç´ ä¸Š, ä½†äº‹ä»¶å‘ç”Ÿåœ¨å­å…ƒç´ ä¸Š äº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´  ä½†æœ€ç»ˆè°ƒç”¨çš„äº‹ä»¶å›è°ƒå‡½æ•°çš„æ˜¯å­å…ƒç´ : event.target å¥½å¤„: æ–°å¢çš„å…ƒç´ æ²¡æœ‰äº‹ä»¶ç›‘å¬ å‡å°‘ç›‘å¬çš„æ•°é‡(n==&gt;1) jQuery çš„äº‹ä»¶å§”æ‰˜ API è®¾ç½®äº‹ä»¶å§”æ‰˜: $(parentSelector).delegate(childrenSelector, eventName, callback) ç§»é™¤äº‹ä»¶å§”æ‰˜: $(parentSelector).undelegate(eventName) ä»£ç ç¤ºä¾‹ï¼š 1234567891011&lt;ul&gt; &lt;li&gt;11111&lt;/li&gt; &lt;li&gt;1111111&lt;/li&gt; &lt;li&gt;111111111&lt;/li&gt; &lt;li&gt;11111111111&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;22222&lt;/li&gt;&lt;br /&gt;&lt;button id=&quot;btn&quot;&gt;æ·»åŠ æ–°çš„li&lt;/button&gt;&lt;br /&gt; 1234567// jQuery$(&quot;ul&gt;li&quot;).click(function () &#123; this.style.background = &quot;red&quot;;&#125;);$(&quot;#btn&quot;).click(function () &#123; $(&quot;ul&quot;).append(&quot;&lt;li&gt;æ–°å¢çš„li....&lt;/li&gt;&quot;);&#125;); 12345678// è¿è¡Œç»“æœ&lt;ul&gt; &lt;li&gt;11111&lt;/li&gt; &lt;li&gt;1111111&lt;/li&gt; &lt;li&gt;111111111&lt;/li&gt; &lt;li&gt;11111111111&lt;/li&gt; &lt;li&gt;æ–°å¢çš„li....&lt;/li&gt;&lt;/ul&gt; 4.äº‹ä»¶åæ ‡ æ–¹æ³• æè¿° event.offsetX åŸç‚¹æ˜¯å½“å‰å…ƒç´ å·¦ä¸Šè§’ event.clientX åŸç‚¹æ˜¯çª—å£å·¦ä¸Šè§’ event.pageX åŸç‚¹æ˜¯é¡µé¢å·¦ä¸Šè§’ ä»£ç ç¤ºä¾‹ï¼š 12345678&lt;div class=&quot;out&quot;&gt; å¤–éƒ¨DIV &lt;div class=&quot;inner&quot;&gt;å†…éƒ¨div&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;divBtn&quot;&gt; &lt;button id=&quot;btn1&quot;&gt;æµ‹è¯•äº‹ä»¶åæ ‡&lt;/button&gt;&lt;/div&gt; 123456$(&quot;#btn1&quot;).click(function (event) &#123; // event äº‹ä»¶ console.log(event.offsetX, event.offsetY); // åŸç‚¹ä¸ºäº‹ä»¶å…ƒç´ çš„å·¦ä¸Šè§’ console.log(event.clientX, event.clientY); // åŸç‚¹ä¸ºçª—å£çš„å·¦ä¸Šè§’ console.log(event.pageX, event.pageY); // åŸç‚¹ä¸ºé¡µé¢çš„å·¦ä¸Šè§’&#125;); 5.äº‹ä»¶ç›¸å…³ åœæ­¢äº‹ä»¶å†’æ³¡: event.stopPropagation() é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º: event.preventDefault() ä»£ç ç¤ºä¾‹ï¼š 1234567891011&lt;ul&gt; &lt;li&gt;1111&lt;/li&gt; &lt;li&gt;2222&lt;/li&gt; &lt;li&gt;3333&lt;/li&gt; &lt;li&gt;4444&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;22222&lt;/li&gt;&lt;br /&gt;&lt;button id=&quot;btn1&quot;&gt;æ·»åŠ æ–°çš„li&lt;/button&gt;&lt;button id=&quot;btn2&quot;&gt;åˆ é™¤ulä¸Šçš„äº‹ä»¶å§”æ‰˜çš„ç›‘å¬å™¨&lt;/button&gt; 123456789101112// jQuery// è®¾ç½®äº‹ä»¶å§”æ‰˜$(&quot;ul&quot;).delegate(&quot;li&quot;, &quot;click&quot;, function () &#123; this.style.background = &quot;red&quot;;&#125;);$(&quot;#btn1&quot;).click(function () &#123; $(&quot;ul&quot;).append(&quot;&lt;li&gt;æ–°å¢çš„li....&lt;/li&gt;&quot;);&#125;);// ç§»é™¤äº‹ä»¶å§”æ‰˜$(&quot;#btn2&quot;).click(function () &#123; $(&quot;ul&quot;).undelegate(&quot;click&quot;);&#125;); åã€JQuery åŠ¨ç”»1.åŸºæœ¬åŠ¨ç”» æ–¹æ³• æè¿° show() å°†éšè—çš„å…ƒç´ æ˜¾ç¤º hide() å°†å¯è§çš„å…ƒç´ éšè— toggle() å¯è§å°±éšè—ï¼Œä¸å¯è§å°±æ˜¾ç¤º ä»¥ä¸Šçš„åŠ¨ç”»éƒ½å¯ä»¥æ·»åŠ å‚æ•°ï¼š â‘  ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ˜¾ç¤º æ‰§è¡Œçš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ â‘¡ ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯åŠ¨ç”»çš„å›è°ƒå‡½æ•°ï¼ˆåŠ¨ç”»å®Œæˆä»¥åè°ƒç”¨çš„å‡½æ•°ï¼‰ ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;style type=&quot;text/css&quot;&gt; * &#123; margin: 0px; &#125; .div1 &#123; position: absolute; width: 200px; height: 200px; top: 50px; left: 10px; background: red; display: none; &#125;&lt;/style&gt;&lt;body&gt; &lt;button id=&quot;btn1&quot;&gt;ç¬é—´æ˜¾ç¤º&lt;/button&gt; &lt;button id=&quot;btn2&quot;&gt;æ…¢æ…¢æ˜¾ç¤º&lt;/button&gt; &lt;button id=&quot;btn3&quot;&gt;æ…¢æ…¢éšè—&lt;/button&gt; &lt;button id=&quot;btn4&quot;&gt;æ˜¾ç¤ºéšè—åˆ‡æ¢&lt;/button&gt; &lt;div class=&quot;div1&quot;&gt;&lt;/div&gt; &lt;script src=&quot;../JS/jquery-3.5.1.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; var $div1 = $(&quot;.div1&quot;); // 1. ç‚¹å‡»btn1, ç«‹å³æ˜¾ç¤º $(&quot;#btn1&quot;).click(function () &#123; $div1.show(); &#125;); // 2. ç‚¹å‡»btn2ï¼Œæ…¢æ…¢æ˜¾ç¤º $(&quot;#btn2&quot;).click(function () &#123; $div1.show(1000); &#125;); // 3. ç‚¹å‡»btn3, æ…¢æ…¢éšè— $(&quot;#btn3&quot;).click(function () &#123; $div1.hide(1000); &#125;); // 4.ç‚¹å‡»btn4, åˆ‡æ¢æ˜¾ç¤º/éšè— $(&quot;#btn4&quot;).click(function () &#123; $div1.toggle(1000); &#125;); &lt;/script&gt;&lt;/body&gt; 2.æ·¡å…¥æ·¡å‡ºåŠ¨ç”» åŠ¨ç”» æè¿° fadeln() æ·¡å…¥ fadeOut() æ·¡å‡º fade To() åœ¨æŒ‡å¯¼æ—¶é•¿å†…æ…¢æ…¢å°†é€æ˜åº¦ä¿®æ”¹æŒ‡å®šçš„å€¼ã€‚0 é€æ˜ 1 å®Œæˆå¯è§ 0.5 é€æ˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;style type=&quot;text/css&quot;&gt; * &#123; margin: 0px; &#125; .div1 &#123; position: absolute; width: 200px; height: 200px; top: 50px; left: 10px; background: red; &#125;&lt;/style&gt;&lt;body&gt; &lt;button id=&quot;btn1&quot;&gt;æ…¢æ…¢æ·¡å‡º&lt;/button&gt; &lt;button id=&quot;btn2&quot;&gt;æ…¢æ…¢æ·¡å…¥&lt;/button&gt; &lt;button id=&quot;btn3&quot;&gt;æ·¡å‡º/æ·¡å…¥åˆ‡æ¢&lt;/button&gt; &lt;div class=&quot;div1&quot;&gt;&lt;/div&gt; &lt;script src=&quot;../JS/jquery-3.5.1.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; /* éœ€æ±‚ï¼š 1. ç‚¹å‡»btn1, æ…¢æ…¢æ·¡å‡º * æ— å‚ * æœ‰å‚ * å­—ç¬¦ä¸²å‚æ•° * æ•°å­—å‚æ•° 2. ç‚¹å‡»btn3, æ…¢æ…¢æ·¡å…¥ 3. ç‚¹å‡»btn3, æ·¡å‡º/æ·¡å…¥åˆ‡æ¢ï¼ŒåŠ¨ç”»ç»“æŸæ—¶æç¤ºâ€œåŠ¨ç”»ç»“æŸäº†â€ */ var $div1 = $(&quot;.div1&quot;); $(&quot;#btn1&quot;).click(function () &#123; $div1.fadeOut(1000, function () &#123; alert(&quot;åŠ¨ç”»å®Œæˆäº†ï¼ï¼ï¼ï¼&quot;); &#125;); &#125;); $(&quot;#btn2&quot;).click(function () &#123; $div1.fadeIn(); &#125;); $(&quot;btn3&quot;).click(function () &#123; $div1.fadeToggle(); &#125;); &lt;/script&gt;&lt;/body&gt;","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://blog.oy6090.top/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"http://blog.oy6090.top/tags/jQuery/"}]},{"title":"JavsScripté«˜çº§ï¼ˆä¸€ï¼‰","slug":"01_åŸºç¡€æ€»ç»“æ·±å…¥","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:46:49.086Z","comments":true,"path":"posts/38492.html","link":"","permalink":"http://blog.oy6090.top/posts/38492.html","excerpt":"","text":"è¯·ç»“åˆ javacript åŸºç¡€ç»“åˆå‚è€ƒ æ•°æ®ç±»å‹çš„åˆ†ç±»å’Œåˆ¤æ–­ åŸºæœ¬(å€¼)ç±»å‹ Number â€”â€“ ä»»æ„æ•°å€¼ â€”â€”â€“ typeof String â€”â€“ ä»»æ„å­—ç¬¦ä¸² â€”â€” typeof Boolean â€”- true/false â€”â€“ typeof undefined â€” undefined â€”â€“ typeof/=== null â€”â€”â€“ null â€”â€”â€”- === å¯¹è±¡(å¼•ç”¨)ç±»å‹ Object â€”â€“ typeof/instanceof Array â€”â€” instanceof Function â€”- typeof æ•°æ®,å˜é‡, å†…å­˜çš„ç†è§£ ä»€ä¹ˆæ˜¯æ•°æ®? åœ¨å†…å­˜ä¸­å¯è¯»çš„, å¯ä¼ é€’çš„ä¿å­˜äº†ç‰¹å®šä¿¡æ¯çš„â€™ä¸œä¸œâ€™ ä¸€åˆ‡çš†æ•°æ®, å‡½æ•°ä¹Ÿæ˜¯æ•°æ® åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰æ“ä½œçš„ç›®æ ‡: æ•°æ® ä»€ä¹ˆæ˜¯å˜é‡? åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å®ƒçš„å€¼æ˜¯å…è®¸æ”¹å˜çš„é‡ ä¸€ä¸ªå˜é‡å¯¹åº”ä¸€å—å°å†…å­˜, å®ƒçš„å€¼ä¿å­˜åœ¨æ­¤å†…å­˜ä¸­ ä»€ä¹ˆæ˜¯å†…å­˜? å†…å­˜æ¡é€šç”µåäº§ç”Ÿçš„å­˜å‚¨ç©ºé—´(ä¸´æ—¶çš„) ä¸€å—å†…å­˜åŒ…å« 2 ä¸ªæ–¹é¢çš„æ•°æ® å†…éƒ¨å­˜å‚¨çš„æ•°æ® åœ°å€å€¼æ•°æ® å†…å­˜ç©ºé—´çš„åˆ†ç±» æ ˆç©ºé—´: å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ å †ç©ºé—´: å¯¹è±¡ å†…å­˜,æ•°æ®, å˜é‡ä¸‰è€…ä¹‹é—´çš„å…³ç³» å†…å­˜æ˜¯å®¹å™¨, ç”¨æ¥å­˜å‚¨ä¸åŒæ•°æ® å˜é‡æ˜¯å†…å­˜çš„æ ‡è¯†, é€šè¿‡å˜é‡æˆ‘ä»¬å¯ä»¥æ“ä½œ(è¯»/å†™)å†…å­˜ä¸­çš„æ•°æ® å¯¹è±¡çš„ç†è§£å’Œä½¿ç”¨ ä»€ä¹ˆæ˜¯å¯¹è±¡? å¤šä¸ªæ•°æ®(å±æ€§)çš„é›†åˆ ç”¨æ¥ä¿å­˜å¤šä¸ªæ•°æ®(å±æ€§)çš„å®¹å™¨ å±æ€§ç»„æˆ: å±æ€§å : å­—ç¬¦ä¸²(æ ‡è¯†) å±æ€§å€¼ : ä»»æ„ç±»å‹ å±æ€§çš„åˆ†ç±»: ä¸€èˆ¬ : å±æ€§å€¼ä¸æ˜¯ function æè¿°å¯¹è±¡çš„çŠ¶æ€ æ–¹æ³• : å±æ€§å€¼ä¸º function çš„å±æ€§ æè¿°å¯¹è±¡çš„è¡Œä¸º ç‰¹åˆ«çš„å¯¹è±¡ æ•°ç»„: å±æ€§åæ˜¯ 0,1,2,3 ä¹‹ç±»çš„ç´¢å¼• å‡½æ•°: å¯ä»¥æ‰§è¡Œçš„ å¦‚ä½•æ“ä½œå†…éƒ¨å±æ€§(æ–¹æ³•) .å±æ€§å [â€˜å±æ€§åâ€™]: å±æ€§åæœ‰ç‰¹æ®Šå­—ç¬¦/å±æ€§åæ˜¯ä¸€ä¸ªå˜é‡ å‡½æ•°çš„ç†è§£å’Œä½¿ç”¨ ä»€ä¹ˆæ˜¯å‡½æ•°? ç”¨æ¥å®ç°ç‰¹å®šåŠŸèƒ½çš„, n æ¡è¯­å¥çš„å°è£…ä½“ åªæœ‰å‡½æ•°ç±»å‹çš„æ•°æ®æ˜¯å¯ä»¥æ‰§è¡Œçš„, å…¶å®ƒçš„éƒ½ä¸å¯ä»¥ ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°? æé«˜å¤ç”¨æ€§ ä¾¿äºé˜…è¯»äº¤æµ å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ instanceof Object===true å‡½æ•°æœ‰å±æ€§: prototype å‡½æ•°æœ‰æ–¹æ³•: call()/apply() å¯ä»¥æ·»åŠ æ–°çš„å±æ€§/æ–¹æ³• å‡½æ•°çš„ 3 ç§ä¸åŒè§’è‰² ä¸€èˆ¬å‡½æ•° : ç›´æ¥è°ƒç”¨ æ„é€ å‡½æ•° : é€šè¿‡ new è°ƒç”¨ å¯¹è±¡ : é€šè¿‡.è°ƒç”¨å†…éƒ¨çš„å±æ€§/æ–¹æ³• å‡½æ•°ä¸­çš„ this æ˜¾å¼æŒ‡å®šè°: obj.xxx() é€šè¿‡ call/apply æŒ‡å®šè°è°ƒç”¨: xxx.call(obj) ä¸æŒ‡å®šè°è°ƒç”¨: xxx() : window å›è°ƒå‡½æ•°: çœ‹èƒŒåæ˜¯é€šè¿‡è°æ¥è°ƒç”¨çš„: window/å…¶å®ƒ åŒ¿åå‡½æ•°è‡ªè°ƒç”¨:123(function(w, obj)&#123; &#x2F;&#x2F;å®ç°ä»£ç &#125;)(window, obj) ä¸“ä¸šæœ¯è¯­ä¸º: IIFE (Immediately Invoked Function Expression) ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ å›è°ƒå‡½æ•°çš„ç†è§£ ä»€ä¹ˆå‡½æ•°æ‰æ˜¯å›è°ƒå‡½æ•°? ä½ å®šä¹‰çš„ ä½ æ²¡æœ‰è°ƒç”¨ ä½†å®ƒæœ€ç»ˆæ‰§è¡Œäº†(åœ¨ä¸€å®šæ¡ä»¶ä¸‹æˆ–æŸä¸ªæ—¶åˆ») å¸¸ç”¨çš„å›è°ƒå‡½æ•° dom äº‹ä»¶å›è°ƒå‡½æ•° å®šæ—¶å™¨å›è°ƒå‡½æ•° ajax è¯·æ±‚å›è°ƒå‡½æ•°(åé¢è®²è§£) ç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°(åé¢è®²è§£)","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.oy6090.top/categories/JavaScript/"}],"tags":[{"name":"JavaScripté«˜çº§","slug":"JavaScripté«˜çº§","permalink":"http://blog.oy6090.top/tags/JavaScript%E9%AB%98%E7%BA%A7/"}]},{"title":"JDBCæ¨¡æ¿","slug":"JDBCæ¨¡æ¿","date":"2020-07-11T16:00:00.000Z","updated":"2020-10-25T02:17:35.689Z","comments":true,"path":"posts/2968822672.html","link":"","permalink":"http://blog.oy6090.top/posts/2968822672.html","excerpt":"","text":"æœ€è¿‘åˆšå­¦å®Œ JDBCï¼Œé€šåšå®¢æ¥æ€»ç»“ä¸€ä¸‹ã€‚è¿™é‡Œé‡‡ç”¨çš„æ˜¯ Druid è¿æ¥æ± ï¼Œä»¥åŠè°ƒç”¨äº†ç¬¬ä¸‰æ–¹çš„ jar åŒ…ã€‚ è°ƒç”¨çš„ jar åŒ…ï¼š JDBC é¡¹ç›®ç»“æ„ æ•´ä½“ç»“æ„ ä»£ç å¦‚ä¸‹ é…ç½®æ•°æ®åº“åŠ è½½æ–‡ä»¶ï¼ˆæ”¾åœ¨ src ç›®å½•ä¸‹ï¼‰ ã€Druid.propertiesã€‘ 123456789101112driver=com.mysql.jdbc.Driverurl=jdbc:mysql://localhost:3306/userinfo?useUnicode=true&amp;characterEncoding=utf8username=rootpassword=(å¡«å†™è‡ªå·±çš„æ•°æ®åº“å¯†ç )#åˆå§‹åŒ–è¿æ¥initialSize=10#æœ€å¤§è¿æ¥æ•°é‡maxActive=30#æœ€å°ç©ºé—²è¿æ¥minIdle=5#è¶…æ—¶ç­‰å¾…æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½maxWait=5000 ã€JDBCutil.javaã€‘é…ç½®æ•°æ®åº“è¿æ¥æ±  1234567891011121314151617181920212223242526272829303132333435363738394041424344package com.OY.online.jdbc2.utilTest;import com.alibaba.druid.pool.DruidDataSourceFactory;import org.apache.commons.dbutils.DbUtils;import javax.sql.DataSource;import java.io.InputStream;import java.sql.Connection;import java.sql.ResultSet;import java.sql.SQLException;import java.sql.Statement;import java.util.Properties;/** * è¿æ¥Druidæ•°æ®è¿æ¥æ± *@Author OY*@Date 2020/5/19*@Time 11:03*@Since version-1.8*/public class JDBCutil &#123; private static DataSource source; static&#123; try &#123; Properties prop = new Properties(); InputStream is = ClassLoader.getSystemClassLoader().getResourceAsStream(&quot;Druid.properties&quot;); prop.load(is); source = DruidDataSourceFactory.createDataSource(prop); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; public static Connection getConection() throws SQLException &#123; Connection conn = source.getConnection(); return conn; &#125; //å…³é—­æ•°æ®åº“è¿æ¥ public static void closeConection(Connection conn, Statement ps, ResultSet rs)&#123; DbUtils.closeQuietly(conn); DbUtils.closeQuietly(ps); DbUtils.closeQuietly(rs); &#125;&#125; åœ¨ Bean ç›®å½•ä¸‹åˆ›å»ºã€Customers.javaã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.OY.online.jdbc.bean;import java.sql.Date;/***@Author OY*@Date 2020/5/19*@Time 10:11*@Since version-1.8*/public class Customer &#123; private int id; private String name; private String email; private Date birth; public Customer() &#123; &#125; public Customer(int id, String name, String email, Date birth) &#123; this.id = id; this.name = name; this.email = email; this.birth = birth; &#125; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getEmail() &#123; return email; &#125; public void setEmail(String email) &#123; this.email = email; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; @Override public String toString() &#123; return &quot;Customer&#123;&quot; + &quot;id=&quot; + id + &quot;, name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, email=&#x27;&quot; + email + &#x27;\\&#x27;&#x27; + &quot;, birth=&quot; + birth + &#x27;&#125;&#x27;; &#125;&#125; ã€BaseDAO.javaã€‘ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package com.OY.online.jdbc.DAO;import org.apache.commons.dbutils.QueryRunner;import org.apache.commons.dbutils.handlers.BeanHandler;import org.apache.commons.dbutils.handlers.BeanListHandler;import org.apache.commons.dbutils.handlers.ScalarHandler;import java.lang.reflect.ParameterizedType;import java.lang.reflect.Type;import java.sql.Connection;import java.sql.SQLException;import java.util.List;/***@Author OY*@Date 2020/5/19*@Time 10:14*@Since version-1.8*/public abstract class BaseDAO&lt;T&gt; &#123; private QueryRunner runner = new QueryRunner(); private Class&lt;T&gt; clazz = null; &#123; Type genericSuperclass = this.getClass().getGenericSuperclass(); ParameterizedType param = (ParameterizedType) genericSuperclass; Type[] typeArguments = param.getActualTypeArguments(); clazz =(Class&lt;T&gt;) typeArguments[0]; &#125; /** *é€šç”¨çš„å¢åˆ æ”¹ */ public int Update(Connection conn, String sql , Object...args)&#123; int update = 0; try &#123; update = runner.update(conn, sql, args); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; return update; &#125; /** * è·å–ä¸€æ¡æ•°æ® */ public T getConnection(Connection conn, String sql , Object...args)&#123; T query = null; try &#123; query = runner.query(conn, sql, new BeanHandler&lt;T&gt;(clazz),args); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; return query; &#125; /** * è·å–å¤šæ¡æ•°æ® */ public List&lt;T&gt; getConnectionList(Connection conn, String sql , Object...args)&#123; List&lt;T&gt; list = null; try &#123; list = runner.query(conn, sql, new BeanListHandler&lt;T&gt;(clazz), args); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; return list; &#125; /** * è·å–æ•°æ®åº“ç‰¹æ®Šå€¼ï¼šä¾‹å¦‚count(*)ã€Max() */ public Object getValue(Connection conn, String sql, Object...args)&#123; Object value = null; try &#123; value = runner.query(conn, sql, new ScalarHandler(), args); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; return value; &#125;&#125; *ã€CustomerDAO.javaã€‘ 12345678910111213141516171819202122232425262728293031323334353637383940package com.OY.online.jdbc.DAO;import com.OY.online.jdbc.bean.Customer;import java.sql.Connection;import java.util.List;/***@Author OY*@Date 2020/5/19*@Time 10:31*@Since version-1.8*/public interface CustomerDAO &#123; /** * å°†custå¯¹è±¡æ·»åŠ åˆ°æ•°æ®åº“ä¸­ */ void insert(Connection conn, Customer cust); /** * é’ˆå¯¹æŒ‡å®šçš„idï¼Œåˆ é™¤è¡¨ä¸­çš„ä¸€æ¡è®°å½• */ void deleteByID(Connection conn, int id); /** * é’ˆå¯¹å†…å­˜ä¸­çš„custå¯¹è±¡ï¼Œå»ä¿®æ”¹æ•°æ®è¡¨ä¸­æŒ‡å®šçš„è®°å½• */ void update(Connection conn, Customer cust); /** * é’ˆå¯¹æŒ‡å®šçš„idæŸ¥è¯¢å¾—åˆ°å¯¹åº”çš„Customerå¯¹è±¡ */ Customer getConnectionById(Connection conn, int id); /** * æŸ¥è¯¢è¡¨ä¸­çš„æ‰€æœ‰è®°å½•æ„æˆçš„é›†åˆ */ List&lt;Customer&gt; getAll(Connection conn); /** * è¿”å›æ•°æ®è¡¨ä¸­çš„æ•°æ®çš„æ¡ç›®æ•° */ Long getCount(Connection conn);&#125; ã€CustomerDAOImpI.javaã€‘ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.OY.online.jdbc.DAO;import com.OY.online.jdbc.bean.Customer;import java.sql.Connection;import java.util.List;public class CustomerDAOImpI extends BaseDAO&lt;Customer&gt; implements CustomerDAO &#123; @Override public void insert(Connection conn, Customer cust) &#123; String sql = &quot;insert into customers(name, email,birth)values(?,?,?)&quot;; Update(conn,sql,cust.getName(),cust.getEmail(),cust.getBirth()); &#125; @Override public void deleteByID(Connection conn, int id) &#123; String sql = &quot;delete from customers where id =?&quot;; Update(conn, sql ,id); &#125; @Override public void update(Connection conn, Customer cust) &#123; String sql = &quot;update customers set name =?, email = ?, birth =? where id =?&quot;; Update(conn,sql,cust.getName(),cust.getEmail(),cust.getBirth(),cust.getId()); &#125; @Override public Customer getConnectionById(Connection conn, int id) &#123; String sql = &quot;select id, name, email, birth from customers where id = ?&quot;;// String sql = &quot;select id,name,email,birth from customers where id = ?&quot;; Customer cust = getConnection(conn, sql, id); return cust; &#125; @Override public List&lt;Customer&gt; getAll(Connection conn) &#123; String sql =&quot;select id, name, email, birth from customers &quot;; List&lt;Customer&gt; list = getConnectionList(conn, sql); return list; &#125; @Override public Long getCount(Connection conn) &#123; String sql = &quot;select count(*) from customers&quot;; Object value = getValue(conn, sql); return (Long) value; &#125;&#125; æµ‹è¯•ã€CustomerDAOImpITest.javaã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104package com.OY.online.jdbc.util;import com.OY.online.jdbc.DAO.CustomerDAOImpI;import com.OY.online.jdbc.bean.Customer;import com.OY.online.jdbc2.utilTest.JDBCutil;import org.junit.Test;import java.sql.Connection;import java.sql.Date;import java.sql.SQLException;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.List;import static org.junit.Assert.*;public class CustomerDAOImpITest &#123; private CustomerDAOImpI custs = new CustomerDAOImpI(); @Test public void insert() &#123; Connection conn = null; try &#123; conn = JDBCutil.getConection(); SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); java.util.Date date = sdf.parse(&quot;2001-7-8&quot;); Customer cust = new Customer(1, &quot;è«æ—&quot;, &quot;molin@126.com&quot;, new Date(date.getTime())); custs.insert(conn, cust); System.out.println(&quot;æ·»åŠ æˆåŠŸ&quot;); &#125; catch (Exception throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCutil.closeConection(conn,null,null); &#125; &#125; @Test public void deleteByID() &#123; Connection conn = null; try &#123; conn = JDBCutil.getConection(); custs.deleteByID(conn,26); System.out.println(&quot;åˆ é™¤æˆåŠŸ&quot;); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCutil.closeConection(conn, null,null); &#125; &#125; @Test public void update() &#123; Connection conn = null; try &#123; conn = JDBCutil.getConection(); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCutil.closeConection(conn, null,null); &#125; &#125; @Test public void getConnectionById() &#123; Connection conn = null; try &#123; conn = JDBCutil.getConection(); Customer cust = custs.getConnectionById(conn, 27); System.out.println(cust); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCutil.closeConection(conn, null,null); &#125; &#125; @Test public void getAll() &#123; Connection conn = null; try &#123; conn = JDBCutil.getConection(); List&lt;Customer&gt; list = custs.getAll(conn); list.forEach(System.out::println); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCutil.closeConection(conn, null,null); &#125; &#125; @Test public void getCount() &#123; Connection conn = null; try &#123; conn = JDBCutil.getConection(); Long count = custs.getCount(conn); System.out.println(&quot;æ•°æ®åº“æ¡ç›®æ•°ä¸º&quot;+count); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCutil.closeConection(conn, null,null); &#125; &#125;&#125;","categories":[{"name":"JDBC","slug":"JDBC","permalink":"http://blog.oy6090.top/categories/JDBC/"}],"tags":[{"name":"JDBCæ•°æ®è¿æ¥æ± ","slug":"JDBCæ•°æ®è¿æ¥æ± ","permalink":"http://blog.oy6090.top/tags/JDBC%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E6%B1%A0/"}]},{"title":"Javaå¤šçº¿ç¨‹åŸºç¡€ï¼ˆä¸€ï¼‰","slug":"Javaå¤šçº¿ç¨‹åŸºç¡€ï¼ˆä¸€ï¼‰","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:50:25.089Z","comments":true,"path":"posts/69.html","link":"","permalink":"http://blog.oy6090.top/posts/69.html","excerpt":"","text":"è¿™æ˜¯ç»“åˆè‡ªå·±æ‰€å­¦æ€»ç»“ï¼Œè‡ªå·±ä¹Ÿæ­£åœ¨å­¦ä¹ é“è·¯ä¸Šï¼Œæœ¬ç¯‡ç»“åˆ Guide å“¥çš„åšå®¢ç»“åˆï¼Œè‡ªå·±æ‰€å­¦çš„è¿˜å¤„äºåŸºç¡€çš„é˜¶æ®µï¼Œæ²¡äº†è§£è¿™ä¹ˆæ·±ï¼Œé€šè¿‡å®ƒäººçš„æ¥è¡¥è¶³è‡ªå·±çš„çŸ¥è¯†ç‚¹çš„ç¼ºæ¼ï¼Œå¦‚æœä½ è¦äº†è§£æ›´æ·±ï¼Œæ–‡ç« ä¸‹æœ‰è½¬è½½åœ°å€ã€‚é€šè¿‡åšå®¢æ¥è®°å½•è‡ªå·±çš„ä¸€æ»´æ»´æˆé•¿ï¼Œä¹Ÿè®¸è¿‡ç¨‹å¾ˆè‰°è¾›ï¼Œä½†æˆ‘é€‰æ‹©åšæŒï¼Œä¸ç»™ä»¥åçš„è‡ªå·±ç•™ä¸‹é—æ†¾ã€‚ ä¸€ è¿›ç¨‹å’Œå¤šçº¿ç¨‹ç®€ä»‹1.1 è¿›ç¨‹å’Œçº¿ç¨‹è¿›ç¨‹æ¦‚å¿µï¼šç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæˆ–æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºè¯´æ˜ï¼šè¿›ç¨‹ä½œä¸ºèµ„æºåˆ†é…å•ä½ï¼Œç³»ç»Ÿå†è¿è¡Œæ—¶ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜åŒºåŸŸçº¿ç¨‹æ¦‚å¿µ;è¿›ç¨‹å¯è¿›ä¸€æ­¥æŠŠç»†åŒ–ä¸ºçº¿ç¨‹ï¼Œæ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œè·¯å¾„ã€‚è¯´æ˜ï¼šçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œæ‰§è¡Œçš„å•ä½ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ï¼Œçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å° 1.2 ä½•ä¸ºè¿›ç¨‹ï¼Ÿè¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ç³»ç»Ÿè¿è¡Œçš„ä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»åˆ›å»ºï¼Œè¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ 1.3 ä½•ä¸ºå¤šçº¿ç¨‹ï¼Ÿçº¿ç¨‹ä¸è¿›ç¨‹ç›¸ä¼¼ï¼Œä½†çº¿ç¨‹æ˜¯ä¸€ä¸ªæ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚ä¸è¿›ç¨‹ä¸åŒçš„æ˜¯åŒç±»çš„å¤šçº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´å’Œä¸€ç»„ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥ç³»ç»Ÿåœ¨äº§ç”Ÿä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–æ˜¯å„ä¸ªçº¿ç¨‹ä¹‹é—´ä½œåˆ‡æ¢å·¥ä½œæ—¶ï¼Œè´Ÿæ‹…è¦æ¯”è¿›ç¨‹å°å¾—å¤šï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œçº¿ç¨‹ä¹Ÿç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚ 1.4 ä½•ä¸ºå¤šçº¿ç¨‹å¤šçº¿ç¨‹å°±æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œçš„æˆ–äº¤æ›¿çš„è¿è¡Œã€‚å•æ ¸ CPU çš„è¯æ˜¯é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯äº¤æ›¿æ‰§è¡Œã€‚å¤šæ ¸ CPU çš„è¯ï¼Œå› ä¸ºå—ï¼Œæ¯ä¸ª CPU æœ‰è‡ªå·±çš„è¿ç®—å™¨ï¼Œæ‰€ä»¥åœ¨å¤šä¸ª CPU ä¸­å¯ä»¥åŒæ—¶è¿è¡Œã€‚ 1.5 ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹æ˜¯å¿…è¦çš„ä¸ªäººæ„Ÿè§‰å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼šå¼€å‘é«˜å¹¶å‘ç³»ç»Ÿçš„åŸºç¡€ï¼Œåˆ©ç”¨å¥½å¤šçº¿ç¨‹æœºåˆ¶å¯ä»¥å¤§å¤§æé«˜ç³»ç»Ÿæ•´ä½“çš„å¹¶å‘èƒ½åŠ›åŠæ€§èƒ½ã€‚ 1.6 ä¸ºä»€ä¹ˆæå€¡å¤šçº¿ç¨‹è€Œä¸æ˜¯å¤šçº¿ç¨‹çº¿ç¨‹å°±æ˜¯è½»é‡çº§çš„è¿›ç¨‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚ä½¿ç”¨å¤šçº¿ç¨‹è€Œä¸æ˜¯ç”¨å¤šçº¿ç¨‹å»è¿›è¡Œå¹¶å‘ç¨‹åºçš„è®¾è®¡ï¼Œæ˜¯å› ä¸ºçº¿ç¨‹ä¹‹é—´çš„åˆ‡èŠ±å’Œè°ƒåº¦çš„æˆæœ¬è¿œå°äºè¿›ç¨‹ã€‚ äºŒ å‡ ä¸ªé‡è¦çš„æ¦‚å¿µ2.1 å•æ ¸ CPU ä¸å¤šæ ¸ CPU çš„ç†è§£å•æ ¸ CPU;å…¶å®å°±æ˜¯ä¸€ç§å‡çš„å¤šçº¿ç¨‹ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªæ—¶é—´å•å…ƒç±»ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹çš„ä»»åŠ¡ã€‚å°±å¥½æ¯”å¦‚ï¼šè™½ç„¶æœ‰å¾ˆå¤šçš„è½¦é“ï¼Œä½†æ˜¯æ”¶è´¹ç«™åªæœ‰ä¸€ä¸ªå·¥ä½œäººå‘˜åœ¨æ”¶è´¹ï¼Œåªæœ‰æ”¶è´¹æ‰èƒ½è¿‡å»ï¼Œé‚£ä¹ˆ CPU å°±å¥½æ¯”å¦‚æ”¶è´¹äººå‘˜ã€‚å¦‚æœæŸä¸ªäººä¸æƒ³äº¤é’±ï¼Œé‚£ä¹ˆæ”¶è´¹äººå‘˜å°±å¯ä»¥æŠŠä»–â€œæŒ‚èµ·â€ï¼ˆæ™¾ç€ä»–ï¼Œç­‰ä»–ç›¸åŒäº†ã€‚å‡†å¤‡å¥½é’±ï¼Œå†å»æ”¶è´¹ï¼‰ä½†æ˜¯å› ä¸º CP æ—¶é—´å•ä½ç‰¹åˆ«çŸ­ï¼Œå› æ­¤æ„Ÿè§‰ä¸å‡ºæ¥ã€‚å¤šæ ¸ CPUï¼šæ‰èƒ½æ›´å¥½åœ°å‘æŒ¥å‡ºå¤šçº¿ç¨‹çš„æ•ˆç‡ã€‚ ä¸€ä¸ª Java åº”ç”¨ç¨‹åº java.exeï¼Œå…¶å®è‡³å°‘ä¸‰ä¸ªçº¿ç¨‹ï¼šmainï¼ˆï¼‰ä¸»çº¿ç¨‹ï¼Œgc()åƒåœ¾å›æ”¶çº¿ç¨‹ï¼Œå¼‚å¸¸å¤„ç†çº¿ç¨‹ã€‚å½“ç„¶å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œä¼šå½±å“ä¸»çº¿ç¨‹ã€‚ 2.2 å¹¶è¡Œä¸å¹¶å‘çš„ç†è§£å¹¶è¡Œï¼šå¤šä¸ª CPU åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ¯”å¦‚å¤šä¸ªäººåšä¸åŒçš„äº‹æƒ…ã€‚å¹¶å‘ï¼šä¸€ä¸ª CPUï¼ˆé‡‡ç”¨æ—¶é—´ç‰‡ï¼‰åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ¯”å¦‚ï¼šç§’æ€ã€å¤šä¸ªäººåšåŒä¸€ä»¶äº‹ ä¸‰ åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹å¼ ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œæˆ‘æŠŠ JDK 5 åŠä»¥å‰å½’çº³åœ¨è¿™é‡Œäº†ã€‚ 3.1 ç»§æ‰¿ Thread ç±»çš„æ–¹å¼ åˆ›å»ºä¸€ä¸ªç»§æ‰¿ç±» Thread ç±»çš„å­ç±» é‡å†™ Thread ç±»ä¸­çš„ run() â€“&gt; å°†æ­¤çº¿ç¨‹çš„æ“ä½œå£°æ˜åœ¨ run()ä¸­ åˆ›å»º Thread ç±»çš„å­ç±»å¯¹è±¡ é€šè¿‡æ­¤ç±»å¯¹è±¡è°ƒç”¨ start() ï¼› &lt;1&gt; å¯åŠ¨å½“å‰çº¿ç¨‹ &lt;2&gt; è°ƒç”¨å½“å‰çº¿ç¨‹çš„ run() ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425class MyThread3 extends Thread &#123; @Override public void run() &#123; for (int i = 0; i &lt; 100; i++) &#123; if (i % 2 == 0) &#123; System.out.println(Thread.currentThread().getName() + &quot;:&quot; + i); &#125; &#125; &#125;&#125;public class RevierTest &#123; public static void main(String[] args) &#123; MyThread3 m1 = new MyThread3(); //è®¾ç½®çº¿ç¨‹å m1.setName(&quot;çº¿ç¨‹ä¸€&quot;); MyThread3 m2 = new MyThread3(); //è®¾ç½®çº¿ç¨‹å m2.setName(&quot;çº¿ç¨‹äºŒ&quot;); //å¯åŠ¨çº¿ç¨‹m1ã€m2 m1.start(); m2.start(); &#125;&#125; è¿è¡Œç»“æœ:è¯´æ˜ä¸¤ä¸ªé—®é¢˜ï¼š é—®é¢˜ä¸€ï¼šæˆ‘ä»¬åœ¨å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¿…é¡»è°ƒç”¨ start()ï¼Œä¸èƒ½è°ƒç”¨ run()çš„æ–¹å¼å¯åŠ¨çº¿ç¨‹é—®é¢˜äºŒ: å¦‚æœåœ¨å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ª Thread å­ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨æ­¤å¯¹è±¡ start() 3.2 å®ç° Runnable æ¥å£çš„æ–¹å¼ åˆ›å»ºä¸€ä¸ªå®ç° Runnable æ¥å£çš„ç±» å®ç°ç±»å»å®ç° Runable ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼šrunï¼ˆï¼‰ åˆ›å»ºå®ç°ç±»çš„å¯¹è±¡ å°†æ­¤å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ Thread ç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»º Thread ç±»çš„å¯¹è±¡ é€šè¿‡ Thread ç±»çš„å¯¹è±¡è°ƒç”¨ start() ä»£ç ç¤ºä¾‹: 12345678910111213141516171819class myThread implements Runnable&#123; @Override public void run() &#123; for(int i = 0 ; i &lt; 100; i++)&#123; if(i % 2 == 0)&#123; System.out.println(Thread.currentThread().getName()+&quot;:&quot;+i); &#125; &#125; &#125;&#125;public class RevierTest &#123; public static void main(String[] args) &#123; myThread m1 = new myThread(); Thread t1= new Thread(m1); t1.setName(&quot;çº¿ç¨‹ä¸€&quot;); t1.start(); &#125; è¿è¡Œç»“æœï¼šä¸¤ç§æ–¹å¼ï¼ˆThreadã€Runableï¼‰çš„å¯¹æ¯”ï¼š å¼€å‘ä¸­ï¼šä¼˜å…ˆé€‰æ‹©ï¼šå®ç° Runable æ¥å£çš„æ–¹å¼åŸå› ï¼šâ‘  å®ç°çš„æ–¹å¼æ²¡å•ç»§æ‰¿æ€§çš„å±€é™â‘¡ å®ç°çš„æ–¹å¼æ›´é€‚åˆæ¥å¤„ç†å¤šä¸ªçº¿ç¨‹å…±äº«æ•°æ®çš„æƒ…å†µè”ç³»ï¼š public class Thread implements Runableç›¸åŒç‚¹ï¼šâ‘  ä¸¤ç§æ–¹å¼éƒ½éœ€è¦é‡å†™ run()ï¼Œå°†çº¿ç¨‹è¦æ‰§è¡Œçš„é€»è¾‘å£°æ˜åœ¨ runï¼ˆï¼‰ä¸­â‘¡ ç›®å‰è¿™ä¸¤ç§æ–¹å¼ï¼Œè¦æƒ³å¯åŠ¨çº¿ç¨‹ï¼Œéƒ½æ˜¯è°ƒç”¨çš„ Thread ç±»ä¸­çš„ start() 3.3 å®ç° Callable æ¥å£ã€‚ â€”JDK5.0 æ–°å¢ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class Number implements Callable &#123; int sum = 0; //1.å®ç°callableæ–¹æ³•ï¼Œå°†æ­¤æ–¹æ³•éœ€è¦æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨call() @Override public Object call() throws Exception &#123; for (int i = 0; i &lt; 100; i++) &#123; if (i % 2 == 0) &#123; System.out.println(Thread.currentThread().getName() + &quot;:&quot; + i); sum += i; &#125; &#125; return sum; &#125;&#125;public class CallableTest &#123; public static void main(String[] args) &#123; //2.åˆ›å»ºCallableæ¥å£å®ç°ç±»å¯¹è±¡ Number number = new Number(); //3.å°†æ­¤Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡ä½œä¸ºä¼ é€’åˆ°FutureTakæ„é€ å™¨ä¸­ï¼Œåˆ›å»ºFutureTaskå¯¹è±¡ FutureTask f1 = new FutureTask(number); //4.å°†FutrueTaskçš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ï¼Œåˆ›å»ºThreadçš„å¯¹è±¡ Thread T1 = new Thread(f1); Thread T2 = new Thread(f1); //è®¾ç½®çº¿ç¨‹åã€è°ƒç”¨start()æ–¹æ³• T1.setName(&quot;çº¿ç¨‹ä¸€&quot;); T1.start(); T2.setName(&quot;çº¿ç¨‹äºŒ&quot;); T2.start(); Object sum = null; try &#123; //è·å–Callableä¸­çš„callæ–¹æ³•çš„è¿”å›å€¼ //getï¼ˆï¼‰è¿”å›å€¼å³ä¸ºFutruetaskæ„é€ å™¨å‚æ•°Callableå®ç°ç±»é‡å†™call()çš„è¿”å›å€¼ sum = f1.get(); System.out.println(sum); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¿è¡Œç»“æœè¯´æ˜ï¼š å¦‚ä½•ç†è§£å®ç° Callable æ¥å£çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ¯”å®ç° Runnable æ¥å£åˆ›å»ºå¤šçº¿ç¨‹æ–¹å¼å¼ºå¤§ï¼Ÿâ‘  call() å¯ä»¥æœ‰è¿”å›å€¼â‘¡ call() å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«å¤–é¢çš„æ“ä½œæ•è·ï¼Œè·å–å¼‚å¸¸çš„ä¿¡æ¯â‘¢ callable æ˜¯æ”¯æŒæ³›å‹çš„ 3.4 ä½¿ç”¨çº¿ç¨‹æ±  â€” JDK5.0ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344class NuberThread implements Runnable&#123; @Override public void run() &#123; for(int i =0; i &lt;= 100; i++)&#123; if(i % 2==0)&#123; System.out.println(Thread.currentThread().getName()+&quot;:&quot;+i); &#125; &#125; &#125;&#125;class NuberThread1 implements Runnable&#123; @Override public void run() &#123; for(int i =0; i &lt;= 100; i++)&#123; if(i % 2!=0)&#123; System.out.println(Thread.currentThread().getName()+&quot;:&quot;+i); &#125; &#125; &#125;&#125;public class ThreadPoolTest &#123; public static void main(String[] args) &#123; //æä¾›æŒ‡å®šçš„çº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ±  ExecutorService service = Executors.newFixedThreadPool(10); ThreadPoolExecutor severicel = (ThreadPoolExecutor) service; //è®¾ç½®çº¿ç¨‹æ± çš„å±æ€§// System.out.println(service.getClass());// service1.setCorePoolSize(15);// service1.setKeepAliveTime(); //æ‰§è¡ŒæŒ‡å®šçš„çº¿ç¨‹çš„æ“ä½œã€‚éœ€è¦æä¾›å®ç°Runnableæ¥å£æˆ–Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡ //é€‚ç”¨Callableæ¥å£ service.execute(new NuberThread()); service.execute(new NuberThread1()); //é€‚ç”¨Callableæ¥å£ //service.submit(Callable callable); //å…³é—­è¿æ¥æ±  service.shutdown(); &#125;&#125; è¿è¡Œç»“æœï¼šè¯´æ˜ï¼š â‘  æé«˜å“åº”é€Ÿåº¦ï¼ˆå‡å°‘åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´ï¼‰â‘¡ é™ä½èµ„æºæ¶ˆè€—ï¼ˆé‡å¤åˆ©ç”¨çº¿ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼‰â‘¢ ä¾¿äºçº¿ç¨‹ç®¡ç†corePoolSize:çº¿ç¨‹æ± çš„å¤§å° maximumPoolSize:æœ€å¤§çº¿ç¨‹æ•° keepAliveTime:çº¿ç¨‹æ²¡ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢ å›› ä¸€äº›å¸¸ç”¨æ–¹æ³•4.1 start()å¯åŠ¨å½“å‰çº¿ç¨‹ï¼›è°ƒç”¨å½“å‰çº¿ç¨‹çš„ run() 4.2 run()é€šå¸¸éœ€è¦é‡å†™ Thread ç±»ä¸­çš„æ­¤æ–¹æ³•ï¼Œå°†åˆ›å»ºçš„çº¿ç¨‹è¦æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨æ­¤æ–¹æ³•ä¸­ 4.3 currentThread()é™æ€æ–¹æ³•ï¼Œè¿”å›æ‰§è¡Œå½“å‰ä»£ç çš„çº¿ç¨‹ 4.4 getName()è·å–å½“å‰çº¿ç¨‹çš„åå­— 4.5 setName()è®¾ç½®å½“å‰çº¿ç¨‹çš„åå­— 4.6 yield()é‡Šæ”¾å½“å‰ cpu çš„æ‰§è¡Œæƒ 4.7 join()åœ¨çº¿ç¨‹ a ä¸­è°ƒç”¨çº¿ç¨‹ b çš„ join(),æ­¤æ—¶çº¿ç¨‹ a å°±è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°çº¿ç¨‹ b å®Œå…¨æ‰§è¡Œå®Œä»¥åï¼Œçº¿ç¨‹ a æ‰ç»“æŸé˜»å¡çŠ¶æ€ã€‚ 4.8 stop()å·²è¿‡æ—¶ã€‚å½“æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œå¼ºåˆ¶ç»“æŸå½“å‰çº¿ç¨‹ã€‚ 4.9 sleep(long millitime)è®©å½“å‰çº¿ç¨‹â€œç¡çœ â€æŒ‡å®šçš„ millitime æ¯«ç§’ã€‚åœ¨æŒ‡å®šçš„ millitime æ¯«ç§’æ—¶é—´å†…ï¼Œå½“å‰çº¿ç¨‹æ˜¯é˜»å¡çŠ¶æ€ã€‚ 4.10 isAlive()åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å­˜æ´» 4.11 çº¿ç¨‹çš„ä¼˜å…ˆçº§ MAX_PRIORITYï¼š10 MIN _PRIORITYï¼š1 NORM_PRIORITYï¼š5 â€“&gt;é»˜è®¤ä¼˜å…ˆçº§ 4.12 è·å–å’Œè®¾ç½®å½“å‰çº¿ç¨‹çš„ä¼˜å…ˆçº§ getPriority():è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§ setPriority(int p):è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§ è¯´æ˜ï¼šé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹è¦æŠ¢å ä½ä¼˜å…ˆçº§çº¿ç¨‹ cpu çš„æ‰§è¡Œæƒã€‚ä½†æ˜¯åªæ˜¯ä»æ¦‚ç‡ä¸Šè®²ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹é«˜æ¦‚ç‡çš„æƒ…å†µä¸‹è¢«æ‰§è¡Œã€‚å¹¶ä¸æ„å‘³ç€åªå½“é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰§è¡Œå®Œä»¥åï¼Œä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰æ‰§è¡Œã€‚ 4.13 è¡¥å……ï¼šçº¿ç¨‹çš„åˆ†ç±»ä¸€ç§æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œä¸€ç§æ˜¯ç”¨æˆ·çº¿ç¨‹ã€‚ äº” Thread çš„ç”Ÿå‘½å‘¨æœŸ5.1 å›¾ç¤º 5.2 è¯´æ˜ ç”Ÿå‘½å‘¨æœŸå…³æ³¨ä¸¤ä¸ªæ¦‚å¿µï¼šçŠ¶æ€ã€ç›¸åº”çš„æ–¹æ³• å…³æ³¨ ï¼šçŠ¶æ€ a â€“&gt; çŠ¶æ€ bï¼šå“ªäº›æ–¹æ³•æ‰§è¡Œäº†ï¼ˆå›è°ƒæ–¹æ³•ï¼‰æŸä¸ªæ–¹æ³•ä¸»åŠ¨è°ƒç”¨:çŠ¶æ€ a â€”&gt; çŠ¶æ€ b é˜»å¡ï¼šä¸´æ—¶çŠ¶æ€ï¼Œä¸å¯ä½œä¸ºæœ€ç»ˆçŠ¶æ€ æ­»äº¡ï¼šæœ€ç»ˆçš„çŠ¶æ€ çº¿ç¨‹çš„åŒæ­¥æœºåˆ¶å’Œçº¿ç¨‹é€šä¿¡æ”¾åˆ°å¤šçº¿ç¨‹ï¼ˆäºŒï¼‰ã€‚ è½¬è½½åœ°å€","categories":[{"name":"Java","slug":"Java","permalink":"http://blog.oy6090.top/categories/Java/"}],"tags":[{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/Java%E5%9F%BA%E7%A1%80/"}]},{"title":"javaScript åŸºç¡€è¯­æ³•","slug":"javaScript åŸºç¡€è¯­æ³•","date":"2020-07-11T16:00:00.000Z","updated":"2020-12-28T00:31:29.661Z","comments":true,"path":"posts/1574967654.html","link":"","permalink":"http://blog.oy6090.top/posts/1574967654.html","excerpt":"","text":"å‰è¨€ï¼š åŸºç¡€çŸ¥è¯†è¯­æ³•ï¼Œä»£ç ä¸å¤šã€‚æˆ‘å·²ç»æŠŠä»£ç æ‰“åŒ…æ”¾åˆ°æ–‡ç« ä¸‹é¢äº†ã€‚ æ•°æ®ç±»å‹1.1 JS ä¸­ä¸€å…±åˆ†æˆå…­ç§æ•°æ®ç±»å‹ String å­—ç¬¦ä¸² Number æ•°å€¼ Boolean å¸ƒå°”å€¼ Undefined æœªå®šä¹‰ Object å¯¹è±¡ 1.2 String å­—ç¬¦ä¸² Js ä¸­å­—ç¬¦ä¸²éœ€è¦ä½¿ç”¨å¼•å·å¼•èµ·æ¥æˆ–å•å¼•å·éƒ½è¡Œâ€‹ åœ¨å­—ç¬¦ä¸²ä½¿ç”¨\\ä½œä¸ºè½¬ä¹‰å­—ç¬¦ 12345 \\&#39; &#x3D;&#x3D;&gt; &#39;\\&quot; &#x3D;&#x3D;&gt; &quot;\\n &#x3D;&#x3D;&gt; æ¢è¡Œ\\t &#x3D;&#x3D;&gt; åˆ¶è¡¨\\\\ &#x3D;&#x3D;&gt; \\ ä½¿ç”¨ typeof è¿ç®—ç¬¦æ£€æŸ¥å­—ç¬¦ä¸²æ—¶ï¼Œä¼šè¿”å›â€œstringâ€ 1.3 Number æ•°å€¼ js ä¸­æ‰€æœ‰çš„æ•´æ•°å’Œæµ®ç‚¹æ•°éƒ½æ˜¯ Number ç±»å‹ ç‰¹æ®Šçš„æ•°å­— infinity æ­£æ— ç©· -infinity è´Ÿæ— ç©· NaN éæ³•æ•°å­—(NOT A Number) å…¶ä»–è¿›åˆ¶çš„æ•°å­—è¡¨ç¤ºï¼š Ob å¼€å¤´è¡¨ç¤ºäºŒè¿›åˆ¶ï¼Œä½†æ˜¯ä¸æ˜¯å¤šæœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒ O å¼€å¤´è¡¨ç¤ºå…«è¿›åˆ¶ Ox å¼€å¤´è¡¨ç¤ºåå…­è¿›åˆ¶ ä½¿ç”¨ typeof æ£€æŸ¥ä¸€ä¸ª Number ç±»å‹çš„æ•°æ®æ—¶ï¼Œä¼šè¿”å› numberï¼ˆåŒ…æ‹¬ NaN å’Œ Infinityï¼‰ 1.4 Boolean å¸ƒå°”å€¼ å¸ƒå°”å€¼ä¸»è¦ç”¨æ¥é€»è¾‘åˆ¤æ–­ï¼Œå¸ƒå°”å€¼åªæœ‰ä¸¤ä¸ª true é€»è¾‘è¿ç®— false é€»è¾‘çš„å‡ ä½¿ç”¨ typeo æ£€æŸ¥ä¸€ä¸ªå¸ƒå°”å€¼æ—¶ï¼Œä¼šè¿”å›â€booleanâ€ 1.5 Null ç©ºå€¼ ç©ºå€¼ä¸“é—¨æ¥è¡¨ç¤ºä¸ºç©ºçš„å¯¹è±¡ï¼ŒNull ç±»å‹çš„å€¼åªæœ‰ä¸€ä¸ª null ä½¿ç”¨ typeof æ£€æŸ¥ä¸€ä¸ª Null ç±»å‹çš„å€¼æ—¶ä¼šè¿”å›â€Objectâ€ 1.6 Undefined æœªå®šä¹‰ å¦‚æœå£°æ˜ä¸€ä¸ªå˜é‡ä½†æ˜¯æ²¡æœ‰ä¸ºå˜é‡èµ‹å€¼å˜é‡çš„å€¼å°±æ˜¯ undefined è¯¥ç±»å‹çš„å€¼æ˜¯æœ‰ä¸€ä¸ª underfined ä½¿ç”¨ typeof æ£€æŸ¥ä¸€ä¸ª Undefined ç±»å‹çš„å€¼æ—¶ï¼Œä¼šè¿”å›â€undefinedâ€ 1.7 ç±»å‹çš„è½¬æ¢ ç±»å‹è½¬æ¢å°±æ˜¯åªå°†å…¶ä»–çš„æ•°æ®ç±»å‹ï¼Œè½¬æ¢ä¸º String Number æˆ– Boolean è½¬æ¢ä¸º String æ–¹å¼ä¸€(å¼ºåˆ¶ç±»å‹è½¬æ¢)ï¼š è°ƒç”¨è¢«è½¬æ¢æ•°æ®çš„**toString()**æ–¹æ³• æ³¨æ„ï¼š è¿™ä¸ªæ–¹æ³•ä»˜ä¸é€‚ç”¨ null å’Œ undefined ç”±äºè¿™ä¸ªç±»å‹ä¸­æ²¡æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥è°ƒç”¨ toString()æ—¶ä¼šæŠ¥é”™ æ–¹å¼äºŒ(å¼ºåˆ¶ç±»å‹è½¬æ¢)ï¼š è°ƒç”¨**String()**å‡½æ•° åŸç†ï¼šå¯¹äº Number Boolean String éƒ½ä¼šè°ƒç”¨ä»–ä»¬çš„ toString()æ–¹æ³•æ¥å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¯¹äº null å€¼ï¼Œç›´æ¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²â€œnullâ€.å¯¹äº underfined ç›´æ¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²â€undefinedâ€ æ–¹å¼ä¸‰(éšå¼çš„ç±»å‹è½¬æ¢)ï¼š ä¸ºä»»æ„çš„æ•°æ®ç±»å‹ + â€œâ€ åŸç†ï¼šå’Œ String()å‡½æ•°ä¸€æ · è½¬æ¢ä¸º Number æ–¹å¼ä¸€(å¼ºåˆ¶ç±»å‹è½¬æ¢): è°ƒç”¨Number() å‡½æ•° è½¬æ¢çš„æƒ…å†µï¼š 1.å­—ç¬¦ä¸² â€“&gt; æ•°å­— å¦‚æœå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªåˆæ³•çš„æ•°å­—ï¼Œåˆ™ç›´æ¥è½¬æ¢ä¸ºå¯¹åº”çš„æ•°å­— å¦‚æœå­—ç¬¦ä¸²æ—¶ä¸€ä¸ªéæ³•çš„æ•°å­—ï¼Œåˆ™ç›´æ¥è½¬ä¸º NaN å¦‚æœæ˜¯ä¸€ä¸ªç©ºä¸²æˆ–çº¯ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œåˆ™è½¬æ¢ä¸º 0 2.å¸ƒå°”å€¼ â€“&gt; æ•°å­— true è½¬æ¢ä¸º 1 false è½¬æ¢ä¸º 0 3.ç©ºå€¼ â€“&gt; æ•°å€¼ null è½¬æ¢ä¸º 0 4.æœªå®šä¹‰ â€“&gt; æ•°å­— undefined è½¬æ¢ä¸º NaN æ–¹å¼äºŒ(å¼ºåˆ¶ç±»å‹çš„è½¬æ¢): è°ƒç”¨ parseInt() æˆ– parseFloat() è¿™ä¸¤ä¸ªå‡½æ•°ä¸“é—¨å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„ parseInt() å¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æœ‰æ•ˆçš„æ•´æ•°æå–å‡ºæ¥ï¼Œå¹¶è½¬æ¢ä¸º Number å¦‚æœéœ€è¦å¯ä»¥åœ¨ parseInt()ä¸­æŒ‡å‡ºä¸€ä¸ªç¬¬äºŒä¸ªå‚æ•°ã€‚æ¥æŒ‡å®š Number parseFloat() å¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²çš„æœ‰æ•ˆçš„å°æ•°æå–å‡ºæ¥ï¼Œå¹¶è½¬æ¢ä¸º Number æ–¹å¼ä¸‰(éšå¼çš„ç±»å‹è½¬æ¢)ï¼š ä½¿ç”¨ä¸€å…ƒçš„+æ¥è¿›è¡Œéšå¼çš„ç±»å‹è½¬æ¢ åŸç†ï¼šå’Œ Number()å‡½æ•°ä¸€æ · è½¬æ¢ä¸ºå¸ƒå°”å€¼ æ–¹å¼ä¸€(å¼ºåˆ¶ç±»å‹çš„è½¬æ¢)ï¼š ä½¿ç”¨ BOOlean()å‡½æ•° è½¬æ¢çš„æƒ…å†µï¼š å­—ç¬¦ä¸² â€“&gt; å¸ƒå°” é™¤äº†ç©ºä¸²å…¶ä½™æ˜¯ true æ•°å€¼ â€“&gt; å¸ƒå°” é™¤äº† 0 å’Œ NaN å…¶ä½™æ˜¯å…¨æ˜¯ true nullã€undefined â€“&gt; å¸ƒå°” éƒ½æ˜¯ false å¯¹è±¡ â€“&gt; å¸ƒå°” éƒ½æ˜¯ true æ–¹å¼äºŒ(éšå¼ç±»å‹è½¬æ¢): ä¸ºä»»æ„çš„æ•°æ®ç±»å‹åšä¸¤æ¬¡éè¿ç®—ï¼Œå³å¯å°†è½¬æ¢ä¸ºå¸ƒå°”å€¼ 123var a &#x3D; &quot;hello&quot;;a &#x3D; !!a;console.log(a); &#x2F;&#x2F; true æ•°æ®è¿ç®— 2.1 è¿ç®—ç¬¦ è¿ç®—ç¬¦ä¹Ÿç§°ä¸ºæ“ä½œç¬¦ é€šè¿‡è¿ç®—ç¬¦å¯ä»¥å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªå€¼è¿›è¡Œè¿ç®—æˆ–æ“ä½œ typeof è¿ç®—ç¬¦ ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ è¯­æ³•ï¼štypeof å˜é‡ å®ƒä¼šè¿”å›ä¸€ä¸ªç”¨äºæè¿°ç±»å‹çš„å­—ç¬¦ä¸²ä½œä¸ºç»“æœ ç®—æ•°è¿ç®—ç¬¦ â€˜+â€™ å¯¹ä¸¤ä¸ªå€¼è¿›è¡ŒåŠ æ³•è¿ç®—å¹¶è¿”å›ç»“æœ â€˜-â€˜ å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œå‡æ³•è¿ç®—å¹¶è¿”å›ç»“æœ â€˜*â€˜ å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œä¹˜æ³•è¿ç®—å¹¶è¿”å›ç»“æœ / å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œé™¤æ³•è¿ç®—å¹¶è¿”å›ç»“æœ % å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œå–ä½™è¿ç®—å¹¶è¿”å›ç»“æœ é™¤äº†åŠ æ³•ä»¥å¤–ï¼Œå¯¹é Number ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—æ—¶ï¼Œéƒ½ä¼šå…ˆè½¬æ¢ä¸º Number ç„¶ååœ¨åšè¿ç®—ã€‚è€ŒåšåŠ æ³•è¿ç®—æ—¶ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œç›¸åŠ ï¼Œåˆ™ä¼šåšæ‹¼ä¸²æ“ä½œï¼Œå°†ä¸¤ä¸ªå­—ç¬¦è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä»»ä½•å€¼å’Œå­—ç¬¦ä¸²åšåŠ æ³•ï¼Œéƒ½ä¼šå…ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå†æ‹¼ä¸²ã€‚ ä¸€å…ƒè¿ç®—ç¬¦ ä¸€å…ƒè¿ç®—ç¬¦åªéœ€è¦ä¸€ä¸ªæ“ä½œæ•° ä¸€å…ƒçš„ â€œ+â€ ï¼Œå°±æ˜¯æ­£å·ï¼Œä¸ä¼šå¯¹å€¼äº§ç”Ÿä»»ä½•å½±å“ï¼Œä½†æ˜¯å¯ä»¥å°†ä¸€ä¸ªéæ•°å­—è½¬æ¢ä¸ºæ•°å­— ä¾‹å­ï¼š 12var a &#x3D; true;a &#x3D; +a; ä¸€å…ƒçš„ - å°±æ˜¯è´Ÿå·ï¼Œå¯ä»¥å¯¹ä¸€ä¸ªæ•°å­—è¿›è¡Œç¬¦å·ä½å–å ä¾‹å­ï¼š 12var a &#x3D; 10;a &#x3D; -a; è‡ªå¢ è‡ªå¢å¯ä»¥ä½¿å˜é‡åœ¨åŸå€¼çš„åŸºç¡€ä¸Šè‡ªå¢ 1 è‡ªå¢ä½¿ç”¨ ++ è‡ªå¢å¯ä»¥ä½¿ç”¨ å‰++ï¼ˆ++aï¼‰å++(a++) æ— è®ºæ˜¯++a è¿˜æ˜¯ a++éƒ½ä¼šç«‹å³ä½¿åŸå˜é‡è‡ªå¢ 1 ä¸åŒçš„æ˜¯++a å’Œ a++çš„å€¼æ˜¯ä¸åŒçš„ï¼Œ ++a çš„å€¼æ˜¯å˜é‡çš„æ–°å€¼ï¼ˆè‡ªå¢åçš„å€¼ï¼‰ a++çš„å€¼æ˜¯å˜é‡çš„åŸå€¼ï¼ˆè‡ªå¢å‰çš„å€¼ï¼‰ è‡ªå‡ è‡ªå‡å¯ä»¥ä½¿å˜é‡åœ¨åŸå€¼çš„åŸºç¡€ä¸Šè‡ªå‡ 1 è‡ªå‡ä½¿ç”¨ â€“ è‡ªå‡å¯ä»¥ä½¿ç”¨ å‰â€“ï¼ˆâ€“aï¼‰åâ€“(aâ€“) æ— è®ºæ˜¯â€“a è¿˜æ˜¯ aâ€“éƒ½ä¼šç«‹å³ä½¿åŸå˜é‡è‡ªå‡ 1 ä¸åŒçš„æ˜¯â€“a å’Œ aâ€“çš„å€¼æ˜¯ä¸åŒçš„ï¼Œ â€“a çš„å€¼æ˜¯å˜é‡çš„æ–°å€¼ï¼ˆè‡ªå‡åçš„å€¼ï¼‰ aâ€“çš„å€¼æ˜¯å˜é‡çš„åŸå€¼ï¼ˆè‡ªå‡å‰çš„å€¼ï¼‰ 2.2 é€»è¾‘è¿ç®—ç¬¦ ï¼ éè¿ç®—å¯ä»¥å¯¹ä¸€ä¸ªå¸ƒå°”å€¼è¿›è¡Œå–åï¼Œtrue å˜ false false å˜ true å½“å¯¹éå¸ƒå°”å€¼ä½¿ç”¨ï¼æ—¶ï¼Œä¼šå…ˆå°†å…¶è£…æ¢ä¸ºå¸ƒå°”å€¼ç„¶ååœ¨å–å å½“æˆ‘ä»¬åˆ©ç”¨ï¼æ¥å°†å…¶ä»–çš„æ•°æ®è½¬æ¢ä¸ºå¸ƒå°”å€¼ &amp;&amp; å¯ä»¥å¯¹ç¬¦å·ä¸¤ä¾§çš„å€¼è¿›è¡Œä¸è¿ç®— åªè¦ä¸¤ç«¯å€¼éƒ½å¯ä»¥ true æ—¶ï¼Œæ‰ä¼šè¿”å› trueã€‚ åªè¦æœ‰ä¸€ä¸ª false å°±ä¼šè¿”å› falseã€‚ ä¸æ˜¯ä¸€ä¸ªçŸ­è·¯ä¸ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå€¼æ˜¯ falseï¼Œåˆ™ä¸å†æ£€æŸ¥ç¬¬äºŒä¸ªå€¼ å¯¹äºéå¸ƒå°”å€¼ï¼Œå®ƒä¼šè½¬æ¢ä¸ºå¸ƒå°”å€¼ç„¶ååœ¨è¿ç®—ï¼Œå¹¶æ£€æŸ¥åŸå€¼ è§„åˆ™ï¼š 1.å¦‚æœç¬¬ä¸€ä¸ªå€¼ä¸º false,åˆ™è¿”å›ç¬¬ä¸€ä¸ªå€¼ 2.å¦‚æœç¬¬ä¸€ä¸ªå€¼ä¸º true, åˆ™è¿”å›ç¬¬äºŒä¸ªå€¼ || å¯ä»¥å¯¹ç¬¦å·ä¸¤ä¾§çš„å€¼è¿›è¡Œæˆ–è¿ç®— åªæœ‰ä¸¤ç«¯éƒ½æ˜¯ false,æ‰ä¼šè¿”å› falseã€‚åªè¦æœ‰ä¸€ä¸ª true,å°±ä¼šè¿”å› true. åªè¦ä¸¤ç«¯éƒ½æ˜¯ false æ—¶ï¼Œæ‰ä¼šè¿”å› falseã€‚åªè¦æœ‰ä¸€ä¸ª true,å°±ä¼šè¿”å› true. æˆ–æ˜¯ä¸€ä¸ªçŸ­è·¯çš„æˆ–ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå€¼æ˜¯ trueï¼Œåˆ™=ä¸å†æ£€æŸ¥ç¬¬äºŒå€¼ å¯¹äºéå¸ƒå°”å€¼,å®ƒä¼šå°†å…¶è½¬æ¢ä¸ºå¸ƒå°”å€¼ç„¶ååšè¿ç®—ï¼Œå¹¶è¿”å›åŸå€¼ è§„åˆ™ï¼š 1.å¦‚æœç¬¬ä¸€ä¸ªå€¼ä¸º true,åˆ™è¿”å›ç¬¬ä¸€ä¸ªå€¼ 2.å¦‚æœç¬¬ä¸€ä¸ªå€¼ false,åˆ™è¿”å›ç¬¬äºŒä¸ªå€¼ 2.3 èµ‹å€¼è¿ç®—ç¬¦ = å¯ä»¥å°†ç¬¦å·å³ä¾§çš„å€¼èµ‹å€¼ç»™å·¦ä¾§å˜é‡ += a += 5 ç›¸å½“äº a = a+5 var str = â€œhelloâ€; str += â€œworldâ€; -= a -= 5 ç›¸å½“äº a = a-5 *= a * = 5 ç›¸å½“äº a = a*5 /= - a /= 5 ç›¸å½“äº a = a/5 %= - a %= 5 ç›¸å½“äº a = a%5 2.4 å…³ç³»è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼ä¹‹é—´çš„å¤§å°å…³ç³» &gt; &gt;= &lt; &lt;= å…³ç³»è¿ç®—ç¬¦çš„è§„åˆ™å’Œæ•°å­¦ä¸­ä¸€è‡´ï¼Œç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼ä¹‹é—´çš„å…³ç³» å¦‚æœå…³ç³»æˆç«‹åˆ™è¿”å› trueï¼Œå…³ç³»ä¸æˆç«‹åˆ™è¿”å› falseã€‚ å¦‚æœæ¯”ä»·çš„ä¸¤ä¸ªå€¼æ˜¯éæ•°å€¼ï¼Œä¼šå°†å…¶è£…æ¢ä¸º Number ç„¶ååœ¨æ¯”è¾ƒã€‚ å¦‚æœæ¯”è¾ƒçš„ä¸¤ä¸ªå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶ä¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„ Unicode ç¼–ç ï¼Œè€Œä¸ä¼šè½¬æ¢ä¸º Number. 2.5 ç›¸ç­‰è¿ç®—ç¬¦ == ç›¸ç­‰ï¼Œåˆ¤æ–­å·¦å³ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰è¿”å› true,å¦‚æœä¸ç­‰äºè¿”å› false ç›¸ç­‰ä¼šè‡ªåŠ¨å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¦‚æœå¯¹ä¸åŒçš„ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºç›¸åŒçš„ç±»å‹ä¸ºç›¸åŒçš„ç±»å‹ç„¶ååœ¨æ¯”è¾ƒã€‚è½¬æ¢åç›¸ç­‰å®ƒä¹Ÿä¼šè¿”å› true != ä¸ç­‰ï¼Œåˆ¤æ–­å·¦å³ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç­‰ï¼Œå¦‚æœä¸ç­‰åˆ™è¿”å› trueï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å› false ä¸ç­‰ä¹Ÿä¼šåšè‡ªåŠ¨çš„ç±»å‹è½¬æ¢ === å…¨ç­‰ï¼Œåˆ¤æ–­å·¦å³ä¸¤ä¸ªå€¼æ˜¯å¦å…¨ç­‰ï¼Œå®ƒå’Œç›¸ç­‰ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒä¸ä¼šè¿›è¡Œè‡ªåŠ¨çš„ç±»å‹è½¬æ¢ å¦‚æœä¸¤ä¸ªå€¼çš„ç±»å‹ä¸åŒï¼Œåˆ™ç›´æ¥è¿”å› false !== ä¸å…¨ç­‰ï¼Œå’Œä¸ç­‰ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¿›è¡Œè‡ªåŠ¨çš„ç±»å‹è½¬æ¢ï¼Œå¦‚æœä¸¤ä¸ªå€¼çš„ç±»å‹ä¸åŒï¼Œä»–ä¼šç›´æ¥è¿”å› true ç‰¹æ®Šçš„å€¼ï¼š null å’Œ undefined ç”±äº undefined è¡ç”Ÿå‡º null ï¼Œæ‰€ä»¥ null == undefined ä¼šè¿”å› true NaN ä¸ä¸ä»»ä½•å€¼ç›¸ç­‰ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº« NaN == NaN // false åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯ NaNï¼Œä½¿ç”¨ isNaN() å‡½æ•° 2.6 ä¸‰å…ƒè¿ç®—ç¬¦ ?: è¯­æ³•ï¼šæ¡ä»¶è¡¨è¾¾å¼?è¯­å¥ 1:è¯­å¥ 2; æ‰§è¡Œæµç¨‹ï¼š å…ˆå¯¹æ¡ä»¶è¡¨è¾¾å¼æ±‚å€¼åˆ¤æ–­ï¼Œ å¦‚æœåˆ¤æ–­ç»“æœä¸º trueï¼Œåˆ™æ‰§è¡Œè¯­å¥ 1ï¼Œå¹¶è¿”å›æ‰§è¡Œç»“æœ å¦‚æœåˆ¤æ–­ç»“æœä¸º falseï¼Œåˆ™æ‰§è¡Œè¯­å¥ 2ï¼Œå¹¶è¿”å›æ‰§è¡Œç»“æœ ä¼˜å…ˆçº§ï¼š å’Œæ•°å­¦ä¸­ä¸€æ ·ï¼ŒJS ä¸­çš„è¿ç®—ç¬¦ä¹Ÿæ˜¯å…·æœ‰ä¼˜å…ˆçº§çš„ï¼Œ æ¯”å¦‚ å…ˆä¹˜é™¤ ååŠ å‡ å…ˆä¸ åæˆ– å…·ä½“çš„ä¼˜å…ˆçº§å¯ä»¥å‚è€ƒä¼˜å…ˆçº§çš„è¡¨æ ¼ï¼Œåœ¨è¡¨æ ¼ä¸­è¶Šé ä¸Šçš„ä¼˜å…ˆçº§è¶Šé«˜ï¼Œ ä¼˜å…ˆçº§è¶Šé«˜çš„è¶Šä¼˜å…ˆè®¡ç®—ï¼Œä¼˜å…ˆçº§ç›¸åŒçš„ï¼Œä»å·¦å¾€å³è®¡ç®—ã€‚ ä¼˜å…ˆçº§ä¸éœ€è¦è®°å¿†ï¼Œå¦‚æœè¶Šåˆ°æ‹¿ä¸å‡†çš„ï¼Œä½¿ç”¨()æ¥æ”¹å˜ä¼˜å…ˆçº§ã€‚ åŸºæœ¬è¯­æ³• ç¨‹åºéƒ½æ˜¯è‡ªä¸Šå‘ä¸‹çš„é¡ºåºæ‰§è¡Œçš„ï¼Œé€šè¿‡æµç¨‹æ§åˆ¶è¯­å¥å¯ä»¥æ”¹å˜ç¨‹åºæ‰§è¡Œçš„é¡ºåºï¼Œæˆ–è€…åå¤çš„æ‰§è¡ŒæŸä¸€æ®µçš„ç¨‹åºã€‚ åˆ†ç±»ï¼š 1.æ¡ä»¶åˆ¤æ–­è¯­å¥ 2.æ¡ä»¶åˆ†æ”¯è¯­å¥ 3.å¾ªç¯è¯­å¥ 3.1 æ¡ä»¶åˆ¤æ–­è¯­å¥ æ¡ä»¶åˆ¤æ–­è¯­å¥ä¹Ÿç§°ä¸º if è¯­å¥ è¯­æ³•ä¸€ï¼š 123if(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125; æ‰§è¡Œæµç¨‹ï¼š ifè¯­å¥æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆå¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼åˆ¤æ–­ï¼Œ å¦‚æœå€¼ä¸º trueï¼Œåˆ™æ‰§è¡Œ if åçš„è¯­å¥ å¦‚æœå€¼ä¸º falseï¼Œåˆ™ä¸æ‰§è¡Œ è¯­æ³•äºŒï¼š 12345if(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125;else&#123; è¯­å¥...&#125; æ‰§è¡Œæµç¨‹ï¼š ifâ€¦elseè¯­å¥æ‰§è¡Œæ—¶ï¼Œä¼šå¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼åˆ¤æ–­ï¼Œ å¦‚æœå€¼ä¸º trueï¼Œåˆ™æ‰§è¡Œ if åçš„è¯­å¥ å¦‚æœå€¼ä¸º falseï¼Œåˆ™æ‰§è¡Œ else åçš„è¯­å¥ è¯­æ³•ä¸‰ï¼š 1234567891011if(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125;else if(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125;else if(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125;else if(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125;else&#123; è¯­å¥...&#125; æ‰§è¡Œæµç¨‹ ifâ€¦else ifâ€¦else è¯­å¥æ‰§è¡Œæ—¶ï¼Œä¼šè‡ªä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼åˆ¤æ–­ï¼Œ å¦‚æœåˆ¤æ–­ç»“æœä¸º trueï¼Œåˆ™æ‰§è¡Œå½“å‰ if åçš„è¯­å¥ï¼Œæ‰§è¡Œå®Œæˆåè¯­å¥ç»“æŸã€‚ å¦‚æœåˆ¤æ–­ç»“æœä¸º falseï¼Œåˆ™ç»§ç»­å‘ä¸‹åˆ¤æ–­ï¼Œç›´åˆ°æ‰¾åˆ°ä¸º true çš„ä¸ºæ­¢ã€‚ å¦‚æœæ‰€æœ‰çš„æ¡ä»¶è¡¨è¾¾å¼éƒ½æ˜¯ falseï¼Œåˆ™æ‰§è¡Œ else åçš„è¯­å¥ 3.2 æ¡ä»¶åˆ†æ”¯è¯­å¥ switch è¯­å¥ è¯­æ³•: 1234567891011121314switch(æ¡ä»¶è¡¨è¾¾å¼)&#123; case è¡¨è¾¾å¼: è¯­å¥... break; case è¡¨è¾¾å¼: è¯­å¥... break; case è¡¨è¾¾å¼: è¯­å¥... break; default: è¯­å¥... break;&#125; æ‰§è¡Œæµç¨‹ï¼š **switchâ€¦caseâ€¦**è¯­å¥åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šä¾æ¬¡å°† case åçš„è¡¨è¾¾å¼çš„å€¼å’Œ switch åçš„è¡¨è¾¾å¼çš„å€¼è¿›è¡Œå…¨ç­‰æ¯”è¾ƒï¼Œ å¦‚æœæ¯”è¾ƒç»“æœä¸º falseï¼Œåˆ™ç»§ç»­å‘ä¸‹æ¯”è¾ƒã€‚å¦‚æœæ¯”è¾ƒç»“æœä¸º trueï¼Œåˆ™ä»å½“å‰ case å¤„å¼€å§‹å‘ä¸‹æ‰§è¡Œä»£ç ã€‚ å¦‚æœæ‰€æœ‰çš„ case åˆ¤æ–­ç»“æœéƒ½ä¸º falseï¼Œåˆ™ä» default å¤„å¼€å§‹æ‰§è¡Œä»£ç ã€‚ 3.3 å¾ªç¯è¯­å¥ é€šè¿‡å¾ªç¯è¯­å¥å¯ä»¥åå¤æ‰§è¡ŒæŸäº›è¯­å¥å¤šæ¬¡ while å¾ªç¯ è¯­æ³•: 123while(æ¡ä»¶è¡¨è¾¾å¼)&#123; è¯­å¥...&#125; æ‰§è¡Œæµç¨‹ï¼š while è¯­å¥åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆå¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼åˆ¤æ–­ï¼Œ å¦‚æœåˆ¤æ–­ç»“æœä¸º falseï¼Œåˆ™ç»ˆæ­¢å¾ªç¯ å¦‚æœåˆ¤æ–­ç»“æœä¸º trueï¼Œåˆ™æ‰§è¡Œå¾ªç¯ä½“ å¾ªç¯ä½“æ‰§è¡Œå®Œæ¯•ï¼Œç»§ç»­å¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼åˆ¤æ–­ï¼Œä¾æ­¤ç±»æ¨ doâ€¦while å¾ªç¯ è¯­æ³•: 123do&#123; è¯­å¥...&#125;while(æ¡ä»¶è¡¨è¾¾å¼) æ‰§è¡Œæµç¨‹ 123do...whileåœ¨æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆæ‰§è¡Œdoåçš„å¾ªç¯ä½“ï¼Œç„¶ååœ¨å¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œ å¦‚æœåˆ¤æ–­åˆ¤æ–­ç»“æœä¸ºfalseï¼Œåˆ™ç»ˆæ­¢å¾ªç¯ã€‚ å¦‚æœåˆ¤æ–­ç»“æœä¸ºtrueï¼Œåˆ™ç»§ç»­æ‰§è¡Œå¾ªç¯ä½“ï¼Œä¾æ­¤ç±»æ¨ ä¸¤è€…åŒºåˆ« whileï¼šå…ˆåˆ¤æ–­åæ‰§è¡Œ doâ€¦while: å…ˆæ‰§è¡Œååˆ¤æ–­ ï¼Œå¯ä»¥ç¡®ä¿å¾ªç¯ä½“è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚ for å¾ªç¯ è¯­æ³•ï¼š 123for(â‘ åˆå§‹åŒ–è¡¨è¾¾å¼ ; â‘¡æ¡ä»¶è¡¨è¾¾å¼ ; â‘£æ›´æ–°è¡¨è¾¾å¼)&#123; â‘¢è¯­å¥...&#125; æ‰§è¡Œæµç¨‹ï¼š é¦–å…ˆæ‰§è¡Œ â‘  åˆå§‹åŒ–è¡¨è¾¾å¼ï¼Œåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œ ç„¶åå¯¹ â‘¡ æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼åˆ¤æ–­ï¼Œå¦‚æœä¸º false åˆ™ç»ˆæ­¢å¾ªç¯ å¦‚æœåˆ¤æ–­ç»“æœä¸º trueï¼Œåˆ™æ‰§è¡Œ â‘¢ å¾ªç¯ä½“ å¾ªç¯ä½“æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œ â‘£ æ›´æ–°è¡¨è¾¾å¼ï¼Œå¯¹å˜é‡è¿›è¡Œæ›´æ–°ã€‚ æ›´æ–°è¡¨è¾¾å¼æ‰§è¡Œå®Œæ¯•é‡å¤ â‘¡ æ­»å¾ªç¯ 1234567while(true)&#123;&#125;for(;;)&#123;&#125; å¯ä»¥ä½¿ç”¨ vscode å’Œ notepad++ æ‰“å¼€ é“¾æ¥ï¼šhttps://pan.baidu.com/s/1yfS00YJtShuZVncxzWUrvwæå–ç ï¼š7q9u","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://blog.oy6090.top/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"javaScriptåŸºç¡€","slug":"javaScriptåŸºç¡€","permalink":"http://blog.oy6090.top/tags/javaScript%E5%9F%BA%E7%A1%80/"}]},{"title":"ä»£ç†æ¨¡å¼","slug":"ä»£ç†æ¨¡å¼","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:46:57.030Z","comments":true,"path":"posts/2068909584.html","link":"","permalink":"http://blog.oy6090.top/posts/2068909584.html","excerpt":"","text":"ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324interface NetWork&#123; public void browse();&#125;//è¢«ä»£ç†ç±»class Server implements NetWork&#123; public void browse()&#123; System.out.println(&quot;çœŸå®çš„æœåŠ¡å™¨è®¿é—®ç½‘ç»œ&quot;); &#125;&#125;//ä»£ç†ç±»class ProxyServer implements NetWork&#123; private NetWork work; public ProxyServer(NetWork work)&#123; this.work = work; &#125; public void chek()&#123; System.out.println(&quot;è”ç½‘ä¹‹å‰çš„æ£€æŸ¥å·¥ä½œ&quot;); &#125; public void browse()&#123; chec(); work.browse(); &#125;&#125; 1234567public class ProxyTest &#123; public static void main(String[] args) &#123; Server server = new Server(); ProxyServer pro = new ProxyServer(server); pro.browse(); &#125;&#125; è¿è¡Œç»“æœ","categories":[{"name":"Javaè®¾è®¡æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼","permalink":"http://blog.oy6090.top/categories/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"Javaè®¾è®¡æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼","permalink":"http://blog.oy6090.top/tags/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"æ–æ³¢æ‹‰å¥‘æ•°åˆ—","slug":"æ–æ³¢æ‹‰å¥‘æ•°åˆ—","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:47:04.323Z","comments":true,"path":"posts/2560.html","link":"","permalink":"http://blog.oy6090.top/posts/2560.html","excerpt":"","text":"æ–æ³¢æ‹‰å¥‘æ•°åˆ— fn = f(n-1) + f(n-2) å…¶ä¸­ n æ˜¯æ­£æ•´æ•°ï¼Œä¸” n å¤§äºç­‰äº 2ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920public class TestFibonacci &#123; public static void main(String[] args) &#123; int result = fibonacci(8); System.out.println(result); &#125; public static int fibonacci(int index)&#123; if(index &gt;= 0)&#123; if(index == 0)&#123; return 0; &#125;else if(index ==1)&#123; return 1; &#125;else&#123; return fibonacci(index -1) +fibonacci(index -2); &#125; &#125;else&#123; System.out.println(&quot;è¯·ä½ é‡æ–°è¾“å…¥&quot;); return -1; &#125; &#125;&#125;","categories":[{"name":"Javaç®—æ³•","slug":"Javaç®—æ³•","permalink":"http://blog.oy6090.top/categories/Java%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Javaç®—æ³•","slug":"Javaç®—æ³•","permalink":"http://blog.oy6090.top/tags/Java%E7%AE%97%E6%B3%95/"}]},{"title":"javaæšä¸¾ç±»","slug":"æšä¸¾ç±»","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:47:45.100Z","comments":true,"path":"posts/38213.html","link":"","permalink":"http://blog.oy6090.top/posts/38213.html","excerpt":"","text":"ä¸€ã€ æšä¸¾ç±»çš„è¯´æ˜ æšä¸¾ç±»çš„ç†è§£ï¼šç±»çš„å¯¹è±¡åªæœ‰æœ‰é™ä¸ªï¼Œç¡®å®šçš„ã€‚å½“éœ€è¦å®šä¹‰ä¸€ç»„å¸¸é‡æ—¶ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨æšä¸¾ç±»å¦‚æœæšä¸¾ç±»åªä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½œä¸ºå•ä¾‹æ¨¡å¼çš„å®ç°æ–¹å¼ã€‚ äºŒã€å¦‚ä½•å®šä¹‰æšä¸¾ç±»â‘  è‡ªå®šä¹‰æšä¸¾ç±»123456789101112131415161718192021222324252627282930313233class Season&#123; // 1.å£°æ˜Seasonå¯¹è±¡çš„å±æ€§ï¼šprivate finalä¿®é¥° private final String seasonName; private final String seasonDesc; // ç§æœ‰åŒ–çš„æ„é€ å™¨ï¼Œå¹¶ç»™å¯¹è±¡èµ‹å€¼ private Season(String seasonName, String seasonDesc)&#123; this.seasonName = seasonName; this.seasonDesc = seasonDesc; &#125; // 3.æä¾›å½“å‰æšä¸¾ç±»çš„å¤šä¸ªå¯¹è±¡ï¼špublic static finalçš„ public static final Season SPRING = new Season(&quot;æ˜¥å¤©&quot;,&quot;æ˜¥æš–èŠ±å¼€&quot;); public static final Season SUMMER = new Season(&quot;å¤å¤©&quot;,&quot;å¤æ—¥ç‚ç‚&quot;); public static final Season AUTUMN = new Season(&quot;ç§‹å¤©&quot;,&quot;ç§‹é«˜æ°”çˆ½&quot;); public static final Season WINTER = new Season(&quot;å†¬å¤©&quot;,&quot;å†°å¤©é›ªåœ°&quot;); public String getSeasonName() &#123; return seasonName; &#125; public String getSeasonDesc() &#123; return seasonDesc; &#125; @Override public String toString() &#123; return &quot;Season&#123;&quot; + &quot;seasonName=&#x27;&quot; + seasonName + &#x27;\\&#x27;&#x27; + &quot;, seasonDesc=&#x27;&quot; + seasonDesc + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125; 123456public class SeasonTest &#123; public static void main(String[] args) &#123; Season autumn = Season.AUTUMN; System.out.println(autumn); // Season&#123;seasonName=&#x27;ç§‹å¤©&#x27;, seasonDesc=&#x27;ç§‹é«˜æ°”çˆ½&#x27;&#125; &#125;&#125; â‘¡ JDK5.0 æ–°å¢ä½¿ç”¨ enum å®šä¹‰æšä¸¾ç±»ã€‚1234567891011121314151617181920212223242526272829303132333435// ä½¿ç”¨enumå…³é”®æšä¸¾ç±»enum Season1&#123; // 1.æä¾›å½“å‰æšä¸¾ç±»çš„å¯¹è±¡ï¼Œå¤šä¸ªå¯¹è±¡ä¹‹é—´ç”¨â€œ,â€éš”å¼€ï¼Œæœ«å°¾å¯¹è±¡&quot;;&quot;ç»“æŸ SPRING(&quot;æ˜¥å¤©&quot;,&quot;æ˜¥æš–èŠ±å¼€&quot;), SUMMER(&quot;å¤å¤©&quot;,&quot;å¤æ—¥ç‚ç‚&quot;), AUTUMN(&quot;ç§‹å¤©&quot;,&quot;ç§‹é«˜æ°”çˆ½&quot;), WINTER(&quot;å†¬å¤©&quot;,&quot;å†°å¤©é›ªåœ°&quot;); // 2.å£°æ˜Seasonå¯¹è±¡çš„å±æ€§ï¼šprivate finalä¿®é¥° private final String SeasonName; private final String SeasonDesc; // 3.ç§æœ‰åŒ–æ„é€ å™¨ï¼Œå¹¶ç»™å¯¹è±¡èµ‹å€¼ private Season1(String SeasonName, String SeasonDesc)&#123; this.SeasonName = SeasonName; this.SeasonDesc = SeasonDesc; &#125; // 4.è·å–æšä¸¾ç±»å¯¹è±¡çš„å±æ€§ public String getSeasonName() &#123; return SeasonName; &#125; public String getSeasonDesc() &#123; return SeasonDesc; &#125; @Override public String toString() &#123; return &quot;Season1&#123;&quot; + &quot;SeasonName=&#x27;&quot; + SeasonName + &#x27;\\&#x27;&#x27; + &quot;, SeasonDesc=&#x27;&quot; + SeasonDesc + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125; 1234567public class SeasonTest2 &#123; public static void main(String[] args) &#123; Season1 season = Season1.AUTUMN; System.out.println(season); // Season1&#123;SeasonName=&#x27;ç§‹å¤©&#x27;, SeasonDesc=&#x27;ç§‹é«˜æ°”çˆ½&#x27;&#125; &#125;&#125; â‘¢ emum å®šä¹‰æšä¸¾ç±»ä¹‹åï¼Œæšä¸¾ç±»å¸¸ç”¨æ–¹æ³•ï¼šï¼ˆç»§æ‰¿äº java.lang.Enum ç±»ï¼‰ value() è¿”å›æ‰€æœ‰çš„æšä¸¾ç±»å¯¹è±¡çš„æ„æˆçš„æ•°ç»„ valueOf(String objName):è¿”å›æšä¸¾ç±»ä¸­å¯¹è±¡åæ˜¯ objName çš„å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455interface Info&#123; void show();&#125;// ä½¿ç”¨enumå…³é”®å­—æšä¸¾ç±»enum Season2 implements Info&#123; //1.æä¾›å½“å‰æšä¸¾ç±»çš„å¯¹è±¡ï¼Œå¤šä¸ªå¯¹è±¡ä¹‹é—´ç”¨&quot;,&quot;éš”å¼€ï¼Œæœ«å°¾å¯¹è±¡&quot;;&quot;ç»“æŸ SPRING(&quot;æ˜¥å¤©&quot;,&quot;æ˜¥æš–èŠ±å¼€&quot;)&#123; @Override public void show() &#123; System.out.println(&quot;æ˜¥å¤©åœ¨é‚£é‡Œ&quot;); &#125; &#125;, SUMMER(&quot;å¤å¤©&quot;,&quot;å¤æ—¥ç‚ç‚&quot;)&#123; @Override public void show() &#123; System.out.println(&quot;å®å¤&quot;); &#125; &#125;, AUTUMN(&quot;ç§‹å¤©&quot;,&quot;ç§‹é«˜æ°”çˆ½&quot;)&#123; @Override public void show() &#123; System.out.println(&quot;ç§‹å¤©ä¸å›æ¥&quot;); &#125; &#125;, WINTER(&quot;å†¬å¤©&quot;,&quot;å†°å¤©é›ªåœ°&quot;)&#123; @Override public void show() &#123; System.out.println(&quot;å¤§çº¦åœ¨å†¬å­£&quot;); &#125;; &#125;; private final String SeasonName; private final String SeasonDesc; private Season2(String SeasonName , String SeasonDesc)&#123; this.SeasonName = SeasonName; this.SeasonDesc = SeasonDesc; &#125; public String getSeasonName() &#123; return SeasonName; &#125; public String getSeasonDesc() &#123; return SeasonDesc; &#125; @Override public String toString() &#123; return &quot;Season2&#123;&quot; + &quot;SeasonName=&#x27;&quot; + SeasonName + &#x27;\\&#x27;&#x27; + &quot;, SeasonDesc=&#x27;&quot; + SeasonDesc + &#x27;\\&#x27;&#x27; + &#x27;&#125;&#x27;; &#125;&#125; 12345678910111213141516171819202122232425262728public class SeasonTest3 &#123; public static void main(String[] args) &#123; Season2 season = Season2.AUTUMN; System.out.println(season.toString()); //Season2&#123;SeasonName=&#x27;ç§‹å¤©&#x27;, SeasonDesc=&#x27;ç§‹é«˜æ°”çˆ½&#x27;&#125; season.show(); // ç§‹å¤©ä¸å›æ¥ // value è¿”å›æ‰€æœ‰çš„æšä¸¾ç±»å¯¹è±¡çš„æ„æˆçš„æ•°ç»„ Season2[] values = season.values();// for (Season2 value : values) &#123;// System.out.println(value);// value.show();// &#125; for(int i = 0 ; i &lt;values.length; i++)&#123; System.out.println(values[i]); values[i].show(); &#125; System.out.println(&quot;*************************************************&quot;); Thread.State[] values1 = Thread.State.values(); for(int i = 0 ; i &lt; values1.length; i++)&#123; System.out.println(values1[i]); &#125; System.out.println(&quot;***************************************&quot;); // valueOf(String objName):è¿”å›æšä¸¾ç±»ä¸­å¯¹è±¡åæ˜¯objNameçš„å¯¹è±¡ã€‚ Season2 spring = Season2.valueOf(&quot;SPRING&quot;); System.out.println(spring); // Season2&#123;SeasonName=&#x27;æ˜¥å¤©&#x27;, SeasonDesc=&#x27;æ˜¥æš–èŠ±å¼€&#x27;&#125; &#125; è¿è¡Œç»“æœï¼š valueï¼ˆï¼‰","categories":[{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/categories/Java%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/Java%E5%9F%BA%E7%A1%80/"}]},{"title":"æ¨¡æ¿æ–¹æ³•çš„è®¾è®¡æ¨¡å¼","slug":"æ¨¡æ¿æ–¹æ³•çš„è®¾è®¡æ¨¡å¼","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:47:56.596Z","comments":true,"path":"posts/8518.html","link":"","permalink":"http://blog.oy6090.top/posts/8518.html","excerpt":"","text":"ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526abstract class Template&#123; //è®¡ç®—æŸæ®µä»£ç æ‰§è¡Œæ‰€éœ€è¦èŠ±è´¹çš„æ—¶é—´ public void spendTime()&#123; long start = System.currentTimeMillis(); this.code();//ä¸ç¡®å®šçš„éƒ¨åˆ†ã€æ˜“å˜çš„éƒ¨åˆ† long end = Syetem.currentTimeMills(); System.out.println(&quot;èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š&quot;+(end-start)) &#125; public abstract void code();&#125;class SubTemplate extends Template&#123; public void code()&#123; for(int i= 0; i &lt; Math.sqrt(i); i++)&#123; boolean isFlag = true; for(int j =2; j &lt;= Math.sqrt(i); j++)&#123; if(i % j == 0)&#123; isFlag = false; break; &#125; &#125; if(isFlag)&#123; System.out.println(i); &#125; &#125; &#125;&#125;","categories":[{"name":"Javaè®¾è®¡æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼","permalink":"http://blog.oy6090.top/categories/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"Javaè®¾è®¡æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼","permalink":"http://blog.oy6090.top/tags/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"é«˜æ•ˆä½¿ç”¨Githubå¯»æ‰¾å¼€æºé¡¹ç›®","slug":"é«˜æ•ˆä½¿ç”¨Githubå¯»æ‰¾å¼€æºé¡¹ç›®","date":"2020-07-11T16:00:00.000Z","updated":"2020-07-11T16:00:00.000Z","comments":true,"path":"posts/1550900565.html","link":"","permalink":"http://blog.oy6090.top/posts/1550900565.html","excerpt":"","text":"Git å’Œ GitHub ä»€ä¹ˆå…³ç³»ï¼Ÿ Gitï¼ˆè¯»éŸ³ä¸º/gÉªt/ï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿåœ°å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚ GitHub æ˜¯ä¸€ä¸ªé¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„æ‰˜ç®¡å¹³å°ï¼Œå› ä¸ºåªæ”¯æŒ git ä½œä¸ºå”¯ä¸€çš„ç‰ˆæœ¬åº“æ ¼å¼è¿›è¡Œæ‰˜ç®¡ï¼Œæ•…å GitHubã€‚ git ç”¨æ¥ç®¡ç†ä½ çš„ä»£ç ï¼Œå¯ä»¥å¯¹ä½ çš„é¡¹ç›®è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œgithub å°†ä½ ç”¨ git ç®¡ç†çš„é¡¹ç›®æ”¾åœ¨ç½‘ä¸Šï¼Œ æœ¬åœ°çš„ä¸€ä¸ªä¸ªé¡¹ç›®å¯¹åº” github ä¸Šé¢çš„ä¸€ä¸ªä¸ªä»“åº“ã€‚ä»“åº“å¯ä»¥å…¬å¼€ï¼ˆå¼€æºï¼‰ï¼Œç§å¯†ã€‚ç¨‹åºå‘˜ä¹‹é—´å¯ä»¥äº’ç›¸å­¦ä¹ åˆ«äººçš„é¡¹ç›®ï¼Œäº’ç›¸äº¤æµï¼Œgithub æ˜¯å…¨çƒæœ€å¤§çš„åŒæ€§äº¤å‹ç½‘ç«™ã€‚ æ€ä¹ˆåœ¨ GitHub ä¸Šé è°±çš„æ‰¾ä¸€äº›å¼€æºé¡¹ç›® &gt; 1234567891011121314# æŒ‰ç…§é¡¹ç›®å/ä»“åº“åæœç´¢ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰in:name xxx# æŒ‰ç…§READMEæœç´¢ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰in:readme xxx# æŒ‰ç…§descriptionæœç´¢ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰in:description xxx# starsæ•°å¤§äºxxxstars:&gt;xxx# forksæ•°å¤§äºxxxforks:&gt;xxx# ç¼–ç¨‹è¯­è¨€ä¸ºxxxlanguage:xxx# æœ€æ–°æ›´æ–°æ—¶é—´æ™šäºYYYY-MM-DDpushed:&gt;YYYY-MM-DD ç¤ºä¾‹","categories":[{"name":"GitHub","slug":"GitHub","permalink":"http://blog.oy6090.top/categories/GitHub/"}],"tags":[{"name":"GitHub","slug":"GitHub","permalink":"http://blog.oy6090.top/tags/GitHub/"}]},{"title":"CentOS 7 åŸºæœ¬å‘½ä»¤","slug":"CentOS 7 åŸºæœ¬å‘½ä»¤","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:48:25.329Z","comments":true,"path":"posts/6297.html","link":"","permalink":"http://blog.oy6090.top/posts/6297.html","excerpt":"","text":"CentOS7 å¸¸ç”¨å‘½ä»¤é›†åˆ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸¤å¤©ä¸€ç›´åœ¨å¯¹CentOS 7.2è¿›è¡Œåˆä½“éªŒï¼Œå„ç§å­¦ä¹ å‘½ä»¤è‚¿ä¹ˆç”¨ï¼Œä¸è¿‡å…¶å®å¤§å¤šå’ŒDOSæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å‘½ä»¤çš„è¡¨è¾¾ä¸Šå¯èƒ½æœ‰ç‚¹å„¿ä¸ä¸€æ ·ï¼Œæ¯•ç«Ÿè¿™äº›éƒ½ä¸æ˜¯ä¸€å®¶å‡ºæ¥çš„å˜›~ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå‘½ä»¤å’Œè§£æï¼ å¸¸ç”¨å‘½ä»¤ æ–‡ä»¶ä¸ç›®å½•æ“ä½œ å‘½ä»¤ è§£æ cd /home è¿›å…¥ â€˜/homeâ€™ ç›®å½• cd .. è¿”å›ä¸Šä¸€çº§ç›®å½• cd ../.. è¿”å›ä¸Šä¸¤çº§ç›®å½• cd - è¿”å›ä¸Šæ¬¡æ‰€åœ¨ç›®å½• cp file1 file2 å°†file1å¤åˆ¶ä¸ºfile2 cp -a dir1 dir2 å¤åˆ¶ä¸€ä¸ªç›®å½• cp -a /tmp/dir1 . å¤åˆ¶ä¸€ä¸ªç›®å½•åˆ°å½“å‰å·¥ä½œç›®å½•ï¼ˆ.ä»£è¡¨å½“å‰ç›®å½•ï¼‰ ls æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶ ls -a æ˜¾ç¤ºéšè—æ–‡ä»¶ ls -l æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ ls -lrt æŒ‰æ—¶é—´æ˜¾ç¤ºæ–‡ä»¶ï¼ˆlè¡¨ç¤ºè¯¦ç»†åˆ—è¡¨ï¼Œrè¡¨ç¤ºåå‘æ’åºï¼Œtè¡¨ç¤ºæŒ‰æ—¶é—´æ’åºï¼‰ pwd æ˜¾ç¤ºå·¥ä½œè·¯å¾„ mkdir dir1 åˆ›å»º â€˜dir1â€™ ç›®å½• mkdir dir1 dir2 åŒæ—¶åˆ›å»ºä¸¤ä¸ªç›®å½• mkdir -p /tmp/dir1/dir2 åˆ›å»ºä¸€ä¸ªç›®å½•æ ‘ mv dir1 dir2 ç§»åŠ¨/é‡å‘½åä¸€ä¸ªç›®å½• rm -f file1 åˆ é™¤ â€˜file1â€™ rm -rf dir1 åˆ é™¤ â€˜dir1â€™ ç›®å½•åŠå…¶å­ç›®å½•å†…å®¹ æŸ¥çœ‹æ–‡ä»¶å†…å®¹ å‘½ä»¤ è§£æ cat file1 ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹æ­£å‘æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ head -2 file1 æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å‰ä¸¤è¡Œ more file1 æŸ¥çœ‹ä¸€ä¸ªé•¿æ–‡ä»¶çš„å†…å®¹ tac file1 ä»æœ€åä¸€è¡Œå¼€å§‹åå‘æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ tail -3 file1 æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„æœ€åä¸‰è¡Œ vi file æ‰“å¼€å¹¶æµè§ˆæ–‡ä»¶ æ–‡æœ¬å†…å®¹å¤„ç† å‘½ä»¤ è§£æ grep str /tmp/test åœ¨æ–‡ä»¶ â€˜/tmp/testâ€™ ä¸­æŸ¥æ‰¾ â€œstrâ€ grep ^str /tmp/test åœ¨æ–‡ä»¶ â€˜/tmp/testâ€™ ä¸­æŸ¥æ‰¾ä»¥ â€œstrâ€ å¼€å§‹çš„è¡Œ grep [0-9] /tmp/test æŸ¥æ‰¾ â€˜/tmp/testâ€™ æ–‡ä»¶ä¸­æ‰€æœ‰åŒ…å«æ•°å­—çš„è¡Œ grep str -r /tmp/* åœ¨ç›®å½• â€˜/tmpâ€™ åŠå…¶å­ç›®å½•ä¸­æŸ¥æ‰¾ â€œstrâ€ diff file1 file2 æ‰¾å‡ºä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒå¤„ sdiff file1 file2 ä»¥å¯¹æ¯”çš„æ–¹å¼æ˜¾ç¤ºä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒ vi file æ“ä½œ è§£æ i è¿›å…¥ç¼–è¾‘æ–‡æœ¬æ¨¡å¼ Esc é€€å‡ºç¼–è¾‘æ–‡æœ¬æ¨¡å¼ :w ä¿å­˜å½“å‰ä¿®æ”¹ :q ä¸ä¿å­˜é€€å‡ºvi :wq ä¿å­˜å½“å‰ä¿®æ”¹å¹¶é€€å‡ºvi æŸ¥è¯¢æ“ä½œ å‘½ä»¤ è§£æ find / -name file1 ä» â€˜/â€™ å¼€å§‹è¿›å…¥æ ¹æ–‡ä»¶ç³»ç»ŸæŸ¥æ‰¾æ–‡ä»¶å’Œç›®å½• find / -user user1 æŸ¥æ‰¾å±äºç”¨æˆ· â€˜user1â€™ çš„æ–‡ä»¶å’Œç›®å½• find /home/user1 -name *.bin åœ¨ç›®å½• â€˜/ home/user1â€™ ä¸­æŸ¥æ‰¾ä»¥ â€˜.binâ€™ ç»“å°¾çš„æ–‡ä»¶ find /usr/bin -type f -atime +100 æŸ¥æ‰¾åœ¨è¿‡å»100å¤©å†…æœªè¢«ä½¿ç”¨è¿‡çš„æ‰§è¡Œæ–‡ä»¶ find /usr/bin -type f -mtime -10 æŸ¥æ‰¾åœ¨10å¤©å†…è¢«åˆ›å»ºæˆ–è€…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ locate *.ps å¯»æ‰¾ä»¥ â€˜.psâ€™ ç»“å°¾çš„æ–‡ä»¶ï¼Œå…ˆè¿è¡Œ â€˜updatedbâ€™ å‘½ä»¤ find -name â€˜*.[ch]â€™ | xargs grep -E â€˜exprâ€™ åœ¨å½“å‰ç›®å½•åŠå…¶å­ç›®å½•æ‰€æœ‰.cå’Œ.hæ–‡ä»¶ä¸­æŸ¥æ‰¾ â€˜exprâ€™ find -type f -print0 | xargs -r0 grep -F â€˜exprâ€™ åœ¨å½“å‰ç›®å½•åŠå…¶å­ç›®å½•çš„å¸¸è§„æ–‡ä»¶ä¸­æŸ¥æ‰¾ â€˜exprâ€™ find -maxdepth 1 -type f | xargs grep -F â€˜exprâ€™ åœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾ â€˜exprâ€™ å‹ç¼©ã€è§£å‹ å‘½ä»¤ è§£æ bzip2 file1 å‹ç¼© file1 bunzip2 file1.bz2 è§£å‹ file1.bz2 gzip file1 å‹ç¼© file1 gzip -9 file1 æœ€å¤§ç¨‹åº¦å‹ç¼© file1 gunzip file1.gz è§£å‹ file1.gz tar -cvf archive.tar file1 æŠŠfile1æ‰“åŒ…æˆ archive.tarï¼ˆ-c: å»ºç«‹å‹ç¼©æ¡£æ¡ˆï¼›-v: æ˜¾ç¤ºæ‰€æœ‰è¿‡ç¨‹ï¼›-f: ä½¿ç”¨æ¡£æ¡ˆåå­—ï¼Œæ˜¯å¿…é¡»çš„ï¼Œæ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰ tar -cvf archive.tar file1 dir1 æŠŠ file1ï¼Œdir1 æ‰“åŒ…æˆ archive.tar tar -tf archive.tar æ˜¾ç¤ºä¸€ä¸ªåŒ…ä¸­çš„å†…å®¹ tar -xvf archive.tar é‡Šæ”¾ä¸€ä¸ªåŒ… tar -xvf archive.tar -C /tmp æŠŠå‹ç¼©åŒ…é‡Šæ”¾åˆ° /tmpç›®å½•ä¸‹ zip file1.zip file1 åˆ›å»ºä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ… zip -r file1.zip file1 dir1 æŠŠæ–‡ä»¶å’Œç›®å½•å‹ç¼©æˆä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ… unzip file1.zip è§£å‹ä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ…åˆ°å½“å‰ç›®å½• unzip test.zip -d /tmp/ è§£å‹ä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ…åˆ° /tmp ç›®å½• yumå®‰è£…å™¨ å‘½ä»¤ è§£æ yum -y install [package] ä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªrpmåŒ… yum localinstall [package.rpm] å®‰è£…ä¸€ä¸ªrpmåŒ…ï¼Œä½¿ç”¨ä½ è‡ªå·±çš„è½¯ä»¶ä»“åº“è§£å†³æ‰€æœ‰ä¾èµ–å…³ç³» yum -y update æ›´æ–°å½“å‰ç³»ç»Ÿä¸­å®‰è£…çš„æ‰€æœ‰rpmåŒ… yum update [package] æ›´æ–°ä¸€ä¸ªrpmåŒ… yum remove [package] åˆ é™¤ä¸€ä¸ªrpmåŒ… yum list åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­å®‰è£…çš„æ‰€æœ‰åŒ… yum search [package] åœ¨rpmä»“åº“ä¸­æœå¯»è½¯ä»¶åŒ… yum clean [package] æ¸…é™¤ç¼“å­˜ç›®å½•ï¼ˆ/var/cache/yumï¼‰ä¸‹çš„è½¯ä»¶åŒ… yum clean headers åˆ é™¤æ‰€æœ‰å¤´æ–‡ä»¶ yum clean all åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„åŒ…å’Œå¤´æ–‡ä»¶ ç½‘ç»œç›¸å…³ å‘½ä»¤ è§£æ ifconfig eth0 æ˜¾ç¤ºä¸€ä¸ªä»¥å¤ªç½‘å¡çš„é…ç½® ifconfig eth0 192.168.1.1 netmask 255.255.255.0 é…ç½®ç½‘å¡çš„IPåœ°å€ ifdown eth0 ç¦ç”¨ â€˜eth0â€™ ç½‘ç»œè®¾å¤‡ ifup eth0 å¯ç”¨ â€˜eth0â€™ ç½‘ç»œè®¾å¤‡ iwconfig eth1 æ˜¾ç¤ºä¸€ä¸ªæ— çº¿ç½‘å¡çš„é…ç½® iwlist scan æ˜¾ç¤ºæ— çº¿ç½‘ç»œ ip addr show æ˜¾ç¤ºç½‘å¡çš„IPåœ°å€ ç³»ç»Ÿç›¸å…³ å‘½ä»¤ è§£æ su - åˆ‡æ¢åˆ°rootæƒé™ï¼ˆä¸suæœ‰åŒºåˆ«ï¼‰ shutdown -h now å…³æœº shutdown -r now é‡å¯ top ç½—åˆ—ä½¿ç”¨CPUèµ„æºæœ€å¤šçš„linuxä»»åŠ¡ ï¼ˆè¾“å…¥qé€€å‡ºï¼‰ pstree ä»¥æ ‘çŠ¶å›¾æ˜¾ç¤ºç¨‹åº man ping æŸ¥çœ‹å‚è€ƒæ‰‹å†Œï¼ˆä¾‹å¦‚ping å‘½ä»¤ï¼‰ passwd ä¿®æ”¹å¯†ç  df -h æ˜¾ç¤ºç£ç›˜çš„ä½¿ç”¨æƒ…å†µ cal -3 æ˜¾ç¤ºå‰ä¸€ä¸ªæœˆï¼Œå½“å‰æœˆä»¥åŠä¸‹ä¸€ä¸ªæœˆçš„æœˆå† cal 10 1988 æ˜¾ç¤ºæŒ‡å®šæœˆï¼Œå¹´çš„æœˆå† date â€“date â€˜1970-01-01 UTC 1427888888 secondsâ€™ æŠŠä¸€ç›¸å¯¹äº1970-01-01 00:00çš„ç§’æ•°è½¬æ¢æˆæ—¶é—´ XSheel 5ç›¸å…³æ“ä½œ çª—ä½“å¿«æ·é”® å‘½ä»¤ è§£æ Ctrl + u åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ°è¡Œé¦–çš„å­—ç¬¦ Ctrl + k åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ°è¡Œå°¾çš„å­—ç¬¦ Ctrl + c å–æ¶ˆå½“å‰è¡Œè¾“å…¥çš„å‘½ä»¤ï¼Œç›¸å½“äºCtrl + Break Ctrl + a å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–ï¼ˆahead of lineï¼‰ï¼Œç›¸å½“äºé€šå¸¸çš„Homeé”® Ctrl + e å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼ˆend of lineï¼‰ Ctrl + f å…‰æ ‡å‘å‰ï¼ˆforwardï¼‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½® Ctrl + b å…‰æ ‡å¾€å›ï¼ˆbackwardï¼‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½® Ctrl + l æ¸…å±ï¼Œç›¸å½“äºæ‰§è¡Œclearå‘½ä»¤ Ctrl + r æ˜¾ç¤º:å·æç¤ºï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥æŸ¥æ‰¾ç›¸å…³å†å²å‘½ä»¤ï¼ˆreverse-i-searchï¼‰ Ctrl + w åˆ é™¤ä»å…‰æ ‡ä½ç½®å‰åˆ°å½“å‰æ‰€å¤„å•è¯ï¼ˆwordï¼‰çš„å¼€å¤´ Ctrl + t äº¤æ¢å…‰æ ‡ä½ç½®å‰çš„ä¸¤ä¸ªå­—ç¬¦ Ctrl + y ç²˜è´´æœ€åä¸€æ¬¡è¢«åˆ é™¤çš„å•è¯ Ctrl + Alt + d æ˜¾ç¤ºæ¡Œé¢ Alt + b å…‰æ ‡å¾€å›ï¼ˆbackwardï¼‰ç§»åŠ¨åˆ°å‰ä¸€ä¸ªå•è¯ Alt + d åˆ é™¤ä»å…‰æ ‡ä½ç½®åˆ°å½“å‰æ‰€å¤„å•è¯çš„æœ«å°¾ Alt + F2 è¿è¡Œ Alt + F4 å…³é—­å½“å‰çª—å£ Alt + F9 æœ€å°åŒ–å½“å‰çª—å£ Alt + F10 æœ€å¤§åŒ–å½“å‰çª—å£ Alt + Tab åˆ‡æ¢çª—å£ Alt + å·¦é”® ç§»åŠ¨çª—å£ï¼ˆæˆ–åœ¨æœ€ä¸‹é¢çš„ä»»åŠ¡æ æ»šåŠ¨é¼ æ ‡æ»‘è½®ï¼‰ æ“ä½œå°æŠ€å·§ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é¼ æ ‡ä¸­é—´é”®ï¼šç²˜è´´çªå‡ºæ˜¾ç¤ºçš„æ–‡æœ¬ã€‚(ä½¿ç”¨é¼ æ ‡å·¦é”®æ¥é€‰æ‹©æ–‡æœ¬ã€‚æŠŠå…‰æ ‡æŒ‡å‘æƒ³ç²˜è´´æ–‡æœ¬çš„åœ°æ–¹ã€‚ç‚¹å‡»é¼ æ ‡ä¸­é—´é”®æ¥ç²˜è´´ã€‚) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tabï¼šå‘½ä»¤è¡Œè‡ªåŠ¨è¡¥å…¨ã€‚ä½¿ç”¨ shell æç¤ºæ—¶å¯ä½¿ç”¨è¿™ä¸€æ–¹å¼ã€‚é”®å…¥å‘½ä»¤æˆ–æ–‡ä»¶åçš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œç„¶åæŒ‰ [Tab] é”®ï¼Œå®ƒä¼šè‡ªåŠ¨è¡¥å…¨å‘½ä»¤æˆ–æ˜¾ç¤ºåŒ¹é…é”®å…¥å­—ç¬¦çš„æ‰€æœ‰å‘½ä»¤ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ»šåŠ¨æ¡çš„ç©ºç™½å¤„ç‚¹å‡»é¼ æ ‡ä¸­é”®ï¼šå±å¹•å³æ»šåŠ¨åˆ°é‚£ä¸ªåœ°æ–¹ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ¡Œé¢æˆ–æ–‡ä»¶ç®¡ç†å™¨ä¸­ç›´æ¥æŒ‰ / å°±å¯ä»¥è¾“å…¥ä½ç½®ï¼Œæ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ vi æˆ– Firefox ä¸­ç›´æ¥æŒ‰ / å³å¯è¿›å…¥å¿«é€Ÿæœç´¢çŠ¶æ€ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç½‘ç«™é“¾æ¥å’Œå›¾ç‰‡å¯ç›´æ¥æ‹–æ”¾åˆ°æ¡Œé¢æˆ–è€…ç›®å½•ï¼Œå¯ä»¥é©¬ä¸Šä¸‹è½½ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç›´æ¥å°†æ–‡ä»¶ç®¡ç†å™¨ä¸­çš„æ–‡ä»¶æ‹–åˆ°ç»ˆç«¯ä¸­å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­å¾—åˆ°å®Œæ•´çš„è·¯å¾„åã€‚ ç»“æŸè¯­ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…¶å®è¦å­¦å¥½Linuxçš„æ“ä½œå¹¶ä¸æ˜¯å¾ˆå›°éš¾çš„äº‹æƒ…ï¼Œåœ¨å¹³å¸¸çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°é—®é¢˜ï¼Œå­¦ä¼šå»ç½‘ä¸Šå¯»æ‰¾ç­”æ¡ˆä¸å¤±ä¸ºä¸€ä¸ªéå¸¸å¥½çš„æ‰‹æ®µï¼è°¢è°¢å¤§å®¶ï¼ è½¬è½½ï¼š(http://blog.csdn.net/o0darknessyy0o/article/details/52072054#t1)","categories":[{"name":"CentOS","slug":"CentOS","permalink":"http://blog.oy6090.top/categories/CentOS/"}],"tags":[{"name":"CentOS 7","slug":"CentOS-7","permalink":"http://blog.oy6090.top/tags/CentOS-7/"}]},{"title":"JDBCæ¨¡æ¿ï¼ˆäºŒï¼‰","slug":"JDBCæ¨¡æ¿ï¼ˆäºŒï¼‰","date":"2020-07-11T16:00:00.000Z","updated":"2020-10-25T02:16:33.945Z","comments":true,"path":"posts/1393401608.html","link":"","permalink":"http://blog.oy6090.top/posts/1393401608.html","excerpt":"","text":"è¿™ç¯‡æ²¡æœ‰é‡‡ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œå¦‚éœ€è¦æ•°æ®åº“è¿æ¥æ± ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¸Šä¸€ç¯‡ JDBC æ¨¡æ¿ JDBC é¡¹ç›®ç»“æ„ï¼šæ•´ä½“ç»“æ„ä»£ç ç¤ºä¾‹ï¼š é…ç½®æ•°æ®åº“åŠ è½½æ–‡ä»¶ åŒæ—¶åœ¨é¡¹ç›®å·¥ç¨‹ä¸‹åˆ›å»º bin ç›®å½•æ¥å­˜åœ¨ç¬¬ä¸‰æ–¹ jar åŒ… å¯¼å…¥ç¬¬ä¸‰æ–¹ jar åŒ…ã€è¿æ¥æ•°æ®åº“ã€‘ 1234user=rootpassword=ã€è¿™é‡Œå¡«å†™è‡ªå·±çš„æ•°æ®åº“è¿æ¥å¯†ç ã€‘url=jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=truedriveClass=com.mysql.jdbc.Driver ã€JDBCUtilsã€‘æ“ä½œæ•°æ®åº“çš„å·¥å…·ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889package com.oy.online.JDBC1.util;import java.io.InputStream;import java.sql.*;import java.util.Properties;/***@Description æ“ä½œæ•°æ®åº“çš„å·¥å…·ç±»*@Author OY*@Date 2020/5/30*@Time 17:08*/public class JDBCUtils &#123; /** *@Description è·å–æ•°æ®åº“è¿æ¥ *@Param *@Return *@Author OY *@Date 2020/5/30 *@Time 17:09 */ public static Connection getConnection() throws Exception &#123; //1.è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„4ä¸ªåŸºæœ¬ä¿¡æ¯ InputStream is = ClassLoader.getSystemClassLoader().getResourceAsStream(&quot;jdbc.properties&quot;); Properties pros = new Properties(); pros.load(is); String user = pros.getProperty(&quot;user&quot;); String password = pros.getProperty(&quot;password&quot;); String url = pros.getProperty(&quot;url&quot;); String driveClass = pros.getProperty(&quot;driveClass&quot;); //åŠ è½½é©±åŠ¨ Class.forName(driveClass); // 3.è·å–è¿æ¥ Connection conn = DriverManager.getConnection(url, user, password); return conn; &#125; /** *@Description å…³é—­èµ„æºæ“ä½œ *@Param [conn, ps] *@Return void *@Author OY *@Date 2020/5/30 *@Time 17:21 */ public static void closeResource(Connection conn, Statement ps)&#123; try &#123; if(ps != null)&#123; ps.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; try &#123; if(conn != null)&#123; conn.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public static void closeResource(Connection conn,Statement ps,ResultSet rs)&#123; try &#123; if(ps != null)&#123; ps.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; try &#123; if(conn != null)&#123; conn.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; try &#123; if(rs != null)&#123; rs.close(); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;&#125; ã€Customersã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869package com.oy.online.JDBC1.bean;import java.sql.Date;/***@Description*@Author OY*@Date 2020/5/30*@Time 17:23*/public class Customer &#123; private int id; private String name; private String email; private Date birth; public Customer() &#123; &#125; public Customer(int id, String name, String email, Date birth) &#123; this.id = id; this.name = name; this.email = email; this.birth = birth; &#125; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getEamil() &#123; return email; &#125; public void setEamil(String eamil) &#123; this.email = eamil; &#125; public Date getBirth() &#123; return birth; &#125; public void setBirth(Date birth) &#123; this.birth = birth; &#125; @Override public String toString() &#123; return &quot;Customer&#123;&quot; + &quot;id=&quot; + id + &quot;, name=&#x27;&quot; + name + &#x27;\\&#x27;&#x27; + &quot;, eamil=&#x27;&quot; + email + &#x27;\\&#x27;&#x27; + &quot;, birth=&quot; + birth + &#x27;&#125;&#x27;; &#125;&#125; ã€BaseDAOã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160ackage com.oy.online.JDBC1.DAO;import com.oy.online.JDBC1.util.JDBCUtils;import java.lang.reflect.Field;import java.sql.*;import java.util.ArrayList;import java.util.List;/** * @Description å°è£…é’ˆå¯¹äºæ•°æ®è¡¨çš„é€šç”¨çš„æ“ä½œ * @Author OY * @Date 2020/5/30 * @Time 17:26 */public abstract class BaseDAO &#123; /** * @Description é€šç”¨çš„å¢åˆ æ”¹ * @Param [conn, sql, args] * @Return int * @Author OY * @Date 2020/5/30 * @Time 17:31 */ public int update(Connection conn, String sql, Object... args) &#123; PreparedStatement ps = null; try &#123; // 1.é¢„ç¼–è¯‘sqlè¯­å¥ï¼Œè¿”å›preparedStatementçš„å®ä¾‹ ps = conn.prepareStatement(sql); // 2.å¡«å……å ä½ç¬¦ for (int i = 0; i &lt; args.length; i++) &#123; ps.setObject(i + 1, args[i]); &#125; //3.æ‰§è¡Œ return ps.executeUpdate(); &#125; catch (SQLException throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(null, ps); &#125; return 0; &#125; /** * @Description æŸ¥è¯¢æ•°æ®è¡¨ä¸­çš„ä¸€æ¡è®°å½• * @Param [conn, clazz, sql, args] * @Return T * @Author OY * @Date 2020/5/30 * @Time 17:44 */ public &lt;T&gt; T getInstance(Connection conn, Class&lt;T&gt; clazz, String sql, Object... args) &#123; PreparedStatement ps = null; ResultSet rs = null; try &#123; ps = conn.prepareStatement(sql); //2.å¡«å……å ä½ç¬¦ for (int i = 0; i &lt; args.length; i++) &#123; ps.setObject(i + 1, args[i]); &#125; // 3.æ‰§è¡Œ rs = ps.executeQuery(); // è·å–ç»“æœé›†çš„å…ƒæ•°æ® ResultSetMetaData rsmd = rs.getMetaData(); // è·å–ç»“æœé›†ä¸­çš„åˆ—æ•° int columnCount = rsmd.getColumnCount(); if (rs.next()) &#123; T t = clazz.newInstance(); for (int i = 0; i &lt; columnCount; i++) &#123; // è·å–åˆ—å€¼ Object colunmnValue = rs.getObject(i + 1); // è·å–æ¯ä¸ªåˆ—çš„åˆ—å String columnLabel = rsmd.getColumnLabel(i + 1); Field field = clazz.getDeclaredField(columnLabel); field.setAccessible(true); field.set(t,colunmnValue); &#125; return t; &#125; &#125; catch (Exception throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(null, ps, rs); &#125; return null; &#125; /** * @Description æŸ¥è¯¢æ•°æ®è¡¨ä¸­çš„å¤šæ¡æ•°æ® * @Param [conn, clazz, sql, args] * @Return java.util.List&lt;T&gt; * @Author OY * @Date 2020/5/30 * @Time 17:46 */ public &lt;T&gt; List&lt;T&gt; getForList(Connection conn, Class&lt;T&gt; clazz, String sql, Object...args) &#123; PreparedStatement ps = null; ResultSet rs = null; try &#123; ps = conn.prepareStatement(sql); for (int i = 0; i &lt; args.length; i++) &#123; ps.setObject(i + 1, args[i]); &#125; rs = ps.executeQuery(); ResultSetMetaData rsmd = rs.getMetaData(); int columnCount = rsmd.getColumnCount(); // åˆ›å»ºé›†åˆå¯¹è±¡ ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;(); while (rs.next()) &#123; T t = clazz.newInstance(); for (int i = 0; i &lt; columnCount; i++) &#123; Object columValue = rs.getObject(i + 1); String columnLabel = rsmd.getColumnLabel(i + 1); Field field = clazz.getDeclaredField(columnLabel); field.setAccessible(true); field.set(t, columValue); &#125; list.add(t); &#125; return list; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(null, ps, rs); &#125; return null; &#125; /** *@Description ç”¨äºæŸ¥è¯¢ç‰¹æ®Šå€¼ *@Param [conn, sql, args] *@Return E *@Author OY *@Date 2020/5/30 *@Time 18:02 */ public &lt;E&gt; E getValue(Connection conn, String sql, Object... args) &#123; PreparedStatement ps = null; ResultSet rs = null; try &#123; ps = conn.prepareStatement(sql); for (int i = 0; i &lt; args.length; i++) &#123; ps.setObject(i + 1, args[i]); &#125; rs = ps.executeQuery(); if (rs.next()) &#123; return (E) rs.getObject(1); &#125; &#125; catch (Exception throwables) &#123; throwables.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(null, ps, rs); &#125; return null; &#125;&#125; ã€CustomerDAO.javaã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384package com.oy.online.JDBC1.DAO;import com.oy.online.JDBC1.bean.Customer;import java.sql.Connection;import java.sql.Date;import java.util.List;/***@Description*@Author OY*@Date 2020/5/30*@Time 18:03*/public interface CustomerDAO &#123; /** *@Description å°†custå¯¹è±¡æ·»åŠ åˆ°æ•°æ®åº“ä¸­ *@Param [conn, cust] *@Return void *@Author OY *@Date 2020/5/30 *@Time 18:05 */ void insert(Connection conn, Customer cust); /** *@Description é’ˆå¯¹æŒ‡å®šçš„idï¼Œåˆ é™¤è¡¨ä¸­çš„ä¸€æ¡è®°å½• *@Param [conn, id] *@Return void *@Author OY *@Date 2020/5/30 *@Time 18:05 */ void deletById(Connection conn, int id); /** *@Description é’ˆå¯¹å†…å­˜ä¸­çš„custå¯¹è±¡ï¼Œå»ä¿®æ”¹æ•°æ®è¡¨ä¸­æŒ‡å®šçš„è®°å½• *@Param [conn, cust] *@Return void *@Author OY *@Date 2020/5/30 *@Time 18:07 */ void update(Connection conn, Customer cust); /** *@Description æŒ‡å®šçš„idæŸ¥è¯¢å¾—åˆ°æŒ‡å®šçš„customerå¯¹è±¡ *@Param [conn, id] *@Return com.oy.online.JDBC1.bean.Customer *@Author OY *@Date 2020/5/30 *@Time 18:11 */ Customer getCustomerById(Connection conn, int id); /** *@Description æŸ¥è¯¢è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®æ„æˆçš„é›†åˆ *@Param [conn] *@Return java.util.List&lt;com.oy.online.JDBC1.bean.Customer&gt; *@Author OY *@Date 2020/5/30 *@Time 18:12 */ List&lt;Customer&gt; getAll(Connection conn); /** *@Description è¿”å›æ•°æ®è¡¨ä¸­çš„æ•°æ®çš„æ¡ç›®æ•° *@Param [conn] *@Return java.lang.Long *@Author OY *@Date 2020/5/30 *@Time 18:14 */ Long getCount(Connection conn); /** *@Description è¿”å›æ•°æ®è¡¨ä¸­æœ€å¤§çš„ç”Ÿæ—¥ *@Param [conn] *@Return java.sql.Date *@Author OY *@Date 2020/5/30 *@Time 18:15 */ Date getMaxBirth(Connection conn);&#125; ã€CustomerDAOImpI.javaã€‘ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package com.oy.online.JDBC1.DAO;import com.oy.online.JDBC1.bean.Customer;import java.sql.Connection;import java.sql.Date;import java.util.List;public class CustomerDAOImpI extends BaseDAO implements CustomerDAO &#123; @Override public void insert(Connection conn, Customer cust) &#123; String sql = &quot;insert into customers(name,email,birth)values(?,?,?)&quot;; update(conn,sql,cust.getName(),cust.getEamil(),cust.getBirth()); &#125; @Override public void deletById(Connection conn, int id) &#123; String sql = &quot;delete from customers where id = ?&quot;; update(conn,sql, id); &#125; @Override public void update(Connection conn, Customer cust) &#123; String sql = &quot;update customers set name = ? , email = ?, birth = ? where id = ?&quot;; update(conn, sql, cust.getName(),cust.getEamil(),cust.getBirth(),cust.getId()); &#125; @Override public Customer getCustomerById(Connection conn, int id) &#123; String sql = &quot;select id,name,email,birth from customers where id = ?&quot;; Customer customer = getInstance(conn,Customer.class, sql,id); return customer; &#125; @Override public List&lt;Customer&gt; getAll(Connection conn) &#123; String sql = &quot;select id ,name, email, birth from customers &quot;; List&lt;Customer&gt; list = getForList(conn, Customer.class, sql); return list; &#125; @Override public Long getCount(Connection conn) &#123; String sql = &quot;select count(*) from customers&quot;; return getValue(conn, sql); &#125; @Override public Date getMaxBirth(Connection conn) &#123; String sql = &quot;select max(birth) from customers&quot;; return getValue(conn, sql); &#125;&#125; æµ‹è¯•ã€textã€‘ æµ‹è¯•æ•°æ®åº“è¿æ¥ 12345678910111213141516171819202122232425package com.oy.online.JDBC1.text;import com.oy.online.JDBC1.util.JDBCUtils;import org.junit.Test;import java.sql.Connection;/***@Description æµ‹è¯•æ•°æ®åº“æ˜¯å¦è¿æ¥æˆåŠŸ*@Author OY*@Date 2020/5/31*@Time 14:46*/public class JDBCUtilTest &#123; @Test public void test() throws Exception &#123; for(int i = 0; i &lt; 100; i++)&#123; Connection conn = JDBCUtils.getConnection(); System.out.println(conn); JDBCUtils.closeResource(conn,null,null); &#125; &#125;&#125; æµ‹è¯•æ•°æ®åº“å¢åˆ æ”¹æŸ¥è¿æ¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120package com.oy.online.JDBC1.text;import com.oy.online.JDBC1.DAO.CustomerDAOImpI;import com.oy.online.JDBC1.bean.Customer;import com.oy.online.JDBC1.util.JDBCUtils;import org.junit.Test;import java.sql.Connection;import java.text.SimpleDateFormat;import java.util.Date;import java.util.List;public class CustomerDAOTest &#123; private CustomerDAOImpI custs = new CustomerDAOImpI(); @Test public void insert() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); Date date = sdf.parse(&quot;2001-8-9&quot;); Customer cust = new Customer(1, &quot;å°æ˜&quot;, &quot;xiaoming@123.com&quot;, new java.sql.Date(date.getTime())); custs.insert(conn,cust); System.out.println(&quot;æ·»åŠ æˆåŠŸ&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; &#125; JDBCUtils.closeResource(conn,null,null); &#125; @Test public void deletById() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); custs.deletById(conn,30); System.out.println(&quot;åˆ é™¤æˆåŠŸ&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(conn, null,null); &#125; &#125; @Test public void update() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); Date date = sdf.parse(&quot;2000-9-12&quot;); Customer cust = new Customer(31, &quot;å°ç™½&quot;, &quot;xiaobai@126.com&quot;,new java.sql.Date(date.getTime())); custs.update(conn, cust); System.out.println(&quot;ä¿®æ”¹æˆåŠŸ&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(conn,null,null); &#125; &#125; @Test public void getCustomerById() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); Customer cust = custs.getCustomerById(conn, 31); System.out.println(cust); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(conn, null,null); &#125; &#125; @Test public void getAll() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); List&lt;Customer&gt; list = custs.getAll(conn); list.forEach(System.out::println); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(conn,null,null); &#125; &#125; @Test public void getCount() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); Long count = custs.getCount(conn); System.out.println(count); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(conn, null, null); &#125; &#125; @Test public void getMaxBirth() &#123; Connection conn = null; try &#123; conn = JDBCUtils.getConnection(); java.sql.Date max = custs.getMaxBirth(conn); System.out.println(max); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.closeResource(conn,null,null); &#125; &#125;&#125;","categories":[{"name":"JDBC","slug":"JDBC","permalink":"http://blog.oy6090.top/categories/JDBC/"}],"tags":[{"name":"JDBCæ•°æ®è¿æ¥æ± ","slug":"JDBCæ•°æ®è¿æ¥æ± ","permalink":"http://blog.oy6090.top/tags/JDBC%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E6%B1%A0/"}]},{"title":"javascripté¢å‘å¯¹è±¡","slug":"javascrip é¢å‘å¯¹è±¡","date":"2020-07-11T16:00:00.000Z","updated":"2020-12-28T00:32:16.977Z","comments":true,"path":"posts/325844318.html","link":"","permalink":"http://blog.oy6090.top/posts/325844318.html","excerpt":"","text":"å‰è¨€ï¼š ç¬”è®°ä¸­çš„è¯¦ç»†ä»£ç ï¼Œæˆ‘å·²ç»æ‰“åŒ…æ”¾åœ¨ç¬”è®°çš„æœ€åã€‚ é¢å‘å¯¹è±¡1.1 å¯¹è±¡ï¼ˆObjectï¼‰å¯¹è±¡æ—¶ JS ä¸­çš„å¼•ç”¨æˆ·æ•°ç±»å‹ å¯¹è±¡æ—¶ä¸€ç§å¤åˆæ•°æ®ç±»å‹ï¼Œåœ¨å¯¹è±¡å¯ä»¥ä¿å­˜å¤šä¸ªä¸åŒæ•°æ®ç±»å‹çš„å±æ€§ ä½¿ç”¨ typeof æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè¿”å› object 1.1.1 åˆ›å»ºå¯¹è±¡ æ–¹å¼ä¸€ï¼š var obj = new Object(); æ–¹å¼äºŒï¼š var obj = {}; ä»£ç ç¤ºä¾‹ 12345678910111213&#x2F;&#x2F; æ–¹å¼ä¸€:var obj &#x3D; new Object();obj.name &#x3D; &quot;å°æ˜&quot;;obj.age &#x3D; 12;obj.sex &#x3D; &#39;M&#39;;console.log(obj);console.log(obj.name);&#x2F;&#x2F; æ–¹å¼äºŒvar obj2 &#x3D; &#123;&#125;;obj2.name &#x3D; &quot;å°çº¢&quot;;obj2.age &#x3D; 12;console.log(obj2.name); 1.1.2 å‘å¯¹è±¡ä¸­æ·»åŠ å±æ€§ è¯­æ³•ï¼š å¯¹è±¡.å±æ€§å = å±æ€§å€¼ å¯¹è±¡[â€œå±æ€§åâ€] = å±æ€§å€¼ å¯¹è±¡çš„å±æ€§åæ²¡æœ‰ä»»ä½•çš„è¦æ±‚ï¼Œä¸éœ€è¦éµå®ˆè¡¨ç¤ºç¬¦çš„è§„èŒƒï¼Œä½†æ˜¯å°½é‡æŒ‰ç…§è¡¨ç¤ºç¬¦çš„è¦æ±‚å»å†™ã€‚ å±æ€§å€¼ä¹Ÿå¯ä»¥ä»»æ„çš„æ•°æ®ç±»å‹ã€‚ 1.1.3 è¯»å–å¯¹è±¡çš„å±æ€§è¯­æ³•ï¼š å¯¹è±¡.å±æ€§å å¯¹è±¡[â€œå±æ€§åâ€] å¦‚æœè¯»å–ä¸€ä¸ªå¯¹è±¡å§æ²¡æœ‰çš„å±æ€§ï¼Œå®ƒä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª undefined 1.1.4 åˆ é™¤å¯¹è±¡ä¸­çš„å±æ€§è¯­æ³•ï¼š delect å¯¹è±¡.å±æ€§å delect å¯¹è±¡[â€œå±æ€§åâ€] ä»£ç ç¤ºä¾‹ 12345var obj3 &#x3D; new Object();obj3.name &#x3D; &quot;å°æ˜&quot;;console.log(obj3.name); &#x2F;&#x2F;å°æ˜delete obj3.name;console.log(obj3.name);&#x2F;&#x2F; undefined 1.1.5 ä½¿ç”¨ in æ£€æŸ¥å¯¹è±¡ä¸­æ˜¯å¦å«æœ‰æŒ‡å®šçš„å±æ€§ è¯­æ³•ï¼š â€œå±æ€§å in å¯¹è±¡â€ å¦‚æœåœ¨å¯¹è±¡ä¸­å«æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å› true å¦‚æœæ²¡æœ‰åˆ™è¿”å› false ä»£ç ç¤ºä¾‹ 1console.log(&quot;name&quot; in obj); 1.1.6 ä½¿ç”¨å¯¹è±¡å­—é¢é‡ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶ç›´æ¥å‘å¯¹è±¡ä¸­æ·»åŠ å±æ€§ è¯­æ³•ï¼š 1234var obj &#x3D; &#123; å±æ€§å.å±æ€§å€¼ï¼Œ å±æ€§å.å±æ€§å€¼&#125; 1.1.7 åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹åŸºæœ¬æ•°æ®ç±»å‹ï¼š String Number Booolean Null Underfined å¼•ç”¨æ•°æ®ç±»å‹: Object åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®ï¼Œå˜é‡æ˜¯ç›´æ¥ä¿å­˜å®ƒçš„å€¼ã€‚ å˜é‡ä¸å˜é‡ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¿®æ”¹ä¸€ä¸ªå˜é‡ä¸ä¼šå½±å“å…¶ä»–çš„å˜é‡ å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°æ®ï¼Œå˜é‡æ˜¯ä¿å­˜çš„å¯¹è±¡çš„å¼•ç”¨ï¼ˆå†…å­˜åœ°å€ï¼‰ å¦‚æœå¤šä¸ªå˜é‡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶ä¿®æ”¹ä¸€ä¸ªå˜é‡çš„å±æ€§ï¼Œä¼šå½±å“å…¶ä»–çš„å˜é‡ã€‚ æ¯”ä»·ä¸¤ä¸ªå˜é‡æ—¶ï¼Œå¯¹äºåŸºæœ¬æ•°æ®äº†ç±»å‹ï¼Œæ¯”è¾ƒçš„å°±æ˜¯å€¼ï¼Œå¯¹äºå¼•ç”¨æ•°æ®ç±»å‹æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œåœ°å€ç›¸åŒæ‰ç›¸åŒ 1.2 å‡½æ•° ï¼ˆFunctionï¼‰ å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå…·æœ‰æ™®é€šå¯¹è±¡çš„åŠŸèƒ½ å‡½æ•°ä¸­å¯ä»¥å°è£…ä¸€äº›ä»£ç ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥è°ƒç”¨å‡½æ•°æ¥æ‰§è¡Œè¿™äº›ä»£ç  ä½¿ç”¨ typeof æ£€æŸ¥ä¸€ä¸ªå‡½æ•°æ˜¯ä¼šè¿”å› function 1.2.1 åˆ›å»ºå‡½æ•°å‡½æ•°å£°æ˜ 123function å‡½æ•°å(å½¢å‚1,å½¢å‚2...å½¢å‚N)&#123; è¯­å¥...&#125;; å‡½æ•°è¡¨è¾¾å¼ 123var å‡½æ•°å &#x3D; function(å½¢å‚1,å½¢å‚2...å½¢å‚N)&#123; è¯­å¥...&#125;; ä»£ç ç¤ºä¾‹ 123456789101112function fun()&#123; console.log(&quot;è¿™æ˜¯ä¸€ä¸ªå‡½æ•°&quot;); alert(&quot;å“ˆå“ˆå“ˆ&quot;); document.write(&quot;------(&gt;_&lt;)-----&lt;br&gt;&quot;);&#125;fun();var fun2 &#x3D; function()&#123; console.log(&quot;è¿™æ˜¯ä¸€ä¸ªå‡½æ•°2&quot;); alert(&quot;å“ˆå“ˆå“ˆ&quot;); document.write(&quot;è¿™æ˜¯ä¸€ä¸ªå‡½æ•°&quot;);&#125;fun2(); 1.2.2 è°ƒç”¨å‡½æ•°123è¯­æ³•ï¼šå‡½æ•°å¯¹è±¡ï¼ˆ[å®å‚1ï¼Œå®å‚2...å®å‚N]ï¼‰; fun() ã€sum()ã€alert()ã€Number()ã€parselnt()å½“æˆ‘ä»¬è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¸­å°è£…çš„ä»£ç ä¼šæŒ‰ç…§ç¼–å†™çš„é¡ºåºæ‰§è¡Œ 1.2.3 å½¢å‚å’Œå®å‚å½¢å‚ï¼šå½¢å¼å‚æ•° å®šä¹‰å‡½æ•°æ—¶ï¼Œå¯ä»¥åœ¨()ä¸­å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå½¢å‚ï¼Œå½¢å‚ä¹‹é—´ä½¿ç”¨ï¼Œéš”å¼€å®šä¹‰å½¢å‚å°±ç›¸å½“äºåœ¨å‡½æ•°å†…å£°æ˜äº†å¯¹åº”çš„å˜é‡ä½†æ˜¯å¹¶ä¸èµ‹å€¼ã€‚å½¢å‚ä¼šåœ¨ä½¿ç”¨æ—¶æ‰èµ‹å€¼ã€‚ å®å‚ï¼šå®é™…å‚æ•° è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥åœ¨()ä¼ é€’å®å‚ï¼Œä¼ é€’çš„å®å‚ä¼šèµ‹å€¼ç»™å¯¹åº”çš„å½¢å‚ï¼Œè°ƒç”¨å‡½æ•°æ—¶ JS è§£æå™¨ä¸ä¼šæ£€æŸ¥å®å‚çš„ç±»å‹å’Œä¸ªæ•°ï¼Œå¯ä»¥ä¼ é€’ä»»æ„æ•°æ®ç±»å‹çš„å€¼ã€‚ å¦‚æœå®å‚çš„æ•°é‡å¤§äºå½¢å‚ï¼Œå¤šä½™çš„å®å‚å°†ä¸ä¼šèµ‹å€¼ å¦‚æœå®å‚çš„å°äºå½¢å‚ï¼Œåˆ™æ²¡æœ‰å¯¹åº”å®å‚çš„å½¢å‚å°†ä¼šèµ‹å€¼ undefined ä»£ç ç¤ºä¾‹ 1234function fun1(a, b, c)&#123; console.log(a + b +c);&#125;fun1(1,2,3); 1.2.4 è¿”å›å€¼ æ•°çš„æ‰§è¡Œçš„ç»“æœ ä½¿ç”¨ return æ¥è®¾ç½®å‡½æ•°çš„è¿”å›å€¼ è¯­æ³•ï¼š return å€¼; è¯¥å€¼å°±ä¼šæˆä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå˜é‡ç±»æ¥æ”¶è¿”å›å€¼ return åè¾¹çš„ä»£ç éƒ½ä¸ä¼šæ‰§è¡Œã€‚ä¸€æ—¦æ‰§è¡Œåˆ° return è¯­å¥æ—¶ï¼Œå‡½æ•°å°±ä¼šç«‹å³é€€å‡ºã€‚ return åå¯ä»¥è·Ÿä»»æ„çš„ç±»å‹å€¼ï¼Œå¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ å¦‚æœ return åä¸è·Ÿå€¼ï¼Œæˆ–è€…æ˜¯ä¸å†™ return åˆ™å‡½æ•°é»˜è®¤è¿”å› undefinedã€‚ breakã€coutinue å’Œ return break é€€å‡ºå¾ªç¯ continue è·³å‡ºå½“æ¬¡å¾ªç¯ return é€€å‡ºå‡½æ•° å‚æ•°ï¼Œå‡½æ•°çš„å®å‚ä¹Ÿå¯ä»¥æ˜¯ä»»æ„çš„æ•°æ®ç±»å‹ 1.2.5 æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°è®¾ç½®ä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§,å½“ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªå‡½æ•°è¯¥å¯¹è±¡çš„æ–¹æ³• å¯¹è±¡.æ–¹æ³•å(); å‡½æ•°å(); 1.3 ä½œç”¨åŸŸä½œç”¨åŸŸç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå˜é‡çš„ä½œç”¨èŒƒå›´ã€‚ åœ¨ JS ä¸­ä½œç”¨åŸŸåˆ†æˆä¸¤ç§ï¼š &lt;1&gt; å…¨å±€ä½œç”¨åŸŸ ç›´æ¥åœ¨ script æ ‡ç­¾ä¸­ç¼–å†™çš„ä»£ç éƒ½è¿è¡Œåœ¨å…¨å±€åŸŸä¸­ å…¨å±€ä½œç”¨åŸŸåœ¨æ‰“å¼€é¡µé¢æ—¶åˆ›å»ºï¼Œåœ¨é¡µé¢å…³é—­æ—¶é”€é­‚ã€‚ å…¨å±€ä½œç”¨åŸŸä¸­æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ windowï¼Œwindow å¯¹è±¡æ˜¯ç”±æµè§ˆå™¨æä¾›ï¼Œå¯ä»¥åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨ï¼Œå®ƒä»£è¡¨çš„æ˜¯æ•´ä¸ªçš„æµè§ˆå™¨çš„çª—å£ã€‚ åœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºçš„å˜é‡éƒ½ä¼šä½œä¸º window å¯¹è±¡çš„å±æ€§ä¿å­˜ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºçš„å‡½æ•°éƒ½ä¼šä½œä¸º window å¯¹è±¡çš„æ–¹æ³•ä¿å­˜ åœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºçš„å˜é‡å’Œå‡½æ•°å¯ä»¥åœ¨ä¹Ÿé¡µé¢çš„ä»»æ„ä½ç½®è®¿é—®ï¼Œåœ¨å‡½æ•°ä½œç”¨åŸŸä¹Ÿå¯ä»¥è®¿é—®åˆ°å…¨å±€ä½œç”¨åŸŸçš„å˜é‡ã€‚ &lt;2&gt; å‡½æ•°ä½œç”¨åŸŸ å‡½æ•°ä½œç”¨åŸŸæ˜¯å‡½æ•°æ‰§è¡Œæ—¶åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ä½œç”¨åŸŸã€‚ å‡½æ•°ä½œç”¨åŸŸåœ¨å‡½æ•°æ‰§è¡Œæ—¶åˆ›å»ºï¼Œåœ¨å‡½æ•°æ‰§è¡Œç»“æŸéƒ½ä¼šé”€æ¯ã€‚ åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­åˆ›å»ºçš„å˜é‡ï¼Œä¸èƒ½åœ¨å…¨å±€ä¸­è®¿é—®ã€‚ å½“åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ä½¿ç”¨ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¼šå…ˆæ‰¾è‡ªèº«çš„ä½œç”¨åŸŸå¯»æ‰¾ï¼Œ å¦‚æœæ‰¾åˆ°äº†åˆ™ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™åˆ°ä¸Šä¸€çº§ä½œç”¨åŸŸä¸­å¯»æ‰¾ï¼Œ å¦‚æœæ‰¾åˆ°äº†åˆ™ä½¿ç”¨ï¼Œæ‰¾ä¸åˆ°åˆ™ç»§ç»­å¾€ä¸Šæ‰¾ï¼Œä¸€ç›´æ‰¾ &lt;3&gt; å˜é‡çš„çš„å£°æ˜æèµ· åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä½¿ç”¨ var å…³é”®å­—å£°æ˜çš„å˜é‡ä¼šåœ¨æ‰€åœ¨çš„ä»£ç æ‰§è¡Œä¹‹å‰è¢«å£°æ˜ï¼Œä½†æ˜¯ä¸ä¼šèµ‹å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å˜é‡å£°æ˜å‰ä½¿ç”¨å˜é‡ã€‚ä½†æ˜¯ä¸ä½¿ç”¨ var å…³é”®å­—å£°æ˜çš„å˜é‡ä¸ä¼šè¢«æ‰§è¡Œæå‰ã€‚ åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œä¹Ÿå…·æœ‰æ”¹ç‰¹æ€§ï¼Œä½¿ç”¨ var å…³é”®å­—å£°æ˜çš„å˜é‡ä¼šåœ¨å‡½æ•°æ‰€åœ¨çš„ä»£ç æ‰§è¡Œå‰è¢«å£°æ˜çš„å˜é‡ä¼šåœ¨å‡½æ•°æ‰€æœ‰çš„ä»£ç æ‰§è¡Œå‰è¢«å£°æ˜ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ var å…³é”®å­—å£°æ˜å˜é‡ï¼Œåˆ™å˜é‡ä¼šå˜æˆå…¨å±€å˜é‡ &lt;4&gt; å‡½æ•°çš„å£°æ˜æå‰ åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä½¿ç”¨å‡½æ•°å£°æ˜åˆ›å»ºçš„å‡½æ•°(function fun(){}),ä¼šåœ¨æ‰€æœ‰çš„ä»£ç å—ä¹‹å‰è¢«åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å£°æ˜å»è°ƒç”¨å‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼(var fun = function(){})åˆ›å»ºçš„å‡½æ•°æ²¡æœ‰è¯¥ç‰¹æ€§ åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œä½¿ç”¨å‡½æ•°å£°æ˜åˆ›å»ºçš„å‡½æ•°ï¼Œä¼šåœ¨æ‰€æœ‰çš„å‡½æ•°ä¸­ä»£ç æ‰§è¡Œä¹‹å‰å°±åˆ›å»ºå¥½äº†ã€‚ ä»£ç ç¤ºä¾‹ &lt;1&gt; 12345678910var a &#x3D; 12;var b &#x3D; 10;function fun()&#123; console.log(&quot;æˆ‘æ˜¯funå‡½æ•°&quot;);&#125;function fun2( a, b)&#123; window.alert(a+b);&#125;window.fun();window.fun2(a,b); &lt;2&gt; 12345678910fun();&#x2F;&#x2F; å‡½æ•°å£°æ˜ï¼Œä¼šè¢«æå‰åˆ›å»ºfunction fun()&#123; console.log(&quot;æˆ‘æ˜¯ä¸€ä¸ªfunå‡½æ•°&quot;);&#125;;fun2();&#x2F;&#x2F; å‡½æ•°è¡¨è¾¾å¼ï¼Œä¸ä¼šæå‰åˆ›å»ºvar fun2 &#x3D; function () &#123; console.log(&quot;æˆ‘æ˜¯fun2å‡½æ•°&quot;);&#125;; &lt;3&gt;ã€&lt;4&gt; 123456789101112131415161718var a &#x3D; 10;function fun()&#123; var a &#x3D; 12; console.log(&quot;açš„å€¼ä¸º:&quot;+a);&#125; fun(); &#x2F;&#x2F; 12function fun2()&#123; console.log(a); var a &#x3D; 12;&#125; fun2(); &#x2F;&#x2F; undefinedfunction fun3()&#123; console.log(a); a &#x3D; 16;&#125;fun3(); &#x2F;&#x2F; 10console.log(a); &#x2F;&#x2F; 16 1.4 this(ä¸Šä¸‹æ–‡å¯¹è±¡) æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œè§£æå™¨éƒ½ä¼šå°†ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä½œä¸ºéšå«çš„å‚æ•°ä¼ é€’è¿›å‡½æ•°ã€‚ ä½¿ç”¨ this æ¥å¼•ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ ¹æ®å‡½æ•°çš„å½¢å¼ä¸åŒï¼Œthis çš„å€¼ä¹Ÿä¸åŒ this çš„ä¸åŒçš„æƒ…å†µï¼š 1.å‡½æ•°ä¸åŒçš„å½¢å¼è°ƒç”¨æ—¶,this æ˜¯ window 2.ä»¥æ–¹æ³•çš„å½¢å¼è°ƒç”¨æ—¶,this å°±æ˜¯è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ 3.ä»¥æ„é€ å‡½æ•°çš„å½¢å¼è°ƒç”¨æ—¶ï¼Œthis å°±æ˜¯æ–°åˆ›å»ºå¯¹è±¡ ä»£ç ç¤ºä¾‹ 12345678910111213function fun()&#123; console.log(this.name);&#125;var obj &#x3D;&#123; name : &quot;å°æ˜&quot;, sayName : fun&#125;;var obj2 &#x3D; &#123; name : &quot;å°çº¢&quot;, sayName : fun&#125;;obj.sayName(); &#x2F;&#x2F;å°æ˜obj2.sayName(); &#x2F;&#x2F; å°çº¢ 1.5 æ„é€ å‡½æ•° æ„é€ å‡½æ•°æ—¶ä¸“é—¨ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å‡½æ•° ä¸€ä¸ªæ„é€ å‡½æ•°æˆ‘ä»¬ä¹Ÿå¯ä»¥ç§°ä¸ºä¸€ä¸ªç±» é€šè¿‡ä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥å¯¹è±¡æ—¶è¿™ä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ é€šè¿‡åŒä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°ä¸ºä¸€ç±»å¯¹è±¡ æ„é€ å‡½æ•°å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œåªæ˜¯å®ƒçš„è°ƒç”¨æ–¹å¼ä¸åŒï¼Œ å¦‚æœç›´æ¥è°ƒç”¨ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•° å¦‚æœä½¿ç”¨ new æ¥è°ƒç”¨ï¼Œåˆ™å®ƒå°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•° ä¾‹å­ï¼š function Person(){ } ä»£ç ç¤ºä¾‹ 123456789101112function Person(name , age, gender )&#123; this.name &#x3D; name ; this.age &#x3D; age; this.gendar &#x3D; gender; this.sayName &#x3D; function()&#123; alert(this.name); &#125;;&#125;;var p1 &#x3D; new Person(&quot;å°æ˜&quot;,12,&quot;ç”·&quot;);console.log(p1);console.log(p1.age); 1.5.1 æ„é€ å‡½æ•°çš„æ‰§è¡Œæµç¨‹â‘  åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ â‘¡ å°†æ–°çš„å¯¹è±¡ä½œä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡å¯¹è±¡ â‘¢ æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç  â‘£ å°†æ–°å»ºçš„å¯¹è±¡è¿”å› 1.5.2 instanceof ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸€ä¸ªç±»çš„å®ä¾‹ è¯­æ³•ï¼š å¯¹è±¡ instanceof æ„é€ å‡½æ•° å¦‚æœè¯¥å¯¹è±¡æ—¶æ„å»ºå‡½æ•°çš„å®ä¾‹ï¼Œåˆ™è¿”å› true,å¦åˆ™è¿”å› false Object æ˜¯æ‰€æœ‰å¯¹è±¡çš„ç¥–å…ˆï¼Œæ‰€ä»¥ä»»ä½•å¯¹è±¡å’Œ Object åš instanceof éƒ½ä¼šè¿”å› true ä»£ç ç¤ºä¾‹ 1console.log(p1 instanceof Person); &#x2F;&#x2F; true 1.5.3 æšä¸¾å¯¹è±¡ä¸­çš„å±æ€§forâ€¦in è¯­æ³•ï¼š for(var å±æ€§å in å¯¹è±¡){ } forâ€¦in è¯­å¥çš„å¾ªç¯ä½“ä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œå¯¹è±¡ä¸­æœ‰å‡ ä¸ªå±æ€§å°±ä¼šæ‰§è¡Œå‡ æ¬¡ï¼Œæ¯æ¬¡å°†ä¸€ä¸ªå±æ€§åèµ‹å€¼ç»™æˆ‘ä»¬å®šä¹‰çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è·å–å¯¹è±¡ä¸­çš„å±æ€§ã€‚ ä»£ç ç¤ºä¾‹ 1234567891011121314151617function fun() &#123; alert(this.name);&#125;function Person(name, age, gender)&#123; this.name &#x3D; name; this.age &#x3D; age; this.gendar &#x3D; gender; this.sayName &#x3D; fun;&#125;;var p1 &#x3D; new Person(&quot;å°æ˜&quot;,12,&quot;ç”·&quot;);p1.sayName();for(var n in p1)&#123; console.log(&quot;å±æ€§&quot;+n); console.log(&quot;å±æ€§å€¼:&quot;+p1[n]);&#125; 1.6 åŸå‹(prototype) åˆ›å»ºä¸€ä¸ªå‡½æ•°ä»¥åï¼Œè§£æå™¨éƒ½ä¼šé»˜è®¤åœ¨å‡½æ•°æ·»åŠ ä¸€ä¸ªæ•° prototype prototype å±æ€§æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æˆ‘ä»¬ç§°ä¸ºåŸå‹å¯¹è±¡ã€‚ å½“å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼Œå®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡ä¸­éƒ½ä¼šå«æœ‰ä¸€ä¸ªéšå«çš„å±æ€§æ‰§è¡Œè¯¥åŸå‹å¯¹è±¡ã€‚ è¿™ä¸ªéšå«çš„å±æ€§å¯ä»¥é€šè¿‡.** proto **æ¥è®¿é—®ã€‚ å½“åŸå‹å¯¹è±¡å°±ç›¸å½“äºä¸€ä¸ªå…¬å…±çš„åŒºåŸŸï¼Œå‡¡æ˜¯é€šè¿‡åŒä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ä»–ä»¬é€šå¸¸éƒ½å¯ä»¥è®¿é—®åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡ æˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡ä¸­å…¬æœ‰çš„å±æ€§å’Œæ–¹æ³•ç»Ÿä¸€æ·»åŠ åˆ°åŸå‹çš„å¯¹è±¡ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦æ·»åŠ ä¸€æ¬¡å°±å¯ä»¥ä½¿æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ å½“æˆ‘ä»¬å»è®¿é—®å¯¹è±¡çš„ä¸€ä¸ªå±æ€§æˆ–è°ƒç”¨å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä¼šå…ˆè‡ªèº«ä¸­å¯»æ‰¾ï¼Œ å¦‚æœåœ¨è‡ªèº«ä¸­æ‰¾åˆ°ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚ å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å»åŸå‹å¯¹è±¡ä¸­å¯»æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™ä½¿ç”¨ï¼Œ å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å»åŸå‹çš„åŸå‹ä¸­å¯»æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ã€‚ç›´åˆ°æ‰¾åˆ° Object åŸå‹ä¸ºæ­¢ï¼ŒObject çš„åŸå‹çš„åŸå‹çš„å€¼ä¸º null, å¦‚æœä¾ç„¶æ²¡æœ‰æ‰¾åˆ°å°±è¿”å› undefined hasOwnProperty() è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥æ£€æŸ¥å¯¹è±¡è‡ªèº«ä¸­å«æœ‰æŸä¸ªå±æ€§ è¯­æ³•ï¼šå¯¹è±¡.hasOwnProperty(â€œå±æ€§åâ€) ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425function Myclass()&#123;&#125;;&#x2F;&#x2F; å‘MyClassçš„åŸå‹ä¸­æ·»åŠ ä¸€ä¸ªNameå±æ€§Myclass.prototype.name &#x3D; &quot;æˆ‘æ˜¯åŸå‹ä¸­çš„åå­—&quot;;var mc &#x3D; new Myclass();mc.age &#x3D; 18;console.log(mc.name);&#x2F;&#x2F; ä½¿ç”¨inæ£€æŸ¥å¯¹è±¡ä¸­æ˜¯å¦å«æœ‰æŸä¸ªå±æ€§æ—¶ï¼Œå¦‚æœå¯¹è±¡ä¸­æ²¡æœ‰ä½†æ˜¯åŸå‹ä¸­æœ‰ï¼Œä¹Ÿä¼šè¿”å›trueconsole.log(&quot;name&quot; in mc); &#x2F;&#x2F; trueconsole.log(mc.hasOwnProperty(&quot;age&quot;)); &#x2F;&#x2F; true&#x2F;&#x2F;console.log(mc.__proto__.hasOwnProperty(&quot;hasOwnProperty&quot;));&#x2F;&#x2F;console.log(mc.__proto__.__proto__.hasOwnProperty(&quot;hasOwnProperty&quot;));&#x2F;&#x2F;console.log(mc.__proto__.__proto__.__proto__);&#x2F;&#x2F;console.log(mc.hello);&#x2F;&#x2F;console.log(mc.__proto__.__proto__.__proto__) 1.7 æ•°ç»„ï¼ˆArrayï¼‰æ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨æ•°æ®å¯¹è±¡å’Œ Object ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒçš„å­˜å‚¨æ•ˆç‡æ¯”æ™®é€šå¯¹è±¡è¦é«˜ æ•°ç»„ä¸­ä¿å­˜çš„å†…å®¹æˆ‘ä»¬ç§°ä¸ºå…ƒç´  æ•°ç»„ä½¿ç”¨ç´¢å¼•(index)æ¥æ“ä½œå…ƒç´  ç´¢å¼•æŒ‡ç”± 0 å¼€å§‹çš„æ•´æ•° 1.7.1 æ•°ç»„çš„æ“ä½œ åˆ›å»ºæ•°ç»„ï¼š var arr = new Array() var arr = []; å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´  è¯­æ³•ï¼š æ•°ç»„å¯¹è±¡[ç´¢å¼•] = å€¼; arr[0] = 123; arr[1] = â€œhelloâ€; åˆ›å»ºæ•°ç»„æ—¶ç›´æ¥æ·»åŠ å…ƒç´  è¯­æ³•ï¼š var arr = [å…ƒç´  1ï¼Œ å…ƒç´  2â€¦å…ƒç´  N]; ä¾‹å­ï¼š var arr = [123,â€helloâ€ï¼Œtrue, null] ä»£ç ç¤ºä¾‹ 12345678var arr &#x3D; new Array();arr[0] &#x3D; 1;arr[1] &#x3D; 2;console.log(arr[0]);var arr &#x3D; &#123;&#125;;arr[0] &#x3D; 123;arr[1] &#x3D; &quot;hello&quot;;console.log(arr[0]); è·å–å’Œä¿®æ”¹æ•°ç»„çš„é•¿åº¦ ä½¿ç”¨ lenght å±æ€§æ¥æ“ä½œæ•°ç»„çš„é•¿åº¦ è·å–é•¿åº¦ï¼š æ•°ç»„.length length è·å–åˆ°çš„æ˜¯æ•°ç»„çš„æœ€å¤§ç´¢å¼•+1 å¯¹äºè¿ç»­çš„æ•°ç»„ï¼Œlength è·å–åˆ°çš„å°±æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•° ä¿®æ”¹æ•°ç»„çš„é•¿åº¦ æ•°ç»„.length = æ–°é•¿åº¦ å¦‚æœä¿®æ”¹åçš„ length å¤§äºåŸé•¿åº¦ï¼Œåˆ™å¤šå‡ºçš„éƒ¨åˆ†ä¼šç©ºå‡ºæ¥ å¦‚æœä¿®æ”¹çš„ length å°äºåŸé•¿åº¦ï¼Œåˆ™æ•°ç»„ä¸­å¤šå‡ºçš„å…ƒç´ ä¼šè¢«åˆ é™¤ å‘æ•°ç»„çš„æœ€åæ·»åŠ å…ƒç´  æ•°ç»„[æ•°ç»„.length] = å€¼ ä»£ç ç¤ºä¾‹ 12345var arr2 &#x3D; [1,2,3,4];console.log(arr2.length);arr2[arr2.length] &#x3D; 5;console.log(arr2);&#x2F;&#x2F; [1, 2, 3, 4, 5]console.log(arr2.length); 1.7.2 æ•°ç»„çš„æ–¹æ³• push() ç”¨æ¥å‘æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ•°ç»„çš„æ–°é•¿åº¦ è¯­æ³•ï¼š æ•°ç»„.push(å…ƒç´  1ï¼Œå…ƒç´  2,å…ƒç´  N) pop() ç”¨æ¥åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„æ–°é•¿åº¦ unshift() å‘æ•°ç»„çš„å‰è¾¹æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ•°ç»„çš„æ–°é•¿åº¦ shuift() åˆ é™¤æ•°ç»„çš„å‰è¾¹æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„å…ƒç´  ã€ slice() å¯ä»¥ä»ä¸€ä¸ªæ•°ç»„ä¸­æˆªå–æŒ‡å®šçš„å…ƒç´  è¯¥æ–¹æ³•ä¸ä¼šå½±å“åŸæ•°ç»„ï¼Œè€Œæ˜¯å°†æˆªå–åˆ°çš„å†…å®¹å°è£…ä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„å¹¶è¿”å› å‚æ•°ï¼š 1.æˆªå–å¼€å§‹ä½ç½®çš„ç´¢å¼•ï¼ˆåŒ…æ‹¬å¼€å§‹ä½ç½®ï¼‰ 2.æˆªå–ç»“æŸä½ç½®çš„ç´¢å¼•ï¼ˆä¸åŒ…æ‹¬ç»“æŸä½ç½®ï¼‰ ç¬¬äºŒä¸ªå¯ä»¥çœç•¥ä¸å†™ï¼Œå¦‚æœä¸å†™åˆ™ä¸€ç›´æˆªå–åˆ°æœ€å å‚æ•°å¯ä»¥ä¼ é€’ä¸€ä¸ªè´Ÿå€¼ï¼Œå¦‚æœæ˜¯è´Ÿå€¼ï¼Œåˆ™ä»åå¾€å‰æ•° splice() å¯ä»¥ç”¨æ¥åˆ é™¤æ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´ ï¼Œå¹¶ä½¿ç”¨æ–°çš„å…ƒç´ æ›¿æ¢ è¯¥æ–¹æ³•ä¼šå°†åˆ é™¤çš„å…ƒç´ å°è£…åˆ°æ–°çš„æ•°ç»„ä¸­è¿”å› å‚æ•°ï¼š 1.åˆ é™¤å¼€å§‹ä½ç½®çš„ç´¢å¼• 2.åˆ é™¤çš„ä¸ªæ•° 3.ä¸‰ä¸ªä»¥åï¼Œéƒ½æ˜¯æ›¿æ¢å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å°†ä¼šæ’å…¥åˆ°å¼€å§‹ä½ç½®çš„ç´¢å¼•çš„å‰è¾¹ 1.8 å‡½æ•° call() apply() è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯å‡½æ•°å¯¹è±¡çš„æ–¹æ³•éœ€è¦é€šè¿‡å‡½æ•°å¯¹è±¡æ¥è°ƒç”¨ é€šè¿‡ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç¬¬ä¸€ä¸ªå®å‚æ¥æŒ‡å®šå‡½æ•°ä¸­ this ä¸åŒçš„æ˜¯ call æ˜¯ç›´æ¥ä¼ é€’å‡½æ•°çš„å®å‚ apply éœ€è¦å°†å®å‚å°è£…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ä¼ é€’ ä»£ç ç¤ºä¾‹ 123456789101112function fun(a, b)&#123; console.log(&quot;a&#x3D;&quot; + a); console.log(&quot;b&#x3D;&quot; + b);&#125;var obj &#x3D; &#123; name : &quot;obj&quot;, sayName:function () &#123; alert(this.name); &#125;&#125;;&#x2F;&#x2F; fun(obj,2,3)fun.apply(obj,[2,3]); arguments() arguments å’Œ this ç±»ä¼¼ï¼Œéƒ½æ˜¯å‡½æ•°ä¸­çš„éšå«çš„å‚æ•° arguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„å…ƒç´ ï¼Œå®ƒç”¨æ¥å°è£…å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å®å‚,æ‰€ä»¥å³ä½¿ä¸å®šä¹‰å½¢å‚ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ arguments æ¥ä½¿ç”¨å®å‚ arguments ä¸­æœ‰ä¸€ä¸ªå±æ€§ callee è¡¨ç¤ºå½“å‰æ‰§è¡Œçš„å‡½æ•°å¯¹è±¡ ä»£ç ç¤ºä¾‹ 12345function fun(a,b)&#123; &#x2F;&#x2F; console.log(arguments instanceof Array); console.log(arguments.callee &#x3D;&#x3D; fun)&#125;;fun(&quot;hello&quot;,true); &#x2F;&#x2F; t this this æ˜¯å‡½æ•°çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ ¹æ®å‡½æ•°çš„è°ƒç”¨æ–¹å¼ä¸åŒä¼šæ‰§è¡Œä¸åŒçš„å¯¹è±¡ 1ã€å‡½æ•°çš„å½¢å¼è°ƒç”¨æ—¶ï¼Œthis æ˜¯ window 2ã€ä»¥æ–¹æ³•çš„å½¢å¼è°ƒç”¨çš„å½¢å¼è°ƒç”¨æ—¶ï¼Œthis æ˜¯è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ 3ã€ä»¥æ„é€ å‡½æ•°çš„å½¢å¼è°ƒç”¨æ—¶ï¼Œthis æ˜¯æ–°å»ºçš„é‚£ä¸ªå¯¹è±¡ 4ã€ä½¿ç”¨ call å’Œ apply è°ƒç”¨æ—¶ï¼Œthis æ˜¯æŒ‡çš„é‚£ä¸ªå¯¹è±¡ 5ã€åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ this ä»£è¡¨ window 1.9 åŒ…è£…ç±»åœ¨ JS ä¸­ä¸ºæˆ‘ä»¬æä¾›ä¸‰ä¸ªåŒ…è£…ç±»ï¼šï¼ˆä¸æ¨èï¼‰ String() Boolean() Number() é€šè¿‡è¿™ä¸‰ä¸ªåŒ…è£…ç±»å¯ä»¥åˆ›å»ºåŸºæœ¬ç±»å‹çš„å¯¹è±¡ ä¾‹å­ï¼š var num = new Number(2) var str = new String(â€œhelloâ€) var bool = new Boolean(true) ä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­åƒä¸‡è¿™ä¹ˆå¹²ã€‚ å½“æˆ‘ä»¬å»æ“ä½œä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œ è§£æå™¨ä¼šä¸´æ—¶å°†å…¶è½¬æ¢ä¸ºå¯¹åº”çš„åŒ…è£…ç±»ï¼Œç„¶åå†å»æ“ä½œå±æ€§å’Œæ–¹æ³•ï¼Œ è§£æå®Œæˆä»¥ååœ¨å°†è¿™ä¸ªä¸´æ—¶å¯¹è±¡è¿›è¡Œé”€æ¯ã€‚ 1.10 å­—ç¬¦ä¸²çš„ç›¸å…³æ–¹æ³•1.10.1 length è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ 1.10.2 charAt() æ ¹æ®ç´¢å¼•è·å–æŒ‡å®šçš„å­—ç¬¦ 1.10.3 charCodeAt() æ ¹æ®ç´¢å¼•è·å–æŒ‡å®šçš„å­—ç¬¦ç¼–ç  1.10.4 String.fromCharCode() æ ¹æ®å­—ç¬¦ç¼–ç è·å–å­—ç¬¦ 1.10.5 indexOf()1.10.6 lastindexOf() ä»ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ£€ç´¢æŒ‡å®šå†…å®¹ éœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯è¦æ£€ç´¢çš„å†…å®¹ï¼Œå¦‚æœæ‰¾åˆ°è¯¥å†…å®¹ï¼Œåˆ™ä¼šè¿”å›å…¶ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›-1ã€‚ å¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ï¼Œæ¥è¡¨ç¤ºå¼€å§‹æŸ¥æ‰¾çš„ä½ç½® indexOf()æ˜¯ä»å‰å¾€åæ‰¾ lastindexOf()æ˜¯ä»åå‘å‰æ‰¾ 1.10.7 slice() å¯ä»¥ä»ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æˆªå–æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶å°†æˆªå–åˆ°çš„å†…å®¹è¿”å›ï¼Œä¸ä¼šå½±å“å˜é‡ å‚æ•°ï¼š ç¬¬ä¸€ä¸ª:æˆªå–å¼€å§‹çš„ä½ç½®ï¼ˆåŒ…æ‹¬å¼€å§‹ï¼‰ ç¬¬äºŒä¸ªï¼šæˆªå–ç»“æŸçš„ä½ç½®ï¼ˆä¸åŒ…æ‹¬ç»“æŸï¼‰ å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœçœç•¥åˆ™ä¸€ç›´æˆªå–åˆ°æœ€å å¯ä»¥ä¼ è´Ÿæ•°ï¼Œå¦‚æœæ˜¯è´Ÿæ•°åˆ™ä»åå¾€å‰æ•° 1.10.8 substr() å’Œ slice()åŸºæœ¬ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯å®ƒä¸èƒ½æ¥å—è´Ÿå€¼ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœè®¾ç½®ä¸€ä¸ªè´Ÿå€¼ï¼Œåˆ™ä¼šè‡ªåŠ¨ä¿®æ­£ä¸º 0 substring()ä¸­å¦‚æœç¬¬äºŒä¸ªå‚æ•°å°äºç¬¬ä¸€ä¸ªï¼Œè‡ªåŠ¨è°ƒæ•´ä½ç½® 1.10.9 toLowerCase() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™å¹¶è¿”å› 1.10.10 toUpperCase() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™å¹¶è¿”å› 1.10.11 split() å¯ä»¥æ ¹æ®æŒ‡å®šå†…å®¹å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºä¸€ä¸ªæ•°ç»„ å‚æ•°ï¼š éœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå°†ä¼šæ ¹æ®å­—ç¬¦ä¸²å»æ‹†åˆ†æ•°ç»„ å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ­¤æ—¶ä¼šæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼å»æ‹†åˆ†æ•°ç»„ 1.10.12 match() å¯ä»¥å°†å­—ç¬¦ä¸²ä¸­å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹æå–å‡ºæ¥ å‚æ•°ï¼š æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥æ ¹æ®è¯¥æ­£åˆ™è¡¨è¾¾å¼å°†å­—ç¬¦ä¸²ä¸­ç¬¦åˆè¦æ±‚çš„å†…å®¹æå–å‡ºæ¥ å¹¶ä¸”å°è£…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­è¿”å› 1.10.13 replace() å¯ä»¥å°†å­—ç¬¦ä¸²ä¸­æŒ‡å®šå†…å®¹æ›¿æ¢ä¸ºæ–°çš„å†…å®¹ å‚æ•°ï¼š ç¬¬ä¸€ä¸ªï¼šè¢«æ›¿æ¢çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ ç¬¬äºŒä¸ªï¼šæ›¿æ¢çš„æ–°å†…å®¹ 1.10.14 search() å¯ä»¥æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼å»å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾æŒ‡å®šçš„å†…å®¹ å‚æ•°ï¼š æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†ä¼šæ ¹æ®è¯¥è¡¨è¾¾å¼æŸ¥è¯¢å†…å®¹ï¼Œå¹¶ä¸”å°†ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å†…å®¹çš„ç´¢å¼•è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•å†…å®¹ï¼Œåˆ™è¿”å›-1ã€‚ ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²var str &#x3D; &quot;Hello world&quot;;&#x2F;** * length å±æ€§ *&#x2F;console.log(str.length); &#x2F;&#x2F; 11&#x2F;** * charAt() *&#x2F;var result &#x3D; str.charAt(2);console.log(result); &#x2F;&#x2F; l&#x2F;** * charCodeAt() *&#x2F;var result &#x3D; str.charCodeAt(0);console.log(result); &#x2F;&#x2F; 72&#x2F;** * String.fromCharCode() *&#x2F;var result &#x3D; String.fromCharCode(0x2692);console.log(result); &#x2F;&#x2F; âš’&#x2F;** * concat() *&#x2F;result &#x3D; str.concat(&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;);console.log(result); &#x2F;&#x2F; Hello worldä½ å¥½ï¼Œä¸–ç•Œ&#x2F;** * indexof() *&#x2F;str &#x3D; &quot;hello , worid&quot;;result &#x3D; str.indexOf(&quot;h&quot;,1);console.log(result); &#x2F;&#x2F; -1result &#x3D; str.lastIndexOf(&quot;h&quot;,5);console.log(result); &#x2F;&#x2F; 0&#x2F;** * slice() *&#x2F;str &#x3D; &quot;hello , world&quot;;result &#x3D; str.slice(1,4);&#x2F;&#x2F; ellresult &#x3D; str.slice(1,-1);console.log(result); &#x2F;&#x2F; ello , worl&#x2F;** * substring() *&#x2F;result &#x3D; str.substring(0,1); &#x2F;&#x2F; hconsole.log(result);&#x2F;** * substr() *&#x2F;result &#x3D; str.substr(3,2); &#x2F;&#x2F; loconsole.log(result);&#x2F;** * split() *&#x2F;str &#x3D; &quot;abcdefg&quot;;result &#x3D; str.split(&quot;d&quot;);console.log(result); &#x2F;&#x2F; [&quot;abc&quot;, &quot;efg&quot;]&#x2F;** * toUpperCase() *&#x2F;str &#x3D; &quot;abcdefg&quot;;result &#x3D; str.toUpperCase();console.log(result); &#x2F;&#x2F; ABCDEFG&#x2F;** * toLowerCase() *&#x2F;str &#x3D; &quot;ABCDEFG&quot;;result &#x3D; str.toLocaleLowerCase();console.log(result); &#x2F;&#x2F; abcdefg 12345678910111213141516171819202122232425262728var str &#x3D; &quot;1a2b3c4d5e6f7&quot;;&#x2F;** * split() *&#x2F;&#x2F;&#x2F; ç”¨ä»»æ„çš„å­—æ¯æ¥å°†å­—ç¬¦ä¸²æ‹†åˆ†var result &#x3D; str.split(&#x2F;[A-z]&#x2F;);console.log(result);str &#x3D; &quot;hello abc hello aec afc&quot;;&#x2F;** * search() *&#x2F;result &#x3D; str.search(&#x2F;a[befj]c&#x2F;);console.log(result);&#x2F;&#x2F; 6str &#x3D; &quot;1a2a3a4a5e6f7A8B9C&quot;;&#x2F;** * match() *&#x2F;result &#x3D; str.match(&#x2F;[a-z]&#x2F;ig);console.log(result[2]); &#x2F;&#x2F; a&#x2F;** * replace() *&#x2F;result &#x3D; str.replace(&#x2F;[a-z]&#x2F;gi,&quot;&quot;);console.log(result); &#x2F;&#x2F; 123456789 1.11 Date æ—¥æœŸçš„å¯¹è±¡ï¼Œåœ¨ JS ä¸­é€šè¿‡ Date å¯¹è±¡æ¥è¡¨ç¤ºä¸€ä¸ªæ—¶é—´ åˆ›å»ºå¯¹è±¡ åˆ›å»ºä¸€ä¸ªå½“å‰çš„æ—¶é—´å¯¹è±¡ var d = new Date(); åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´å¯¹è±¡ var d = new Date(â€œæœˆ/æ—¥/å¹´ æ—¶:åˆ†:ç§’â€); æ–¹æ³•ï¼š getDate() å½“å‰æ—¥æœŸå¯¹è±¡æ˜¯å‡ æ—¥ï¼ˆ1-31ï¼‰ getDay() è¿”å›å½“å‰æ—¥æœŸå¯¹è±¡æ—¶å‘¨å‡ ï¼ˆ0-6ï¼‰ 0 å‘¨æ—¥ 1 å‘¨ä¸€ ã€‚ã€‚ã€‚ getMonth() è¿”å›å½“å‰æ—¥æœŸå¯¹è±¡çš„æœˆä»½ï¼ˆ0-11ï¼‰ 0 ä¸€æœˆ 1 äºŒæœˆ ã€‚ã€‚ã€‚ getFullYear() ä» Date å¯¹è±¡ä»¥å››ä½æ•°å­—è¿”å›å¹´ä»½ã€‚ getHours() è¿”å› Date å¯¹è±¡çš„å°æ—¶ (0 ~ 23)ã€‚ getMinutes() è¿”å› Date å¯¹è±¡çš„åˆ†é’Ÿ (0 ~ 59)ã€‚ getSeconds() è¿”å› Date å¯¹è±¡çš„ç§’æ•° (0 ~ 59)ã€‚ getMilliseconds() è¿”å› Date å¯¹è±¡çš„æ¯«ç§’(0 ~ 999)ã€‚ getTime() è¿”å›å½“å‰æ—¥æœŸå¯¹è±¡çš„æ—¶é—´æˆ³ æ—¶é—´æˆ³ï¼ŒæŒ‡çš„æ˜¯ä» 1970 å¹´æœˆ 1 æ—¥ 0 æ—¶ 0 åˆ† 0 ç§’ï¼Œåˆ°ç°åœ¨æ—¶é—´çš„æ¯«ç§’æ•° è®¡ç®—æœºåº•å±‚ä¿å­˜æ—¶é—´éƒ½æ˜¯ä»¥æ—¶é—´æˆ³çš„å½¢å¼ä¿å­˜çš„ã€‚ Date.now() å¯ä»¥è·å–å½“å‰ä»£ç æ‰§è¡Œæ—¶çš„æ—¶é—´æˆ³ ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637var d &#x3D; new Date(); &#x2F;&#x2F; Sun Jun 28 2020 17:51:48 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)console.log(d);var d &#x3D; new Date(&quot;2&#x2F;18&#x2F;2011 11:10:30&quot;);&#x2F;** * getDate() *&#x2F;var date &#x3D; d.getDate();console.log(date); &#x2F;&#x2F; 18&#x2F;** * getDay() * ä¼šè¿”å›ä¸€ä¸ª0-6çš„å€¼ * 0 è¡¨ç¤ºå‘¨æ—¥ * 1 è¡¨ç¤ºå‘¨ä¸€ *&#x2F;date &#x3D; d.getDay();console.log(date); &#x2F;&#x2F; 5&#x2F;** * getMonth() * ä¼šè¿”å›ä¸€ä¸ª0-11çš„å€¼ * 0 è¡¨ç¤º1æœˆ * 1 è¡¨ç¤º2æœˆ * 11 è¡¨ç¤º12æœˆ *&#x2F;var month &#x3D; d.getMonth();console.log(month); &#x2F;&#x2F; 1&#x2F;** * getFullYear() *&#x2F;var year &#x3D; d.getFullYear();console.log(year); &#x2F;&#x2F; 2011&#x2F;** * getTime * è·å–å½“å‰æ—¥æœŸå¯¹è±¡çš„æ—¶é—´æˆ³ *&#x2F;var time &#x3D; d.getTime();console.log(time); &#x2F;&#x2F; 1297998630000 1.12 MathMath å±äºä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒä¸éœ€è¦æˆ‘ä»¬åˆ›å»ºå¯¹è±¡ï¼Œå®ƒé‡Œè¾¹å°è£…äº†å±æ€§è¿ç®—ç›¸å…³çš„å¸¸é‡å’Œæ–¹æ³• æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒæ¥è¿›è¡Œæ•°å­¦è¿ç®—ç›¸å…³çš„æ“ä½œ æ–¹æ³•ï¼š Math.PI å¸¸é‡ï¼Œåœ†å‘¨ç‡ Math.abs() ç»å¯¹å€¼è¿ç®— Math.ceil() å‘ä¸Šå–æ•´ Math.floor() å‘ä¸‹å–æ•´ Math.round() å››èˆäº”å…¥å–æ•´ Math.random() ç”Ÿæˆä¸€ä¸ª 0-1 ä¹‹é—´çš„éšæœºæ•° ç”Ÿæˆä¸€ä¸ª x-y ä¹‹é—´çš„éšæœºæ•° ==Math.round(Math.random()*(y-x)+x);== Math.pow(x,y) æ±‚ x çš„ y æ¬¡å¹‚ Math.sqrt() å¯¹ä¸€ä¸ªæ•°è¿›è¡Œå¼€æ–¹ Math.max() æ±‚å¤šä¸ªæ•°ä¸­æœ€å¤§å€¼ Math.min() æ±‚å¤šä¸ªæ•°ä¸­çš„æœ€å°å€¼ ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&#x2F;** * Math.PI *&#x2F;console.log(Math.PI); &#x2F;&#x2F; 3.141592653589793&#x2F;** * abs() *&#x2F;console.log(Math.abs(-1)); &#x2F;&#x2F; 1&#x2F;** * Math.ceil() * Math.floor() * Math.round() *&#x2F;console.log(Math.ceil(1.234)); &#x2F;&#x2F; 2console.log(Math.floor(1.2334));&#x2F;&#x2F; 1console.log(Math.round(2.5)); &#x2F;&#x2F; 3&#x2F;** * Math.random() * ç”Ÿæˆä¸€ä¸ª0-xä¹‹é—´çš„éšæœºæ•° * Math.round(Math.random()*x) * ç”Ÿæˆä¸€ä¸ªx-yä¹‹é—´çš„éšæœºæ•° * Math.round(Math.random()*(y-x)+x) *&#x2F;&#x2F;&#x2F; ç”Ÿæˆä¸€ä¸ª0-10çš„éšæœºæ•°console.log(Math.random()); &#x2F;&#x2F; 0.6920747685502069&#x2F;&#x2F; ç”Ÿæˆä¸€ä¸ª0-20çš„éšæœºæ•°console.log(Math.random()*20); &#x2F;&#x2F; 9.90282879250878&#x2F;&#x2F; ç”Ÿæˆä¸€ä¸ª1-20çš„éšæœºæ•°console.log((Math.random()*19)+1); &#x2F;&#x2F; 6.28945228050076&#x2F;** * max() å¯ä»¥è·å–å¤šä¸ªæ•°ç»„çš„æœ€å¤§å€¼ * min() å¯ä»¥è·å–å¤šä¸ªæ•°ç»„ä¸­çš„æœ€å°å€¼ *&#x2F;console.log(Math.max(10,45,30,100)); &#x2F;&#x2F; 100console.log(Math.min(10,45,30,100));&#x2F;&#x2F; 10&#x2F;** * pow(x,y) *&#x2F;console.log(Math.pow(2,3)); &#x2F;&#x2F; 8&#x2F;** * sqrt() *&#x2F;console.log(Math.sqrt(4)); &#x2F;&#x2F; 2 1.13 æ­£åˆ™è¡¨è¾¾å¼æ­£åˆ™ç”¨æ¥å®šä¹‰ä¸€äº›å­—ç¬¦ä¸²çš„è§„åˆ™ï¼Œç¨‹åºå¯ä»¥æ ¹æ®è¿™äº›è§„åˆ™æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè§„å®šï¼Œä¹Ÿå¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²ç¬¦åˆè§„åˆ™çš„å†…å®¹æå–å‡ºæ¥ã€‚ 1.13.1 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ var reg = new RegExp(â€œæ­£åˆ™â€,â€åŒ¹é…æ¨¡å¼â€) var reg = /æ­£åˆ™è¡¨è¾¾å¼/ åŒ¹é…æ¨¡å¼ è¯­æ³• åŒ¹é…æ¨¡å¼: i ï¼š å¿½è§†å¤§å°å†™ g : å…¨å±€åŒ¹é…æ¨¡å¼ è®¾ç½®åŒ¹é…æ¨¡å¼æ—¶ï¼Œå¯ä»¥éƒ½ä¸è®¾ç½®ï¼Œä¹Ÿå¯ä»¥è®¾ç½® 1 ä¸ªï¼Œä¹Ÿå¯ä»¥å…¨è®¾ç½®ï¼Œè®¾ç½®æ—¶æ²¡æœ‰é¡ºåºè¦æ±‚ 1.13.2 æ­£åˆ™è¯­æ³•ï¼šè¯­æ³•ï¼š | æˆ– [A-Z] å¤§å†™å­—æ¯ [] æˆ– [A-z] ä»»æ„å­—æ¯ [^] é™¤äº† [0-9] ä»»æ„æ•°å­— [a-z] å°å†™å­—æ¯ é‡è¯ï¼š {n} æ­£å¥½ n æ¬¡ + è‡³å°‘ 1 æ¬¡ {1,} {m,n} m-n æ¬¡ ? 0 æ¬¡æˆ– 1 æ¬¡ {0,1} {m,} è‡³å°‘ m æ¬¡ * 0 æ¬¡æˆ–å¤šæ¬¡ {0,} è½¬ä¹‰å­—ç¬¦ï¼š \\ . è¡¨ç¤º. \\\\ è¡¨ç¤º\\ . è¡¨ç¤ºä»»æ„å­—ç¬¦ \\w ç›¸å½“äº[A-z0-9_] \\W ç›¸å½“äº[ ^ A-z0-9] \\d ä»»æ„æ•°å­— \\D é™¤äº†æ•°å­— \\s ç©ºæ ¼ \\S é™¤äº†ç©ºæ ¼ \\b å•è¯è¾¹ç•Œ \\B é™¤äº†å•è¯è¾¹ç•Œ ^ è¡¨ç¤ºå¼€å§‹ $ è¡¨ç¤ºç»“æŸ 1.13.3 æ–¹æ³• test() å¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ å¦‚æœç¬¦åˆè¿”å› true,å¦åˆ™è¿”å› false ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122var reg &#x3D; new RegExp(&quot;ab&quot;,&quot;i&quot;);var str &#x3D; &quot;a&quot;;console.log(reg.test(str)); &#x2F;&#x2F; falsevar reg &#x3D; &#x2F;a&#x2F;i; &#x2F;&#x2F; trueconsole.log(reg.test(&quot;abc&quot;));reg &#x3D; &#x2F;a|b|c&#x2F;; &#x2F;&#x2F; trueconsole.log(reg.test(&quot;adfasdscvd&quot;));reg &#x3D; &#x2F;[a-z]&#x2F;;console.log(reg.test(&quot;asddf&quot;)); &#x2F;&#x2F; true&#x2F;&#x2F;æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ abc æˆ– adc æˆ– aecreg &#x3D; &#x2F;a[bde]c&#x2F;;console.log(reg.test(&quot;abc&quot;));&#x2F;&#x2F; truereg &#x3D; &#x2F;[^ab]&#x2F;;console.log(reg.test(&quot;bcds&quot;)); &#x2F;&#x2F; truereg &#x3D; &#x2F;[^0-9]&#x2F;;console.log(reg.test(&quot;234234234532&quot;)); &#x2F;&#x2F; false 1234567891011121314&#x2F;&#x2F; é‚®ç®±æ­£åˆ™è¡¨è¾¾å¼ * ç”µå­é‚®ä»¶ * hello .nihao @ abc .com.cn * * ä»»æ„å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ .ä»»æ„å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ @ ä»»æ„å­—æ¯æ•°å­— .ä»»æ„å­—æ¯ï¼ˆ2-5ä½ï¼‰ .ä»»æ„å­—æ¯ï¼ˆ2-5ä½ï¼‰ * * \\w&#123;3,&#125; (\\.\\w+)* @ [A-z0-9]+ (\\.[A-z]&#123;2,5&#125;)&#123;1,2&#125; *&#x2F; var emailReg &#x3D; &#x2F;^\\w&#123;3,&#125;(\\.\\w+)*@[A-z0-9]+(\\.[A-z]&#123;2,5&#125;)&#123;1,2&#125;$&#x2F;; var email &#x3D; &quot;abc.hello@163.com&quot;; console.log(emailReg.test(email)); å¯ä»¥ç”¨ vscode å’Œ notepad++ æ‰“å¼€é“¾æ¥ï¼šhttps://pan.baidu.com/s/1yfS00YJtShuZVncxzWUrvw æå–ç ï¼š7q9u","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://blog.oy6090.top/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"javascriptåŸºç¡€","slug":"javascriptåŸºç¡€","permalink":"http://blog.oy6090.top/tags/javascript%E5%9F%BA%E7%A1%80/"}]},{"title":"javaå¤šçº¿ç¨‹åŸºç¡€ï¼ˆäºŒï¼‰","slug":"javaå¤šçº¿ç¨‹åŸºç¡€ï¼ˆäºŒï¼‰","date":"2020-07-11T16:00:00.000Z","updated":"2021-01-22T03:50:04.621Z","comments":true,"path":"posts/53344.html","link":"","permalink":"http://blog.oy6090.top/posts/53344.html","excerpt":"","text":"æœªæ¥å¯æœŸã€‚ä¸€ä½æ­£è¡Œèµ°åœ¨ç¼–ç¨‹ä¸–ç•Œä¸­çš„å°ç™½ï¼Œå¸Œæœ›èƒ½é‡åˆ°æ›´å¤šæ­£åœ¨åŠªåŠ›ä¸­çš„å°ä¼™ä¼´ã€‚ çº¿ç¨‹åŒæ­¥æœºåˆ¶ä¸€ã€èƒŒæ™¯ æˆ‘ä»¥ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥æ‰“å¼€è¿™ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼šæˆ‘ä»¬åšç«è½¦ä¹°ç¥¨ä¸ºä¾‹å­ã€‚åˆ›å»ºä¸ªçª—å£ï¼Œæ€»ç¥¨æ•°ä¸º 100 å¼ ï¼Œä½¿ç”¨å®ç° Runable æ¥å£çš„æ–¹å¼ ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132class Window1 implements Runnable&#123; //æ€»ç¥¨æ•° private int ticket = 100; @Override public void run() &#123; while(true)&#123; if(ticket &gt; 0)&#123; System.out.println(Thread.currentThread().getName()+&quot;:å–ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&quot;+ticket); ticket--; &#125;else&#123; break; &#125; &#125; &#125;&#125;public class WindowTest1 &#123; public static void main(String[] args) &#123; Window1 w1 = new Window1(); Thread t1 = new Thread(w1); Thread t2 = new Thread(w1); Thread t3 = new Thread(w1); t1.setName(&quot;çª—å£ä¸€&quot;); t2.setName(&quot;çª—å£äºŒ&quot;); t3.setName(&quot;çª—å£ä¸‰&quot;); t1.start(); t2.start(); t3.start(); &#125;&#125; è¿è¡Œç»“æœ åœ¨å–ç¥¨çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ä¸Šé¢çš„ä»£ç è¿è¡Œçš„ä»£ç ï¼Œåœ¨æœ€åå‡ºç°äº†é‡ç¥¨ã€é”™ç¥¨ï¼Œä»è€Œå‡ºç°äº†çº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚ å‡ºç°çº¿ç¨‹å®‰å…¨çš„åŸå› ï¼Œå°±æ˜¯å½“æŸä¸ªçº¿ç¨‹æ“ä½œè½¦ç¥¨çš„è¿‡ç¨‹ä¸­ï¼Œå°šæœªæ“ä½œå®Œæˆæ—¶ï¼Œå…¶ä»–çº¿ç¨‹å‚ä¸è¿›æ¥ï¼Œä¸€èµ·æ¥æ“ä½œè½¦ç¥¨ã€‚ å‡ºç°äº†é—®é¢˜ï¼Œæ€»è¦æœ‰è§£å†³çš„åŠæ³•ï¼Œåœ¨ java å¤šçº¿ç¨‹å°±ç»™æˆ‘ä»¬æä¾›äº†è¿™ä¸ªè§£å†³åŠæ³•æ–¹æ³•ã€‚ æˆ‘å…ˆç®€å•çš„æè¿°ä¸€ä¸‹è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ a åœ¨æ“ä½œ ticket çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å‚ä¸è¿›æ¥ã€‚ç›´åˆ°çº¿ç¨‹ a æ“ä½œå®Œ ticket æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥å¼€å§‹æ“ä½œ ticket.è¿™ç§æƒ…å†µå³ä½¿çº¿ç¨‹ a å‡ºç°äº†é˜»å¡ï¼Œä¹Ÿä¸èƒ½è¢«æ”¹å˜ã€‚ äºŒã€è§£å†³æ–¹æ³•æ–¹å¼ä¸€ï¼šåŒæ­¥ä»£ç å—1234è¯­æ³•ï¼šsynchronized(åŒæ­¥ç›‘è§†å™¨)&#123; // éœ€è¦ä¸åŒçš„ä»£ç &#125; è¯´æ˜ï¼š æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ï¼Œå³ä¸ºéœ€è¦è¢«åŒæ­¥çš„ä»£ç  â€“&gt; ä¸èƒ½åŒ…å«ä»£ç å¤šäº†ï¼Œä¹Ÿä¸èƒ½åŒ…å«çš„ä»£ç å°‘äº†ã€‚ å…±äº«æ•°æ®ï¼Œå¤šä¸ªæ•°æ®å…±åŒæ“ä½œçš„å˜é‡ï¼Œæ¯”å¦‚ï¼šticket å°±æ˜¯å…±äº«æ•°æ®ã€‚ åŒæ­¥ç›‘è§†å™¨ä¿—ç§° é”ã€‚ä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥å……å½“é”ã€‚ è¦æ±‚ï¼šå¤šä¸ªçº¿ç¨‹å¿…é¡»è¦ç”¨åŒä¸€æŠŠé”ã€‚ â‘  è§£å†³ç»§æ‰¿ Thread ç±»çº¿ç¨‹å®‰å…¨é—®é¢˜ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041class Window2 extends Thread&#123; //å…±äº«æ•°æ® private static int ticket = 100; @Override public void run()&#123; //æ·»åŠ åŒæ­¥ä»£ç å— // Class clazz =Window2.class,å…¶ä¸­Window2.classåªä¼šåŠ è½½ä¸€æ¬¡ while(true)&#123; synchronized(Window2.class)&#123; if(ticket &gt; 0)&#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(getName()+&quot;:å–ç¥¨,ç¥¨å·ä¸º:&quot;+ticket); ticket--; &#125;else&#123; break; &#125; &#125; &#125; &#125;&#125;public class Window2Test &#123; public static void main(String[] args) &#123; Window2 t1 = new Window2(); Window2 t2 = new Window2(); Window2 t3 = new Window2(); t1.setName(&quot;çª—å£ä¸€&quot;); t2.setName(&quot;çª—å£äºŒ&quot;); t3.setName(&quot;çª—å£ä¸‰&quot;); t1.start(); t2.start(); t3.start(); &#125;&#125; è¿è¡Œç»“æœï¼š â‘¡ è§£å†³å®ç° Runable æ¥å£çº¿ç¨‹å®‰å…¨ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536class Window1 implements Runnable&#123; //æ€»ç¥¨æ•° private int ticket = 100; @Override public void run() &#123; while(true)&#123; //è®¾ç½®åŒæ­¥ä»£ç å— // æ­¤æ—¶çš„thisï¼šå”¯ä¸€çš„Window1çš„å¯¹è±¡ synchronized(this)&#123; if(ticket &gt; 0)&#123; System.out.println(Thread.currentThread().getName()+&quot;:å–ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&quot;+ticket); ticket--; &#125;else&#123; break; &#125; &#125; &#125; &#125;&#125;public class WindowTest1 &#123; public static void main(String[] args) &#123; Window1 w1 = new Window1(); Thread t1 = new Thread(w1); Thread t2 = new Thread(w1); Thread t3 = new Thread(w1); t1.setName(&quot;çª—å£ä¸€&quot;); t2.setName(&quot;çª—å£äºŒ&quot;); t3.setName(&quot;çª—å£ä¸‰&quot;); t1.start(); t2.start(); t3.start(); &#125;&#125; è¿è¡Œç»“æœï¼šè¡¥å……ï¼š åœ¨å®ç° Runable æ¥å£åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨thiså……å½“åŒæ­¥ç›‘è§†å™¨ã€‚åœ¨ç»§æ‰¿ Thread ç±»åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹å¼ä¸­ï¼Œæ…ç”¨ this å……å½“åŒæ­¥ç›‘è§†å™¨ï¼Œè€ƒè™‘ä½¿ç”¨å½“å‰ç±»å……å½“åŒæ­¥ç›‘è§†å™¨ã€‚ æ–¹å¼äºŒï¼šåŒæ­¥æ–¹æ³• å¦‚æœæ“ä½œå…±äº«æ•°æ®çš„ä»£ç å®Œæ•´çš„å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸å¦¨ç¢å°†æ­¤æ–¹æ³•å£°æ˜åŒæ­¥çš„ â‘  ä½¿ç”¨åŒæ­¥æ–¹æ³•è§£å†³ Thread ç±»çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435class Window3 extends Thread&#123; private static int ticket = 100; @Override public void run()&#123; while(true)&#123; show(); &#125; &#125; private static synchronized void show()&#123; //åŒæ­¥ç›‘è§†å™¨ï¼šWindow3.class if(ticket &gt; 0)&#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;ï¼šå–ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&quot;+ticket); ticket--; &#125; &#125;&#125;public class WindowTest3 &#123; public static void main(String[] args) &#123; Window3 w1 = new Window3(); Window3 w2 = new Window3(); Window3 w3 = new Window3(); w1.setName(&quot;çª—å£ä¸€&quot;); w2.setName(&quot;çª—å£äºŒ&quot;); w3.setName(&quot;çª—å£ä¸‰&quot;); w1.start(); w2.start(); w3.start(); &#125;&#125; è¿è¡Œç»“æœï¼š â‘¡ ä½¿ç”¨åŒæ­¥æ–¹æ³•è§£å†³å®ç° Runable æ¥å£çº¿ç¨‹å®‰å…¨1234567891011121314151617181920212223242526272829303132class Window4 implements Runnable&#123; private int ticket = 100; @Override public void run() &#123; while (true)&#123; show(); &#125; &#125; private synchronized void show()&#123; //åŒæ­¥ç›‘è§†å™¨:this if(ticket &gt; 0)&#123; System.out.println(Thread.currentThread().getName()+&quot;:å–ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&quot;+ticket); ticket--; &#125; &#125;&#125;public class WindowTest4 &#123; public static void main(String[] args) &#123; Window4 w = new Window4(); Thread t1 = new Thread(w); Thread t2 = new Thread(w); Thread t3 = new Thread(w); t1.setName(&quot;çª—å£ä¸€&quot;); t2.setName(&quot;çª—å£äºŒ&quot;); t3.setName(&quot;çª—å£ä¸‰&quot;); t1.start(); t2.start(); t3.start(); &#125;&#125; å…³äºåŒæ­¥æ–¹æ³•çš„æ€»ç»“ï¼š åŒæ­¥æ–¹æ³•ä»ç„¶æ¶‰åŠåˆ°åŒæ­¥ç›‘è§†å™¨åªæ˜¯ä¸éœ€è¦æˆ‘ä»¬æ˜¾ç¤ºçš„å£°æ˜ã€‚ éé™æ€çš„åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ç›‘è§†å™¨æ˜¯ï¼šthis é™æ€çš„åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ç›‘è§†å™¨æ˜¯: å½“å‰ç±»æœ¬èº« æ–¹å¼ä¸‰ï¼šLock é” â€“ JDK5.0 æ–°å¢ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class Window5 implements Runnable&#123; // 1.å®ä¾‹åŒ–ReentrantLock ReentrantLock lock = new ReentrantLock(); private int ticket = 100; @Override public void run() &#123; while(true)&#123; try &#123; lock.lock(); // 2. è°ƒç”¨é”å®šæ–¹æ³•lock() if(ticket &gt; 0)&#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;ï¼šå”®ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&quot;+ticket); ticket--; &#125;else&#123; break; &#125; &#125; finally &#123; // 3.è°ƒç”¨è§£é”æ–¹æ³•:unlock() lock.unlock(); &#125; &#125; &#125;&#125;public class LockTest &#123; public static void main(String[] args) &#123; Window5 w = new Window5(); Thread t1 = new Thread(w); Thread t2 = new Thread(w); Thread t3 = new Thread(w); t1.setName(&quot;çª—å£1&quot;); t2.setName(&quot;çª—å£2&quot;); t3.setName(&quot;çª—å£3&quot;); t1.start(); t2.start(); t3.start(); &#125;&#125; è¿è¡Œç»“æœï¼š æ€»ç»“ä½¿ç”¨çš„ä¼˜å…ˆé¡ºåº 1Lock --&gt; åŒæ­¥ä»£ç å—(å·²ç»è¿›å…¥æ–¹æ³•ä½“,åˆ†é…äº†ç›¸å¯¹åº”èµ„æº) --&gt; åŒæ­¥æ–¹æ³•ï¼ˆåœ¨æ–¹æ³•ä½“ä¹‹å¤–ï¼‰ åˆ©å¼Š åŒæ­¥çš„æ–¹å¼ï¼Œè§£å†³äº†çº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚â€“&gt; å¥½å¤„ æ“ä½œåŒæ­¥ä»£ç æ—¶ï¼Œåªèƒ½ä¸€ä¸ªçº¿ç¨‹å‚ä¸ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªçš„å•çº¿ç¨‹çš„è¿‡ç¨‹ï¼Œæ•ˆç‡ä½ã€‚ synchronzied ä¸ Lock çš„å¼‚åŒ synchronzied æœºåˆ¶åœ¨æ‰§è¡Œå®Œç›¸å¯¹åº”çš„åŒæ­¥ä»£ç å—åï¼Œè‡ªåŠ¨çš„é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ Lock éœ€è¦æ‰‹åŠ¨çš„å¯åŠ¨ï¼ˆlock()ï¼‰ï¼ŒåŒæ—¶ç»“æŸæ—¶ä¹Ÿéœ€è¦æ‰‹åŠ¨çš„å®ç°(unlock()); æ­»é” æ­»é”çš„ç†è§£ï¼šä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å ç”¨å¯¹æ–¹éœ€è¦çš„åŒæ­¥èµ„æºä¸æ”¾å¼ƒï¼Œéƒ½åœ¨ç­‰å¾…å¯¹æ–¹æ”¾å¼ƒè‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æºï¼Œå°±å½¢æˆäº†çº¿ç¨‹çš„æ­»é” è¯´æ˜ï¼š å‡ºç°æ­»é”åï¼Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œä¸ä¼šå‡ºç°æç¤ºï¼Œåªæ˜¯æ‰€æœ‰çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ— æ³•ç»§ç»­ æˆ‘ä»¬ä½¿ç”¨åŒæ­¥æ—¶ï¼Œè¦é¿å…å‡ºç°æ­»é”ã€‚ ä»£ç ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263class A &#123; public synchronized void foo(B b) &#123; //åŒæ­¥ç›‘è§†å™¨ï¼šAç±»çš„å¯¹è±¡ï¼ša System.out.println(&quot;å½“å‰çº¿ç¨‹å: &quot; + Thread.currentThread().getName() + &quot; è¿›å…¥äº†Aå®ä¾‹çš„fooæ–¹æ³•&quot;); // â‘ // try &#123;// Thread.sleep(200);// &#125; catch (InterruptedException ex) &#123;// ex.printStackTrace();// &#125; System.out.println(&quot;å½“å‰çº¿ç¨‹å: &quot; + Thread.currentThread().getName() + &quot; ä¼å›¾è°ƒç”¨Bå®ä¾‹çš„lastæ–¹æ³•&quot;); // â‘¢ b.last(); &#125; public synchronized void last() &#123;//åŒæ­¥ç›‘è§†å™¨ï¼šAç±»çš„å¯¹è±¡ï¼ša System.out.println(&quot;è¿›å…¥äº†Aç±»çš„lastæ–¹æ³•å†…éƒ¨&quot;); &#125;&#125;class B &#123; public synchronized void bar(A a) &#123;//åŒæ­¥ç›‘è§†å™¨ï¼šb System.out.println(&quot;å½“å‰çº¿ç¨‹å: &quot; + Thread.currentThread().getName() + &quot; è¿›å…¥äº†Bå®ä¾‹çš„baræ–¹æ³•&quot;); // â‘¡// try &#123;// Thread.sleep(200);// &#125; catch (InterruptedException ex) &#123;// ex.printStackTrace();// &#125; System.out.println(&quot;å½“å‰çº¿ç¨‹å: &quot; + Thread.currentThread().getName() + &quot; ä¼å›¾è°ƒç”¨Aå®ä¾‹çš„lastæ–¹æ³•&quot;); // â‘£ a.last(); &#125; public synchronized void last() &#123;//åŒæ­¥ç›‘è§†å™¨ï¼šb System.out.println(&quot;è¿›å…¥äº†Bç±»çš„lastæ–¹æ³•å†…éƒ¨&quot;); &#125;&#125;public class DeadLock implements Runnable &#123; A a = new A(); B b = new B(); public void init() &#123; Thread.currentThread().setName(&quot;ä¸»çº¿ç¨‹&quot;); // è°ƒç”¨aå¯¹è±¡çš„fooæ–¹æ³• a.foo(b); System.out.println(&quot;è¿›å…¥äº†ä¸»çº¿ç¨‹ä¹‹å&quot;); &#125; @Override public void run() &#123; Thread.currentThread().setName(&quot;å‰¯çº¿ç¨‹&quot;); // è°ƒç”¨bå¯¹è±¡çš„baræ–¹æ³• b.bar(a); System.out.println(&quot;è¿›å…¥äº†å‰¯çº¿ç¨‹ä¹‹å&quot;); &#125; public static void main(String[] args) &#123; DeadLock dl = new DeadLock(); new Thread(dl).start(); dl.init(); &#125;&#125; è¿è¡Œç»“æœï¼š çº¿ç¨‹é€šä¿¡ä¸€ã€çº¿ç¨‹é€šä¿¡æ¶‰åŠåˆ°çš„ä¸‰ä¸ªæ–¹æ³• wait():ä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ã€‚notify():ä¸€æ—¦æ‰§è¡Œæ–¹æ³•ï¼Œå°±ä¼šå”¤é†’è¢« wait çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è¢« waitï¼Œå°±å”¤é†’ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªã€‚notifyAll():ä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå°±ä¼šå”¤é†’æ‰€æœ‰è¢« wait()çš„çº¿ç¨‹ã€‚ ä»£ç ç¤ºä¾‹ï¼š çº¿ç¨‹é€šä¿¡çš„ä¾‹å­ï¼šä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹æ‰“å° 1-100ã€‚çº¿ç¨‹ 1, çº¿ç¨‹ 2 äº¤æ›¿æ‰“å° 1234567891011121314151617181920212223242526272829303132333435363738394041424344class Number implements Runnable&#123; private int number = 1; Object obj = new Object(); @Override public void run() &#123; while(true)&#123; synchronized(obj)&#123; //å”¤é†’çº¿ç¨‹ obj.notify(); if(number &lt;= 100)&#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName()+&quot;:&quot; +number); number++; try &#123; // ä½¿å¾—è°ƒç”¨å¦‚ä¸‹wait()æ–¹æ³•çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ obj.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;else&#123; break; &#125; &#125; &#125; &#125;&#125;public class CommunicationTest &#123; public static void main(String[] args) &#123; Number number = new Number(); Thread t1 = new Thread(number); Thread t2 = new Thread(number); t1.setName(&quot;çº¿ç¨‹1&quot;); t2.setName(&quot;çº¿ç¨‹2&quot;); t1.start(); t2.start(); &#125;&#125; è¿è¡Œç»“æœï¼š äºŒã€è¯´æ˜ wait()ï¼Œnotify().notifyAll()**ï¼šä¸‰ä¸ªæ–¹æ³•å¿…é¡»ç”¨åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ã€‚**wait()ï¼Œnotify()ï¼ŒnotifyAll():ä¸‰ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…å¿…é¡»æ˜¯åŒæ­¥ä»£ç å—åŒæ­¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨ã€‚å¦åˆ™ä¼šå‡ºç°IllegalMonitorStateExceptionå¼‚å¸¸wait()ï¼Œnotify()ï¼ŒnotifyAll()**ï¼šä¸‰ä¸ªæ–¹æ³•æ—¶å®šä¹‰åœ¨java.lang.Object**ç±»ä¸­ã€‚ ä¸‰ã€é‡Šæ”¾é”çš„æ“ä½œï¼š â‘  å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç æ‰§è¡Œç»“æŸã€‚â‘¡ å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ° breakã€return ç»ˆæ­¢è¯¥ä»£ç å—ã€è¯¥æ–¹æ³•çš„ç»§æ‰¿æ‰§è¡Œã€‚â‘¢ å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°æœªå¤„ç†çš„ Error æˆ– Exceptionï¼Œå¯¼è‡´å¼‚å¸¸ç»“æŸã€‚â‘£ å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„ waitï¼ˆï¼‰æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é” å››ã€ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨Thread.sleep()ã€Thread.yield(); æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œ çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†çº¿ç¨‹çš„ supend()æ–¹æ³•å°†çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”ï¼ˆåŒæ­¥ç›‘è§†å™¨ï¼‰ äº”ã€å°ç»“sleep()ä¸ waitï¼ˆï¼‰çš„å¼‚åŒ ç›¸åŒç‚¹ï¼šä¸€æ—¦æ‰§è¡Œæ–¹æ³•ï¼Œéƒ½å¯ä»¥ä½¿å¾—å½“å‰çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ã€‚ ä¸åŒç‚¹ï¼š &lt;1&gt;ä¸¤ä¸ªæ–¹æ³•å£°æ˜çš„ä½ç½®ä¸åŒï¼šThreadç±»ä¸­å£°æ˜sleep()**ï¼ŒObjectç±»ä¸­å£°æ˜wait()** &lt;2&gt; è°ƒç”¨çš„è¦æ±‚ä¸åŒï¼šsleepï¼ˆï¼‰å¯ä»¥åœ¨ä»»ä½•éœ€è¦çš„åœºæ™¯ä¸‹è°ƒç”¨ã€‚waitï¼ˆï¼‰å¿…é¡»ä½¿ç”¨åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ã€‚ java å¤šçº¿ç¨‹åŸºç¡€åˆ°è¿™é‡Œç»“æŸäº†ï¼Œåœ¨å†™åšå®¢åŒæ—¶ä¸€è¾¹å¤ä¹ è‡ªå·±æ‰€å­¦çš„çŸ¥è¯†ç‚¹ï¼Œç»™è‡ªå·±ä¸æ–­ç§¯ç´¯çŸ¥è¯†ç‚¹ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"http://blog.oy6090.top/categories/Java/"}],"tags":[{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/Java%E5%9F%BA%E7%A1%80/"}]}],"categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://blog.oy6090.top/categories/Web%E5%89%8D%E7%AB%AF/"},{"name":"MySQL","slug":"MySQL","permalink":"http://blog.oy6090.top/categories/MySQL/"},{"name":"CentOS","slug":"CentOS","permalink":"http://blog.oy6090.top/categories/CentOS/"},{"name":"JavaEEæ¡†æ¶","slug":"JavaEEæ¡†æ¶","permalink":"http://blog.oy6090.top/categories/JavaEE%E6%A1%86%E6%9E%B6/"},{"name":"Redis","slug":"Redis","permalink":"http://blog.oy6090.top/categories/Redis/"},{"name":"Gitå·¥å…·","slug":"Gitå·¥å…·","permalink":"http://blog.oy6090.top/categories/Git%E5%B7%A5%E5%85%B7/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://blog.oy6090.top/categories/%E5%B7%A5%E5%85%B7/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://blog.oy6090.top/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"é¡¹ç›®å®æˆ˜","slug":"é¡¹ç›®å®æˆ˜","permalink":"http://blog.oy6090.top/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"},{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/categories/java/"},{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/categories/Java%E5%9F%BA%E7%A1%80/"},{"name":"Java","slug":"Java","permalink":"http://blog.oy6090.top/categories/Java/"},{"name":"Linux","slug":"Linux","permalink":"http://blog.oy6090.top/categories/Linux/"},{"name":"Linuxè¯­è¨€","slug":"Linuxè¯­è¨€","permalink":"http://blog.oy6090.top/categories/Linux%E8%AF%AD%E8%A8%80/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.oy6090.top/categories/JavaScript/"},{"name":"JDBC","slug":"JDBC","permalink":"http://blog.oy6090.top/categories/JDBC/"},{"name":"Javaè®¾è®¡æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼","permalink":"http://blog.oy6090.top/categories/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"Javaç®—æ³•","slug":"Javaç®—æ³•","permalink":"http://blog.oy6090.top/categories/Java%E7%AE%97%E6%B3%95/"},{"name":"GitHub","slug":"GitHub","permalink":"http://blog.oy6090.top/categories/GitHub/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://blog.oy6090.top/tags/Vue/"},{"name":"MySQL","slug":"MySQL","permalink":"http://blog.oy6090.top/tags/MySQL/"},{"name":"CentOS 7","slug":"CentOS-7","permalink":"http://blog.oy6090.top/tags/CentOS-7/"},{"name":"java","slug":"java","permalink":"http://blog.oy6090.top/tags/java/"},{"name":"Docker","slug":"Docker","permalink":"http://blog.oy6090.top/tags/Docker/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://blog.oy6090.top/tags/SpringCloud/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://blog.oy6090.top/tags/SpringBoot/"},{"name":"layui","slug":"layui","permalink":"http://blog.oy6090.top/tags/layui/"},{"name":"Redis","slug":"Redis","permalink":"http://blog.oy6090.top/tags/Redis/"},{"name":"GitHub","slug":"GitHub","permalink":"http://blog.oy6090.top/tags/GitHub/"},{"name":"Maven","slug":"Maven","permalink":"http://blog.oy6090.top/tags/Maven/"},{"name":"Mybatis","slug":"Mybatis","permalink":"http://blog.oy6090.top/tags/Mybatis/"},{"name":"javaé¡¹ç›®","slug":"javaé¡¹ç›®","permalink":"http://blog.oy6090.top/tags/java%E9%A1%B9%E7%9B%AE/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://blog.oy6090.top/tags/SpringMVC/"},{"name":"javaåŸºç¡€","slug":"javaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/java%E5%9F%BA%E7%A1%80/"},{"name":"Spring","slug":"Spring","permalink":"http://blog.oy6090.top/tags/Spring/"},{"name":"Java","slug":"Java","permalink":"http://blog.oy6090.top/tags/Java/"},{"name":"jQuery","slug":"jQuery","permalink":"http://blog.oy6090.top/tags/jQuery/"},{"name":"JavaScripté«˜çº§","slug":"JavaScripté«˜çº§","permalink":"http://blog.oy6090.top/tags/JavaScript%E9%AB%98%E7%BA%A7/"},{"name":"JDBCæ•°æ®è¿æ¥æ± ","slug":"JDBCæ•°æ®è¿æ¥æ± ","permalink":"http://blog.oy6090.top/tags/JDBC%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E6%B1%A0/"},{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","permalink":"http://blog.oy6090.top/tags/Java%E5%9F%BA%E7%A1%80/"},{"name":"javaScriptåŸºç¡€","slug":"javaScriptåŸºç¡€","permalink":"http://blog.oy6090.top/tags/javaScript%E5%9F%BA%E7%A1%80/"},{"name":"Javaè®¾è®¡æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼","permalink":"http://blog.oy6090.top/tags/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"Javaç®—æ³•","slug":"Javaç®—æ³•","permalink":"http://blog.oy6090.top/tags/Java%E7%AE%97%E6%B3%95/"},{"name":"javascriptåŸºç¡€","slug":"javascriptåŸºç¡€","permalink":"http://blog.oy6090.top/tags/javascript%E5%9F%BA%E7%A1%80/"}]}